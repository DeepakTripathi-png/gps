/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
function progressBarForm(){return'<div class="xmui-busy-overlay" tabindex="-1"> <span class="sr-only">Loading<\/span> <div class="xmui-busy-overlay_icon"><\/div><\/div>'}function passwordAuthenticator(){return'<script>InitRDSForms()<\/script>  <div class="row col-xs-12"> <span id="online-id" class="page-heading"><\/span> <div class="row margin-top-20"> <div class="col-xs-12 margin-bottom-30"> <form class="rds-form form" id = "frmpassword" autocomplete="off"> <div class="field animated-label text password" id="divPassword"> <label class="control-label" for="input_password">Password<\/label> <input type="password" id="input_password" name="Password" aria-labelledby="online-id" aria-required="True" aria-invalid="false" class="form-control to-switch mask-text" maxlength="32"/><input type ="button" class="inline-btn show-hide-btn" id="showHidePasswordBtn" value="Show" aria-label="Show Password" /><div id ="input_password-error" class="error-custom-block hidden"><p class="help-block error">Password is required to log in.<\/p><\/div> <\/div> <div class="form-btn-holder"> <div class="pull-left"> <button type="button" class="btn btn-lg cancel-btn" id="cancel-password-button">Go Back<\/button> <\/div> <div class="pull-right"> <button type="submit" class="btn btn-primary btn-lg submit-btn" id="submit-password-button">Log In<\/button> <\/div> <\/div> <\/form> <\/div> <\/div> <\/div> '}function getQuestions(n){function t(n){return'<div class="field select animated-label text " id="ques'.concat(n,'"> <label class="control-label" for="i').concat(n,'">').concat(u(n),'<\/label > <select class="form-control challenge-question" id="i').concat(n,'" name="i').concat(n,'autocomplete="off" aria-required="True" aria-invalid="false">').concat(r,' <\/select> <div id="q').concat(n,'-error" class="error-custom-block hidden"><p class="help-block error"><\/p><\/div> <\/div > <div class="field animated-label text " id="q-ans').concat(n,'"> <label class="control-label" aria-label="Answer for " for="a').concat(n,'">Answer<\/label> <input type="text" id="a').concat(n,'" name="a').concat(n,'" aria-labelledby="a').concat(n," i").concat(n,'" class="form-control to-switch q-answer" aria-required="True" aria-invalid="false" maxLength="25" /> <div id="a').concat(n,'-error" class="error-custom-block hidden"><p class="help-block error"><\/p><\/div> <\/div> <div class="field animated-label text " id="q-v-ans').concat(n,'"> <label class="control-label" aria-label="Verify answer for " for="va').concat(n,'">Verify Answer<\/label> <input type="text" id="va').concat(n,'" name="va').concat(n,'" aria-labelledby="va').concat(n," i").concat(n,'" class="form-control to-switch verify-q-answer" aria-required="True" aria-invalid="false" maxLength="25" /> <div id="va').concat(n,'-error" class="error-custom-block hidden"><p class="help-block error"><\/p><\/div> <\/div>')}function u(n){switch(n){case"1":return"First security question";case"2":return"Second security question";case"3":return"Third security question"}}var i=n.selectOptions,r=i===void 0?demoOptionTagList:i;return'<script>InitRDSForms()<\/script>  <div class="row col-xs-12" id="divSetupSecurityQuesitons"> <h2 class="page-heading" tabindex="-1">Please set up your security questions.<\/h2> <div class="row"> <div class="col-xs-12"> <span class="sub-heading">Select three different security questions and provide unique answers.<\/span> <ul class="note-list"> <li> <span>\tThe same answer can’t be shared by more than one question.<\/span><\/li> <li> <span>\tAnswers should not be the same as your password.<\/span><\/li> <li> <span>\tAnswers are not case sensitive, and special characters aren’t allowed.<\/span><\/li> <li> <span>\tAnswers must be a minimum of two characters.<\/span><\/li> <li> <span> Keep your questions and answers confidential. <\/span> <\/li> <\/ul> <form class="rds-form form" id = "frmSetupSecQuestions" autocomplete="off"> <div class="question-seperator"> '.concat(t("1"),' <\/div> <div class="question-seperator"> ').concat(t("2"),' <\/div> <div class="question-seperator"> ').concat(t("3"),' <\/div> <div class="form-btn-holder remove-margin"> <div class="pull-left"> <a class="cancel-tag" id="cancel-setup-questions-button" tabindex="0">Cancel<\/a> <\/div> <div class="pull-right"> <button type="submit" class="btn btn-primary btn-lg submit-btn" id="submit-setup-question-button">Save<\/button> <\/div> <\/div> <\/form> <\/div> <\/div> <\/div> ')}function pwdChange(){return'<script>InitRDSForms()<\/script> <div class="row col-xs-12" id="divChangePassword"> <h2 class="page-heading"tabindex="-1">Please change your password.<\/h2> <div class="row"> <div class="col-xs-12"> <span class="sub-heading">Password requirements:<\/span> <ul class="note-list" id="password-tips"> <li> <span>    Must be 8-32 characters.<\/span><\/li> <li> <span>    Must contain at least one uppercase letter.<\/span><\/li> <li> <span>    Must contain at least one lowercase letter.<\/span><\/li> <li> <span>    Must contain at least one number.<\/span><\/li> <li> <span>   Must contain at least one of the following special characters: <\/span>  <\/li> <li> <span> -\'.,@#:?!()$/ <\/span><\/li> <\/ul> <form class="rds-form form" id="frmChangePassword" autocomplete="off"> <div class="field animated-label text cur-pswd" id="divCurrentPassword"> <label class="control-label" for="currentPassword" aria-label="Current password">Current password<\/label> <input type="password" id="currentPassword" name="current password" aria-required="True" aria-invalid="false" class="form-control to-switch" aria-labelledby="currentPassword" /> <div  id="current-password-error" class="error-custom-block hidden"><p class="help-block error"><\/p><\/div> <\/div> <div class="field animated-label text new-pswd" id="divNewPassword"> <label class="control-label" for="newPassword" aria-label="New password">New password<\/label> <input type="password" id="newPassword" name="new-password" aria-required="True" aria-invalid="false" class="form-control to-switch"  aria-labelledby="newPassword"/> <div id="new-password-error" class="error-custom-block hidden"><p class="help-block error"><\/p><\/div> <\/div> <div class="field animated-label text  conf-pswd" id="divConfirmPassword"> <label class="control-label" for="confirmPassword" aria-label="Confirm new password ">Confirm new password<\/label> <input type="password" id="confirmPassword" name="confirm new password" aria-required="True" aria-invalid="false" class="form-control to-switch"  aria-labelledby="confirmPassword"/> <div id="confirm-password-error" class="error-custom-block hidden"><p class="help-block error"><\/p><\/div> <\/div> <\/form> <span class="sub-heading">Tips for creating a strong password:<\/span> <ul class="note-list"> <li> <span>  Don\'t use your Online ID as your password.<\/span><\/li> <li> <span>    Avoid using your name or any variations of your family names.<\/span><\/li> <li> <span>    Choose a password that is difficult to guess.<\/span><\/li> <li> <span>    Avoid using keys in sequence, such as "abcdefgh" or "12345678".<\/span><\/li> <\/ul> <div class="form-btn-holder"> <div class="pull-left"> <a class="cancel-tag" id="cancel-change-password-button"  tabindex="0">Cancel<\/a> <\/div> <div class="pull-right"> <button type="submit" class="btn btn-primary btn-lg submit-btn" id="submit-change-password-button">Save<\/button> <\/div> <\/div> <\/div> <\/div> <\/div>'}function challengeQuestionAuth(){return'<script>InitRDSForms()<\/script> <div class="row col-xs-12" id="divChallengeQuestion"> <h2 class="page-heading"tabindex="-1">Please answer the Online Banking security question.<\/h2> <div class="row"> <div class="col-xs-12"> <span class="sub-heading">This action requires you to answer a security question before it can be completed.<\/span> <div class="sub-heading" id="spQuestion"> <\/div> <form class="rds-form form" id="frmChallengeQuestion" autocomplete="off"> <div class="field animated-label text challenge" id="divChallenge"> <label class="control-label" for="answer">Answer<\/label> <input type="password" id="answer" name="Answer" maxLength="25" class="form-control to-switch mask-text" aria-invalid="false" aria-required="True" aria-labelledby="spQuestion" /> <input type="button" class="inline-btn show-hide-btn" id="showHideAnswerBtn" value="Show" aria-label="Show Answer" /> <div id="challenge-error" class="error-custom-block"><p class="help-block error">Please provide your answer to continue.<\/p><\/div> <\/div><div  class="form-btn-holder"> <div class="pull-left"> <a class="cancel-tag" id="challengeQuestionCancelBtn" href="" tabindex="0">Cancel<\/a> <\/div> <div class="pull-right"> <button type="submit" class="btn btn-primary btn-lg submit-btn" id="challengeQuestionContinueBtn">Submit<\/button> <\/div> <\/div> <\/form> <\/div> <\/div> <\/div>'}function lockedOptions(){return'<script>InitRDSForms()<\/script> <div class="row col-xs-12" id="divIALockout"><h2 class="page-heading"tabindex="-1">The security question responses entered do not match what we have on file. Your account has been locked as a result.<\/h2><div class="row"><div class="col-xs-12"><div class="sub-heading">By selecting "Reset My Security Questions" and providing additional information to confirm your identity, you may unlock your account.<\/div><div class="note">Please note: If you are a business owner and your Online ID was created by a company assigned administrator, you will have to contact your company administrator to reset your security questions.<\/div><div  class="form-btn-holder"><div class="pull-left"><a class="cancel-tag" id="cancel-ia-lockout-button" tabindex="0">Cancel<\/a><\/div><div class="pull-right"><button type="button" class="btn btn-primary btn-lg submit-btn" id="submit-reset-button">Reset My Security Questions<\/button><\/div><\/div><\/div><\/div><\/div>'}function secQuestionOptions(){return'<script>InitRDSForms()<\/script> <div class="row col-xs-12" id="divSecurityQuestionSuccess"> <h2 class="page-heading" tabindex="-1">Thank you for setting up your security questions.<\/h2><div class="row"> <div class="col-xs-12"><span class="sub-heading">Your new security questions have been saved. You can manage these questions by accessing the Customer Service tab in Online Banking.<\/span><div  class="form-btn-holder"><div class="pull-left"><a class="cancel-tag" id="cancel-go-to-account-button" tabindex="0">Cancel<\/a> <\/div><div class="pull-right"><button type="button" class="btn btn-primary btn-lg submit-btn" id="go-to-account-button">Go to My Account<\/button> <\/div> <\/div><\/div><\/div><\/div>'}function _instanceof(n,t){return t!=null&&typeof Symbol!="undefined"&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](n):n instanceof t}function _typeof(n){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof(n)}function _classCallCheck(n,t){if(!_instanceof(n,t))throw new TypeError("Cannot call a class as a function");}function _defineProperties(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function _createClass(n,t,i){return t&&_defineProperties(n.prototype,t),i&&_defineProperties(n,i),n}function _inherits(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}});t&&_setPrototypeOf(n,t)}function _setPrototypeOf(n,t){return _setPrototypeOf=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},_setPrototypeOf(n,t)}function _createSuper(n){var t=_isNativeReflectConstruct();return function(){var r=_getPrototypeOf(n),i,u;return t?(u=_getPrototypeOf(this).constructor,i=Reflect.construct(r,arguments,u)):i=r.apply(this,arguments),_possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(n,t){return t&&(_typeof(t)==="object"||typeof t=="function")?t:_assertThisInitialized(n)}function _assertThisInitialized(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function _isNativeReflectConstruct(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}function _getPrototypeOf(n){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf(n)}function debugOut(){}function clearUIContainer(){const n=document.getElementById("transmitContainer");n.innerHTML="";document.getElementById("page-level-message").innerHTML="";document.getElementById("page-level-error-box").style.display="none"}function displayPagelevelError(n){document.getElementById("page-level-message").innerHTML=n;document.getElementById("page-level-error-box").style.display="block";pageLevelMessageDisplayed=!0}function clearPagelevelError(){document.getElementById("page-level-message").innerHTML="";document.getElementById("page-level-error-box").style.display="none"}function clearCustomValidationError(n,t){n.classList.remove("error");t.classList.add("hidden");t.children[0].innerHTML=""}function addCustomValidationError(n,t,i,r){i!=null&&i!=undefined?i.innerHTML=r:(n.classList.add("error"),t.classList.remove("hidden"),t.children[0].innerHTML=r)}function handleGetQuestionKeyEvents(){document.getElementById("frmSetupSecQuestions").onkeypress=function(n){var t=n.charCode||n.keyCode||0;t==13&&n.preventDefault()};document.getElementById("a1").addEventListener("keydown",function(){event.keyCode==13&&document.getElementById("submit-setup-question-button").click()});document.getElementById("a1").addEventListener("keyup",function(){document.getElementById("a1-error").classList.contains("hidden")||validateAnswer1()});document.getElementById("a2").addEventListener("keydown",function(){event.keyCode==13&&document.getElementById("submit-setup-question-button").click()});document.getElementById("a2").addEventListener("keyup",function(){document.getElementById("a2-error").classList.contains("hidden")||validateAnswer2()});document.getElementById("a3").addEventListener("keydown",function(){event.keyCode==13&&document.getElementById("submit-setup-question-button").click()});document.getElementById("a3").addEventListener("keyup",function(){document.getElementById("a3-error").classList.contains("hidden")||validateAnswer3()});document.getElementById("ques1").addEventListener("keydown",function(){event.keyCode==13&&document.getElementById("submit-setup-question-button").click()});document.getElementById("ques1").addEventListener("keyup",function(){document.getElementById("q1-error").classList.contains("hidden")||validateQuestion1()});document.getElementById("ques2").addEventListener("keydown",function(){event.keyCode==13&&document.getElementById("submit-setup-question-button").click()});document.getElementById("ques2").addEventListener("keyup",function(){document.getElementById("q2-error").classList.contains("hidden")||validateQuestion2()});document.getElementById("ques3").addEventListener("keydown",function(){event.keyCode==13&&document.getElementById("submit-setup-question-button").click()});document.getElementById("ques3").addEventListener("keyup",function(){document.getElementById("q3-error").classList.contains("hidden")||validateQuestion3()});document.getElementById("va1").addEventListener("keydown",function(){event.keyCode==13&&document.getElementById("submit-setup-question-button").click()});document.getElementById("va1").addEventListener("keyup",function(){document.getElementById("va1-error").classList.contains("hidden")||validateVerifyAnswer1()});document.getElementById("va2").addEventListener("keydown",function(){event.keyCode==13&&document.getElementById("submit-setup-question-button").click()});document.getElementById("va2").addEventListener("keyup",function(){document.getElementById("va2-error").classList.contains("hidden")||validateVerifyAnswer2()});document.getElementById("va3").addEventListener("keydown",function(){event.keyCode==13&&document.getElementById("submit-setup-question-button").click()});document.getElementById("va3").addEventListener("keyup",function(){document.getElementById("va3-error").classList.contains("hidden")||validateVerifyAnswer3()});document.getElementById("cancel-setup-questions-button").addEventListener("keydown",function(){event.keyCode==13&&document.getElementById("cancel-setup-questions-button").click()});document.getElementById("submit-setup-question-button").addEventListener("keydown",function(){event.keyCode==13&&document.getElementById("submit-setup-question-button").click()})}function handleChangePasswordKeyEvents(){document.getElementById("frmChangePassword").onkeypress=function(n){var t=n.charCode||n.keyCode||0;t==13&&n.preventDefault()};document.getElementById("currentPassword").addEventListener("keydown",function(){event.keyCode==13&&document.getElementById("submit-change-password-button").click()});document.getElementById("currentPassword").addEventListener("keyup",function(){document.getElementById("current-password-error").classList.contains("hidden")||validateCurrentPassword()});document.getElementById("newPassword").addEventListener("keydown",function(){event.keyCode==13&&document.getElementById("submit-change-password-button").click()});document.getElementById("newPassword").addEventListener("keyup",function(){document.getElementById("new-password-error").classList.contains("hidden")||validateNewPassword()});document.getElementById("confirmPassword").addEventListener("keydown",function(){event.keyCode==13&&document.getElementById("submit-change-password-button").click()});document.getElementById("confirmPassword").addEventListener("keyup",function(){document.getElementById("confirm-password-error").classList.contains("hidden")||validateConfirmPassword()});document.getElementById("cancel-change-password-button").addEventListener("keydown",function(){event.keyCode==13&&document.getElementById("cancel-change-password-button").click()});document.getElementById("submit-change-password-button").addEventListener("keydown",function(){event.keyCode==13&&document.getElementById("submit-change-password-button").click()})}function handleChallengeQuestionKeyEvents(){document.getElementById("frmChallengeQuestion").onkeypress=function(n){var t=n.charCode||n.keyCode||0;t==13&&n.preventDefault()};document.getElementById("answer").addEventListener("keydown",function(){event.keyCode==13&&document.getElementById("challengeQuestionContinueBtn").click()});document.getElementById("answer").addEventListener("keyup",function(){document.getElementById("challenge-error").classList.contains("hidden")||validateChallengeAnswer()});document.getElementById("challengeQuestionCancelBtn").addEventListener("keydown",function(){event.keyCode==13&&document.getElementById("challengeQuestionCancelBtn").click()});document.getElementById("challengeQuestionContinueBtn").addEventListener("keydown",function(){event.keyCode==13&&document.getElementById("challengeQuestionContinueBtn").click()})}function handlePasswordKeyEvents(){document.getElementById("frmpassword").onkeypress=function(n){var t=n.charCode||n.keyCode||0;t==13&&n.preventDefault()};document.getElementById("submit-password-button").addEventListener("keydown",function(n){n.keyCode==13&&document.getElementById("submit-password-button").click()});document.getElementById("cancel-password-button").addEventListener("keydown",function(n){n.keyCode==13&&document.getElementById("cancel-password-button").click()});document.getElementById("input_password").addEventListener("keydown",function(n){n.keyCode==13&&document.getElementById("submit-password-button").click()});document.getElementById("input_password").addEventListener("keyup",function(){if(!document.getElementById("input_password-error").classList.contains("hidden")){var n=document.getElementById("input_password").value;n!=null&&n!=undefined&&n!=""?(clearCustomValidationError(document.getElementById("divPassword"),document.getElementById("input_password-error")),document.getElementById("input_password").setAttribute("aria-invalid","false"),document.getElementById("input_password").removeAttribute("aria-describedby")):(document.getElementById("input_password").setAttribute("aria-invalid","true"),document.getElementById("input_password").setAttribute("aria-describedby","input_password-error"))}})}function validateCurrentPassword(){var r=document.getElementById("currentPassword").value,t=document.getElementById("current-password-error"),i=document.getElementById("divCurrentPassword"),n=document.getElementById("error-currentPassword");return r===""?(addCustomValidationError(i,t,n,emptyErrorBlockCUP),document.getElementById("currentPassword").setAttribute("aria-invalid","true"),document.getElementById("currentPassword").setAttribute("aria-describedby","current-password-error"),!1):(clearCustomValidationError(i,t),n!=null&&n!=undefined&&(n.children[0].innerHTML=""),document.getElementById("currentPassword").setAttribute("aria-invalid","false"),document.getElementById("currentPassword").removeAttribute("aria-describedby"),!0)}function validateNewPassword(){var u=document.getElementById("currentPassword").value,t=document.getElementById("newPassword").value,i=document.getElementById("new-password-error"),r=document.getElementById("divNewPassword"),n=document.getElementById("error-newPassword");return t===""?(addCustomValidationError(r,i,n,emptyErrorBlockNP),document.getElementById("newPassword").setAttribute("aria-invalid","true"),document.getElementById("newPassword").setAttribute("aria-describedby","new-password-error"),!1):t.length>32||t.length<8?(addCustomValidationError(r,i,n,maxCharacterPassword),document.getElementById("newPassword").setAttribute("aria-invalid","true"),document.getElementById("newPassword").setAttribute("aria-describedby","new-password-error"),!1):t===u?(addCustomValidationError(r,i,n,errorSameNewPassword),document.getElementById("newPassword").setAttribute("aria-invalid","true"),document.getElementById("newPassword").setAttribute("aria-describedby","new-password-error"),!1):passwordPattern.test(t)===!1?(addCustomValidationError(r,i,n,errorBlockNP),document.getElementById("newPassword").setAttribute("aria-invalid","true"),document.getElementById("newPassword").setAttribute("aria-describedby","new-password-error"),!1):(clearCustomValidationError(r,i),n!=null&&n!=undefined&&(n.children[0].innerHTML=""),document.getElementById("newPassword").setAttribute("aria-invalid","false"),document.getElementById("newPassword").removeAttribute("aria-describedby"),!0)}function validateConfirmPassword(){var f=document.getElementById("currentPassword").value,n=document.getElementById("confirmPassword").value,i=document.getElementById("confirm-password-error"),r=document.getElementById("divConfirmPassword"),t=document.getElementById("error-confirmPassword"),u=document.getElementById("newPassword").value;return n===""?(addCustomValidationError(r,i,t,emptyErrorBlockCNP),document.getElementById("confirmPassword").setAttribute("aria-invalid","true"),document.getElementById("confirmPassword").setAttribute("aria-describedby","confirm-password-error"),!1):u!=""&&n!=""&&u!=n?(addCustomValidationError(r,i,t,errorBlockConfirmPassword),document.getElementById("confirmPassword").setAttribute("aria-invalid","true"),document.getElementById("confirmPassword").setAttribute("aria-describedby","confirm-password-error"),!1):f===u?(clearCustomValidationError(r,i),document.getElementById("confirmPassword").setAttribute("aria-invalid","true"),document.getElementById("confirmPassword").setAttribute("aria-describedby","confirm-password-error"),!1):n.length>32||n.length<8?(addCustomValidationError(r,i,t,maxCharacterPassword),document.getElementById("confirmPassword").setAttribute("aria-invalid","true"),document.getElementById("confirmPassword").setAttribute("aria-describedby","confirm-password-error"),!1):n!=""&&!n.match(passwordPattern)?(addCustomValidationError(r,i,t,errorBlockCNP),document.getElementById("confirmPassword").setAttribute("aria-invalid","true"),document.getElementById("confirmPassword").setAttribute("aria-describedby","confirm-password-error"),!1):(clearCustomValidationError(r,i),t!=null&&t!=undefined&&(t.children[0].innerHTML=""),document.getElementById("confirmPassword").setAttribute("aria-invalid","false"),document.getElementById("confirmPassword").removeAttribute("aria-describedby"),!0)}function validateChallengeAnswer(){var r=document.getElementById("answer").value,n=document.getElementById("error-answer"),t=document.getElementById("divChallenge"),i=document.getElementById("challenge-error");return r===""?(addCustomValidationError(t,i,n,errorEmptyChallengeAnswer),document.getElementById("answer").setAttribute("aria-invalid","true"),document.getElementById("answer").setAttribute("aria-describedby","challenge-error"),!1):answerPattern.test(r)===!1?(addCustomValidationError(t,i,n,patternError),document.getElementById("answer").setAttribute("aria-invalid","true"),document.getElementById("answer").setAttribute("aria-describedby","challenge-error"),!1):(clearCustomValidationError(t,i),n!=null&&n!=undefined&&(n.children[0].innerHTML=""),document.getElementById("answer").setAttribute("aria-invalid","false"),document.getElementById("answer").removeAttribute("aria-describedby"),!0)}function validateQuestion1(){var t=document.getElementById("i1").value,u=document.getElementById("i2").value,f=document.getElementById("i3").value,n=document.getElementById("error-q1"),i=document.getElementById("ques1"),r=document.getElementById("q1-error");return t===notSelected||t==""?(addCustomValidationError(i,r,n,notSelectedQuestionErrMSG),document.getElementById("i1").setAttribute("aria-invalid","true"),document.getElementById("i1").setAttribute("aria-describedby","q1-error"),!1):t==u||t==f?(addCustomValidationError(i,r,n,duplicateQuestionSelectedErrMSG),document.getElementById("i1").setAttribute("aria-invalid","true"),document.getElementById("i1").setAttribute("aria-describedby","q1-error"),!1):(clearCustomValidationError(i,r),n!=null&&n!=undefined&&(n.children[0].innerHTML=""),document.getElementById("i1").setAttribute("aria-invalid","false"),document.getElementById("i1").removeAttribute("aria-describedby"),!0)}function validateQuestion2(){var u=document.getElementById("i1").value,t=document.getElementById("i2").value,f=document.getElementById("i3").value,n=document.getElementById("error-q2"),i=document.getElementById("ques2"),r=document.getElementById("q2-error");return t===notSelected||t==""?(addCustomValidationError(i,r,n,notSelectedQuestionErrMSG),document.getElementById("i2").setAttribute("aria-invalid","true"),document.getElementById("i2").setAttribute("aria-describedby","q2-error"),!1):t==u||t==f?(addCustomValidationError(i,r,n,duplicateQuestionSelectedErrMSG),document.getElementById("i2").setAttribute("aria-invalid","true"),document.getElementById("i2").setAttribute("aria-describedby","q2-error"),!1):(clearCustomValidationError(i,r),n!=null&&n!=undefined&&(n.children[0].innerHTML=""),document.getElementById("i2").setAttribute("aria-invalid","false"),document.getElementById("i2").removeAttribute("aria-describedby"),!0)}function validateQuestion3(){var u=document.getElementById("i1").value,f=document.getElementById("i2").value,t=document.getElementById("i3").value,n=document.getElementById("error-q3"),i=document.getElementById("ques3"),r=document.getElementById("q3-error");return t===notSelected||t==""?(addCustomValidationError(i,r,n,notSelectedQuestionErrMSG),document.getElementById("i3").setAttribute("aria-invalid","true"),document.getElementById("i3").setAttribute("aria-describedby","q3-error"),!1):t==u||t==f?(addCustomValidationError(i,r,n,duplicateQuestionSelectedErrMSG),document.getElementById("i3").setAttribute("aria-invalid","true"),document.getElementById("i3").setAttribute("aria-describedby","q3-error"),!1):(clearCustomValidationError(i,r),n!=null&&n!=undefined&&(n.children[0].innerHTML=""),document.getElementById("i3").setAttribute("aria-invalid","false"),document.getElementById("i3").removeAttribute("aria-describedby"),!0)}function validateAnswer1(){var n=document.getElementById("a1").value,u=document.getElementById("a2").value,f=document.getElementById("a3").value,t=document.getElementById("error-a1"),i=document.getElementById("q-ans1"),r=document.getElementById("a1-error"),e=u=="*****"&&f=="*****"||n=="*****"&&f=="*****"||n=="*****"&&u=="*****";return n===""?(addCustomValidationError(i,r,t,errorEmptySecurityAnswer),document.getElementById("a1").setAttribute("aria-invalid","true"),document.getElementById("a1").setAttribute("aria-describedby","a1-error"),!1):n!="*****"&&n!=""&&!e&&(n==u||n==f)?(addCustomValidationError(i,r,t,errorA1Unique),document.getElementById("a1").setAttribute("aria-invalid","true"),document.getElementById("a1").setAttribute("aria-describedby","a1-error"),!1):n==document.getElementById("UserName").value?(addCustomValidationError(i,r,t,errorBlockDDL),document.getElementById("a1").setAttribute("aria-invalid","true"),document.getElementById("a1").setAttribute("aria-describedby","a1-error"),!1):answerPattern.test(n)===!1?(addCustomValidationError(i,r,t,patternError),document.getElementById("a1").setAttribute("aria-invalid","true"),document.getElementById("a1").setAttribute("aria-describedby","a1-error"),!1):(clearCustomValidationError(i,r),t!=null&&t!=undefined&&(t.children[0].innerHTML=""),document.getElementById("a1").setAttribute("aria-invalid","false"),document.getElementById("a1").removeAttribute("aria-describedby"),!0)}function validateAnswer2(){var u=document.getElementById("a1").value,n=document.getElementById("a2").value,f=document.getElementById("a3").value,t=document.getElementById("error-a2"),i=document.getElementById("q-ans2"),r=document.getElementById("a2-error"),e=n=="*****"&&f=="*****"||u=="*****"&&f=="*****"||u=="*****"&&n=="*****";return n===""?(addCustomValidationError(i,r,t,errorEmptySecurityAnswer),document.getElementById("a2").setAttribute("aria-invalid","true"),document.getElementById("a2").setAttribute("aria-describedby","a2-error"),!1):n!="*****"&&n!=""&&!e&&(n==u||n==f)?(addCustomValidationError(i,r,t,errorA2Unique),document.getElementById("a2").setAttribute("aria-invalid","true"),document.getElementById("a2").setAttribute("aria-describedby","a2-error"),!1):n==document.getElementById("UserName").value?(addCustomValidationError(i,r,t,errorBlockDDL),document.getElementById("a2").setAttribute("aria-invalid","true"),document.getElementById("a2").setAttribute("aria-describedby","a2-error"),!1):answerPattern.test(n)===!1?(addCustomValidationError(i,r,t,patternError),document.getElementById("a2").setAttribute("aria-invalid","true"),document.getElementById("a2").setAttribute("aria-describedby","a2-error"),!1):(clearCustomValidationError(i,r),t!=null&&t!=undefined&&(t.children[0].innerHTML=""),document.getElementById("a2").setAttribute("aria-invalid","false"),document.getElementById("a2").removeAttribute("aria-describedby"),!0)}function validateAnswer3(){var u=document.getElementById("a1").value,f=document.getElementById("a2").value,n=document.getElementById("a3").value,t=document.getElementById("error-a3"),i=document.getElementById("q-ans3"),r=document.getElementById("a3-error"),e=f=="*****"&&n=="*****"||u=="*****"&&n=="*****"||u=="*****"&&f=="*****";return n===""?(addCustomValidationError(i,r,t,errorEmptySecurityAnswer),document.getElementById("a3").setAttribute("aria-invalid","true"),document.getElementById("a3").setAttribute("aria-describedby","a3-error"),!1):n!="*****"&&n!=""&&!e&&(n==u||n==f)?(addCustomValidationError(i,r,t,errorA3Unique),document.getElementById("a3").setAttribute("aria-invalid","true"),document.getElementById("a3").setAttribute("aria-describedby","a3-error"),!1):n==document.getElementById("UserName").value?(addCustomValidationError(i,r,t,errorBlockDDL),document.getElementById("a3").setAttribute("aria-invalid","true"),document.getElementById("a3").setAttribute("aria-describedby","a3-error"),!1):answerPattern.test(n)===!1?(addCustomValidationError(i,r,t,patternError),document.getElementById("a3").setAttribute("aria-invalid","true"),document.getElementById("a3").setAttribute("aria-describedby","a3-error"),!1):(clearCustomValidationError(i,r),t!=null&&t!=undefined&&(t.children[0].innerHTML=""),document.getElementById("a3").setAttribute("aria-invalid","false"),document.getElementById("a3").removeAttribute("aria-describedby"),!0)}function validateVerifyAnswer1(){var r=document.getElementById("va1").value,u=document.getElementById("a1").value,n=document.getElementById("error-va1"),t=document.getElementById("q-v-ans1"),i=document.getElementById("va1-error");return r===""?(addCustomValidationError(t,i,n,errorEmptyVerifyAnswer),document.getElementById("va1").setAttribute("aria-invalid","true"),document.getElementById("va1").setAttribute("aria-describedby","va1-error"),!1):answerPattern.test(r)===!1?(addCustomValidationError(t,i,n,patternError),document.getElementById("va1").setAttribute("aria-invalid","true"),document.getElementById("va1").setAttribute("aria-describedby","va1-error"),!1):r.toLowerCase()!=u.toLowerCase()?(addCustomValidationError(t,i,n,errorBlock),document.getElementById("va1").setAttribute("aria-invalid","true"),document.getElementById("va1").setAttribute("aria-describedby","va1-error"),!1):(clearCustomValidationError(t,i),n!=null&&n!=undefined&&(n.children[0].innerHTML=""),document.getElementById("va1").setAttribute("aria-invalid","false"),document.getElementById("va1").removeAttribute("aria-describedby"),!0)}function validateVerifyAnswer2(){var r=document.getElementById("va2").value,u=document.getElementById("a2").value,n=document.getElementById("error-va2"),t=document.getElementById("q-v-ans2"),i=document.getElementById("va2-error");return r===""?(addCustomValidationError(t,i,n,errorEmptyVerifyAnswer),document.getElementById("va2").setAttribute("aria-invalid","true"),document.getElementById("va2").setAttribute("aria-describedby","va2-error"),!1):answerPattern.test(r)===!1?(addCustomValidationError(t,i,n,patternError),document.getElementById("va2").setAttribute("aria-invalid","true"),document.getElementById("va2").setAttribute("aria-describedby","va2-error"),!1):r.toLowerCase()!=u.toLowerCase()?(addCustomValidationError(t,i,n,errorBlock),document.getElementById("va2").setAttribute("aria-invalid","true"),document.getElementById("va2").setAttribute("aria-describedby","va2-error"),!1):(clearCustomValidationError(t,i),n!=null&&n!=undefined&&(n.children[0].innerHTML=""),document.getElementById("va2").setAttribute("aria-invalid","false"),document.getElementById("va2").removeAttribute("aria-describedby"),!0)}function validateVerifyAnswer3(){var r=document.getElementById("va3").value,u=document.getElementById("a3").value,n=document.getElementById("error-va3"),t=document.getElementById("q-v-ans3"),i=document.getElementById("va3-error");return r===""?(addCustomValidationError(t,i,n,errorEmptyVerifyAnswer),document.getElementById("va3").setAttribute("aria-invalid","true"),document.getElementById("va3").setAttribute("aria-describedby","va3-error"),!1):answerPattern.test(r)===!1?(addCustomValidationError(t,i,n,patternError),document.getElementById("va3").setAttribute("aria-invalid","true"),document.getElementById("va3").setAttribute("aria-describedby","va3-error"),!1):r.toLowerCase()!=u.toLowerCase()?(addCustomValidationError(t,i,n,errorBlock),document.getElementById("va3").setAttribute("aria-invalid","true"),document.getElementById("va3").setAttribute("aria-describedby","va3-error"),!1):(clearCustomValidationError(t,i),n!=null&&n!=undefined&&(n.children[0].innerHTML=""),document.getElementById("va3").setAttribute("aria-invalid","false"),document.getElementById("va3").removeAttribute("aria-describedby"),!0)}function onSecurityQuestionChange(n){var f=document.getElementById("i"+n),e=document.getElementById("q"+n+"-error"),t=document.getElementById("a"+n),i=document.getElementById("q-ans"+n),o=document.getElementById("a"+n+"-error"),r=document.getElementById("va"+n),u=document.getElementById("q-v-ans"+n),s=document.getElementById("va"+n+"-error");if(t.value="",r.value="",clearCustomValidationError(i,o),clearCustomValidationError(u,s),t.setAttribute("aria-invalid","false"),t.removeAttribute("aria-describedby"),r.setAttribute("aria-invalid","false"),r.removeAttribute("aria-describedby"),i.classList.contains("selected")&&i.classList.remove("selected"),u.classList.contains("selected")&&u.classList.remove("selected"),e.classList.contains("hidden"))f.setAttribute("aria-invalid","false"),f.removeAttribute("aria-describedby");else switch(n){case"1":validateQuestion1();break;case"2":validateQuestion2();break;case"3":validateQuestion3()}}function AlignCenter(){document.getElementById("password-section").classList.remove("col-md-6");document.getElementById("password-section").classList.remove("col-md-offset-3");document.getElementById("password-section").classList.add("col-md-8");document.getElementById("password-section").classList.add("col-md-offset-2")}function ShowHideFieldContent(n,t,i){var u=document.getElementById(n),r=document.getElementById(t);r.addEventListener("click",function(){return r.value==="Show"?(u.setAttribute("type","text"),r.setAttribute("aria-label","Hide "+i),r.value="Hide",!1):r.value==="Hide"?(u.setAttribute("type","password"),r.setAttribute("aria-label","Show "+i),r.value="Show",!1):void 0});r.addEventListener("keydown",function(n){n.keyCode==13&&r.click()})}function InitRDSForms(){$(".rds-form").each(function(){$(this).data("rdsForm")?$(this).rdsFormInit({action:"destroy"}).rdsForm({action:"destroy"}).rdsForm():$(this).rdsFormInit({action:"init"}).rdsForm()})}function AdobeAnalytics(n,t,i,r){$("body").trigger(n,{Subdomain:t,Channel:i,Page:r});window.trackingOlb={event:n,subdomain:t,channel:i,page:r}}function sessionMonitor(n){"use strict";function r(){var n=$.now(),r=n-i;r>t.minPingInterval&&(i=n,e(),t.ping())}function e(){var n=t.sessionLifetime-t.timeBeforeWarning;window.clearTimeout(_warningTimeoutID);window.clearTimeout(_expirationTimeoutID);_warningTimeoutID=window.setTimeout(t.onwarning,n);_expirationTimeoutID=window.setTimeout(o,t.sessionLifetime)}function o(){$.when(t.onbeforetimeout()).always(t.ontimeout)}function u(n){var t=n-(new Date).getTime(),i,r;return t<=0&&($(".modal-backdrop").hide(),$("#sessionTimeoutAlertModal").hide()),i=("0"+Math.floor(t%36e5/6e4)).slice(-2),r=("0"+Math.floor(t%6e4/1e3)).slice(-2),$("#pop-up-timer").html(i+"<span class='sr-only'> minutes<\/span>:"+r+"<span class='sr-only'> seconds<\/span>"),t}var f={sessionLifetime:6e5,timeBeforeWarning:12e4,minPingInterval:6e4,activityEvents:"click",logoutUrl:"/SignIn/Timeout",timeoutUrl:"/SignIn/Timeout",ping:function(){},logout:function(){window.location.href=t.logoutUrl},onwarning:function(){var n=document.activeElement,i;$("#sessionTimeoutAlertModal").modal({backdrop:"static",keyboard:!1});$("header").attr("role","presentation");AddAriaHidden();i=new Date(Date.now()+t.timeBeforeWarning);u(i);setInterval(function(){var n=u(i);n<=0&&StopSessionTimer()},1e3);$(".close-modal-window").on("click",function(){$(".modal-backdrop").hide();$("#sessionTimeoutAlertModal").hide();RemoveAriaHidden();n.focus()});document.addEventListener("keydown",function(t){t.keyCode==27&&($(".modal-backdrop").hide(),$("#sessionTimeoutAlertModal").hide(),RemoveAriaHidden(),n.focus())},!0);$("#modal-close").on("keydown",function(t){(t.which==13||t.which==9||t.shiftKey&&t.which==9)&&(t.preventDefault(),$("#close-btn").focus());t.which==13&&(t.preventDefault(),$(".modal-backdrop").hide(),$("#sessionTimeoutAlertModal").hide(),RemoveAriaHidden(),n.focus())});$("#close-btn").on("keydown",function(t){(t.which==13||t.which==9||t.shiftKey&&t.which==9)&&(t.preventDefault(),$("#modal-close").focus());t.which==13&&(t.preventDefault(),$(".modal-backdrop").hide(),$("#sessionTimeoutAlertModal").hide(),RemoveAriaHidden(),n.focus())})},onbeforetimeout:function(){},ontimeout:function(){RemoveAriaHidden();window.location.href=t.timeoutUrl}},t={},i=0;return $.extend(t,f,n,{extendsess:r}),r(),t}function AddAriaHidden(){$(".rds-header").attr("aria-hidden","true");$(".rds-wizard-body").attr("aria-hidden","true");$("main").attr("aria-hidden","true");$("footer").attr("aria-hidden","true");setTimeout(function(){$("#modal-title").focus()},500)}function RemoveAriaHidden(){$("header").removeAttr("role");$(".rds-header").attr("aria-hidden","false");$(".rds-wizard-body").attr("aria-hidden","false");$("main").attr("aria-hidden","false");$("footer").attr("aria-hidden","false")}function StopSessionTimer(){window.clearTimeout(_warningTimeoutID);window.clearTimeout(_expirationTimeoutID)}function InitiateLoginJourney(n){var i,t,r;window.sessionStorage.clear();$("#enroll-section,#username-section").hide();$("#password-section,#transmitContainer").show();GetConfiguration();var u=tsConfigSetting.endPoint,f=tsConfigSetting.appId,e=tsConfigSetting.apiTokenId,o=tsConfigSetting.apiToken,s=tsConfigSetting.policyId;accountOverViewURL=tsConfigSetting.accountOverViewURL;tsLevel=tsConfigSetting.logLevel;verifyIdentityURL=tsConfigSetting.verifyIdentityURL;$(".modal").attr("data-sessionTimeout",tsConfigSetting.sessionTimeout);$(".modal").attr("data-sessionWarningTimeout",tsConfigSetting.sessionWarningTime);try{i=new RegUIHandler;i.setLogEnabled(!1);t=window.xmsdk.XmSdk();r=window.com.ts.mobile.sdk.SDKConnectionSettings.create(u,f,e,o);t.setConnectionSettings(r);t.setUiHandler(i);function h(){this.log=function(t,i,r){if(t==tsLevel){var u="User details: "+n+" Level: "+t+" Category: "+i+" Message: "+r;ErrorLogger(u,tsLevel)}}}t.setExternalLogger(new h);t.setEnabledCollectors([com.ts.mobile.sdk.CollectorType.DeviceDetails]);t.initialize().then(function(){$("#enroll-section").hide();var i=document.getElementById("transmitContainer"),r={uiContainer:i,username:n},u=$("#TMXID").val(),f={tmxid:u};n&&(t.logout().then(function(){}).catch(function(){}),t.authenticate(n,s,f,r).then(function(n){$.ajax({headers:{Accept:"application/json; charset=utf-8",RequestVerificationToken:$('input[name="__RequestVerificationToken"]').val()},type:"Post",url:"../SignIn/ProcessResult",data:{encryptedToken:n.getToken()},async:!1,success:function(n){if(n.errorCode==null&&n.errorMessage==null)switch(n.resultAction.toLowerCase()){case"accountoverview":var t=getRelyingParty();t!=undefined&&t!=""&&t!=""&&accountOverViewURL.indexOf(t)<=0&&(accountOverViewURL=accountOverViewURL.split("accounts/overview")[0]+t);window.location.href=accountOverViewURL;break;case"verifyidentity":window.location.href=verifyIdentityURL;break;case"genericerror":window.location.href=genericErrorURL;break;default:window.location.href="/Signin/Index"}else return PageLevelInfo(n.errorMessage),!1}})}).catch(function(n){ErrorLogger(n.getMessage(),1);RedirectToLoginPage(n)}))}).catch(function(){ErrorLogger("SDK initialization failed for User : "+n,1);window.location.href=systemUnavailableURL})}catch(h){ErrorLogger("Login journey failed for User : "+n,1);window.location.href=systemUnavailableURL}}function getRelyingParty(){for(var r="",n=[],t,f=decodeURIComponent(window.location.href),u=f.slice(window.location.href.indexOf("?")+1).split("&"),i=0;i<u.length;i++)t=u[i].split("="),n.push(t[0]),n[t[0]]=t[1];return n.ru!=undefined&&n.ru!=null&&n.ru!=""&&n.ru!="/"&&n.ru!="//"&&(r=n.ru.substring(1)),r}function RememberMe(){var n=$("#UserName").val(),t=$("#login-remember-me").prop("checked");$.ajax({url:"/SignIn/RememberMe/",type:"post",async:!1,headers:{RequestVerificationToken:$('input[name="__RequestVerificationToken"]').val()},data:{UserName:n,RememberMe:t},dataType:"application/json",success:function(){}})}function GetConfiguration(){$.ajax({url:"/SignIn/GetTransmitConfiguration/",type:"post",headers:{"Content-Type":"application/json",RequestVerificationToken:$('input[name="__RequestVerificationToken"]').val()},async:!1,cache:!0,success:function(n){tsConfigSetting=n}})}function ValidateOnlineID(n){let t=document.getElementById("UserName");return n==null||n==undefined||n==""?($("#UserName-error").removeClass("hidden"),$("#divUserName").addClass("error"),$("#UserName").focus(),t.setAttribute("aria-invalid","true"),t.setAttribute("aria-describedby","UserName-error"),!1):(n!=null&&n!=undefined&&n!=""&&($("#divUserName").removeClass("error"),$("#UserName-error").addClass("hidden"),t.setAttribute("aria-invalid","false"),t.removeAttribute("aria-describedby")),!0)}function ErrorLogger(n,t){var i=$("#IsLoggerCallEnabled").val();i!=undefined&&i.toLowerCase()=="true"&&$.ajax({url:"/SignIn/TransmitLogging/",type:"post",headers:{RequestVerificationToken:$('input[name="__RequestVerificationToken"]').val()},data:{message:n,level:t},success:function(){}})}function PageLevelInfo(n){n.indexOf("session has expired")>=0?($("#page-level-message").html(n),$("#page-level-error-box").show(),window.history.pushState("","","/"),$("#UserName").attr("aria-labelledby","page-level-message username-label")):n.indexOf("GenericError")>=0?window.location.href=genericErrorURL:($("#page-level-message").html(n),$("#page-level-error-box").show(),$("#password-section").hide(),$("#username-section,#enroll-section").show(),$("#UserName").attr("aria-labelledby","page-level-message username-label"));$("#UserName").focus();$("#reset-password-link").focus();StopSessionTimer()}function RedirectToLoginPage(n){var t,i;n!==null&&(!!window.MSInputMethodContext&&!!document.documentMode&&n._message.toLowerCase().indexOf("typeerror")>0||n._message=="Cancel during authenticator selection."||n._message=="Authentication cancelled due to abort control request.")?(t=window.location.search,window.location.href=t!==null&&t!==undefined&&t.includes("exclusiveproduct")?"/Signin"+t:"/Signin/Index"):n!==null&&n._errorCode!=undefined&&n._errorCode.toString()!=""&&(i="SDK returned error for the User : "+$("#UserName").val()+" ErrorCode : "+n._errorCode,n._message!=undefined&&n._message!=""&&(i=i+" ErrorMessage : "+n._message),ErrorLogger(i,1),window.location.href="/Error/GenericError")}var demoOptionTagList,_expirationTimeoutID,_warningTimeoutID;(function(n,t){"use strict";typeof module=="object"&&typeof module.exports=="object"?module.exports=n.document?t(n,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}:t(n)})(typeof window!="undefined"?window:this,function(n,t){"use strict";function hr(n,t,i){t=t||f;var r,u=t.createElement("script");if(u.text=n,i)for(r in ne)i[r]&&(u[r]=i[r]);t.head.appendChild(u).parentNode.removeChild(u)}function it(n){return n==null?n+"":typeof n=="object"||typeof n=="function"?bt[or.call(n)]||"object":typeof n}function hi(n){var t=!!n&&"length"in n&&n.length,i=it(n);return u(n)||tt(n)?!1:i==="array"||t===0||typeof t=="number"&&t>0&&t-1 in n}function v(n,t){return n.nodeName&&n.nodeName.toLowerCase()===t.toLowerCase()}function li(n,t,r){return u(t)?i.grep(n,function(n,i){return!!t.call(n,i,n)!==r}):t.nodeType?i.grep(n,function(n){return n===t!==r}):typeof t!="string"?i.grep(n,function(n){return wt.call(t,n)>-1!==r}):i.filter(t,n,r)}function kr(n,t){while((n=n[t])&&n.nodeType!==1);return n}function ie(n){var t={};return i.each(n.match(l)||[],function(n,i){t[i]=!0}),t}function ut(n){return n}function dt(n){throw n;}function dr(n,t,i,r){var f;try{n&&u(f=n.promise)?f.call(n).done(t).fail(i):n&&u(f=n.then)?f.call(n,t,i):t.apply(undefined,[n].slice(r))}catch(n){i.apply(undefined,[n])}}function ni(){f.removeEventListener("DOMContentLoaded",ni);n.removeEventListener("load",ni);i.ready()}function fe(n,t){return t.toUpperCase()}function y(n){return n.replace(re,"ms-").replace(ue,fe)}function at(){this.expando=i.expando+at.uid++}function se(n){return n==="true"?!0:n==="false"?!1:n==="null"?null:n===+n+""?+n:ee.test(n)?JSON.parse(n):n}function nu(n,t,i){var r;if(i===undefined&&n.nodeType===1)if(r="data-"+t.replace(oe,"-$&").toLowerCase(),i=n.getAttribute(r),typeof i=="string"){try{i=se(i)}catch(u){}o.set(n,t,i)}else i=undefined;return i}function ru(n,t,r,u){var s,h,c=20,l=u?function(){return u.cur()}:function(){return i.css(n,t,"")},o=l(),e=r&&r[3]||(i.cssNumber[t]?"":"px"),f=(i.cssNumber[t]||e!=="px"&&+o)&&vt.exec(i.css(n,t));if(f&&f[3]!==e){for(o=o/2,e=e||f[3],f=+o||1;c--;)i.style(n,t,f+e),(1-h)*(1-(h=l()/o||.5))<=0&&(c=0),f=f/h;f=f*2;i.style(n,t,f+e);r=r||[]}return r&&(f=+f||+o||0,s=r[1]?f+(r[1]+1)*r[2]:+r[2],u&&(u.unit=e,u.start=f,u.end=s)),s}function he(n){var r,f=n.ownerDocument,u=n.nodeName,t=ai[u];return t?t:(r=f.body.appendChild(f.createElement(u)),t=i.css(r,"display"),r.parentNode.removeChild(r),t==="none"&&(t="block"),ai[u]=t,t)}function ft(n,t){for(var e,u,f=[],i=0,o=n.length;i<o;i++)(u=n[i],u.style)&&(e=u.style.display,t?(e==="none"&&(f[i]=r.get(u,"display")||null,f[i]||(u.style.display="")),u.style.display===""&&ti(u)&&(f[i]=he(u))):e!=="none"&&(f[i]="none",r.set(u,"display",e)));for(i=0;i<o;i++)f[i]!=null&&(n[i].style.display=f[i]);return n}function s(n,t){var r;return(r=typeof n.getElementsByTagName!="undefined"?n.getElementsByTagName(t||"*"):typeof n.querySelectorAll!="undefined"?n.querySelectorAll(t||"*"):[],t===undefined||t&&v(n,t))?i.merge([n],r):r}function vi(n,t){for(var i=0,u=n.length;i<u;i++)r.set(n[i],"globalEval",!t||r.get(t[i],"globalEval"))}function su(n,t,r,u,f){for(var e,o,p,a,w,v,h=t.createDocumentFragment(),y=[],l=0,b=n.length;l<b;l++)if(e=n[l],e||e===0)if(it(e)==="object")i.merge(y,e.nodeType?[e]:e);else if(ou.test(e)){for(o=o||h.appendChild(t.createElement("div")),p=(fu.exec(e)||["",""])[1].toLowerCase(),a=c[p]||c._default,o.innerHTML=a[1]+i.htmlPrefilter(e)+a[2],v=a[0];v--;)o=o.lastChild;i.merge(y,o.childNodes);o=h.firstChild;o.textContent=""}else y.push(t.createTextNode(e));for(h.textContent="",l=0;e=y[l++];){if(u&&i.inArray(e,u)>-1){f&&f.push(e);continue}if(w=i.contains(e.ownerDocument,e),o=s(h.appendChild(e),"script"),w&&vi(o),r)for(v=0;e=o[v++];)eu.test(e.type||"")&&r.push(e)}return h}function ri(){return!0}function et(){return!1}function cu(){try{return f.activeElement}catch(n){}}function yi(n,t,r,u,f,e){var o,s;if(typeof t=="object"){typeof r!="string"&&(u=u||r,r=undefined);for(s in t)yi(n,s,r,u,t[s],e);return n}if(u==null&&f==null?(f=r,u=r=undefined):f==null&&(typeof r=="string"?(f=u,u=undefined):(f=u,u=r,r=undefined)),f===!1)f=et;else if(!f)return n;return e===1&&(o=f,f=function(n){return i().off(n),o.apply(this,arguments)},f.guid=o.guid||(o.guid=i.guid++)),n.each(function(){i.event.add(this,t,f,u,r)})}function lu(n,t){return v(n,"table")&&v(t.nodeType!==11?t:t.firstChild,"tr")?i(n).children("tbody")[0]||n:n}function we(n){return n.type=(n.getAttribute("type")!==null)+"/"+n.type,n}function be(n){return(n.type||"").slice(0,5)==="true/"?n.type=n.type.slice(5):n.removeAttribute("type"),n}function au(n,t){var f,c,e,s,h,l,a,u;if(t.nodeType===1){if(r.hasData(n)&&(s=r.access(n),h=r.set(t,s),u=s.events,u)){delete h.handle;h.events={};for(e in u)for(f=0,c=u[e].length;f<c;f++)i.event.add(t,e,u[e][f])}o.hasData(n)&&(l=o.access(n),a=i.extend({},l),o.set(t,a))}}function ke(n,t){var i=t.nodeName.toLowerCase();i==="input"&&uu.test(n.type)?t.checked=n.checked:(i==="input"||i==="textarea")&&(t.defaultValue=n.defaultValue)}function ot(n,t,f,o){t=er.apply([],t);var a,w,l,v,h,b,c=0,y=n.length,d=y-1,p=t[0],k=u(p);if(k||y>1&&typeof p=="string"&&!e.checkClone&&ye.test(p))return n.each(function(i){var r=n.eq(i);k&&(t[0]=p.call(this,i,r.html()));ot(r,t,f,o)});if(y&&(a=su(t,n[0].ownerDocument,!1,n,o),w=a.firstChild,a.childNodes.length===1&&(a=w),w||o)){for(l=i.map(s(a,"script"),we),v=l.length;c<y;c++)h=a,c!==d&&(h=i.clone(h,!0,!0),v&&i.merge(l,s(h,"script"))),f.call(n[c],h,c);if(v)for(b=l[l.length-1].ownerDocument,i.map(l,be),c=0;c<v;c++)h=l[c],eu.test(h.type||"")&&!r.access(h,"globalEval")&&i.contains(b,h)&&(h.src&&(h.type||"").toLowerCase()!=="module"?i._evalUrl&&i._evalUrl(h.src):hr(h.textContent.replace(pe,""),b,h))}return n}function vu(n,t,r){for(var u,e=t?i.filter(t,n):n,f=0;(u=e[f])!=null;f++)r||u.nodeType!==1||i.cleanData(s(u)),u.parentNode&&(r&&i.contains(u.ownerDocument,u)&&vi(s(u,"script")),u.parentNode.removeChild(u));return n}function yt(n,t,r){var o,s,h,u,f=n.style;return r=r||ui(n),r&&(u=r.getPropertyValue(t)||r[t],u!==""||i.contains(n.ownerDocument,n)||(u=i.style(n,t)),!e.pixelBoxStyles()&&pi.test(u)&&de.test(t)&&(o=f.width,s=f.minWidth,h=f.maxWidth,f.minWidth=f.maxWidth=f.width=u,u=r.width,f.width=o,f.minWidth=s,f.maxWidth=h)),u!==undefined?u+"":u}function yu(n,t){return{get:function(){if(n()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}function to(n){if(n in ku)return n;for(var i=n[0].toUpperCase()+n.slice(1),t=bu.length;t--;)if(n=bu[t]+i,n in ku)return n}function du(n){var t=i.cssProps[n];return t||(t=i.cssProps[n]=to(n)||n),t}function gu(n,t,i){var r=vt.exec(t);return r?Math.max(0,r[2]-(i||0))+(r[3]||"px"):t}function wi(n,t,r,u,f,e){var o=t==="width"?1:0,h=0,s=0;if(r===(u?"border":"content"))return 0;for(;o<4;o+=2)r==="margin"&&(s+=i.css(n,r+w[o],!0,f)),u?(r==="content"&&(s-=i.css(n,"padding"+w[o],!0,f)),r!=="margin"&&(s-=i.css(n,"border"+w[o]+"Width",!0,f))):(s+=i.css(n,"padding"+w[o],!0,f),r!=="padding"?s+=i.css(n,"border"+w[o]+"Width",!0,f):h+=i.css(n,"border"+w[o]+"Width",!0,f));return!u&&e>=0&&(s+=Math.max(0,Math.ceil(n["offset"+t[0].toUpperCase()+t.slice(1)]-e-s-h-.5))),s}function nf(n,t,r){var f=ui(n),u=yt(n,t,f),s=i.css(n,"boxSizing",!1,f)==="border-box",o=s;if(pi.test(u)){if(!r)return u;u="auto"}return o=o&&(e.boxSizingReliable()||u===n.style[t]),u!=="auto"&&(parseFloat(u)||i.css(n,"display",!1,f)!=="inline")||(u=n["offset"+t[0].toUpperCase()+t.slice(1)],o=!0),u=parseFloat(u)||0,u+wi(n,t,r||(s?"border":"content"),o,f,u)+"px"}function h(n,t,i,r,u){return new h.prototype.init(n,t,i,r,u)}function bi(){fi&&(f.hidden===!1&&n.requestAnimationFrame?n.requestAnimationFrame(bi):n.setTimeout(bi,i.fx.interval),i.fx.tick())}function uf(){return n.setTimeout(function(){st=undefined}),st=Date.now()}function ei(n,t){var r,u=0,i={height:n};for(t=t?1:0;u<4;u+=2-t)r=w[u],i["margin"+r]=i["padding"+r]=n;return t&&(i.opacity=i.width=n),i}function ff(n,t,i){for(var u,f=(a.tweeners[t]||[]).concat(a.tweeners["*"]),r=0,e=f.length;r<e;r++)if(u=f[r].call(i,t,n))return u}function io(n,t,u){var f,y,w,c,b,s,o,l,k="width"in t||"height"in t,v=this,p={},h=n.style,a=n.nodeType&&ti(n),e=r.get(n,"fxshow");u.queue||(c=i._queueHooks(n,"fx"),c.unqueued==null&&(c.unqueued=0,b=c.empty.fire,c.empty.fire=function(){c.unqueued||b()}),c.unqueued++,v.always(function(){v.always(function(){c.unqueued--;i.queue(n,"fx").length||c.empty.fire()})}));for(f in t)if(y=t[f],tf.test(y)){if(delete t[f],w=w||y==="toggle",y===(a?"hide":"show"))if(y==="show"&&e&&e[f]!==undefined)a=!0;else continue;p[f]=e&&e[f]||i.style(n,f)}if(s=!i.isEmptyObject(t),s||!i.isEmptyObject(p)){k&&n.nodeType===1&&(u.overflow=[h.overflow,h.overflowX,h.overflowY],o=e&&e.display,o==null&&(o=r.get(n,"display")),l=i.css(n,"display"),l==="none"&&(o?l=o:(ft([n],!0),o=n.style.display||o,l=i.css(n,"display"),ft([n]))),(l==="inline"||l==="inline-block"&&o!=null)&&i.css(n,"float")==="none"&&(s||(v.done(function(){h.display=o}),o==null&&(l=h.display,o=l==="none"?"":l)),h.display="inline-block"));u.overflow&&(h.overflow="hidden",v.always(function(){h.overflow=u.overflow[0];h.overflowX=u.overflow[1];h.overflowY=u.overflow[2]}));s=!1;for(f in p)s||(e?"hidden"in e&&(a=e.hidden):e=r.access(n,"fxshow",{display:o}),w&&(e.hidden=!a),a&&ft([n],!0),v.done(function(){a||ft([n]);r.remove(n,"fxshow");for(f in p)i.style(n,f,p[f])})),s=ff(a?e[f]:0,f,v),f in e||(e[f]=s.start,a&&(s.end=s.start,s.start=0))}}function ro(n,t){var r,f,e,u,o;for(r in n)if(f=y(r),e=t[f],u=n[r],Array.isArray(u)&&(e=u[1],u=n[r]=u[0]),r!==f&&(n[f]=u,delete n[r]),o=i.cssHooks[f],o&&"expand"in o){u=o.expand(u);delete n[f];for(r in u)r in n||(n[r]=u[r],t[r]=e)}else t[f]=e}function a(n,t,r){var o,s,h=0,v=a.prefilters.length,e=i.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var o=st||uf(),t=Math.max(0,f.startTime+f.duration-o),h=t/f.duration||0,i=1-h,r=0,u=f.tweens.length;r<u;r++)f.tweens[r].run(i);return(e.notifyWith(n,[f,i,t]),i<1&&u)?t:(u||e.notifyWith(n,[f,1,0]),e.resolveWith(n,[f]),!1)},f=e.promise({elem:n,props:i.extend({},t),opts:i.extend(!0,{specialEasing:{},easing:i.easing._default},r),originalProperties:t,originalOptions:r,startTime:st||uf(),duration:r.duration,tweens:[],createTween:function(t,r){var u=i.Tween(n,f.opts,t,r,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(u),u},stop:function(t){var i=0,r=t?f.tweens.length:0;if(s)return this;for(s=!0;i<r;i++)f.tweens[i].run(1);return t?(e.notifyWith(n,[f,1,0]),e.resolveWith(n,[f,t])):e.rejectWith(n,[f,t]),this}}),c=f.props;for(ro(c,f.opts.specialEasing);h<v;h++)if(o=a.prefilters[h].call(f,n,c,f.opts),o)return u(o.stop)&&(i._queueHooks(f.elem,f.opts.queue).stop=o.stop.bind(o)),o;return i.map(c,ff,f),u(f.opts.start)&&f.opts.start.call(n,f),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always),i.fx.timer(i.extend(l,{elem:n,anim:f,queue:f.opts.queue})),f}function g(n){var t=n.match(l)||[];return t.join(" ")}function nt(n){return n.getAttribute&&n.getAttribute("class")||""}function ki(n){return Array.isArray(n)?n:typeof n=="string"?n.match(l)||[]:[]}function tr(n,t,r,u){var f;if(Array.isArray(t))i.each(t,function(t,i){r||uo.test(n)?u(n,i):tr(n+"["+(typeof i=="object"&&i!=null?t:"")+"]",i,r,u)});else if(r||it(t)!=="object")u(n,t);else for(f in t)tr(n+"["+f+"]",t[f],r,u)}function yf(n){return function(t,i){typeof t!="string"&&(i=t,t="*");var r,f=0,e=t.toLowerCase().match(l)||[];if(u(i))while(r=e[f++])r[0]==="+"?(r=r.slice(1)||"*",(n[r]=n[r]||[]).unshift(i)):(n[r]=n[r]||[]).push(i)}}function pf(n,t,r,u){function e(s){var h;return f[s]=!0,i.each(n[s]||[],function(n,i){var s=i(t,r,u);if(typeof s!="string"||o||f[s]){if(o)return!(h=s)}else return t.dataTypes.unshift(s),e(s),!1}),h}var f={},o=n===ir;return e(t.dataTypes[0])||!f["*"]&&e("*")}function ur(n,t){var r,u,f=i.ajaxSettings.flatOptions||{};for(r in t)t[r]!==undefined&&((f[r]?n:u||(u={}))[r]=t[r]);return u&&i.extend(!0,n,u),n}function vo(n,t,i){for(var e,u,f,o,s=n.contents,r=n.dataTypes;r[0]==="*";)r.shift(),e===undefined&&(e=n.mimeType||t.getResponseHeader("Content-Type"));if(e)for(u in s)if(s[u]&&s[u].test(e)){r.unshift(u);break}if(r[0]in i)f=r[0];else{for(u in i){if(!r[0]||n.converters[u+" "+r[0]]){f=u;break}o||(o=u)}f=f||o}if(f)return f!==r[0]&&r.unshift(f),i[f]}function yo(n,t,i,r){var h,u,f,s,e,o={},c=n.dataTypes.slice();if(c[1])for(f in n.converters)o[f.toLowerCase()]=n.converters[f];for(u=c.shift();u;)if(n.responseFields[u]&&(i[n.responseFields[u]]=t),!e&&r&&n.dataFilter&&(t=n.dataFilter(t,n.dataType)),e=u,u=c.shift(),u)if(u==="*")u=e;else if(e!=="*"&&e!==u){if(f=o[e+" "+u]||o["* "+u],!f)for(h in o)if(s=h.split(" "),s[1]===u&&(f=o[e+" "+s[0]]||o["* "+s[0]],f)){f===!0?f=o[h]:o[h]!==!0&&(u=s[0],c.unshift(s[1]));break}if(f!==!0)if(f&&n.throws)t=f(t);else try{t=f(t)}catch(l){return{state:"parsererror",error:f?l:"No conversion from "+e+" to "+u}}}return{state:"success",data:t}}var k=[],f=n.document,df=Object.getPrototypeOf,d=k.slice,er=k.concat,si=k.push,wt=k.indexOf,bt={},or=bt.toString,kt=bt.hasOwnProperty,sr=kt.toString,gf=sr.call(Object),e={},u=function(n){return typeof n=="function"&&typeof n.nodeType!="number"},tt=function(n){return n!=null&&n===n.window},ne={type:!0,src:!0,noModule:!0},cr="3.3.1",i=function(n,t){return new i.fn.init(n,t)},te=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,b,ci,vr,yr,pr,wr,br,l,gr,gt,lt,ai,ou,st,fi,tf,rf,ef,ht,of,sf,hf,di,gi,wf,ct,fr,oi,bf,kf;i.fn=i.prototype={jquery:cr,constructor:i,length:0,toArray:function(){return d.call(this)},get:function(n){return n==null?d.call(this):n<0?this[n+this.length]:this[n]},pushStack:function(n){var t=i.merge(this.constructor(),n);return t.prevObject=this,t},each:function(n){return i.each(this,n)},map:function(n){return this.pushStack(i.map(this,function(t,i){return n.call(t,i,t)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(n){var i=this.length,t=+n+(n<0?i:0);return this.pushStack(t>=0&&t<i?[this[t]]:[])},end:function(){return this.prevObject||this.constructor()},push:si,sort:k.sort,splice:k.splice};i.extend=i.fn.extend=function(){var o,e,r,t,s,h,n=arguments[0]||{},f=1,l=arguments.length,c=!1;for(typeof n=="boolean"&&(c=n,n=arguments[f]||{},f++),typeof n=="object"||u(n)||(n={}),f===l&&(n=this,f--);f<l;f++)if((o=arguments[f])!=null)for(e in o)(r=n[e],t=o[e],n!==t)&&(c&&t&&(i.isPlainObject(t)||(s=Array.isArray(t)))?(s?(s=!1,h=r&&Array.isArray(r)?r:[]):h=r&&i.isPlainObject(r)?r:{},n[e]=i.extend(c,h,t)):t!==undefined&&(n[e]=t));return n};i.extend({expando:"jQuery"+(cr+Math.random()).replace(/\D/g,""),isReady:!0,error:function(n){throw new Error(n);},noop:function(){},isPlainObject:function(n){var t,i;return!n||or.call(n)!=="[object Object]"?!1:(t=df(n),!t)?!0:(i=kt.call(t,"constructor")&&t.constructor,typeof i=="function"&&sr.call(i)===gf)},isEmptyObject:function(n){for(var t in n)return!1;return!0},globalEval:function(n){hr(n)},each:function(n,t){var r,i=0;if(hi(n)){for(r=n.length;i<r;i++)if(t.call(n[i],i,n[i])===!1)break}else for(i in n)if(t.call(n[i],i,n[i])===!1)break;return n},trim:function(n){return n==null?"":(n+"").replace(te,"")},makeArray:function(n,t){var r=t||[];return n!=null&&(hi(Object(n))?i.merge(r,typeof n=="string"?[n]:n):si.call(r,n)),r},inArray:function(n,t,i){return t==null?-1:wt.call(t,n,i)},merge:function(n,t){for(var u=+t.length,i=0,r=n.length;i<u;i++)n[r++]=t[i];return n.length=r,n},grep:function(n,t,i){for(var u,f=[],r=0,e=n.length,o=!i;r<e;r++)u=!t(n[r],r),u!==o&&f.push(n[r]);return f},map:function(n,t,i){var e,u,r=0,f=[];if(hi(n))for(e=n.length;r<e;r++)u=t(n[r],r,i),u!=null&&f.push(u);else for(r in n)u=t(n[r],r,i),u!=null&&f.push(u);return er.apply([],f)},guid:1,support:e});typeof Symbol=="function"&&(i.fn[Symbol.iterator]=k[Symbol.iterator]);i.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(n,t){bt["[object "+t+"]"]=t.toLowerCase()});b=function(n){function u(n,t,r,u){var s,w,l,a,d,y,g,p=t&&t.ownerDocument,v=t?t.nodeType:9;if(r=r||[],typeof n!="string"||!n||v!==1&&v!==9&&v!==11)return r;if(!u&&((t?t.ownerDocument||t:c)!==i&&b(t),t=t||i,h)){if(v!==11&&(d=cr.exec(n)))if(s=d[1]){if(v===9)if(l=t.getElementById(s)){if(l.id===s)return r.push(l),r}else return r;else if(p&&(l=p.getElementById(s))&&et(t,l)&&l.id===s)return r.push(l),r}else{if(d[2])return k.apply(r,t.getElementsByTagName(n)),r;if((s=d[3])&&e.getElementsByClassName&&t.getElementsByClassName)return k.apply(r,t.getElementsByClassName(s)),r}if(e.qsa&&!lt[n+" "]&&(!o||!o.test(n))){if(v!==1)p=t,g=n;else if(t.nodeName.toLowerCase()!=="object"){for((a=t.getAttribute("id"))?a=a.replace(vi,yi):t.setAttribute("id",a=f),y=ft(n),w=y.length;w--;)y[w]="#"+a+" "+yt(y[w]);g=y.join(",");p=ni.test(n)&&ri(t.parentNode)||t}if(g)try{return k.apply(r,p.querySelectorAll(g)),r}catch(nt){}finally{a===f&&t.removeAttribute("id")}}}return si(n.replace(at,"$1"),t,r,u)}function ti(){function n(r,u){return i.push(r+" ")>t.cacheLength&&delete n[i.shift()],n[r+" "]=u}var i=[];return n}function l(n){return n[f]=!0,n}function a(n){var t=i.createElement("fieldset");try{return!!n(t)}catch(r){return!1}finally{t.parentNode&&t.parentNode.removeChild(t);t=null}}function ii(n,i){for(var r=n.split("|"),u=r.length;u--;)t.attrHandle[r[u]]=i}function wi(n,t){var i=t&&n,r=i&&n.nodeType===1&&t.nodeType===1&&n.sourceIndex-t.sourceIndex;if(r)return r;if(i)while(i=i.nextSibling)if(i===t)return-1;return n?1:-1}function ar(n){return function(t){var i=t.nodeName.toLowerCase();return i==="input"&&t.type===n}}function vr(n){return function(t){var i=t.nodeName.toLowerCase();return(i==="input"||i==="button")&&t.type===n}}function bi(n){return function(t){return"form"in t?t.parentNode&&t.disabled===!1?"label"in t?"label"in t.parentNode?t.parentNode.disabled===n:t.disabled===n:t.isDisabled===n||t.isDisabled!==!n&&lr(t)===n:t.disabled===n:"label"in t?t.disabled===n:!1}}function it(n){return l(function(t){return t=+t,l(function(i,r){for(var u,f=n([],i.length,t),e=f.length;e--;)i[u=f[e]]&&(i[u]=!(r[u]=i[u]))})})}function ri(n){return n&&typeof n.getElementsByTagName!="undefined"&&n}function ki(){}function yt(n){for(var t=0,r=n.length,i="";t<r;t++)i+=n[t].value;return i}function pt(n,t,i){var r=t.dir,u=t.next,e=u||r,o=i&&e==="parentNode",s=di++;return t.first?function(t,i,u){while(t=t[r])if(t.nodeType===1||o)return n(t,i,u);return!1}:function(t,i,h){var c,l,a,y=[v,s];if(h){while(t=t[r])if((t.nodeType===1||o)&&n(t,i,h))return!0}else while(t=t[r])if(t.nodeType===1||o)if(a=t[f]||(t[f]={}),l=a[t.uniqueID]||(a[t.uniqueID]={}),u&&u===t.nodeName.toLowerCase())t=t[r]||t;else{if((c=l[e])&&c[0]===v&&c[1]===s)return y[2]=c[2];if(l[e]=y,y[2]=n(t,i,h))return!0}return!1}}function ui(n){return n.length>1?function(t,i,r){for(var u=n.length;u--;)if(!n[u](t,i,r))return!1;return!0}:n[0]}function yr(n,t,i){for(var r=0,f=t.length;r<f;r++)u(n,t[r],i);return i}function wt(n,t,i,r,u){for(var e,o=[],f=0,s=n.length,h=t!=null;f<s;f++)(e=n[f])&&(!i||i(e,r,u))&&(o.push(e),h&&t.push(f));return o}function fi(n,t,i,r,u,e){return r&&!r[f]&&(r=fi(r)),u&&!u[f]&&(u=fi(u,e)),l(function(f,e,o,s){var l,c,a,p=[],y=[],w=e.length,b=f||yr(t||"*",o.nodeType?[o]:o,[]),v=n&&(f||!t)?wt(b,p,n,o,s):b,h=i?u||(f?n:w||r)?[]:e:v;if(i&&i(v,h,o,s),r)for(l=wt(h,y),r(l,[],o,s),c=l.length;c--;)(a=l[c])&&(h[y[c]]=!(v[y[c]]=a));if(f){if(u||n){if(u){for(l=[],c=h.length;c--;)(a=h[c])&&l.push(v[c]=a);u(null,h=[],l,s)}for(c=h.length;c--;)(a=h[c])&&(l=u?nt(f,a):p[c])>-1&&(f[l]=!(e[l]=a))}}else h=wt(h===e?h.splice(w,h.length):h),u?u(null,e,h,s):k.apply(e,h)})}function ei(n){for(var o,u,r,s=n.length,h=t.relative[n[0].type],c=h||t.relative[" "],i=h?1:0,l=pt(function(n){return n===o},c,!0),a=pt(function(n){return nt(o,n)>-1},c,!0),e=[function(n,t,i){var r=!h&&(i||t!==ht)||((o=t).nodeType?l(n,t,i):a(n,t,i));return o=null,r}];i<s;i++)if(u=t.relative[n[i].type])e=[pt(ui(e),u)];else{if(u=t.filter[n[i].type].apply(null,n[i].matches),u[f]){for(r=++i;r<s;r++)if(t.relative[n[r].type])break;return fi(i>1&&ui(e),i>1&&yt(n.slice(0,i-1).concat({value:n[i-2].type===" "?"*":""})).replace(at,"$1"),u,i<r&&ei(n.slice(i,r)),r<s&&ei(n=n.slice(r)),r<s&&yt(n))}e.push(u)}return ui(e)}function pr(n,r){var f=r.length>0,e=n.length>0,o=function(o,s,c,l,a){var y,nt,d,g=0,p="0",tt=o&&[],w=[],it=ht,rt=o||e&&t.find.TAG("*",a),ut=v+=it==null?1:Math.random()||.1,ft=rt.length;for(a&&(ht=s===i||s||a);p!==ft&&(y=rt[p])!=null;p++){if(e&&y){for(nt=0,s||y.ownerDocument===i||(b(y),c=!h);d=n[nt++];)if(d(y,s||i,c)){l.push(y);break}a&&(v=ut)}f&&((y=!d&&y)&&g--,o&&tt.push(y))}if(g+=p,f&&p!==g){for(nt=0;d=r[nt++];)d(tt,w,s,c);if(o){if(g>0)while(p--)tt[p]||w[p]||(w[p]=nr.call(l));w=wt(w)}k.apply(l,w);a&&!o&&w.length>0&&g+r.length>1&&u.uniqueSort(l)}return a&&(v=ut,ht=it),tt};return f?l(o):o}var rt,e,t,st,oi,ft,bt,si,ht,w,ut,b,i,s,h,o,d,ct,et,f="sizzle"+1*new Date,c=n.document,v=0,di=0,hi=ti(),ci=ti(),lt=ti(),kt=function(n,t){return n===t&&(ut=!0),0},gi={}.hasOwnProperty,g=[],nr=g.pop,tr=g.push,k=g.push,li=g.slice,nt=function(n,t){for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1},dt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",r="[\\x20\\t\\r\\n\\f]",tt="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ai="\\["+r+"*("+tt+")(?:"+r+"*([*^$|!~]?=)"+r+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+tt+"))|)"+r+"*\\]",gt=":("+tt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ai+")*)|.*)\\)|)",ir=new RegExp(r+"+","g"),at=new RegExp("^"+r+"+|((?:^|[^\\\\])(?:\\\\.)*)"+r+"+$","g"),rr=new RegExp("^"+r+"*,"+r+"*"),ur=new RegExp("^"+r+"*([>+~]|"+r+")"+r+"*"),fr=new RegExp("="+r+"*([^\\]'\"]*?)"+r+"*\\]","g"),er=new RegExp(gt),or=new RegExp("^"+tt+"$"),vt={ID:new RegExp("^#("+tt+")"),CLASS:new RegExp("^\\.("+tt+")"),TAG:new RegExp("^("+tt+"|[*])"),ATTR:new RegExp("^"+ai),PSEUDO:new RegExp("^"+gt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+r+"*(even|odd|(([+-]|)(\\d*)n|)"+r+"*(?:([+-]|)"+r+"*(\\d+)|))"+r+"*\\)|)","i"),bool:new RegExp("^(?:"+dt+")$","i"),needsContext:new RegExp("^"+r+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+r+"*((?:-\\d)?\\d*)"+r+"*\\)|)(?=[^-]|$)","i")},sr=/^(?:input|select|textarea|button)$/i,hr=/^h\d$/i,ot=/^[^{]+\{\s*\[native \w/,cr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ni=/[+~]/,y=new RegExp("\\\\([\\da-f]{1,6}"+r+"?|("+r+")|.)","ig"),p=function(n,t,i){var r="0x"+t-65536;return r!==r||i?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)},vi=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,yi=function(n,t){return t?n==="\0"?"�":n.slice(0,-1)+"\\"+n.charCodeAt(n.length-1).toString(16)+" ":"\\"+n},pi=function(){b()},lr=pt(function(n){return n.disabled===!0&&("form"in n||"label"in n)},{dir:"parentNode",next:"legend"});try{k.apply(g=li.call(c.childNodes),c.childNodes);g[c.childNodes.length].nodeType}catch(wr){k={apply:g.length?function(n,t){tr.apply(n,li.call(t))}:function(n,t){for(var i=n.length,r=0;n[i++]=t[r++];);n.length=i-1}}}e=u.support={};oi=u.isXML=function(n){var t=n&&(n.ownerDocument||n).documentElement;return t?t.nodeName!=="HTML":!1};b=u.setDocument=function(n){var v,u,l=n?n.ownerDocument||n:c;return l===i||l.nodeType!==9||!l.documentElement?i:(i=l,s=i.documentElement,h=!oi(i),c!==i&&(u=i.defaultView)&&u.top!==u&&(u.addEventListener?u.addEventListener("unload",pi,!1):u.attachEvent&&u.attachEvent("onunload",pi)),e.attributes=a(function(n){return n.className="i",!n.getAttribute("className")}),e.getElementsByTagName=a(function(n){return n.appendChild(i.createComment("")),!n.getElementsByTagName("*").length}),e.getElementsByClassName=ot.test(i.getElementsByClassName),e.getById=a(function(n){return s.appendChild(n).id=f,!i.getElementsByName||!i.getElementsByName(f).length}),e.getById?(t.filter.ID=function(n){var t=n.replace(y,p);return function(n){return n.getAttribute("id")===t}},t.find.ID=function(n,t){if(typeof t.getElementById!="undefined"&&h){var i=t.getElementById(n);return i?[i]:[]}}):(t.filter.ID=function(n){var t=n.replace(y,p);return function(n){var i=typeof n.getAttributeNode!="undefined"&&n.getAttributeNode("id");return i&&i.value===t}},t.find.ID=function(n,t){if(typeof t.getElementById!="undefined"&&h){var i,u,f,r=t.getElementById(n);if(r){if(i=r.getAttributeNode("id"),i&&i.value===n)return[r];for(f=t.getElementsByName(n),u=0;r=f[u++];)if(i=r.getAttributeNode("id"),i&&i.value===n)return[r]}return[]}}),t.find.TAG=e.getElementsByTagName?function(n,t){return typeof t.getElementsByTagName!="undefined"?t.getElementsByTagName(n):e.qsa?t.querySelectorAll(n):void 0}:function(n,t){var i,r=[],f=0,u=t.getElementsByTagName(n);if(n==="*"){while(i=u[f++])i.nodeType===1&&r.push(i);return r}return u},t.find.CLASS=e.getElementsByClassName&&function(n,t){if(typeof t.getElementsByClassName!="undefined"&&h)return t.getElementsByClassName(n)},d=[],o=[],(e.qsa=ot.test(i.querySelectorAll))&&(a(function(n){s.appendChild(n).innerHTML="<a id='"+f+"'><\/a><select id='"+f+"-\r\\' msallowcapture=''><option selected=''><\/option><\/select>";n.querySelectorAll("[msallowcapture^='']").length&&o.push("[*^$]="+r+"*(?:''|\"\")");n.querySelectorAll("[selected]").length||o.push("\\["+r+"*(?:value|"+dt+")");n.querySelectorAll("[id~="+f+"-]").length||o.push("~=");n.querySelectorAll(":checked").length||o.push(":checked");n.querySelectorAll("a#"+f+"+*").length||o.push(".#.+[+~]")}),a(function(n){n.innerHTML="<a href='' disabled='disabled'><\/a><select disabled='disabled'><option/><\/select>";var t=i.createElement("input");t.setAttribute("type","hidden");n.appendChild(t).setAttribute("name","D");n.querySelectorAll("[name=d]").length&&o.push("name"+r+"*[*^$|!~]?=");n.querySelectorAll(":enabled").length!==2&&o.push(":enabled",":disabled");s.appendChild(n).disabled=!0;n.querySelectorAll(":disabled").length!==2&&o.push(":enabled",":disabled");n.querySelectorAll("*,:x");o.push(",.*:")})),(e.matchesSelector=ot.test(ct=s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.oMatchesSelector||s.msMatchesSelector))&&a(function(n){e.disconnectedMatch=ct.call(n,"*");ct.call(n,"[s!='']:x");d.push("!=",gt)}),o=o.length&&new RegExp(o.join("|")),d=d.length&&new RegExp(d.join("|")),v=ot.test(s.compareDocumentPosition),et=v||ot.test(s.contains)?function(n,t){var r=n.nodeType===9?n.documentElement:n,i=t&&t.parentNode;return n===i||!!(i&&i.nodeType===1&&(r.contains?r.contains(i):n.compareDocumentPosition&&n.compareDocumentPosition(i)&16))}:function(n,t){if(t)while(t=t.parentNode)if(t===n)return!0;return!1},kt=v?function(n,t){if(n===t)return ut=!0,0;var r=!n.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(n.ownerDocument||n)===(t.ownerDocument||t)?n.compareDocumentPosition(t):1,r&1||!e.sortDetached&&t.compareDocumentPosition(n)===r)?n===i||n.ownerDocument===c&&et(c,n)?-1:t===i||t.ownerDocument===c&&et(c,t)?1:w?nt(w,n)-nt(w,t):0:r&4?-1:1}:function(n,t){if(n===t)return ut=!0,0;var r,u=0,o=n.parentNode,s=t.parentNode,f=[n],e=[t];if(o&&s){if(o===s)return wi(n,t)}else return n===i?-1:t===i?1:o?-1:s?1:w?nt(w,n)-nt(w,t):0;for(r=n;r=r.parentNode;)f.unshift(r);for(r=t;r=r.parentNode;)e.unshift(r);while(f[u]===e[u])u++;return u?wi(f[u],e[u]):f[u]===c?-1:e[u]===c?1:0},i)};u.matches=function(n,t){return u(n,null,null,t)};u.matchesSelector=function(n,t){if((n.ownerDocument||n)!==i&&b(n),t=t.replace(fr,"='$1']"),e.matchesSelector&&h&&!lt[t+" "]&&(!d||!d.test(t))&&(!o||!o.test(t)))try{var r=ct.call(n,t);if(r||e.disconnectedMatch||n.document&&n.document.nodeType!==11)return r}catch(f){}return u(t,i,null,[n]).length>0};u.contains=function(n,t){return(n.ownerDocument||n)!==i&&b(n),et(n,t)};u.attr=function(n,r){(n.ownerDocument||n)!==i&&b(n);var f=t.attrHandle[r.toLowerCase()],u=f&&gi.call(t.attrHandle,r.toLowerCase())?f(n,r,!h):undefined;return u!==undefined?u:e.attributes||!h?n.getAttribute(r):(u=n.getAttributeNode(r))&&u.specified?u.value:null};u.escape=function(n){return(n+"").replace(vi,yi)};u.error=function(n){throw new Error("Syntax error, unrecognized expression: "+n);};u.uniqueSort=function(n){var r,u=[],t=0,i=0;if(ut=!e.detectDuplicates,w=!e.sortStable&&n.slice(0),n.sort(kt),ut){while(r=n[i++])r===n[i]&&(t=u.push(i));while(t--)n.splice(u[t],1)}return w=null,n};st=u.getText=function(n){var r,i="",u=0,t=n.nodeType;if(t){if(t===1||t===9||t===11){if(typeof n.textContent=="string")return n.textContent;for(n=n.firstChild;n;n=n.nextSibling)i+=st(n)}else if(t===3||t===4)return n.nodeValue}else while(r=n[u++])i+=st(r);return i};t=u.selectors={cacheLength:50,createPseudo:l,match:vt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(n){return n[1]=n[1].replace(y,p),n[3]=(n[3]||n[4]||n[5]||"").replace(y,p),n[2]==="~="&&(n[3]=" "+n[3]+" "),n.slice(0,4)},CHILD:function(n){return n[1]=n[1].toLowerCase(),n[1].slice(0,3)==="nth"?(n[3]||u.error(n[0]),n[4]=+(n[4]?n[5]+(n[6]||1):2*(n[3]==="even"||n[3]==="odd")),n[5]=+(n[7]+n[8]||n[3]==="odd")):n[3]&&u.error(n[0]),n},PSEUDO:function(n){var i,t=!n[6]&&n[2];return vt.CHILD.test(n[0])?null:(n[3]?n[2]=n[4]||n[5]||"":t&&er.test(t)&&(i=ft(t,!0))&&(i=t.indexOf(")",t.length-i)-t.length)&&(n[0]=n[0].slice(0,i),n[2]=t.slice(0,i)),n.slice(0,3))}},filter:{TAG:function(n){var t=n.replace(y,p).toLowerCase();return n==="*"?function(){return!0}:function(n){return n.nodeName&&n.nodeName.toLowerCase()===t}},CLASS:function(n){var t=hi[n+" "];return t||(t=new RegExp("(^|"+r+")"+n+"("+r+"|$)"))&&hi(n,function(n){return t.test(typeof n.className=="string"&&n.className||typeof n.getAttribute!="undefined"&&n.getAttribute("class")||"")})},ATTR:function(n,t,i){return function(r){var f=u.attr(r,n);return f==null?t==="!=":t?(f+="",t==="="?f===i:t==="!="?f!==i:t==="^="?i&&f.indexOf(i)===0:t==="*="?i&&f.indexOf(i)>-1:t==="$="?i&&f.slice(-i.length)===i:t==="~="?(" "+f.replace(ir," ")+" ").indexOf(i)>-1:t==="|="?f===i||f.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(n,t,i,r,u){var s=n.slice(0,3)!=="nth",o=n.slice(-4)!=="last",e=t==="of-type";return r===1&&u===0?function(n){return!!n.parentNode}:function(t,i,h){var p,w,y,c,a,b,k=s!==o?"nextSibling":"previousSibling",d=t.parentNode,nt=e&&t.nodeName.toLowerCase(),g=!h&&!e,l=!1;if(d){if(s){while(k){for(c=t;c=c[k];)if(e?c.nodeName.toLowerCase()===nt:c.nodeType===1)return!1;b=k=n==="only"&&!b&&"nextSibling"}return!0}if(b=[o?d.firstChild:d.lastChild],o&&g){for(c=d,y=c[f]||(c[f]={}),w=y[c.uniqueID]||(y[c.uniqueID]={}),p=w[n]||[],a=p[0]===v&&p[1],l=a&&p[2],c=a&&d.childNodes[a];c=++a&&c&&c[k]||(l=a=0)||b.pop();)if(c.nodeType===1&&++l&&c===t){w[n]=[v,a,l];break}}else if(g&&(c=t,y=c[f]||(c[f]={}),w=y[c.uniqueID]||(y[c.uniqueID]={}),p=w[n]||[],a=p[0]===v&&p[1],l=a),l===!1)while(c=++a&&c&&c[k]||(l=a=0)||b.pop())if((e?c.nodeName.toLowerCase()===nt:c.nodeType===1)&&++l&&(g&&(y=c[f]||(c[f]={}),w=y[c.uniqueID]||(y[c.uniqueID]={}),w[n]=[v,l]),c===t))break;return l-=u,l===r||l%r==0&&l/r>=0}}},PSEUDO:function(n,i){var e,r=t.pseudos[n]||t.setFilters[n.toLowerCase()]||u.error("unsupported pseudo: "+n);return r[f]?r(i):r.length>1?(e=[n,n,"",i],t.setFilters.hasOwnProperty(n.toLowerCase())?l(function(n,t){for(var u,f=r(n,i),e=f.length;e--;)u=nt(n,f[e]),n[u]=!(t[u]=f[e])}):function(n){return r(n,0,e)}):r}},pseudos:{not:l(function(n){var t=[],r=[],i=bt(n.replace(at,"$1"));return i[f]?l(function(n,t,r,u){for(var e,o=i(n,null,u,[]),f=n.length;f--;)(e=o[f])&&(n[f]=!(t[f]=e))}):function(n,u,f){return t[0]=n,i(t,null,f,r),t[0]=null,!r.pop()}}),has:l(function(n){return function(t){return u(n,t).length>0}}),contains:l(function(n){return n=n.replace(y,p),function(t){return(t.textContent||t.innerText||st(t)).indexOf(n)>-1}}),lang:l(function(n){return or.test(n||"")||u.error("unsupported lang: "+n),n=n.replace(y,p).toLowerCase(),function(t){var i;do if(i=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===n||i.indexOf(n+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var i=n.location&&n.location.hash;return i&&i.slice(1)===t.id},root:function(n){return n===s},focus:function(n){return n===i.activeElement&&(!i.hasFocus||i.hasFocus())&&!!(n.type||n.href||~n.tabIndex)},enabled:bi(!1),disabled:bi(!0),checked:function(n){var t=n.nodeName.toLowerCase();return t==="input"&&!!n.checked||t==="option"&&!!n.selected},selected:function(n){return n.parentNode&&n.parentNode.selectedIndex,n.selected===!0},empty:function(n){for(n=n.firstChild;n;n=n.nextSibling)if(n.nodeType<6)return!1;return!0},parent:function(n){return!t.pseudos.empty(n)},header:function(n){return hr.test(n.nodeName)},input:function(n){return sr.test(n.nodeName)},button:function(n){var t=n.nodeName.toLowerCase();return t==="input"&&n.type==="button"||t==="button"},text:function(n){var t;return n.nodeName.toLowerCase()==="input"&&n.type==="text"&&((t=n.getAttribute("type"))==null||t.toLowerCase()==="text")},first:it(function(){return[0]}),last:it(function(n,t){return[t-1]}),eq:it(function(n,t,i){return[i<0?i+t:i]}),even:it(function(n,t){for(var i=0;i<t;i+=2)n.push(i);return n}),odd:it(function(n,t){for(var i=1;i<t;i+=2)n.push(i);return n}),lt:it(function(n,t,i){for(var r=i<0?i+t:i;--r>=0;)n.push(r);return n}),gt:it(function(n,t,i){for(var r=i<0?i+t:i;++r<t;)n.push(r);return n})}};t.pseudos.nth=t.pseudos.eq;for(rt in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[rt]=ar(rt);for(rt in{submit:!0,reset:!0})t.pseudos[rt]=vr(rt);return ki.prototype=t.filters=t.pseudos,t.setFilters=new ki,ft=u.tokenize=function(n,i){var e,f,s,o,r,h,c,l=ci[n+" "];if(l)return i?0:l.slice(0);for(r=n,h=[],c=t.preFilter;r;){(!e||(f=rr.exec(r)))&&(f&&(r=r.slice(f[0].length)||r),h.push(s=[]));e=!1;(f=ur.exec(r))&&(e=f.shift(),s.push({value:e,type:f[0].replace(at," ")}),r=r.slice(e.length));for(o in t.filter)(f=vt[o].exec(r))&&(!c[o]||(f=c[o](f)))&&(e=f.shift(),s.push({value:e,type:o,matches:f}),r=r.slice(e.length));if(!e)break}return i?r.length:r?u.error(n):ci(n,h).slice(0)},bt=u.compile=function(n,t){var r,u=[],e=[],i=lt[n+" "];if(!i){for(t||(t=ft(n)),r=t.length;r--;)i=ei(t[r]),i[f]?u.push(i):e.push(i);i=lt(n,pr(e,u));i.selector=n}return i},si=u.select=function(n,i,r,u){var o,f,e,l,a,c=typeof n=="function"&&n,s=!u&&ft(n=c.selector||n);if(r=r||[],s.length===1){if(f=s[0]=s[0].slice(0),f.length>2&&(e=f[0]).type==="ID"&&i.nodeType===9&&h&&t.relative[f[1].type]){if(i=(t.find.ID(e.matches[0].replace(y,p),i)||[])[0],i)c&&(i=i.parentNode);else return r;n=n.slice(f.shift().value.length)}for(o=vt.needsContext.test(n)?0:f.length;o--;){if(e=f[o],t.relative[l=e.type])break;if((a=t.find[l])&&(u=a(e.matches[0].replace(y,p),ni.test(f[0].type)&&ri(i.parentNode)||i))){if(f.splice(o,1),n=u.length&&yt(f),!n)return k.apply(r,u),r;break}}}return(c||bt(n,s))(u,i,!h,r,!i||ni.test(n)&&ri(i.parentNode)||i),r},e.sortStable=f.split("").sort(kt).join("")===f,e.detectDuplicates=!!ut,b(),e.sortDetached=a(function(n){return n.compareDocumentPosition(i.createElement("fieldset"))&1}),a(function(n){return n.innerHTML="<a href='#'><\/a>",n.firstChild.getAttribute("href")==="#"})||ii("type|href|height|width",function(n,t,i){if(!i)return n.getAttribute(t,t.toLowerCase()==="type"?1:2)}),e.attributes&&a(function(n){return n.innerHTML="<input/>",n.firstChild.setAttribute("value",""),n.firstChild.getAttribute("value")===""})||ii("value",function(n,t,i){if(!i&&n.nodeName.toLowerCase()==="input")return n.defaultValue}),a(function(n){return n.getAttribute("disabled")==null})||ii(dt,function(n,t,i){var r;if(!i)return n[t]===!0?t.toLowerCase():(r=n.getAttributeNode(t))&&r.specified?r.value:null}),u}(n);i.find=b;i.expr=b.selectors;i.expr[":"]=i.expr.pseudos;i.uniqueSort=i.unique=b.uniqueSort;i.text=b.getText;i.isXMLDoc=b.isXML;i.contains=b.contains;i.escapeSelector=b.escape;var rt=function(n,t,r){for(var u=[],f=r!==undefined;(n=n[t])&&n.nodeType!==9;)if(n.nodeType===1){if(f&&i(n).is(r))break;u.push(n)}return u},lr=function(n,t){for(var i=[];n;n=n.nextSibling)n.nodeType===1&&n!==t&&i.push(n);return i},ar=i.expr.match.needsContext;ci=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;i.filter=function(n,t,r){var u=t[0];return(r&&(n=":not("+n+")"),t.length===1&&u.nodeType===1)?i.find.matchesSelector(u,n)?[u]:[]:i.find.matches(n,i.grep(t,function(n){return n.nodeType===1}))};i.fn.extend({find:function(n){var t,r,u=this.length,f=this;if(typeof n!="string")return this.pushStack(i(n).filter(function(){for(t=0;t<u;t++)if(i.contains(f[t],this))return!0}));for(r=this.pushStack([]),t=0;t<u;t++)i.find(n,f[t],r);return u>1?i.uniqueSort(r):r},filter:function(n){return this.pushStack(li(this,n||[],!1))},not:function(n){return this.pushStack(li(this,n||[],!0))},is:function(n){return!!li(this,typeof n=="string"&&ar.test(n)?i(n):n||[],!1).length}});yr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;pr=i.fn.init=function(n,t,r){var e,o;if(!n)return this;if(r=r||vr,typeof n=="string"){if(e=n[0]==="<"&&n[n.length-1]===">"&&n.length>=3?[null,n,null]:yr.exec(n),e&&(e[1]||!t)){if(e[1]){if(t=t instanceof i?t[0]:t,i.merge(this,i.parseHTML(e[1],t&&t.nodeType?t.ownerDocument||t:f,!0)),ci.test(e[1])&&i.isPlainObject(t))for(e in t)u(this[e])?this[e](t[e]):this.attr(e,t[e]);return this}return o=f.getElementById(e[2]),o&&(this[0]=o,this.length=1),this}return!t||t.jquery?(t||r).find(n):this.constructor(t).find(n)}return n.nodeType?(this[0]=n,this.length=1,this):u(n)?r.ready!==undefined?r.ready(n):n(i):i.makeArray(n,this)};pr.prototype=i.fn;vr=i(f);wr=/^(?:parents|prev(?:Until|All))/;br={children:!0,contents:!0,next:!0,prev:!0};i.fn.extend({has:function(n){var t=i(n,this),r=t.length;return this.filter(function(){for(var n=0;n<r;n++)if(i.contains(this,t[n]))return!0})},closest:function(n,t){var r,f=0,o=this.length,u=[],e=typeof n!="string"&&i(n);if(!ar.test(n))for(;f<o;f++)for(r=this[f];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(e?e.index(r)>-1:r.nodeType===1&&i.find.matchesSelector(r,n))){u.push(r);break}return this.pushStack(u.length>1?i.uniqueSort(u):u)},index:function(n){return n?typeof n=="string"?wt.call(i(n),this[0]):wt.call(this,n.jquery?n[0]:n):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(n,t){return this.pushStack(i.uniqueSort(i.merge(this.get(),i(n,t))))},addBack:function(n){return this.add(n==null?this.prevObject:this.prevObject.filter(n))}});i.each({parent:function(n){var t=n.parentNode;return t&&t.nodeType!==11?t:null},parents:function(n){return rt(n,"parentNode")},parentsUntil:function(n,t,i){return rt(n,"parentNode",i)},next:function(n){return kr(n,"nextSibling")},prev:function(n){return kr(n,"previousSibling")},nextAll:function(n){return rt(n,"nextSibling")},prevAll:function(n){return rt(n,"previousSibling")},nextUntil:function(n,t,i){return rt(n,"nextSibling",i)},prevUntil:function(n,t,i){return rt(n,"previousSibling",i)},siblings:function(n){return lr((n.parentNode||{}).firstChild,n)},children:function(n){return lr(n.firstChild)},contents:function(n){return v(n,"iframe")?n.contentDocument:(v(n,"template")&&(n=n.content||n),i.merge([],n.childNodes))}},function(n,t){i.fn[n]=function(r,u){var f=i.map(this,t,r);return n.slice(-5)!=="Until"&&(u=r),u&&typeof u=="string"&&(f=i.filter(u,f)),this.length>1&&(br[n]||i.uniqueSort(f),wr.test(n)&&f.reverse()),this.pushStack(f)}});l=/[^\x20\t\r\n\f]+/g;i.Callbacks=function(n){n=typeof n=="string"?ie(n):i.extend({},n);var o,r,c,f,t=[],s=[],e=-1,l=function(){for(f=f||n.once,c=o=!0;s.length;e=-1)for(r=s.shift();++e<t.length;)t[e].apply(r[0],r[1])===!1&&n.stopOnFalse&&(e=t.length,r=!1);n.memory||(r=!1);o=!1;f&&(t=r?[]:"")},h={add:function(){return t&&(r&&!o&&(e=t.length-1,s.push(r)),function f(r){i.each(r,function(i,r){u(r)?n.unique&&h.has(r)||t.push(r):r&&r.length&&it(r)!=="string"&&f(r)})}(arguments),r&&!o&&l()),this},remove:function(){return i.each(arguments,function(n,r){for(var u;(u=i.inArray(r,t,u))>-1;)t.splice(u,1),u<=e&&e--}),this},has:function(n){return n?i.inArray(n,t)>-1:t.length>0},empty:function(){return t&&(t=[]),this},disable:function(){return f=s=[],t=r="",this},disabled:function(){return!t},lock:function(){return f=s=[],r||o||(t=r=""),this},locked:function(){return!!f},fireWith:function(n,t){return f||(t=t||[],t=[n,t.slice?t.slice():t],s.push(t),o||l()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!c}};return h};i.extend({Deferred:function(t){var f=[["notify","progress",i.Callbacks("memory"),i.Callbacks("memory"),2],["resolve","done",i.Callbacks("once memory"),i.Callbacks("once memory"),0,"resolved"],["reject","fail",i.Callbacks("once memory"),i.Callbacks("once memory"),1,"rejected"]],o="pending",e={state:function(){return o},always:function(){return r.done(arguments).fail(arguments),this},"catch":function(n){return e.then(null,n)},pipe:function(){var n=arguments;return i.Deferred(function(t){i.each(f,function(i,f){var e=u(n[f[4]])&&n[f[4]];r[f[1]](function(){var n=e&&e.apply(this,arguments);n&&u(n.promise)?n.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[f[0]+"With"](this,e?[n]:arguments)})});n=null}).promise()},then:function(t,r,e){function s(t,r,f,e){return function(){var h=this,c=arguments,a=function(){var n,i;if(!(t<o)){if(n=f.apply(h,c),n===r.promise())throw new TypeError("Thenable self-resolution");i=n&&(typeof n=="object"||typeof n=="function")&&n.then;u(i)?e?i.call(n,s(o,r,ut,e),s(o,r,dt,e)):(o++,i.call(n,s(o,r,ut,e),s(o,r,dt,e),s(o,r,ut,r.notifyWith))):(f!==ut&&(h=undefined,c=[n]),(e||r.resolveWith)(h,c))}},l=e?a:function(){try{a()}catch(n){i.Deferred.exceptionHook&&i.Deferred.exceptionHook(n,l.stackTrace);t+1>=o&&(f!==dt&&(h=undefined,c=[n]),r.rejectWith(h,c))}};t?l():(i.Deferred.getStackHook&&(l.stackTrace=i.Deferred.getStackHook()),n.setTimeout(l))}}var o=0;return i.Deferred(function(n){f[0][3].add(s(0,n,u(e)?e:ut,n.notifyWith));f[1][3].add(s(0,n,u(t)?t:ut));f[2][3].add(s(0,n,u(r)?r:dt))}).promise()},promise:function(n){return n!=null?i.extend(n,e):e}},r={};return i.each(f,function(n,t){var i=t[2],u=t[5];e[t[1]]=i.add;u&&i.add(function(){o=u},f[3-n][2].disable,f[3-n][3].disable,f[0][2].lock,f[0][3].lock);i.add(t[3].fire);r[t[0]]=function(){return r[t[0]+"With"](this===r?undefined:this,arguments),this};r[t[0]+"With"]=i.fireWith}),e.promise(r),t&&t.call(r,r),r},when:function(n){var e=arguments.length,t=e,o=Array(t),f=d.call(arguments),r=i.Deferred(),s=function(n){return function(t){o[n]=this;f[n]=arguments.length>1?d.call(arguments):t;--e||r.resolveWith(o,f)}};if(e<=1&&(dr(n,r.done(s(t)).resolve,r.reject,!e),r.state()==="pending"||u(f[t]&&f[t].then)))return r.then();while(t--)dr(f[t],s(t),r.reject);return r.promise()}});gr=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;i.Deferred.exceptionHook=function(t,i){n.console&&n.console.warn&&t&&gr.test(t.name)&&n.console.warn("jQuery.Deferred exception: "+t.message,t.stack,i)};i.readyException=function(t){n.setTimeout(function(){throw t;})};gt=i.Deferred();i.fn.ready=function(n){return gt.then(n).catch(function(n){i.readyException(n)}),this};i.extend({isReady:!1,readyWait:1,ready:function(n){(n===!0?--i.readyWait:i.isReady)||(i.isReady=!0,n!==!0&&--i.readyWait>0)||gt.resolveWith(f,[i])}});i.ready.then=gt.then;f.readyState!=="complete"&&(f.readyState==="loading"||f.documentElement.doScroll)?(f.addEventListener("DOMContentLoaded",ni),n.addEventListener("load",ni)):n.setTimeout(i.ready);var p=function(n,t,r,f,e,o,s){var h=0,l=n.length,c=r==null;if(it(r)==="object"){e=!0;for(h in r)p(n,t,h,r[h],!0,o,s)}else if(f!==undefined&&(e=!0,u(f)||(s=!0),c&&(s?(t.call(n,f),t=null):(c=t,t=function(n,t,r){return c.call(i(n),r)})),t))for(;h<l;h++)t(n[h],r,s?f:f.call(n[h],h,t(n[h],r)));return e?n:c?t.call(n):l?t(n[0],r):o},re=/^-ms-/,ue=/-([a-z])/g;lt=function(n){return n.nodeType===1||n.nodeType===9||!+n.nodeType};at.uid=1;at.prototype={cache:function(n){var t=n[this.expando];return t||(t={},lt(n)&&(n.nodeType?n[this.expando]=t:Object.defineProperty(n,this.expando,{value:t,configurable:!0}))),t},set:function(n,t,i){var r,u=this.cache(n);if(typeof t=="string")u[y(t)]=i;else for(r in t)u[y(r)]=t[r];return u},get:function(n,t){return t===undefined?this.cache(n):n[this.expando]&&n[this.expando][y(t)]},access:function(n,t,i){return t===undefined||t&&typeof t=="string"&&i===undefined?this.get(n,t):(this.set(n,t,i),i!==undefined?i:t)},remove:function(n,t){var u,r=n[this.expando];if(r!==undefined){if(t!==undefined)for(Array.isArray(t)?t=t.map(y):(t=y(t),t=t in r?[t]:t.match(l)||[]),u=t.length;u--;)delete r[t[u]];(t===undefined||i.isEmptyObject(r))&&(n.nodeType?n[this.expando]=undefined:delete n[this.expando])}},hasData:function(n){var t=n[this.expando];return t!==undefined&&!i.isEmptyObject(t)}};var r=new at,o=new at,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,oe=/[A-Z]/g;i.extend({hasData:function(n){return o.hasData(n)||r.hasData(n)},data:function(n,t,i){return o.access(n,t,i)},removeData:function(n,t){o.remove(n,t)},_data:function(n,t,i){return r.access(n,t,i)},_removeData:function(n,t){r.remove(n,t)}});i.fn.extend({data:function(n,t){var f,u,e,i=this[0],s=i&&i.attributes;if(n===undefined){if(this.length&&(e=o.get(i),i.nodeType===1&&!r.get(i,"hasDataAttrs"))){for(f=s.length;f--;)s[f]&&(u=s[f].name,u.indexOf("data-")===0&&(u=y(u.slice(5)),nu(i,u,e[u])));r.set(i,"hasDataAttrs",!0)}return e}return typeof n=="object"?this.each(function(){o.set(this,n)}):p(this,function(t){var r;if(i&&t===undefined)return(r=o.get(i,n),r!==undefined)?r:(r=nu(i,n),r!==undefined)?r:void 0;this.each(function(){o.set(this,n,t)})},null,t,arguments.length>1,null,!0)},removeData:function(n){return this.each(function(){o.remove(this,n)})}});i.extend({queue:function(n,t,u){var f;if(n)return t=(t||"fx")+"queue",f=r.get(n,t),u&&(!f||Array.isArray(u)?f=r.access(n,t,i.makeArray(u)):f.push(u)),f||[]},dequeue:function(n,t){t=t||"fx";var r=i.queue(n,t),e=r.length,u=r.shift(),f=i._queueHooks(n,t),o=function(){i.dequeue(n,t)};u==="inprogress"&&(u=r.shift(),e--);u&&(t==="fx"&&r.unshift("inprogress"),delete f.stop,u.call(n,o,f));!e&&f&&f.empty.fire()},_queueHooks:function(n,t){var u=t+"queueHooks";return r.get(n,u)||r.access(n,u,{empty:i.Callbacks("once memory").add(function(){r.remove(n,[t+"queue",u])})})}});i.fn.extend({queue:function(n,t){var r=2;return(typeof n!="string"&&(t=n,n="fx",r--),arguments.length<r)?i.queue(this[0],n):t===undefined?this:this.each(function(){var r=i.queue(this,n,t);i._queueHooks(this,n);n==="fx"&&r[0]!=="inprogress"&&i.dequeue(this,n)})},dequeue:function(n){return this.each(function(){i.dequeue(this,n)})},clearQueue:function(n){return this.queue(n||"fx",[])},promise:function(n,t){var u,e=1,o=i.Deferred(),f=this,s=this.length,h=function(){--e||o.resolveWith(f,[f])};for(typeof n!="string"&&(t=n,n=undefined),n=n||"fx";s--;)u=r.get(f[s],n+"queueHooks"),u&&u.empty&&(e++,u.empty.add(h));return h(),o.promise(t)}});var tu=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,vt=new RegExp("^(?:([+-])=|)("+tu+")([a-z%]*)$","i"),w=["Top","Right","Bottom","Left"],ti=function(n,t){return n=t||n,n.style.display==="none"||n.style.display===""&&i.contains(n.ownerDocument,n)&&i.css(n,"display")==="none"},iu=function(n,t,i,r){var f,u,e={};for(u in t)e[u]=n.style[u],n.style[u]=t[u];f=i.apply(n,r||[]);for(u in t)n.style[u]=e[u];return f};ai={};i.fn.extend({show:function(){return ft(this,!0)},hide:function(){return ft(this)},toggle:function(n){return typeof n=="boolean"?n?this.show():this.hide():this.each(function(){ti(this)?i(this).show():i(this).hide()})}});var uu=/^(?:checkbox|radio)$/i,fu=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,eu=/^$|^module$|\/(?:java|ecma)script/i,c={option:[1,"<select multiple='multiple'>","<\/select>"],thead:[1,"<table>","<\/table>"],col:[2,"<table><colgroup>","<\/colgroup><\/table>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],td:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],_default:[0,"",""]};c.optgroup=c.option;c.tbody=c.tfoot=c.colgroup=c.caption=c.thead;c.th=c.td;ou=/<|&#?\w+;/,function(){var i=f.createDocumentFragment(),n=i.appendChild(f.createElement("div")),t=f.createElement("input");t.setAttribute("type","radio");t.setAttribute("checked","checked");t.setAttribute("name","t");n.appendChild(t);e.checkClone=n.cloneNode(!0).cloneNode(!0).lastChild.checked;n.innerHTML="<textarea>x<\/textarea>";e.noCloneChecked=!!n.cloneNode(!0).lastChild.defaultValue}();var ii=f.documentElement,ce=/^key/,le=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,hu=/^([^.]*)(?:\.(.+)|)/;i.event={global:{},add:function(n,t,u,f,e){var v,y,w,p,b,h,s,c,o,k,d,a=r.get(n);if(a)for(u.handler&&(v=u,u=v.handler,e=v.selector),e&&i.find.matchesSelector(ii,e),u.guid||(u.guid=i.guid++),(p=a.events)||(p=a.events={}),(y=a.handle)||(y=a.handle=function(t){return typeof i!="undefined"&&i.event.triggered!==t.type?i.event.dispatch.apply(n,arguments):undefined}),t=(t||"").match(l)||[""],b=t.length;b--;)(w=hu.exec(t[b])||[],o=d=w[1],k=(w[2]||"").split(".").sort(),o)&&(s=i.event.special[o]||{},o=(e?s.delegateType:s.bindType)||o,s=i.event.special[o]||{},h=i.extend({type:o,origType:d,data:f,handler:u,guid:u.guid,selector:e,needsContext:e&&i.expr.match.needsContext.test(e),namespace:k.join(".")},v),(c=p[o])||(c=p[o]=[],c.delegateCount=0,s.setup&&s.setup.call(n,f,k,y)!==!1||n.addEventListener&&n.addEventListener(o,y)),s.add&&(s.add.call(n,h),h.handler.guid||(h.handler.guid=u.guid)),e?c.splice(c.delegateCount++,0,h):c.push(h),i.event.global[o]=!0)},remove:function(n,t,u,f,e){var y,k,h,v,p,s,c,a,o,b,d,w=r.hasData(n)&&r.get(n);if(w&&(v=w.events)){for(t=(t||"").match(l)||[""],p=t.length;p--;){if(h=hu.exec(t[p])||[],o=d=h[1],b=(h[2]||"").split(".").sort(),!o){for(o in v)i.event.remove(n,o+t[p],u,f,!0);continue}for(c=i.event.special[o]||{},o=(f?c.delegateType:c.bindType)||o,a=v[o]||[],h=h[2]&&new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"),k=y=a.length;y--;)s=a[y],(e||d===s.origType)&&(!u||u.guid===s.guid)&&(!h||h.test(s.namespace))&&(!f||f===s.selector||f==="**"&&s.selector)&&(a.splice(y,1),s.selector&&a.delegateCount--,c.remove&&c.remove.call(n,s));k&&!a.length&&(c.teardown&&c.teardown.call(n,b,w.handle)!==!1||i.removeEvent(n,o,w.handle),delete v[o])}i.isEmptyObject(v)&&r.remove(n,"handle events")}},dispatch:function(n){var t=i.event.fix(n),u,c,s,e,f,l,h=new Array(arguments.length),a=(r.get(this,"events")||{})[t.type]||[],o=i.event.special[t.type]||{};for(h[0]=t,u=1;u<arguments.length;u++)h[u]=arguments[u];if(t.delegateTarget=this,!o.preDispatch||o.preDispatch.call(this,t)!==!1){for(l=i.event.handlers.call(this,t,a),u=0;(e=l[u++])&&!t.isPropagationStopped();)for(t.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!t.isImmediatePropagationStopped();)(!t.rnamespace||t.rnamespace.test(f.namespace))&&(t.handleObj=f,t.data=f.data,s=((i.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,h),s!==undefined&&(t.result=s)===!1&&(t.preventDefault(),t.stopPropagation()));return o.postDispatch&&o.postDispatch.call(this,t),t.result}},handlers:function(n,t){var f,e,u,o,s,c=[],h=t.delegateCount,r=n.target;if(h&&r.nodeType&&!(n.type==="click"&&n.button>=1))for(;r!==this;r=r.parentNode||this)if(r.nodeType===1&&!(n.type==="click"&&r.disabled===!0)){for(o=[],s={},f=0;f<h;f++)e=t[f],u=e.selector+" ",s[u]===undefined&&(s[u]=e.needsContext?i(u,this).index(r)>-1:i.find(u,this,null,[r]).length),s[u]&&o.push(e);o.length&&c.push({elem:r,handlers:o})}return r=this,h<t.length&&c.push({elem:r,handlers:t.slice(h)}),c},addProp:function(n,t){Object.defineProperty(i.Event.prototype,n,{enumerable:!0,configurable:!0,get:u(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[n]},set:function(t){Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(n){return n[i.expando]?n:new i.Event(n)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==cu()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===cu()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&v(this,"input"))return this.click(),!1},_default:function(n){return v(n.target,"a")}},beforeunload:{postDispatch:function(n){n.result!==undefined&&n.originalEvent&&(n.originalEvent.returnValue=n.result)}}}};i.removeEvent=function(n,t,i){n.removeEventListener&&n.removeEventListener(t,i)};i.Event=function(n,t){if(!(this instanceof i.Event))return new i.Event(n,t);n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented||n.defaultPrevented===undefined&&n.returnValue===!1?ri:et,this.target=n.target&&n.target.nodeType===3?n.target.parentNode:n.target,this.currentTarget=n.currentTarget,this.relatedTarget=n.relatedTarget):this.type=n;t&&i.extend(this,t);this.timeStamp=n&&n.timeStamp||Date.now();this[i.expando]=!0};i.Event.prototype={constructor:i.Event,isDefaultPrevented:et,isPropagationStopped:et,isImmediatePropagationStopped:et,isSimulated:!1,preventDefault:function(){var n=this.originalEvent;this.isDefaultPrevented=ri;n&&!this.isSimulated&&n.preventDefault()},stopPropagation:function(){var n=this.originalEvent;this.isPropagationStopped=ri;n&&!this.isSimulated&&n.stopPropagation()},stopImmediatePropagation:function(){var n=this.originalEvent;this.isImmediatePropagationStopped=ri;n&&!this.isSimulated&&n.stopImmediatePropagation();this.stopPropagation()}};i.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(n){var t=n.button;return n.which==null&&ce.test(n.type)?n.charCode!=null?n.charCode:n.keyCode:!n.which&&t!==undefined&&le.test(n.type)?t&1?1:t&2?3:t&4?2:0:n.which}},i.event.addProp);i.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(n,t){i.event.special[n]={delegateType:t,bindType:t,handle:function(n){var u,f=this,r=n.relatedTarget,e=n.handleObj;return r&&(r===f||i.contains(f,r))||(n.type=e.origType,u=e.handler.apply(this,arguments),n.type=t),u}}});i.fn.extend({on:function(n,t,i,r){return yi(this,n,t,i,r)},one:function(n,t,i,r){return yi(this,n,t,i,r,1)},off:function(n,t,r){var u,f;if(n&&n.preventDefault&&n.handleObj)return u=n.handleObj,i(n.delegateTarget).off(u.namespace?u.origType+"."+u.namespace:u.origType,u.selector,u.handler),this;if(typeof n=="object"){for(f in n)this.off(f,t,n[f]);return this}return(t===!1||typeof t=="function")&&(r=t,t=undefined),r===!1&&(r=et),this.each(function(){i.event.remove(this,n,r,t)})}});var ae=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ve=/<script|<style|<link/i,ye=/checked\s*(?:[^=]|=\s*.checked.)/i,pe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;i.extend({htmlPrefilter:function(n){return n.replace(ae,"<$1><\/$2>")},clone:function(n,t,r){var u,c,o,f,h=n.cloneNode(!0),l=i.contains(n.ownerDocument,n);if(!e.noCloneChecked&&(n.nodeType===1||n.nodeType===11)&&!i.isXMLDoc(n))for(f=s(h),o=s(n),u=0,c=o.length;u<c;u++)ke(o[u],f[u]);if(t)if(r)for(o=o||s(n),f=f||s(h),u=0,c=o.length;u<c;u++)au(o[u],f[u]);else au(n,h);return f=s(h,"script"),f.length>0&&vi(f,!l&&s(n,"script")),h},cleanData:function(n){for(var u,t,f,s=i.event.special,e=0;(t=n[e])!==undefined;e++)if(lt(t)){if(u=t[r.expando]){if(u.events)for(f in u.events)s[f]?i.event.remove(t,f):i.removeEvent(t,f,u.handle);t[r.expando]=undefined}t[o.expando]&&(t[o.expando]=undefined)}}});i.fn.extend({detach:function(n){return vu(this,n,!0)},remove:function(n){return vu(this,n)},text:function(n){return p(this,function(n){return n===undefined?i.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=n)})},null,n,arguments.length)},append:function(){return ot(this,arguments,function(n){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=lu(this,n);t.appendChild(n)}})},prepend:function(){return ot(this,arguments,function(n){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=lu(this,n);t.insertBefore(n,t.firstChild)}})},before:function(){return ot(this,arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this)})},after:function(){return ot(this,arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling)})},empty:function(){for(var n,t=0;(n=this[t])!=null;t++)n.nodeType===1&&(i.cleanData(s(n,!1)),n.textContent="");return this},clone:function(n,t){return n=n==null?!1:n,t=t==null?n:t,this.map(function(){return i.clone(this,n,t)})},html:function(n){return p(this,function(n){var t=this[0]||{},r=0,u=this.length;if(n===undefined&&t.nodeType===1)return t.innerHTML;if(typeof n=="string"&&!ve.test(n)&&!c[(fu.exec(n)||["",""])[1].toLowerCase()]){n=i.htmlPrefilter(n);try{for(;r<u;r++)t=this[r]||{},t.nodeType===1&&(i.cleanData(s(t,!1)),t.innerHTML=n);t=0}catch(f){}}t&&this.empty().append(n)},null,n,arguments.length)},replaceWith:function(){var n=[];return ot(this,arguments,function(t){var r=this.parentNode;i.inArray(this,n)<0&&(i.cleanData(s(this)),r&&r.replaceChild(t,this))},n)}});i.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(n,t){i.fn[n]=function(n){for(var u,f=[],e=i(n),o=e.length-1,r=0;r<=o;r++)u=r===o?this:this.clone(!0),i(e[r])[t](u),si.apply(f,u.get());return this.pushStack(f)}});var pi=new RegExp("^("+tu+")(?!px)[a-z%]+$","i"),ui=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=n),i.getComputedStyle(t)},de=new RegExp(w.join("|"),"i");(function(){function r(){if(t){o.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0";t.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%";ii.appendChild(o).appendChild(t);var i=n.getComputedStyle(t);s=i.top!=="1%";a=u(i.marginLeft)===12;t.style.right="60%";l=u(i.right)===36;h=u(i.width)===36;t.style.position="absolute";c=t.offsetWidth===36||"absolute";ii.removeChild(o);t=null}}function u(n){return Math.round(parseFloat(n))}var s,h,c,l,a,o=f.createElement("div"),t=f.createElement("div");t.style&&(t.style.backgroundClip="content-box",t.cloneNode(!0).style.backgroundClip="",e.clearCloneStyle=t.style.backgroundClip==="content-box",i.extend(e,{boxSizingReliable:function(){return r(),h},pixelBoxStyles:function(){return r(),l},pixelPosition:function(){return r(),s},reliableMarginLeft:function(){return r(),a},scrollboxSize:function(){return r(),c}}))})();var ge=/^(none|table(?!-c[ea]).+)/,pu=/^--/,no={position:"absolute",visibility:"hidden",display:"block"},wu={letterSpacing:"0",fontWeight:"400"},bu=["Webkit","Moz","ms"],ku=f.createElement("div").style;i.extend({cssHooks:{opacity:{get:function(n,t){if(t){var i=yt(n,"opacity");return i===""?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(n,t,r,u){if(n&&n.nodeType!==3&&n.nodeType!==8&&n.style){var f,s,o,c=y(t),l=pu.test(t),h=n.style;if(l||(t=du(c)),o=i.cssHooks[t]||i.cssHooks[c],r!==undefined){if(s=typeof r,s==="string"&&(f=vt.exec(r))&&f[1]&&(r=ru(n,t,f),s="number"),r==null||r!==r)return;s==="number"&&(r+=f&&f[3]||(i.cssNumber[c]?"":"px"));e.clearCloneStyle||r!==""||t.indexOf("background")!==0||(h[t]="inherit");o&&"set"in o&&(r=o.set(n,r,u))===undefined||(l?h.setProperty(t,r):h[t]=r)}else return o&&"get"in o&&(f=o.get(n,!1,u))!==undefined?f:h[t]}},css:function(n,t,r,u){var f,o,e,s=y(t),h=pu.test(t);return(h||(t=du(s)),e=i.cssHooks[t]||i.cssHooks[s],e&&"get"in e&&(f=e.get(n,!0,r)),f===undefined&&(f=yt(n,t,u)),f==="normal"&&t in wu&&(f=wu[t]),r===""||r)?(o=parseFloat(f),r===!0||isFinite(o)?o||0:f):f}});i.each(["height","width"],function(n,t){i.cssHooks[t]={get:function(n,r,u){if(r)return ge.test(i.css(n,"display"))&&(!n.getClientRects().length||!n.getBoundingClientRect().width)?iu(n,no,function(){return nf(n,t,u)}):nf(n,t,u)},set:function(n,r,u){var s,f=ui(n),h=i.css(n,"boxSizing",!1,f)==="border-box",o=u&&wi(n,t,u,h,f);return h&&e.scrollboxSize()===f.position&&(o-=Math.ceil(n["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(f[t])-wi(n,t,"border",!1,f)-.5)),o&&(s=vt.exec(r))&&(s[3]||"px")!=="px"&&(n.style[t]=r,r=i.css(n,t)),gu(n,r,o)}}});i.cssHooks.marginLeft=yu(e.reliableMarginLeft,function(n,t){if(t)return(parseFloat(yt(n,"marginLeft"))||n.getBoundingClientRect().left-iu(n,{marginLeft:0},function(){return n.getBoundingClientRect().left}))+"px"});i.each({margin:"",padding:"",border:"Width"},function(n,t){i.cssHooks[n+t]={expand:function(i){for(var r=0,f={},u=typeof i=="string"?i.split(" "):[i];r<4;r++)f[n+w[r]+t]=u[r]||u[r-2]||u[0];return f}};n!=="margin"&&(i.cssHooks[n+t].set=gu)});i.fn.extend({css:function(n,t){return p(this,function(n,t,r){var f,e,o={},u=0;if(Array.isArray(t)){for(f=ui(n),e=t.length;u<e;u++)o[t[u]]=i.css(n,t[u],!1,f);return o}return r!==undefined?i.style(n,t,r):i.css(n,t)},n,t,arguments.length>1)}});i.Tween=h;h.prototype={constructor:h,init:function(n,t,r,u,f,e){this.elem=n;this.prop=r;this.easing=f||i.easing._default;this.options=t;this.start=this.now=this.cur();this.end=u;this.unit=e||(i.cssNumber[r]?"":"px")},cur:function(){var n=h.propHooks[this.prop];return n&&n.get?n.get(this):h.propHooks._default.get(this)},run:function(n){var t,r=h.propHooks[this.prop];return this.pos=this.options.duration?t=i.easing[this.easing](n,this.options.duration*n,0,1,this.options.duration):t=n,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):h.propHooks._default.set(this),this}};h.prototype.init.prototype=h.prototype;h.propHooks={_default:{get:function(n){var t;return n.elem.nodeType!==1||n.elem[n.prop]!=null&&n.elem.style[n.prop]==null?n.elem[n.prop]:(t=i.css(n.elem,n.prop,""),!t||t==="auto"?0:t)},set:function(n){i.fx.step[n.prop]?i.fx.step[n.prop](n):n.elem.nodeType===1&&(n.elem.style[i.cssProps[n.prop]]!=null||i.cssHooks[n.prop])?i.style(n.elem,n.prop,n.now+n.unit):n.elem[n.prop]=n.now}}};h.propHooks.scrollTop=h.propHooks.scrollLeft={set:function(n){n.elem.nodeType&&n.elem.parentNode&&(n.elem[n.prop]=n.now)}};i.easing={linear:function(n){return n},swing:function(n){return.5-Math.cos(n*Math.PI)/2},_default:"swing"};i.fx=h.prototype.init;i.fx.step={};tf=/^(?:toggle|show|hide)$/;rf=/queueHooks$/;i.Animation=i.extend(a,{tweeners:{"*":[function(n,t){var i=this.createTween(n,t);return ru(i.elem,n,vt.exec(t),i),i}]},tweener:function(n,t){u(n)?(t=n,n=["*"]):n=n.match(l);for(var i,r=0,f=n.length;r<f;r++)i=n[r],a.tweeners[i]=a.tweeners[i]||[],a.tweeners[i].unshift(t)},prefilters:[io],prefilter:function(n,t){t?a.prefilters.unshift(n):a.prefilters.push(n)}});i.speed=function(n,t,r){var f=n&&typeof n=="object"?i.extend({},n):{complete:r||!r&&t||u(n)&&n,duration:n,easing:r&&t||t&&!u(t)&&t};return i.fx.off?f.duration=0:typeof f.duration!="number"&&(f.duration=f.duration in i.fx.speeds?i.fx.speeds[f.duration]:i.fx.speeds._default),(f.queue==null||f.queue===!0)&&(f.queue="fx"),f.old=f.complete,f.complete=function(){u(f.old)&&f.old.call(this);f.queue&&i.dequeue(this,f.queue)},f};i.fn.extend({fadeTo:function(n,t,i,r){return this.filter(ti).css("opacity",0).show().end().animate({opacity:t},n,i,r)},animate:function(n,t,u,f){var s=i.isEmptyObject(n),o=i.speed(t,u,f),e=function(){var t=a(this,i.extend({},n),o);(s||r.get(this,"finish"))&&t.stop(!0)};return e.finish=e,s||o.queue===!1?this.each(e):this.queue(o.queue,e)},stop:function(n,t,u){var f=function(n){var t=n.stop;delete n.stop;t(u)};return typeof n!="string"&&(u=t,t=n,n=undefined),t&&n!==!1&&this.queue(n||"fx",[]),this.each(function(){var s=!0,t=n!=null&&n+"queueHooks",o=i.timers,e=r.get(this);if(t)e[t]&&e[t].stop&&f(e[t]);else for(t in e)e[t]&&e[t].stop&&rf.test(t)&&f(e[t]);for(t=o.length;t--;)o[t].elem===this&&(n==null||o[t].queue===n)&&(o[t].anim.stop(u),s=!1,o.splice(t,1));(s||!u)&&i.dequeue(this,n)})},finish:function(n){return n!==!1&&(n=n||"fx"),this.each(function(){var t,e=r.get(this),u=e[n+"queue"],o=e[n+"queueHooks"],f=i.timers,s=u?u.length:0;for(e.finish=!0,i.queue(this,n,[]),o&&o.stop&&o.stop.call(this,!0),t=f.length;t--;)f[t].elem===this&&f[t].queue===n&&(f[t].anim.stop(!0),f.splice(t,1));for(t=0;t<s;t++)u[t]&&u[t].finish&&u[t].finish.call(this);delete e.finish})}});i.each(["toggle","show","hide"],function(n,t){var r=i.fn[t];i.fn[t]=function(n,i,u){return n==null||typeof n=="boolean"?r.apply(this,arguments):this.animate(ei(t,!0),n,i,u)}});i.each({slideDown:ei("show"),slideUp:ei("hide"),slideToggle:ei("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(n,t){i.fn[n]=function(n,i,r){return this.animate(t,n,i,r)}});i.timers=[];i.fx.tick=function(){var r,n=0,t=i.timers;for(st=Date.now();n<t.length;n++)r=t[n],r()||t[n]!==r||t.splice(n--,1);t.length||i.fx.stop();st=undefined};i.fx.timer=function(n){i.timers.push(n);i.fx.start()};i.fx.interval=13;i.fx.start=function(){fi||(fi=!0,bi())};i.fx.stop=function(){fi=null};i.fx.speeds={slow:600,fast:200,_default:400};i.fn.delay=function(t,r){return t=i.fx?i.fx.speeds[t]||t:t,r=r||"fx",this.queue(r,function(i,r){var u=n.setTimeout(i,t);r.stop=function(){n.clearTimeout(u)}})},function(){var n=f.createElement("input"),t=f.createElement("select"),i=t.appendChild(f.createElement("option"));n.type="checkbox";e.checkOn=n.value!=="";e.optSelected=i.selected;n=f.createElement("input");n.value="t";n.type="radio";e.radioValue=n.value==="t"}();ht=i.expr.attrHandle;i.fn.extend({attr:function(n,t){return p(this,i.attr,n,t,arguments.length>1)},removeAttr:function(n){return this.each(function(){i.removeAttr(this,n)})}});i.extend({attr:function(n,t,r){var u,f,e=n.nodeType;if(e!==3&&e!==8&&e!==2){if(typeof n.getAttribute=="undefined")return i.prop(n,t,r);if(e===1&&i.isXMLDoc(n)||(f=i.attrHooks[t.toLowerCase()]||(i.expr.match.bool.test(t)?ef:undefined)),r!==undefined){if(r===null){i.removeAttr(n,t);return}return f&&"set"in f&&(u=f.set(n,r,t))!==undefined?u:(n.setAttribute(t,r+""),r)}return f&&"get"in f&&(u=f.get(n,t))!==null?u:(u=i.find.attr(n,t),u==null?undefined:u)}},attrHooks:{type:{set:function(n,t){if(!e.radioValue&&t==="radio"&&v(n,"input")){var i=n.value;return n.setAttribute("type",t),i&&(n.value=i),t}}}},removeAttr:function(n,t){var i,u=0,r=t&&t.match(l);if(r&&n.nodeType===1)while(i=r[u++])n.removeAttribute(i)}});ef={set:function(n,t,r){return t===!1?i.removeAttr(n,r):n.setAttribute(r,r),r}};i.each(i.expr.match.bool.source.match(/\w+/g),function(n,t){var r=ht[t]||i.find.attr;ht[t]=function(n,t,i){var f,e,u=t.toLowerCase();return i||(e=ht[u],ht[u]=f,f=r(n,t,i)!=null?u:null,ht[u]=e),f}});of=/^(?:input|select|textarea|button)$/i;sf=/^(?:a|area)$/i;i.fn.extend({prop:function(n,t){return p(this,i.prop,n,t,arguments.length>1)},removeProp:function(n){return this.each(function(){delete this[i.propFix[n]||n]})}});i.extend({prop:function(n,t,r){var f,u,e=n.nodeType;if(e!==3&&e!==8&&e!==2)return(e===1&&i.isXMLDoc(n)||(t=i.propFix[t]||t,u=i.propHooks[t]),r!==undefined)?u&&"set"in u&&(f=u.set(n,r,t))!==undefined?f:n[t]=r:u&&"get"in u&&(f=u.get(n,t))!==null?f:n[t]},propHooks:{tabIndex:{get:function(n){var t=i.find.attr(n,"tabindex");return t?parseInt(t,10):of.test(n.nodeName)||sf.test(n.nodeName)&&n.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});e.optSelected||(i.propHooks.selected={get:function(n){var t=n.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(n){var t=n.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}});i.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){i.propFix[this.toLowerCase()]=this});i.fn.extend({addClass:function(n){var f,r,t,e,o,h,s,c=0;if(u(n))return this.each(function(t){i(this).addClass(n.call(this,t,nt(this)))});if(f=ki(n),f.length)while(r=this[c++])if(e=nt(r),t=r.nodeType===1&&" "+g(e)+" ",t){for(h=0;o=f[h++];)t.indexOf(" "+o+" ")<0&&(t+=o+" ");s=g(t);e!==s&&r.setAttribute("class",s)}return this},removeClass:function(n){var f,r,t,e,o,h,s,c=0;if(u(n))return this.each(function(t){i(this).removeClass(n.call(this,t,nt(this)))});if(!arguments.length)return this.attr("class","");if(f=ki(n),f.length)while(r=this[c++])if(e=nt(r),t=r.nodeType===1&&" "+g(e)+" ",t){for(h=0;o=f[h++];)while(t.indexOf(" "+o+" ")>-1)t=t.replace(" "+o+" "," ");s=g(t);e!==s&&r.setAttribute("class",s)}return this},toggleClass:function(n,t){var f=typeof n,e=f==="string"||Array.isArray(n);return typeof t=="boolean"&&e?t?this.addClass(n):this.removeClass(n):u(n)?this.each(function(r){i(this).toggleClass(n.call(this,r,nt(this),t),t)}):this.each(function(){var t,o,u,s;if(e)for(o=0,u=i(this),s=ki(n);t=s[o++];)u.hasClass(t)?u.removeClass(t):u.addClass(t);else(n===undefined||f==="boolean")&&(t=nt(this),t&&r.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||n===!1?"":r.get(this,"__className__")||""))})},hasClass:function(n){for(var t,r=0,i=" "+n+" ";t=this[r++];)if(t.nodeType===1&&(" "+g(nt(t))+" ").indexOf(i)>-1)return!0;return!1}});hf=/\r/g;i.fn.extend({val:function(n){var t,r,e,f=this[0];return arguments.length?(e=u(n),this.each(function(r){var u;this.nodeType===1&&(u=e?n.call(this,r,i(this).val()):n,u==null?u="":typeof u=="number"?u+="":Array.isArray(u)&&(u=i.map(u,function(n){return n==null?"":n+""})),t=i.valHooks[this.type]||i.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&t.set(this,u,"value")!==undefined||(this.value=u))})):f?(t=i.valHooks[f.type]||i.valHooks[f.nodeName.toLowerCase()],t&&"get"in t&&(r=t.get(f,"value"))!==undefined)?r:(r=f.value,typeof r=="string")?r.replace(hf,""):r==null?"":r:void 0}});i.extend({valHooks:{option:{get:function(n){var t=i.find.attr(n,"value");return t!=null?t:g(i.text(n))}},select:{get:function(n){for(var e,t,o=n.options,u=n.selectedIndex,f=n.type==="select-one",s=f?null:[],h=f?u+1:o.length,r=u<0?h:f?u:0;r<h;r++)if(t=o[r],(t.selected||r===u)&&!t.disabled&&(!t.parentNode.disabled||!v(t.parentNode,"optgroup"))){if(e=i(t).val(),f)return e;s.push(e)}return s},set:function(n,t){for(var u,r,f=n.options,e=i.makeArray(t),o=f.length;o--;)r=f[o],(r.selected=i.inArray(i.valHooks.option.get(r),e)>-1)&&(u=!0);return u||(n.selectedIndex=-1),e}}}});i.each(["radio","checkbox"],function(){i.valHooks[this]={set:function(n,t){if(Array.isArray(t))return n.checked=i.inArray(i(n).val(),t)>-1}};e.checkOn||(i.valHooks[this].get=function(n){return n.getAttribute("value")===null?"on":n.value})});e.focusin="onfocusin"in n;di=/^(?:focusinfocus|focusoutblur)$/;gi=function(n){n.stopPropagation()};i.extend(i.event,{trigger:function(t,e,o,s){var k,c,l,d,v,y,a,w,b=[o||f],h=kt.call(t,"type")?t.type:t,p=kt.call(t,"namespace")?t.namespace.split("."):[];if((c=w=l=o=o||f,o.nodeType!==3&&o.nodeType!==8)&&!di.test(h+i.event.triggered)&&(h.indexOf(".")>-1&&(p=h.split("."),h=p.shift(),p.sort()),v=h.indexOf(":")<0&&"on"+h,t=t[i.expando]?t:new i.Event(h,typeof t=="object"&&t),t.isTrigger=s?2:3,t.namespace=p.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=undefined,t.target||(t.target=o),e=e==null?[t]:i.makeArray(e,[t]),a=i.event.special[h]||{},s||!a.trigger||a.trigger.apply(o,e)!==!1)){if(!s&&!a.noBubble&&!tt(o)){for(d=a.delegateType||h,di.test(d+h)||(c=c.parentNode);c;c=c.parentNode)b.push(c),l=c;l===(o.ownerDocument||f)&&b.push(l.defaultView||l.parentWindow||n)}for(k=0;(c=b[k++])&&!t.isPropagationStopped();)w=c,t.type=k>1?d:a.bindType||h,y=(r.get(c,"events")||{})[t.type]&&r.get(c,"handle"),y&&y.apply(c,e),y=v&&c[v],y&&y.apply&&lt(c)&&(t.result=y.apply(c,e),t.result===!1&&t.preventDefault());return t.type=h,s||t.isDefaultPrevented()||(!a._default||a._default.apply(b.pop(),e)===!1)&&lt(o)&&v&&u(o[h])&&!tt(o)&&(l=o[v],l&&(o[v]=null),i.event.triggered=h,t.isPropagationStopped()&&w.addEventListener(h,gi),o[h](),t.isPropagationStopped()&&w.removeEventListener(h,gi),i.event.triggered=undefined,l&&(o[v]=l)),t.result}},simulate:function(n,t,r){var u=i.extend(new i.Event,r,{type:n,isSimulated:!0});i.event.trigger(u,null,t)}});i.fn.extend({trigger:function(n,t){return this.each(function(){i.event.trigger(n,t,this)})},triggerHandler:function(n,t){var r=this[0];if(r)return i.event.trigger(n,t,r,!0)}});e.focusin||i.each({focus:"focusin",blur:"focusout"},function(n,t){var u=function(n){i.event.simulate(t,n.target,i.event.fix(n))};i.event.special[t]={setup:function(){var i=this.ownerDocument||this,f=r.access(i,t);f||i.addEventListener(n,u,!0);r.access(i,t,(f||0)+1)},teardown:function(){var i=this.ownerDocument||this,f=r.access(i,t)-1;f?r.access(i,t,f):(i.removeEventListener(n,u,!0),r.remove(i,t))}}});var pt=n.location,cf=Date.now(),nr=/\?/;i.parseXML=function(t){var r;if(!t||typeof t!="string")return null;try{r=(new n.DOMParser).parseFromString(t,"text/xml")}catch(u){r=undefined}return(!r||r.getElementsByTagName("parsererror").length)&&i.error("Invalid XML: "+t),r};var uo=/\[\]$/,lf=/\r?\n/g,fo=/^(?:submit|button|image|reset|file)$/i,eo=/^(?:input|select|textarea|keygen)/i;i.param=function(n,t){var r,f=[],e=function(n,t){var i=u(t)?t():t;f[f.length]=encodeURIComponent(n)+"="+encodeURIComponent(i==null?"":i)};if(Array.isArray(n)||n.jquery&&!i.isPlainObject(n))i.each(n,function(){e(this.name,this.value)});else for(r in n)tr(r,n[r],t,e);return f.join("&")};i.fn.extend({serialize:function(){return i.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var n=i.prop(this,"elements");return n?i.makeArray(n):this}).filter(function(){var n=this.type;return this.name&&!i(this).is(":disabled")&&eo.test(this.nodeName)&&!fo.test(n)&&(this.checked||!uu.test(n))}).map(function(n,t){var r=i(this).val();return r==null?null:Array.isArray(r)?i.map(r,function(n){return{name:t.name,value:n.replace(lf,"\r\n")}}):{name:t.name,value:r.replace(lf,"\r\n")}}).get()}});var oo=/%20/g,so=/#.*$/,ho=/([?&])_=[^&]*/,co=/^(.*?):[ \t]*([^\r\n]*)$/mg,lo=/^(?:GET|HEAD)$/,ao=/^\/\//,af={},ir={},vf="*/".concat("*"),rr=f.createElement("a");return rr.href=pt.href,i.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:pt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(pt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":vf,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":i.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(n,t){return t?ur(ur(n,i.ajaxSettings),t):ur(i.ajaxSettings,n)},ajaxPrefilter:yf(af),ajaxTransport:yf(ir),ajax:function(t,r){function b(t,r,f,l){var y,rt,g,p,b,a=r;s||(s=!0,d&&n.clearTimeout(d),c=undefined,k=l||"",e.readyState=t>0?4:0,y=t>=200&&t<300||t===304,f&&(p=vo(u,e,f)),p=yo(u,p,e,y),y?(u.ifModified&&(b=e.getResponseHeader("Last-Modified"),b&&(i.lastModified[o]=b),b=e.getResponseHeader("etag"),b&&(i.etag[o]=b)),t===204||u.type==="HEAD"?a="nocontent":t===304?a="notmodified":(a=p.state,rt=p.data,g=p.error,y=!g)):(g=a,(t||!a)&&(a="error",t<0&&(t=0))),e.status=t,e.statusText=(r||a)+"",y?tt.resolveWith(h,[rt,a,e]):tt.rejectWith(h,[e,a,g]),e.statusCode(w),w=undefined,v&&nt.trigger(y?"ajaxSuccess":"ajaxError",[e,u,y?rt:g]),it.fireWith(h,[e,a]),v&&(nt.trigger("ajaxComplete",[e,u]),--i.active||i.event.trigger("ajaxStop")))}typeof t=="object"&&(r=t,t=undefined);r=r||{};var c,o,k,y,d,a,s,v,g,p,u=i.ajaxSetup({},r),h=u.context||u,nt=u.context&&(h.nodeType||h.jquery)?i(h):i.event,tt=i.Deferred(),it=i.Callbacks("once memory"),w=u.statusCode||{},rt={},ut={},ft="canceled",e={readyState:0,getResponseHeader:function(n){var t;if(s){if(!y)for(y={};t=co.exec(k);)y[t[1].toLowerCase()]=t[2];t=y[n.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return s?k:null},setRequestHeader:function(n,t){return s==null&&(n=ut[n.toLowerCase()]=ut[n.toLowerCase()]||n,rt[n]=t),this},overrideMimeType:function(n){return s==null&&(u.mimeType=n),this},statusCode:function(n){var t;if(n)if(s)e.always(n[e.status]);else for(t in n)w[t]=[w[t],n[t]];return this},abort:function(n){var t=n||ft;return c&&c.abort(t),b(0,t),this}};if(tt.promise(e),u.url=((t||u.url||pt.href)+"").replace(ao,pt.protocol+"//"),u.type=r.method||r.type||u.method||u.type,u.dataTypes=(u.dataType||"*").toLowerCase().match(l)||[""],u.crossDomain==null){a=f.createElement("a");try{a.href=u.url;a.href=a.href;u.crossDomain=rr.protocol+"//"+rr.host!=a.protocol+"//"+a.host}catch(et){u.crossDomain=!0}}if(u.data&&u.processData&&typeof u.data!="string"&&(u.data=i.param(u.data,u.traditional)),pf(af,u,r,e),s)return e;v=i.event&&u.global;v&&i.active++==0&&i.event.trigger("ajaxStart");u.type=u.type.toUpperCase();u.hasContent=!lo.test(u.type);o=u.url.replace(so,"");u.hasContent?u.data&&u.processData&&(u.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(u.data=u.data.replace(oo,"+")):(p=u.url.slice(o.length),u.data&&(u.processData||typeof u.data=="string")&&(o+=(nr.test(o)?"&":"?")+u.data,delete u.data),u.cache===!1&&(o=o.replace(ho,"$1"),p=(nr.test(o)?"&":"?")+"_="+cf+++p),u.url=o+p);u.ifModified&&(i.lastModified[o]&&e.setRequestHeader("If-Modified-Since",i.lastModified[o]),i.etag[o]&&e.setRequestHeader("If-None-Match",i.etag[o]));(u.data&&u.hasContent&&u.contentType!==!1||r.contentType)&&e.setRequestHeader("Content-Type",u.contentType);e.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+(u.dataTypes[0]!=="*"?", "+vf+"; q=0.01":""):u.accepts["*"]);for(g in u.headers)e.setRequestHeader(g,u.headers[g]);if(u.beforeSend&&(u.beforeSend.call(h,e,u)===!1||s))return e.abort();if(ft="abort",it.add(u.complete),e.done(u.success),e.fail(u.error),c=pf(ir,u,r,e),c){if(e.readyState=1,v&&nt.trigger("ajaxSend",[e,u]),s)return e;u.async&&u.timeout>0&&(d=n.setTimeout(function(){e.abort("timeout")},u.timeout));try{s=!1;c.send(rt,b)}catch(et){if(s)throw et;b(-1,et)}}else b(-1,"No Transport");return e},getJSON:function(n,t,r){return i.get(n,t,r,"json")},getScript:function(n,t){return i.get(n,undefined,t,"script")}}),i.each(["get","post"],function(n,t){i[t]=function(n,r,f,e){return u(r)&&(e=e||f,f=r,r=undefined),i.ajax(i.extend({url:n,type:t,dataType:e,data:r,success:f},i.isPlainObject(n)&&n))}}),i._evalUrl=function(n){return i.ajax({url:n,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},i.fn.extend({wrapAll:function(n){var t;return this[0]&&(u(n)&&(n=n.call(this[0])),t=i(n,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var n=this;n.firstElementChild;)n=n.firstElementChild;return n}).append(this)),this},wrapInner:function(n){return u(n)?this.each(function(t){i(this).wrapInner(n.call(this,t))}):this.each(function(){var t=i(this),r=t.contents();r.length?r.wrapAll(n):t.append(n)})},wrap:function(n){var t=u(n);return this.each(function(r){i(this).wrapAll(t?n.call(this,r):n)})},unwrap:function(n){return this.parent(n).not("body").each(function(){i(this).replaceWith(this.childNodes)}),this}}),i.expr.pseudos.hidden=function(n){return!i.expr.pseudos.visible(n)},i.expr.pseudos.visible=function(n){return!!(n.offsetWidth||n.offsetHeight||n.getClientRects().length)},i.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(t){}},wf={0:200,1223:204},ct=i.ajaxSettings.xhr(),e.cors=!!ct&&"withCredentials"in ct,e.ajax=ct=!!ct,i.ajaxTransport(function(t){var i,r;if(e.cors||ct&&!t.crossDomain)return{send:function(u,f){var o,e=t.xhr();if(e.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)e[o]=t.xhrFields[o];t.mimeType&&e.overrideMimeType&&e.overrideMimeType(t.mimeType);t.crossDomain||u["X-Requested-With"]||(u["X-Requested-With"]="XMLHttpRequest");for(o in u)e.setRequestHeader(o,u[o]);i=function(n){return function(){i&&(i=r=e.onload=e.onerror=e.onabort=e.ontimeout=e.onreadystatechange=null,n==="abort"?e.abort():n==="error"?typeof e.status!="number"?f(0,"error"):f(e.status,e.statusText):f(wf[e.status]||e.status,e.statusText,(e.responseType||"text")!=="text"||typeof e.responseText!="string"?{binary:e.response}:{text:e.responseText},e.getAllResponseHeaders()))}};e.onload=i();r=e.onerror=e.ontimeout=i("error");e.onabort!==undefined?e.onabort=r:e.onreadystatechange=function(){e.readyState===4&&n.setTimeout(function(){i&&r()})};i=i("abort");try{e.send(t.hasContent&&t.data||null)}catch(s){if(i)throw s;}},abort:function(){i&&i()}}}),i.ajaxPrefilter(function(n){n.crossDomain&&(n.contents.script=!1)}),i.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(n){return i.globalEval(n),n}}}),i.ajaxPrefilter("script",function(n){n.cache===undefined&&(n.cache=!1);n.crossDomain&&(n.type="GET")}),i.ajaxTransport("script",function(n){if(n.crossDomain){var r,t;return{send:function(u,e){r=i("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",t=function(n){r.remove();t=null;n&&e(n.type==="error"?404:200,n.type)});f.head.appendChild(r[0])},abort:function(){t&&t()}}}}),fr=[],oi=/(=)\?(?=&|$)|\?\?/,i.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var n=fr.pop()||i.expando+"_"+cf++;return this[n]=!0,n}}),i.ajaxPrefilter("json jsonp",function(t,r,f){var e,o,s,h=t.jsonp!==!1&&(oi.test(t.url)?"url":typeof t.data=="string"&&(t.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&oi.test(t.data)&&"data");if(h||t.dataTypes[0]==="jsonp")return e=t.jsonpCallback=u(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,h?t[h]=t[h].replace(oi,"$1"+e):t.jsonp!==!1&&(t.url+=(nr.test(t.url)?"&":"?")+t.jsonp+"="+e),t.converters["script json"]=function(){return s||i.error(e+" was not called"),s[0]},t.dataTypes[0]="json",o=n[e],n[e]=function(){s=arguments},f.always(function(){o===undefined?i(n).removeProp(e):n[e]=o;t[e]&&(t.jsonpCallback=r.jsonpCallback,fr.push(e));s&&u(o)&&o(s[0]);s=o=undefined}),"script"}),e.createHTMLDocument=function(){var n=f.implementation.createHTMLDocument("").body;return n.innerHTML="<form><\/form><form><\/form>",n.childNodes.length===2}(),i.parseHTML=function(n,t,r){if(typeof n!="string")return[];typeof t=="boolean"&&(r=t,t=!1);var s,u,o;return(t||(e.createHTMLDocument?(t=f.implementation.createHTMLDocument(""),s=t.createElement("base"),s.href=f.location.href,t.head.appendChild(s)):t=f),u=ci.exec(n),o=!r&&[],u)?[t.createElement(u[1])]:(u=su([n],t,o),o&&o.length&&i(o).remove(),i.merge([],u.childNodes))},i.fn.load=function(n,t,r){var f,s,h,e=this,o=n.indexOf(" ");return o>-1&&(f=g(n.slice(o)),n=n.slice(0,o)),u(t)?(r=t,t=undefined):t&&typeof t=="object"&&(s="POST"),e.length>0&&i.ajax({url:n,type:s||"GET",dataType:"html",data:t}).done(function(n){h=arguments;e.html(f?i("<div>").append(i.parseHTML(n)).find(f):n)}).always(r&&function(n,t){e.each(function(){r.apply(this,h||[n.responseText,t,n])})}),this},i.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(n,t){i.fn[t]=function(n){return this.on(t,n)}}),i.expr.pseudos.animated=function(n){return i.grep(i.timers,function(t){return n===t.elem}).length},i.offset={setOffset:function(n,t,r){var o,s,h,c,f,l,y,a=i.css(n,"position"),v=i(n),e={};a==="static"&&(n.style.position="relative");f=v.offset();h=i.css(n,"top");l=i.css(n,"left");y=(a==="absolute"||a==="fixed")&&(h+l).indexOf("auto")>-1;y?(o=v.position(),c=o.top,s=o.left):(c=parseFloat(h)||0,s=parseFloat(l)||0);u(t)&&(t=t.call(n,r,i.extend({},f)));t.top!=null&&(e.top=t.top-f.top+c);t.left!=null&&(e.left=t.left-f.left+s);"using"in t?t.using.call(n,e):v.css(e)}},i.fn.extend({offset:function(n){if(arguments.length)return n===undefined?this:this.each(function(t){i.offset.setOffset(this,n,t)});var r,u,t=this[0];if(t)return t.getClientRects().length?(r=t.getBoundingClientRect(),u=t.ownerDocument.defaultView,{top:r.top+u.pageYOffset,left:r.left+u.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var n,u,f,t=this[0],r={top:0,left:0};if(i.css(t,"position")==="fixed")u=t.getBoundingClientRect();else{for(u=this.offset(),f=t.ownerDocument,n=t.offsetParent||f.documentElement;n&&(n===f.body||n===f.documentElement)&&i.css(n,"position")==="static";)n=n.parentNode;n&&n!==t&&n.nodeType===1&&(r=i(n).offset(),r.top+=i.css(n,"borderTopWidth",!0),r.left+=i.css(n,"borderLeftWidth",!0))}return{top:u.top-r.top-i.css(t,"marginTop",!0),left:u.left-r.left-i.css(t,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var n=this.offsetParent;n&&i.css(n,"position")==="static";)n=n.offsetParent;return n||ii})}}),i.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,t){var r="pageYOffset"===t;i.fn[n]=function(i){return p(this,function(n,i,u){var f;if(tt(n)?f=n:n.nodeType===9&&(f=n.defaultView),u===undefined)return f?f[t]:n[i];f?f.scrollTo(r?f.pageXOffset:u,r?u:f.pageYOffset):n[i]=u},n,i,arguments.length)}}),i.each(["top","left"],function(n,t){i.cssHooks[t]=yu(e.pixelPosition,function(n,r){if(r)return r=yt(n,t),pi.test(r)?i(n).position()[t]+"px":r})}),i.each({Height:"height",Width:"width"},function(n,t){i.each({padding:"inner"+n,content:t,"":"outer"+n},function(r,u){i.fn[u]=function(f,e){var o=arguments.length&&(r||typeof f!="boolean"),s=r||(f===!0||e===!0?"margin":"border");return p(this,function(t,r,f){var e;return tt(t)?u.indexOf("outer")===0?t["inner"+n]:t.document.documentElement["client"+n]:t.nodeType===9?(e=t.documentElement,Math.max(t.body["scroll"+n],e["scroll"+n],t.body["offset"+n],e["offset"+n],e["client"+n])):f===undefined?i.css(t,r,s):i.style(t,r,f,s)},t,o?f:undefined,o)}})}),i.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(n,t){i.fn[t]=function(n,i){return arguments.length>0?this.on(t,null,n,i):this.trigger(t)}}),i.fn.extend({hover:function(n,t){return this.mouseenter(n).mouseleave(t||n)}}),i.fn.extend({bind:function(n,t,i){return this.on(n,null,t,i)},unbind:function(n,t){return this.off(n,null,t)},delegate:function(n,t,i,r){return this.on(t,n,i,r)},undelegate:function(n,t,i){return arguments.length===1?this.off(n,"**"):this.off(t,n||"**",i)}}),i.proxy=function(n,t){var f,e,r;return(typeof t=="string"&&(f=n[t],t=n,n=f),!u(n))?undefined:(e=d.call(arguments,2),r=function(){return n.apply(t||this,e.concat(d.call(arguments)))},r.guid=n.guid=n.guid||i.guid++,r)},i.holdReady=function(n){n?i.readyWait++:i.ready(!0)},i.isArray=Array.isArray,i.parseJSON=JSON.parse,i.nodeName=v,i.isFunction=u,i.isWindow=tt,i.camelCase=y,i.type=it,i.now=Date.now,i.isNumeric=function(n){var t=i.type(n);return(t==="number"||t==="string")&&!isNaN(n-parseFloat(n))},typeof define=="function"&&define.amd&&define("jquery",[],function(){return i}),bf=n.jQuery,kf=n.$,i.noConflict=function(t){return n.$===i&&(n.$=kf),t&&n.jQuery===i&&(n.jQuery=bf),i},t||(n.jQuery=n.$=i),i}),function(n){"defineProperty"in Object&&function(){try{return Object.defineProperty({},"test",{value:42}),!0}catch(n){return!1}}()||!function(n){var t=Object.prototype.hasOwnProperty("__defineGetter__"),i="A property cannot both have accessors and be writable or have a value";Object.defineProperty=function(r,u,f){if(n&&(r===window||r===document||r===Element.prototype||r instanceof Element))return n(r,u,f);if(null===r||!(r instanceof Object||"object"==typeof r))throw new TypeError("Object.defineProperty called on non-object");if(!(f instanceof Object))throw new TypeError("Property description must be an object");var e=String(u),o="value"in f||"writable"in f,s="get"in f&&typeof f.get,h="set"in f&&typeof f.set;if(s){if("function"!==s)throw new TypeError("Getter must be a function");if(!t)throw new TypeError("Getters & setters cannot be defined on this javascript engine");if(o)throw new TypeError(i);Object.__defineGetter__.call(r,e,f.get)}else r[e]=f.value;if(h){if("function"!==h)throw new TypeError("Setter must be a function");if(!t)throw new TypeError("Getters & setters cannot be defined on this javascript engine");if(o)throw new TypeError(i);Object.__defineSetter__.call(r,e,f.set)}return"value"in f&&(r[e]=f.value),r}}(Object.defineProperty);"find"in Array.prototype||Object.defineProperty(Array.prototype,"find",{configurable:!0,value:function(t){if(this===n||null===this)throw new TypeError(this+" is not an object");if("function"!=typeof t)throw new TypeError(t+" is not a function");for(var u,i=Object(this),e=arguments[1],f=i instanceof String?i.split(""):i,o=Math.max(Math.min(f.length,9007199254740991),0)||0,r=-1;++r<o;)if(r in f&&(u=f[r],t.call(e,u,r,i)))return u},writable:!0});"bind"in Function.prototype||Object.defineProperty(Function.prototype,"bind",{value:function(n){var s,a=Array,h=Object,v=h.prototype,r=a.prototype,u=function(){},y=v.toString,p="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,w=Function.prototype.toString,b=function(n){try{return w.call(n),!0}catch(t){return!1}};s=function(n){if("function"!=typeof n)return!1;if(p)return b(n);var t=y.call(n);return"[object Function]"===t||"[object GeneratorFunction]"===t};var f=r.slice,c=r.concat,k=r.push,d=Math.max,t=this;if(!s(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var i,e=f.call(arguments,1),g=function(){if(this instanceof i){var r=t.apply(this,c.call(e,f.call(arguments)));return h(r)===r?r:this}return t.apply(n,c.call(e,f.call(arguments)))},nt=d(0,t.length-e.length),l=[],o=0;o<nt;o++)k.call(l,"$"+o);return i=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this, arguments); }")(g),t.prototype&&(u.prototype=t.prototype,i.prototype=new u,u.prototype=null),i}});"getOwnPropertyDescriptor"in Object&&typeof Object.getOwnPropertyDescriptor=="function"&&function(){try{var n={};return n.test=0,Object.getOwnPropertyDescriptor(n,"test").value===0}catch(t){return!1}}()||!function(){function r(n){try{return n.sentinel=0,0===Object.getOwnPropertyDescriptor(n,"sentinel").value}catch(t){}}var u,f,e,i=Function.prototype.call,n=Object.prototype,o=i.bind(n.hasOwnProperty),s,t;((e=o(n,"__defineGetter__"))&&(u=i.bind(n.__lookupGetter__),f=i.bind(n.__lookupSetter__)),Object.defineProperty)&&(s=r({}),("undefined"==typeof document||r(document.createElement("div")))&&s||(t=Object.getOwnPropertyDescriptor));(!Object.getOwnPropertyDescriptor||t)&&(Object.getOwnPropertyDescriptor=function(i,r){var s,l,h,c;if("object"!=typeof i&&"function"!=typeof i||null===i)throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+i);if(t)try{return t.call(Object,i,r)}catch(a){}if(o(i,r))return(s={enumerable:!0,configurable:!0},e&&(l=i.__proto__,i.__proto__=n,h=u(i,r),c=f(i,r),i.__proto__=l,h||c))?(h&&(s.get=h),c&&(s.set=c),s):(s.value=i[r],s.writable=!0,s)})}();"keys"in Object&&function(){return Object.keys(arguments).length===2}(1,2)&&function(){try{return Object.keys(""),!0}catch(n){return!1}}()||(Object.keys=function(){"use strict";function e(n){var r=i.call(n),t="[object Arguments]"===r;return t||(t="[object Array]"!==r&&null!==n&&"object"==typeof n&&"number"==typeof n.length&&n.length>=0&&"[object Function]"===i.call(n.callee)),t}var t=Object.prototype.hasOwnProperty,i=Object.prototype.toString,f=Object.prototype.propertyIsEnumerable,o=!f.call({toString:null},"toString"),s=f.call(function(){},"prototype"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(n){var t=n.constructor;return t&&t.prototype===n},h={$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},c=function(){if("undefined"==typeof window)return!1;for(var n in window)try{if(!h["$"+n]&&t.call(window,n)&&null!==window[n]&&"object"==typeof window[n])try{u(window[n])}catch(i){return!0}}catch(i){return!0}return!1}(),l=function(n){if("undefined"==typeof window||!c)return u(n);try{return u(n)}catch(t){return!1}};return function(u){var w="[object Function]"===i.call(u),b=e(u),k="[object String]"===i.call(u),h=[],y,c,a,v,p,f;if(u===n||null===u)throw new TypeError("Cannot convert undefined or null to object");if(y=s&&w,k&&u.length>0&&!t.call(u,0))for(c=0;c<u.length;++c)h.push(String(c));if(b&&u.length>0)for(a=0;a<u.length;++a)h.push(String(a));else for(v in u)y&&"prototype"===v||!t.call(u,v)||h.push(String(v));if(o)for(p=l(u),f=0;f<r.length;++f)p&&"constructor"===r[f]||!t.call(u,r[f])||h.push(r[f]);return h}}());"assign"in Object||!function(){function t(t){if(null===t||t===n)throw new TypeError("Cannot call method on "+t);return Object(t)}Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(i){var h=t(i),r,u,f,e,c,o,s,l,a;if(1===arguments.length)return h;for(c=Array.prototype.slice.call(arguments,1),r=0;r<c.length;r++)for(o=c[r],o===n||null===o?f=[]:(e=t(o),f=Object.keys(e)),u=0;u<f.length;u++)s=f[u],l=Object.getOwnPropertyDescriptor(e,s),l!==n&&l.enumerable&&(a=e[s],h[s]=a);return h}})}();"Promise"in this||!function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={exports:{},id:r,loaded:!1};return n[r].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var i={};t.m=n;t.c=i;t.p="";t(0)}({0:function(n,t,i){(function(n){var t=i(80);try{(n||{}).Promise=t;window.Promise=t}catch(r){}}).call(t,function(){return this}())},80:function(n,t){(function(t){!function(){"use strict";function ut(){return i[k][ti]||vi}function ei(n,t){for(var i in t)n[i]=t[i]}function ft(n){return n&&"object"==typeof n}function f(n){return"function"==typeof n}function et(n,t){return n instanceof t}function oi(n){return et(n,ni)}function ot(n,t,i){if(!t(n))throw s(i);}function si(){try{return wt.apply(bt,arguments)}catch(n){return e.e=n,e}}function o(n,t){return wt=n,bt=t,si}function st(n,t){function f(){for(var i=0;i<u;)t(r[i],r[i+1]),r[i++]=v,r[i++]=v;u=0;r.length>n&&(r.length=n)}var r=gt(n),u=0;return function(n,t){r[u++]=n;r[u++]=t;2===u&&i.nextTick(f)}}function ht(n,t){var c,u,l,a,r=0,h;if(!n)throw s(tt);if(h=n[i[k][ai]],f(h))u=h.call(n);else{if(!f(n.next)){if(et(n,gt)){for(c=n.length;r<c;)t(n[r],r++);return r}throw s(tt);}u=n}for(;!(l=u.next()).done;)if((a=o(t)(l.value,r++))===e)throw f(u[ii])&&u[ii](),a.e;return r}function s(n){return new TypeError(n)}function ct(n){return(n?"":yi)+(new ni).stack}function lt(n,t){var u="on"+n.toLowerCase(),r=b[u];y&&y.listeners(n).length?n===ui?y.emit(n,t._v,t):y.emit(n,t):r?r({reason:t._v,promise:t}):i[n](t._v,t)}function p(n){return n&&n._s}function a(n){if(p(n))return new n(it);var t,i,r;return t=new n(function(n,u){if(t)throw s();i=n;r=u}),ot(i,f),ot(r,f),t}function at(n,t){return function(i){h&&(n[nt]=ct(!0));t===c?w(n,i):r(n,t,i)}}function hi(n,t,i,r){return f(i)&&(t._onFulfilled=i),f(r)&&(n[ri]&&lt(wi,n),t._onRejected=r),h&&(t._p=n),n[n._c++]=t,n._s!==d&&rt(n,t),t}function vt(n){if(n._umark)return!0;n._umark=!0;for(var t,i=0,r=n._c;i<r;)if(t=n[i++],t._onRejected||vt(t))return!0}function yt(n,t){function i(n){return r.push(n.replace(/^\s+|\s+$/g,""))}var r=[];return h&&(t[nt]&&i(t[nt]),function u(n){n&&g in n&&(u(n._next),i(n[g]+""),u(n._p))}(t)),(n&&n.stack?n.stack:n)+("\n"+r.join("\n")).replace(bi,"")}function ci(n,t){return n(t)}function r(n,t,i){var r=0,f=n._c;if(n._s===d)for(n._s=t,n._v=i,t===u&&(h&&oi(i)&&(i.longStack=yt(i,n)),fi(n));r<f;)rt(n,n[r++]);return n}function w(n,t){if(t===n&&t)return r(n,u,s(pi)),n;if(t!==l&&(f(t)||ft(t))){var a=o(li)(t);if(a===e)return r(n,u,a.e),n;f(a)?(h&&p(t)&&(n._next=t),p(t)?pt(n,t,a):i.nextTick(function(){pt(n,t,a)})):r(n,c,t)}else r(n,c,t);return n}function li(n){return n.then}function pt(n,t,i){var f=o(i,t)(function(i){t&&(t=l,w(n,i))},function(i){t&&(t=l,r(n,u,i))});f===e&&t&&(r(n,u,f.e),t=l)}var v,wt,bt,l=null,kt="object"==typeof window,b=kt?window:t,y=b.process,dt=b.console,h=!1,gt=Array,ni=Error,u=1,c=2,d=3,k="Symbol",ai="iterator",ti="species",vi=k+"("+ti+")",ii="return",ri="_uh",g="_pt",nt="_st",tt="Invalid argument",yi="\nFrom previous ",pi="Chaining cycle detected for promise",wi="rejectionHandled",ui="unhandledRejection",e={e:l},it=function(){},bi=/^.+\/node_modules\/yaku\/.+\n?/gm,i=n.exports=function(n){var i,t=this;if(!ft(t)||t._s!==v)throw s("Invalid this");if(t._s=d,h&&(t[g]=ct()),n!==it){if(!f(n))throw s(tt);(i=o(n)(at(t,c),at(t,u)))===e&&r(t,u,i.e)}},rt,fi;i["default"]=i;ei(i.prototype,{then:function(n,t){if(void 0===this._s)throw s();return hi(this,a(i.speciesConstructor(this,i)),n,t)},"catch":function(n){return this.then(v,n)},"finally":function(n){function t(t){return i.resolve(n()).then(function(){return t})}return this.then(t,t)},_c:0,_p:l});i.resolve=function(n){return p(n)?n:w(a(this),n)};i.reject=function(n){return r(a(this),u,n)};i.race=function(n){var t=this,i=a(t),s=function(n){r(i,c,n)},h=function(n){r(i,u,n)},f=o(ht)(n,function(n){t.resolve(n).then(s,h)});return f===e?t.reject(f.e):i};i.all=function(n){function h(n){r(i,u,n)}var t,f=this,i=a(f),s=[];return t=o(ht)(n,function(n,u){f.resolve(n).then(function(n){s[u]=n;--t||r(i,c,s)},h)}),t===e?f.reject(t.e):(t||r(i,c,[]),i)};i.Symbol=b[k]||{};o(function(){Object.defineProperty(i,ut(),{get:function(){return this}})})();i.speciesConstructor=function(n,t){var i=n.constructor;return i?i[ut()]||t:t};i.unhandledRejection=function(n,t){dt&&dt.error("Uncaught (in promise)",h?t.longStack:yt(n,t))};i.rejectionHandled=it;i.enableLongStackTrace=function(){h=!0};i.nextTick=kt?function(n){setTimeout(n)}:y.nextTick;i._s=1;rt=st(999,function(n,t){var i,f;return f=n._s!==u?t._onFulfilled:t._onRejected,f===v?void r(t,n._s,n._v):(i=o(ci)(f,n._v),i===e?void r(t,u,i.e):void w(t,i))});fi=st(9,function(n){vt(n)||(n[ri]=1,lt(ui,n))})}()}).call(t,function(){return this}())}});"Promise"in this&&"finally"in Promise.prototype||!function(){var t=Function.prototype.bind.call(Function.prototype.call,Promise.prototype.then),r=function(t,i){var r,u;if(!t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Assertion failed: Type(O) is not Object");if(r=t.constructor,void 0===r)return i;if(!r||"object"!=typeof r&&"function"!=typeof r)throw new TypeError("O.constructor is not an Object");if(u="function"==typeof Symbol&&"symbol"==typeof Symbol.species?r[Symbol.species]:n,u===n||null===u)return i;if("function"==typeof u&&u.prototype)return u;throw new TypeError("no constructor found");},i=function(n,t){return new n(function(n){n(t())})},u=function(n){var u,e=this,o,f;return u="function"==typeof n?n:function(){},o=t(e,function(n){return t(i(f,u),function(){return n})},function(n){return t(i(f,u),function(){throw n;})}),f=r(e,Promise),o};Promise.prototype["finally"]=u}();"startsWith"in String.prototype||(String.prototype.startsWith=function(n){var t=arguments.length<2?0:arguments[1];return 0===this.slice(t).indexOf(n)})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{});!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((n=n||self).xmsdk={})}(this,function(n){"use strict";function u(n){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function c(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function at(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function l(n,t,i){return t&&at(n.prototype,t),i&&at(n,i),n}function ni(n){return function(n){if(Array.isArray(n)){for(var t=0,i=new Array(n.length);t<n.length;t++)i[t]=n[t];return i}}(n)||function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance");}()}function d(n,t,i){var u,e,o,f,h,r,c;if("undefined"!=typeof document){if(arguments.length>1){"number"==typeof(i=function(){for(var t,i,r,u,f=arguments.length,e=new Array(f),n=0;n<f;n++)e[n]=arguments[n];for(t=0,i={};t<arguments.length;t++){r=arguments[t];for(u in r)i[u]=r[u]}return i}({path:"/"},{},i)).expires&&(e=new Date,e.setMilliseconds(e.getMilliseconds()+864e5*i.expires),i.expires=e);i.expires=i.expires?i.expires.toUTCString():"";try{u=JSON.stringify(t);/^[\{\[]/.test(u)&&(t=u)}catch(n){}t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent);n=(n=(n=encodeURIComponent(String(n))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);o="";for(f in i)i[f]&&(o+="; "+f,!0!==i[f]&&(o+="="+i[f]));return document.cookie=n+"="+t+o}n||(u={});for(var l=document.cookie?document.cookie.split("; "):[],a=/(%[0-9A-Z]{2})+/g,s=0;s<l.length;s++){h=l[s].split("=");r=h.slice(1).join("=");'"'===r.charAt(0)&&(r=r.slice(1,-1));try{if(c=h[0].replace(a,decodeURIComponent),r=r.replace(a,decodeURIComponent),n===c){u=r;break}n||(u[c]=r)}catch(n){}}return u}}function ft(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs");}function vt(n,t){return n(t={exports:{}},t.exports),t.exports}function ei(n){function u(n,t,r,u){i={enabled:n||!1,lat:t,lng:r,error:u}}var i=void 0,f=function(){i=void 0},o=function(n,t){var r={};for(var i in t=t||{},n=n||{})r[i]=n[i];for(i in t)r[i]=t[i];return r},s=function(i,r,u){if(nt)t(i,u);else{var f={excludes:{userAgent:!0,screenResolution:!0,fonts:!0,fontsFlash:!0,plugins:!0,colorDepth:!0,webdriver:!0,audio:!0,deviceMemory:!0,enumerateDevices:!0,timezone:!0,webglVendorAndRenderer:!0}};n.largeData||(f.excludes.canvas=!0,f.excludes.webgl=!0);r.getV18(f,function(n,r){var f=e(r);nt={id:n,details:f};t(i,u)})}},e=function(n){var f=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r,t,u,i;for(n=n||[],r={},t=0;t<n.length;t++)u=n[t],i=u.key,f&&(i=h(i)),r[i]=u.value;return r},h=function(n){return n.replace(/[\w]([A-Z])/g,function(n){return n[0]+"_"+n[1]}).toLowerCase()},c=function(i,r,u){if(tt)t(i,u);else{var f={excludes:{}};n.largeData||(f.excludes.canvas=!0,f.excludes.webgl=!0);n.deviceFingerprint||(f.excludes.screenResolution=!0,f.excludes.fonts=!0,f.excludes.fontsFlash=!0,f.excludes.plugins=!0,f.excludes.colorDepth=!0,f.excludes.webdriver=!0,f.excludes.audio=!0,f.excludes.deviceMemory=!0,f.excludes.enumerateDevices=!0,f.excludes.timezone=!0,f.excludes.webglVendorAndRenderer=!0);r.get(f,function(n){tt=e(n,!0);t(i,u)})}},l=function(f,e){var o,s,h;if((i=void 0,o=n.location,!o.allow)||r(navigator.geolocation)||"function"!=typeof navigator.geolocation.getCurrentPosition)return u(!1),void t(f,e);s=setTimeout(function(){h({code:3})},o.timeout);h=function(n){clearTimeout(s);u(!0,void 0,void 0,a(n.code));t(f,e)};navigator.geolocation.getCurrentPosition(function(n){clearTimeout(s);u(!0,n.coords.latitude,n.coords.longitude);t(f,e)},h,o)},r=function(n){return null==n},a=function(n){return 1===n?"permission_denied":2===n?"position_unavailable":3===n?"timeout":"unknown"},t=function(n,t){if(!(r(tt)||r(nt)||r(i))){var u={metadata:{timestamp:Date.now()},content:{device_details:v(nt,t),location:i},fp2:tt};f();n(u)}},v=function(n,t){var i={device_id:n.id},u=n.details,r=(new t.UAParser).setUA(navigator.userAgent).getResult();return i.os_type=r.os.name,i.os_version=r.os.version,i.device_model=r.browser.name+" "+r.browser.version,i.device_platform=u.navigator_platform,i.tampered=function(n){return n&&(n.has_lied_browser||n.has_lied_language||n.has_lied_os||n.has_lied_resolution)}(u),i.timezone_offset=u.timezone_offset,i};return(n=n||{}).location=o({allow:!1,timeout:4e3,maximumAge:18e4},n.location),f(),{get:function(n){s(n,yt,ot);c(n,yt,ot);l(n,ot)}}}function y(n,t){var i=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(i>>16)<<16|65535&i}function it(n,t,i,r,u,f){return y((e=y(y(t,n),y(r,f)))<<(o=u)|e>>>32-o,i);var e,o}function f(n,t,i,r,u,f,e){return it(t&i|~t&r,n,t,u,f,e)}function e(n,t,i,r,u,f,e){return it(t&r|i&~r,n,t,u,f,e)}function o(n,t,i,r,u,f,e){return it(t^i^r,n,t,u,f,e)}function s(n,t,i,r,u,f,e){return it(i^(t|~r),n,t,u,f,e)}function rt(n,t){var c,l,a,v,p;n[t>>5]|=128<<t%32;n[14+(t+64>>>9<<4)]=t;var i=1732584193,h=-271733879,r=-1732584194,u=271733878;for(c=0;c<n.length;c+=16)l=i,a=h,v=r,p=u,i=f(i,h,r,u,n[c],7,-680876936),u=f(u,i,h,r,n[c+1],12,-389564586),r=f(r,u,i,h,n[c+2],17,606105819),h=f(h,r,u,i,n[c+3],22,-1044525330),i=f(i,h,r,u,n[c+4],7,-176418897),u=f(u,i,h,r,n[c+5],12,1200080426),r=f(r,u,i,h,n[c+6],17,-1473231341),h=f(h,r,u,i,n[c+7],22,-45705983),i=f(i,h,r,u,n[c+8],7,1770035416),u=f(u,i,h,r,n[c+9],12,-1958414417),r=f(r,u,i,h,n[c+10],17,-42063),h=f(h,r,u,i,n[c+11],22,-1990404162),i=f(i,h,r,u,n[c+12],7,1804603682),u=f(u,i,h,r,n[c+13],12,-40341101),r=f(r,u,i,h,n[c+14],17,-1502002290),i=e(i,h=f(h,r,u,i,n[c+15],22,1236535329),r,u,n[c+1],5,-165796510),u=e(u,i,h,r,n[c+6],9,-1069501632),r=e(r,u,i,h,n[c+11],14,643717713),h=e(h,r,u,i,n[c],20,-373897302),i=e(i,h,r,u,n[c+5],5,-701558691),u=e(u,i,h,r,n[c+10],9,38016083),r=e(r,u,i,h,n[c+15],14,-660478335),h=e(h,r,u,i,n[c+4],20,-405537848),i=e(i,h,r,u,n[c+9],5,568446438),u=e(u,i,h,r,n[c+14],9,-1019803690),r=e(r,u,i,h,n[c+3],14,-187363961),h=e(h,r,u,i,n[c+8],20,1163531501),i=e(i,h,r,u,n[c+13],5,-1444681467),u=e(u,i,h,r,n[c+2],9,-51403784),r=e(r,u,i,h,n[c+7],14,1735328473),i=o(i,h=e(h,r,u,i,n[c+12],20,-1926607734),r,u,n[c+5],4,-378558),u=o(u,i,h,r,n[c+8],11,-2022574463),r=o(r,u,i,h,n[c+11],16,1839030562),h=o(h,r,u,i,n[c+14],23,-35309556),i=o(i,h,r,u,n[c+1],4,-1530992060),u=o(u,i,h,r,n[c+4],11,1272893353),r=o(r,u,i,h,n[c+7],16,-155497632),h=o(h,r,u,i,n[c+10],23,-1094730640),i=o(i,h,r,u,n[c+13],4,681279174),u=o(u,i,h,r,n[c],11,-358537222),r=o(r,u,i,h,n[c+3],16,-722521979),h=o(h,r,u,i,n[c+6],23,76029189),i=o(i,h,r,u,n[c+9],4,-640364487),u=o(u,i,h,r,n[c+12],11,-421815835),r=o(r,u,i,h,n[c+15],16,530742520),i=s(i,h=o(h,r,u,i,n[c+2],23,-995338651),r,u,n[c],6,-198630844),u=s(u,i,h,r,n[c+7],10,1126891415),r=s(r,u,i,h,n[c+14],15,-1416354905),h=s(h,r,u,i,n[c+5],21,-57434055),i=s(i,h,r,u,n[c+12],6,1700485571),u=s(u,i,h,r,n[c+3],10,-1894986606),r=s(r,u,i,h,n[c+10],15,-1051523),h=s(h,r,u,i,n[c+1],21,-2054922799),i=s(i,h,r,u,n[c+8],6,1873313359),u=s(u,i,h,r,n[c+15],10,-30611744),r=s(r,u,i,h,n[c+6],15,-1560198380),h=s(h,r,u,i,n[c+13],21,1309151649),i=s(i,h,r,u,n[c+4],6,-145523070),u=s(u,i,h,r,n[c+11],10,-1120210379),r=s(r,u,i,h,n[c+2],15,718787259),h=s(h,r,u,i,n[c+9],21,-343485551),i=y(i,l),h=y(h,a),r=y(r,v),u=y(u,p);return[i,h,r,u]}function wt(n){for(var i="",r=32*n.length,t=0;t<r;t+=8)i+=String.fromCharCode(n[t>>5]>>>t%32&255);return i}function st(n){var t,i=[],r;for(i[(n.length>>2)-1]=void 0,t=0;t<i.length;t+=1)i[t]=0;for(r=8*n.length,t=0;t<r;t+=8)i[t>>5]|=(255&n.charCodeAt(t/8))<<t%32;return i}function bt(n){for(var i,r="",t=0;t<n.length;t+=1)i=n.charCodeAt(t),r+="0123456789abcdef".charAt(i>>>4&15)+"0123456789abcdef".charAt(15&i);return r}function ht(n){return unescape(encodeURIComponent(n))}function kt(n){return function(n){return wt(rt(st(n),8*n.length))}(ht(n))}function dt(n,t){return function(n,t){var i,e,r=st(n),u=[],f=[];for(u[15]=f[15]=void 0,r.length>16&&(r=rt(r,8*n.length)),i=0;i<16;i+=1)u[i]=909522486^r[i],f[i]=1549556828^r[i];return e=rt(u.concat(st(t)),512+8*t.length),wt(rt(f.concat(e),640))}(ht(n),ht(t))}function oi(n,t,i){return t?i?dt(t,n):bt(dt(t,n)):i?kt(n):bt(kt(n))}var ti=function(){function n(t){c(this,n);this._host=t}return l(n,[{key:"extractHeaders",value:function(n){return n.trim().split(/[\r\n]+/).map(function(n){var i=n.split(": "),r=i.shift(),u=i.join(": "),t=new com.ts.mobile.sdk.TransportHeader;return t.setName(r),t.setValue(u),t})}},{key:"sendRequest",value:function(n){var t=this;return new Promise(function(i,r){var u=new XMLHttpRequest,f=function(){r(new com.ts.mobile.sdk.impl.AuthenticationErrorImpl(com.ts.mobile.sdk.AuthenticationErrorCode.Communication,u.responseText))};u.open(n.getMethod(),n.getUrl(),!0);u.withCredentials=!0;u.onreadystatechange=function(){if(4===u.readyState)try{if(0===u.status)return t._host.log(com.ts.mobile.sdk.LogLevel.Error,"transport","Destination server is invalid or the server does not support access-control-allow-origin."),r(new com.ts.mobile.sdk.impl.AuthenticationErrorImpl(com.ts.mobile.sdk.AuthenticationErrorCode.Communication,u.responseText));JSON.parse(u.responseText);var e=new com.ts.mobile.sdk.TransportResponse;e.setStatus(u.status);e.setMethod(n.getMethod());e.setHeaders(t.extractHeaders(u.getAllResponseHeaders()));e.setBodyJson(u.responseText);i(e)}catch(n){f()}};u.onerror=function(){f()};n.getHeaders().forEach(function(n){u.setRequestHeader(n.getName(),n.getValue())});u.setRequestHeader("Content-Type","application/json");u.send(n.getBodyJson())})}}]),n}(),ii={ts_gen_back:"BACK",ts_gen_skip:"SKIP",ts_gen_continue:"Continue",ts_gen_cancel:"CANCEL",ts_gen_close:"CLOSE",ts_gen_ok:"OK",ts_gen_default:"Default",ts_gen_restart:"RESTART",ts_gen_expired:"Authenticator expired. Please reregister.",ts_gen_cancel_authentication:"CANCEL",ts_gen_change_authenticator:"CHANGE METHOD",ts_gen_select_authenticator:"CHANGE METHOD",ts_gen_retry_authenticator:"TRY AGAIN",ts_gen_dismiss:"DISMISS",ts_authenticator_device_biometrics:"Device Biometrics",ts_authenticator_password:"Password",ts_authenticator_pin:"PIN",ts_authenticator_pattern:"Pattern",ts_authenticator_otp:"OTP",ts_authenticator_fingerprint:"Fingerprint",ts_authenticator_question:"Security Questions",ts_authenticator_face_id:"Face ID",ts_authenticator_touch_id:"Touch ID",ts_authenticator_totp:"Soft Token",ts_authenticator_pattern_centralized:"Pattern",ts_authenticator_pin_centralized:"PIN",ts_authenticator_voice_server:"Voice",ts_authenticator_fido2:"FIDO2",ts_authenticator_mobile_approve:"Mobile Approve",ts_authenticator_face_server:"Face",ts_authenticator_fido_fidopin:"PIN",ts_authenticator_fido_fidoface:"Face ID",ts_authenticator_fido_fidofp:"Fingerprint",ts_authenticator_device_biometrics_description:"Use the biometric sensors registered on your device",ts_authenticator_password_description:"",ts_authenticator_pin_description:"Numeric PIN code",ts_authenticator_pin_centralized_description:"Numeric PIN code",ts_authenticator_pattern_description:"Visual pattern",ts_authenticator_pattern_centralized_description:"Visual pattern",ts_authenticator_otp_description:"One time password sent to your phone or email",ts_authenticator_voice_description:"Use your voice print",ts_authenticator_voice_server_description:"Use your voice print",ts_authenticator_questions_description:"Knowledge based questions",ts_authenticator_face_description:"Use your smartphone's camera",ts_authenticator_fingerprint_description:"Use your smartphone's biometric sensor",ts_authenticator_face_id_description:"Use Face ID",ts_authenticator_touch_id_description:"Use Touch ID",ts_authenticator_totp_description:"Use soft token",ts_authenticator_mobile_approve_description:"Use mobile approve",ts_authenticator_fido2_description:"Use a security key",ts_authenticator_password_title_auth:"Authenticate with Password",ts_authenticator_password_title_reg:"Register Password",ts_authenticator_password_intro_auth:"",ts_authenticator_password_intro_reg:"",ts_authenticator_password_field_hint:"Password",ts_authenticator_password_reg_field_hint:"Repeat password",ts_authenticator_password_cta_positive:"CONTINUE",ts_authenticator_password_error_too_short:"Password too short!",ts_authenticator_password_error_reg_no_match:"Passwords don't match!",ts_authenticator_password_error_reg_strength_validation_failed:"Password must be at least 6 characters long, and contain a mix of lowercase characters, uppercase characters, and digits.",ts_authenticator_pin_title_auth:"Authenticate with PIN Code",ts_authenticator_pin_title_reg:"Register PIN Code",ts_authenticator_pin_intro_auth:"Enter your PIN Code to proceed",ts_authenticator_pin_intro_reg:"Enter your new PIN Code to proceed",ts_authenticator_pin_intro_repeat:"Re-enter your new PIN Code",ts_authenticator_pin_error_reg_no_match:"Codes don't match!",ts_authenticator_pin_code_length:"Enter your %1$s-digit PIN code",ts_authenticator_otp_title_auth:"Authenticate with OTP",ts_authenticator_otp_qr_title:"Authenticate with QR",ts_authenticator_otp_targets_intro:"Please select how you want us to deliver a One Time Password to you.",ts_authenticator_otp_sms_title:"SMS",ts_authenticator_otp_email_title:"EMAIL",ts_authenticator_otp_voice_title:"VOICE",ts_authenticator_otp_push_title:"PUSH",ts_authenticator_otp_unknown_title:"Unknown",ts_authenticator_otp_sms_sent:"A text message with a code was sent to your phone. Please type it here.",ts_authenticator_otp_email_sent:"A code was sent to your email. Please type it here.",ts_authenticator_otp_push_sent:"A push notification with a code was sent to your phone. Please type it here.",ts_authenticator_otp_voice_sent:"A voice message with a code is being delivered to your phone. Please type it here.",ts_authenticator_otp_qr_sent:"A QR code was sent to your email. Please scan it.",ts_authenticator_otp_external_numeric_sent:"A code is being delivered to you. Please type it here.",ts_authenticator_otp_external_qr_sent:"Please scan the QR code to proceed",ts_authenticator_otp_resend:"RESEND OTP",ts_authenticator_otp_resend_message:"Didn't get the code?",ts_authenticator_otp_resend_intro:"Code resent.",ts_authenticator_otp_error_qr_permission:"Using QR to authenticate requires permission to access your phone's camera",ts_authenticator_otp_error_code_expired:"Your code is no longer valid, please request a new one",ts_authenticator_otp_code_length:"Enter the %1$s-digit code",ts_authenticator_pattern_title_auth:"Authenticate with Pattern",ts_authenticator_pattern_title_reg:"Register Pattern",ts_authenticator_pattern_intro_auth:"Draw your pattern to proceed",ts_authenticator_pattern_intro_reg:"Draw your new pattern to proceed",ts_authenticator_pattern_mismatch:"Patterns don't match. Re-draw your new pattern to proceed.",ts_authenticator_pattern_error_min_points:"Pattern is too short. Try again",ts_authenticator_pattern_intro_repeat:"Re-draw your pattern",ts_authenticator_pattern_cta_reset:"RESTART",ts_authenticator_fingerprint_title_auth:"Authenticate with Fingerprint",ts_authenticator_fingerprint_title_reg:"Confirm fingerprint to continue",ts_authenticator_fingerprint_status_hint:"Touch sensor",ts_authenticator_faceid_title_auth:"Authenticate with Face ID",ts_authenticator_faceid_title_reg:"Confirm Face ID to continue",ts_authenticator_touchid_title_reg:"Authenticate with Touch ID",ts_authenticator_touchid_title_auth:"Confirm Touch ID to continue",ts_authenticator_device_biometrics_title_auth:"Authenticate with device biometrics",ts_authenticator_device_biometrics_title_reg:"Confirm device biometrics to continue",ts_authenticator_device_biometrics_intro_auth:"Authenticate biometric to continue",ts_authenticator_device_biometrics_intro_reg:"Register biometric to continue",ts_authenticator_device_biometrics_prompt:"Follow biometric instructions",ts_authenticator_device_biometrics_cancel_cta:"Cancel biometric",ts_authenticator_questions_title_auth:"Authenticate with Security Questions",ts_authenticator_questions_title_reg:"Register Security Questions",ts_authenticator_questions_intro_auth:"Answer the question below to proceed",ts_authenticator_questions_intro_reg:"Answer at least %1$s questions to proceed.",ts_authenticator_questions_error_answer_range:"Answer must be between %1$s to %2$s characters.",ts_authenticator_questions_left:"%1$s questions answered",ts_authenticator_questions_error_answer_empty:"Please provide an answer",ts_authenticator_questions_remove_this_question_cta:"REMOVE",ts_authenticator_questions_add_question_cta:"ADD QUESTION",ts_authenticator_questions_reg_select_question:"Select Question",ts_authenticator_questions_reg_select_question_cta:"CHOOSE",ts_authenticator_questions_reg_default_answer_placeholder:"*******",ts_authenticator_voice_title_auth:"Authenticate with Voice",ts_authenticator_voice_title_reg:"Register Voice",ts_authenticator_voice_intro_auth:"Follow instructions to authenticate with your voice signature",ts_authenticator_voice_intro_reg:"Follow instructions to register your voice signature",ts_authenticator_voice_passphrase:"Hold to record and repeat the following passphrase %1$s.",ts_authenticator_voice_passphrase_subtitle:"You might be prompted to say it more than once.",ts_authenticator_voice_instructions:"Please record again.",ts_authenticator_voice_record_start:"Hold to record",ts_authenticator_voice_record_stop:"Release to stop",ts_authenticator_voice_request_audio_permission:"Recording voice requires permission to access your phone's microphone",ts_authenticator_voice_error_too_long:"The recording is too long",ts_authenticator_voice_error_too_short:"Recording too short",ts_authenticator_voice_error_too_loud:"Recording too loud",ts_authenticator_voice_error_too_weak:"Recording too weak",ts_authenticator_voice_error_too_noisy:"Recording too noisy",ts_authenticator_voice_error_invalid:"Wrong passphrase!",ts_authenticator_face_title_auth:"Authenticate with Face",ts_authenticator_face_title_reg:"Register Face",ts_authenticator_face_intro_auth:"Capture a selfie in order to proceed",ts_authenticator_face_intro_reg:"Capture a selfie in order to proceed",ts_authenticator_face_error_invalid:"Could not find a match, please try again",ts_authenticator_totp_title:"Authenticate with Soft Token",ts_authenticator_totp_targets_intro:"Please select device",ts_authenticator_totp_input_intro:"Please input code",ts_authenticator_totp_input_with_challenge_intro:"Please use challenge and input code",ts_authenticator_totp_input_with_qr_challenge_intro:"Please scan QR challenge and input code",ts_authenticator_totp_qrcode_challenge_step1_message:"Step 1: Scan this QR code using your mobile app",ts_authenticator_totp_qrcode_challenge_step2_message:"Step 2: Enter the code generated by your mobile app",ts_authenticator_totp_code_challenge_step1_message:"Step 1: Enter this key into your mobile app",ts_authenticator_totp_code_challenge_step2_message:"Step 2: Enter the code generated by your mobile app",ts_authenticator_totp_input_hint:"Insert code",ts_authenticator_totp_targets_recently_used:"Recently used: %1$s",ts_authenticator_totp_targets_current_device:"Current Device",ts_authenticator_mobile_approve_title:"Mobile Approve",ts_authenticator_mobile_approve_fetching_data:"Please wait... Fetching data",ts_authenticator_mobile_approve_send:"SEND",ts_authenticator_mobile_approve_send_to_all:"SEND TO ALL",ts_authenticator_mobile_approve_targets_intro:"Please select device",ts_authenticator_mobile_approve_targets_recently_used:"Recently used: %1$s",ts_authenticator_mobile_approve_targets_current_device:"Current Device",ts_authenticator_mobile_approve_resend_message:"Didn't get the approval request?",ts_authenticator_mobile_approve_resend_cta:"RESEND",ts_session_config_title:"Authenticator configuration",ts_session_config_intro:"Register, remove or change your authenticators.",ts_session_config_item_action_register:"REGISTER",ts_session_config_item_action_unregister:"UNREGISTER",ts_session_config_item_action_reregister:"CHANGE",ts_session_config_item_action_set_as_default:"SET AS DEFAULT",ts_session_config_item_register_result:"%1$s registered successfully",ts_session_config_item_reregister_result:"%1$s changed successfully",ts_session_config_item_unregister_result:"%1$s unregistered successfully",ts_session_config_item_default_result:"%1$s is now the default authenticator",ts_session_config_item_register_failed:"%1$s registration failed. %2$s",ts_session_config_item_reregister_failed:"%1$s change failed. %2$s",ts_session_config_item_unregister_failed:"%1$s unregistration failed. %2$s",ts_session_config_item_default_failed:"Failed to make %1$s the default authenticator. %2$s",ts_session_config_item_unregister_dialog_title:"Are your sure?",ts_session_config_item_unregister_dialog_message:"Do you want to unregister %1$s?",ts_session_config_item_unregister_dialog_cta:"UNREGISTER",ts_session_config_error_dialog_title:"Something went wrong",ts_session_totp_title:"Generate Soft Token",ts_session_totp_content:"Your code is being reset every %1$s seconds.",ts_session_totp_unbound_title:"Unbound TOTP Generation",ts_session_totp_unbound_content:"Your TOTP code has been generated",ts_session_totp_unbound_code:"Your TOTP code is: %1$s",ts_session_totp_nottl_content:"Please use this code.",ts_session_totp_provision_sa_title:"Select Authenticator for Provisioning Soft Token",ts_session_totp_provision_password_title:"Provision Soft Token With Password",ts_session_totp_provision_pattern_title:"Provision Soft Token With Pattern",ts_session_totp_provision_pin_title:"Provision Soft Token With PIN",ts_session_totp_generation_sa_title:"Generate Soft Token with Authenticator",ts_session_totp_generation_password_title:"Generate Soft Token with Password",ts_session_totp_generation_pattern_title:"Generate Soft Token with Pattern",ts_session_totp_generation_pin_title:"Generate Soft Token with PIN",ts_session_totp_generation_fingerprint_title:"Generate Soft Token with Fingerprint",ts_session_totp_generation_device_biometrics_title:"Generate Soft Token with Device Biometrics",ts_session_totp_challenge_title_list:"Soft Token with Challenge",ts_session_totp_challenge_intro_list:"Choose challenge type",ts_session_totp_challenge_title_textual:"Textual",ts_session_totp_challenge_intro_textual:"Enter the challenge to proceed",ts_session_totp_challenge_title_qr:"QR Code",ts_session_totp_challenge_intro_qr:"Scan the QR code to proceed",ts_session_approval_approve:"APPROVE",ts_session_approval_deny:"DENY",ts_session_approval_completed_title:"Success",ts_session_approval_completed_subtitle:"The request has been successfully approved. Please return to the requesting application.",ts_session_approval_completed_denied_subtitle:"The request has been successfully denied. Please return to the requesting application.",ts_session_approval_dialog_title:"Deny approval",ts_session_approval_dialog_message:"Deny approval",ts_session_approval_dialog_cta:"DENY",ts_session_approval_approve_failed:"'%1$s' failed to approve",ts_session_approval_deny_failed:"'%1$s' failed to deny",ts_session_approval_approve_failed_title:"An Error Occurred",ts_session_approval_deny_failed_title:"An Error Occurred",ts_session_approval_approve_failed_cta:"CLOSE",ts_session_approval_deny_failed_cta:"CLOSE",ts_session_approval_username:"Username",ts_session_approval_service:"Service",ts_session_approval_description:"Details",ts_session_approval_requested_device:"Requesting Device",ts_session_approval_expiry:"Expiry",ts_session_approval_requested_location:"Request Location",ts_session_approval_request_expires_time:"Your request expires in %1$s",ts_session_approval_request_has_expired:"Your request has expired",ts_session_dm_title:"Your Devices",ts_session_dm_intro:"These are the devices you've used to log into our applications. Click on a device for more information and options.",ts_session_dm_section_current:"This device",ts_session_dm_section_others:"Other devices",ts_session_dm_last_used_date:"Last used: %1$s",ts_session_dm_last_used_location:"at %1$s",ts_session_dm_details_title:"Your Device Details",ts_session_dm_details_subtitle:"Details about your device",ts_session_dm_details_current_device:"Current device",ts_session_dm_details_rename_action:"RENAME",ts_session_dm_details_remove_subtitle:"You can remove this device if you're not using it anymore.",ts_session_dm_details_remove_action:"REMOVE",ts_session_dm_details_no_other_devices_available:"No other devices available at the moment",ts_session_dm_item_action_dialog_remove_title:"Remove '%1$s'",ts_session_dm_item_action_dialog_remove_message:"Are you sure you want to remove this device?",ts_session_dm_item_action_dialog_remove_cta:"REMOVE",ts_session_dm_item_action_dialog_rename_title:"Rename '%1$s'",ts_session_dm_item_action_dialog_rename_cta:"RENAME",ts_session_dm_details_rename_input_hint:"New Device Name",ts_session_dm_item_action_rename_result_positive:"Device %1$s was renamed successfully to %2$s",ts_session_dm_item_action_rename_result_negative:"Failed to rename %1$s. %2$s",ts_session_dm_item_action_remove_result_positive:"Device %1$s was removed successfully",ts_session_dm_item_action_remove_result_negative:"Failed to remove %1$s. %2$s",ts_session_dm_error_dialog_title:"Something went wrong",ts_session_promotion_title:"Promotion",ts_session_promotion_intro:"Select authentication method to register",ts_session_promotion_skip:"SKIP",ts_session_promotion_abort:"ABORT",ts_promise_sa_title:"Verify It's You",ts_promise_sa_content:"Choose how you want to verify yourself",ts_promise_co_title_auth:"Authentication canceled!",ts_promise_co_title_reg:"Registration canceled!",ts_promise_fallback_title:"%1$s failed.",ts_promise_fallback_content:"Would you like to try a different method?",ts_promise_fallback_action_fallback:"TRY ANOTHER METHOD",ts_promise_fallback_action_menu:"CHANGE METHOD",ts_promise_fallback_action_retry:"TRY AGAIN",ts_promise_fallback_action_cancel:"CANCEL",ts_promise_co_content:"What would you like to do?",ts_promise_co_abort:"ABORT",ts_promise_co_select:"SELECT METHOD",ts_promise_co_change:"CHANGE METHOD",ts_promise_co_retry:"RETRY METHOD",ts_promise_error_default_title_auth:"Authentication failed",ts_promise_error_default_title_reg:"Registration failed",ts_promise_error_default_content_auth:"%1$s",ts_promise_error_default_content_reg:"%1$s",ts_promise_error_lock_title:"Authenticator Locked!",ts_promise_error_lock_content:"Too many failed attempts",ts_promise_invalid_authenticator_title:"%1$s invalidated",ts_promise_invalid_authenticator_content:"This authenticator has became invalid and is no longer available.",ts_promise_invalid_authenticator_cta:"CONTINUE",ts_promise_rejection_policy_title:"Error",ts_promise_rejection_policy_content:"Configuration error, please contact support",ts_promise_rejection_policy_cta:"CONTINUE",ts_promise_rejection_locked_user_title:"User Locked",ts_promise_rejection_locked_user_content:"You have been locked, please contact support",ts_promise_rejection_locked_user_cta:"CONTINUE",ts_promise_rejection_locked_device_title:"Device Locked",ts_promise_rejection_locked_device_content:"Your device has been locked, please contact support",ts_promise_rejection_locked_device_cta:"CONTINUE",ts_promise_rejection_locked_application_title:"Application Locked",ts_promise_rejection_locked_application_content:"Your application has been locked, please contact support",ts_promise_rejection_locked_application_cta:"CONTINUE",ts_promise_rejection_approval_expired_title:"Expired",ts_promise_rejection_approval_expired_content:"Request has expired, please try again",ts_promise_rejection_approval_expired_cta:"CONTINUE",ts_session_authenticator_expired_title:"%1$s Expired",ts_session_authenticator_expired_content:"Click continue to reregister",ts_promise_rejection_feature_not_supported_title:"Upgrade Required",ts_promise_rejection_feature_not_supported_content:"Your application is too old, please upgrade",ts_promise_rejection_feature_not_supported_cta:"CONTINUE",ts_promise_rejection_cannot_consume_ticket_title:"Error",ts_promise_rejection_cannot_consume_ticket_content:"Configuration error, please contact support",ts_promise_rejection_cannot_consume_ticket_cta:"CONTINUE",ts_promise_rejection_username_already_exists_title:"User Already Exists",ts_promise_rejection_username_already_exists_content:"The user %1$s already exists.",ts_promise_rejection_username_already_exists_cta:"CLOSE",ts_promise_rejection_authenticator_fatal_error_title:"An Error Occurred",ts_promise_rejection_authenticator_fatal_error_content:"Something went wrong when trying to add or verify using this method. ",ts_promise_rejection_authenticator_fatal_error_cta:"CLOSE",ts_accessibility_totp_reset:"New code is %1$s. %2$s seconds left before reset.",ts_accessibility_totp_reader:"Code is %1$s. %2$s seconds left.",ts_accessibility_totp_no_ttl:"Your code is %1$s.",ts_accessibility_configuration_cta_register:"Register %1$s",ts_accessibility_configuration_cta_unregister:"Unregister %1$s",ts_accessibility_configuration_cta_reregister:"Change %1$s",ts_accessibility_input_reader:"%1$s cells filled, %2$s cells remaining",ts_accessibility_input_pin_cell:"Cell filled",ts_accessibility_input_reset:"Cells were reset.",ts_accessibility_authenticator_list_locked:"%1$s authenticator is locked. selection disabled.",ts_accessibility_authenticator_list_disabled:"%1$s authenticator is unregistered. selection disabled.",ts_accessibility_authenticator_list_enabled:"%1$s authenticator. double tap to authenticate",ts_accessibility_authenticator_list_default:"%1$s authenticator is the Default authenticator. double tap to authenticate",ts_accessibility_hide_input_field:"Hide Input field",ts_accessibility_show_input_field:"Show Input field",ts_accessibility_back:"Back",ts_accessibility_cancel:"Cancel",ts_accessibility_password_enter_password:"Enter your new password",ts_accessibility_password_enter_password_again:"Enter your new password again",ts_accessibility_password_error_reg_no_match:"Passwords don't match. Try again",ts_plugin_dynamic_form_mandatory:"%1$s *",ts_plugin_dynamic_form_error_mandatory:"'%1$s' is mandatory!",ts_plugin_dynamic_form_error_invalid:"'%1$s' invalid value",ts_plugin_dynamic_form_error_too_long:"'%1$s' is too long",ts_plugin_dynamic_form_error_not_phone:"'%1$s' isn't a valid phone number",ts_plugin_dynamic_form_error_not_email:"'%1$s' isn't a valid Email address",ts_plugin_dynamic_form_error_else:"Something went wrong",ts_plugin_dynamic_form_table_title:"Add row",ts_plugin_dynamic_form_table_title_item:"Add row to %1$s",ts_plugin_dynamic_form_error_general:"Failed to read '%1$s' value",ts_plugin_dynamic_form_item_cta_positive:"OK",ts_plugin_dynamic_form_item_cta_cancel:"Dismiss",ts_plugin_dynamic_form_item_cta_select_all:"Select All",ts_plugin_dynamic_form_item_cta_clear_all:"Clear All",ts_plugin_dynamic_form_item_phone_prefix:"%1$s +%2$s",ts_plugin_dynamic_form_item_phone_prefix_dialog_title:"Select country",ts_session_scan_qr_title:"Scan QR",ts_session_scan_qr_hint:"No QR code detected",ts_gen_recovery:"Forgot my %1$s"},ri=function(){function n(){c(this,n)}return l(n,[{key:"formatAsTwoDigits",value:function(n){return n.toLocaleString("EN",{minimumIntegerDigits:2,useGrouping:!1})}},{key:"logDateFormat",value:function(n){var t=n.getFullYear(),i=this.formatAsTwoDigits(n.getMonth()+1),r=this.formatAsTwoDigits(n.getDate()),u=this.formatAsTwoDigits(n.getHours()),f=this.formatAsTwoDigits(n.getMinutes()),e=this.formatAsTwoDigits(n.getSeconds()),o=n.getMilliseconds().toLocaleString("EN",{minimumIntegerDigits:3,useGrouping:!1});return"".concat(t,"-").concat(i,"-").concat(r," ").concat(u,":").concat(f,":").concat(e,".").concat(o)}},{key:"log",value:function(n,t,i){var r=com.ts.mobile.sdk.LogLevel[n].toUpperCase();console.log("".concat(this.logDateFormat(new Date),"\t").concat(r,"\t").concat(t,":\t").concat(i))}}]),n}(),g={set:d,get:function(n){return d.call(d,n)},remove:function(n){d(n,"",{expires:-1})}},ui=function(){function n(t){c(this,n);this._persistent=t}return l(n,[{key:"setItem",value:function(n,t){var i=btoa(t);this._persistent?g.set(n,i,{expires:365}):g.set(n,i)}},{key:"removeItem",value:function(n){g.remove(n)}},{key:"getItem",value:function(n){var t=g.get(n);return t&&(t=atob(t)),t}}]),n}(),fi=function(){function n(){c(this,n);this._memStore={}}return l(n,[{key:"setItem",value:function(n,t){this._memStore[n]=t}},{key:"removeItem",value:function(n){delete this._memStore[n]}},{key:"getItem",value:function(n){return this._memStore[n]}}]),n}(),a=function(){function n(t){if(c(this,n),"undefined"!=typeof window)try{this.currentStorage=window[t];this.currentStorage.setItem("ts:test","ok");this.currentStorage.removeItem("ts:test")}catch(n){console.warn("Failed to use browser storage. Resorting to cookies.");this.currentStorage=new ui("localStorage"==t)}else this.currentStorage=new fi}return l(n,[{key:"setItem",value:function(n,t){this.currentStorage.setItem(n,t)}},{key:"getItem",value:function(n){return this.currentStorage.getItem(n)}},{key:"removeItem",value:function(n){this.currentStorage.removeItem(n)}}]),n}(),r,ct,i,v,h,k,ut,w,b,t,p,lt;a.localStorage=new a("localStorage");a.sessionStorage=new a("sessionStorage");r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var yt=vt(function(n){!function(t,i,r){n.exports?n.exports=r():i.exports?i.exports=r():i.Fingerprint2=r()}(0,r,function(){var r=function(n,t){n=[n[0]>>>16,65535&n[0],n[1]>>>16,65535&n[1]];t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var i=[0,0,0,0];return i[3]+=n[3]+t[3],i[2]+=i[3]>>>16,i[3]&=65535,i[2]+=n[2]+t[2],i[1]+=i[2]>>>16,i[2]&=65535,i[1]+=n[1]+t[1],i[0]+=i[1]>>>16,i[1]&=65535,i[0]+=n[0]+t[0],i[0]&=65535,[i[0]<<16|i[1],i[2]<<16|i[3]]},i=function(n,t){n=[n[0]>>>16,65535&n[0],n[1]>>>16,65535&n[1]];t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var i=[0,0,0,0];return i[3]+=n[3]*t[3],i[2]+=i[3]>>>16,i[3]&=65535,i[2]+=n[2]*t[3],i[1]+=i[2]>>>16,i[2]&=65535,i[2]+=n[3]*t[2],i[1]+=i[2]>>>16,i[2]&=65535,i[1]+=n[1]*t[3],i[0]+=i[1]>>>16,i[1]&=65535,i[1]+=n[2]*t[2],i[0]+=i[1]>>>16,i[1]&=65535,i[1]+=n[3]*t[1],i[0]+=i[1]>>>16,i[1]&=65535,i[0]+=n[0]*t[3]+n[1]*t[2]+n[2]*t[1]+n[3]*t[0],i[0]&=65535,[i[0]<<16|i[1],i[2]<<16|i[3]]},f=function(n,t){return 32==(t%=64)?[n[1],n[0]]:t<32?[n[0]<<t|n[1]>>>32-t,n[1]<<t|n[0]>>>32-t]:(t-=32,[n[1]<<t|n[0]>>>32-t,n[0]<<t|n[1]>>>32-t])},t=function(n,t){return 0==(t%=64)?n:t<32?[n[0]<<t|n[1]>>>32-t,n[1]<<t]:[n[1]<<t-32,0]},n=function(n,t){return[n[0]^t[0],n[1]^t[1]]},h=function(t){return t=n(t,[0,t[0]>>>1]),t=i(t,[4283543511,3981806797]),t=n(t,[0,t[0]>>>1]),t=i(t,[3301882366,444984403]),n(t,[0,t[0]>>>1])},c=function(u,e){e=e||0;for(var p=(u=u||"").length%16,w=u.length-p,l=[0,e],a=[0,e],s=[0,0],c=[0,0],v=[2277735313,289559509],y=[1291169091,658871167],o=0;o<w;o+=16)s=[255&u.charCodeAt(o+4)|(255&u.charCodeAt(o+5))<<8|(255&u.charCodeAt(o+6))<<16|(255&u.charCodeAt(o+7))<<24,255&u.charCodeAt(o)|(255&u.charCodeAt(o+1))<<8|(255&u.charCodeAt(o+2))<<16|(255&u.charCodeAt(o+3))<<24],c=[255&u.charCodeAt(o+12)|(255&u.charCodeAt(o+13))<<8|(255&u.charCodeAt(o+14))<<16|(255&u.charCodeAt(o+15))<<24,255&u.charCodeAt(o+8)|(255&u.charCodeAt(o+9))<<8|(255&u.charCodeAt(o+10))<<16|(255&u.charCodeAt(o+11))<<24],s=i(s,v),s=f(s,31),s=i(s,y),l=n(l,s),l=f(l,27),l=r(l,a),l=r(i(l,[0,5]),[0,1390208809]),c=i(c,y),c=f(c,33),c=i(c,v),a=n(a,c),a=f(a,31),a=r(a,l),a=r(i(a,[0,5]),[0,944331445]);switch(s=[0,0],c=[0,0],p){case 15:c=n(c,t([0,u.charCodeAt(o+14)],48));case 14:c=n(c,t([0,u.charCodeAt(o+13)],40));case 13:c=n(c,t([0,u.charCodeAt(o+12)],32));case 12:c=n(c,t([0,u.charCodeAt(o+11)],24));case 11:c=n(c,t([0,u.charCodeAt(o+10)],16));case 10:c=n(c,t([0,u.charCodeAt(o+9)],8));case 9:c=n(c,[0,u.charCodeAt(o+8)]);c=i(c,y);c=f(c,33);c=i(c,v);a=n(a,c);case 8:s=n(s,t([0,u.charCodeAt(o+7)],56));case 7:s=n(s,t([0,u.charCodeAt(o+6)],48));case 6:s=n(s,t([0,u.charCodeAt(o+5)],40));case 5:s=n(s,t([0,u.charCodeAt(o+4)],32));case 4:s=n(s,t([0,u.charCodeAt(o+3)],24));case 3:s=n(s,t([0,u.charCodeAt(o+2)],16));case 2:s=n(s,t([0,u.charCodeAt(o+1)],8));case 1:s=n(s,[0,u.charCodeAt(o)]);s=i(s,v);s=f(s,31);s=i(s,y);l=n(l,s)}return l=n(l,[0,u.length]),a=n(a,[0,u.length]),l=r(l,a),a=r(a,l),l=h(l),a=h(a),l=r(l,a),a=r(a,l),("00000000"+(l[0]>>>0).toString(16)).slice(-8)+("00000000"+(l[1]>>>0).toString(16)).slice(-8)+("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)},y={preprocessor:null,audio:{timeout:1e3,excludeIOS11:!0},fonts:{swfContainerId:"fingerprintjs2",swfPath:"flash/compiled/FontList.swf",userDefinedFonts:[],extendedJsFonts:!1},screen:{detectScreenOrientation:!0},plugins:{sortPluginsFor:[/palemoon/i],excludeIE:!1},extraComponents:[],excludes:{enumerateDevices:!0,pixelRatio:!0,doNotTrack:!0,fontsFlash:!0},NOT_AVAILABLE:"not available",ERROR:"error",EXCLUDED:"excluded"},e=function(n,t){var i,u,r;if(Array.prototype.forEach&&n.forEach===Array.prototype.forEach)n.forEach(t);else if(n.length===+n.length)for(i=0,u=n.length;i<u;i++)t(n[i],i,n);else for(r in n)n.hasOwnProperty(r)&&t(n[r],r,n)},o=function(n,t){var i=[];return null==n?i:Array.prototype.map&&n.map===Array.prototype.map?n.map(t):(e(n,function(n,r,u){i.push(t(n,r,u))}),i)},l=function(n){if(null==navigator.plugins)return n.NOT_AVAILABLE;for(var t=[],i=0,r=navigator.plugins.length;i<r;i++)navigator.plugins[i]&&t.push(navigator.plugins[i]);return p(n)&&(t=t.sort(function(n,t){return n.name>t.name?1:n.name<t.name?-1:0})),o(t,function(n){var t=o(n,function(n){return[n.type,n.suffixes]});return[n.name,n.description,t]})},p=function(n){for(var r,i=!1,t=0,u=n.plugins.sortPluginsFor.length;t<u;t++)if(r=n.plugins.sortPluginsFor[t],navigator.userAgent.match(r)){i=!0;break}return i},a=function(){var n=document.createElement("canvas");return!(!n.getContext||!n.getContext("2d"))},v=function(){if(!a())return!1;var n=s();return!!window.WebGLRenderingContext&&!!n},s=function(){var t=document.createElement("canvas"),n=null;try{n=t.getContext("webgl")||t.getContext("experimental-webgl")}catch(t){}return n||(n=null),n},w=[{key:"userAgent",getData:function(n){n(navigator.userAgent)}},{key:"webdriver",getData:function(n,t){n(null==navigator.webdriver?t.NOT_AVAILABLE:navigator.webdriver)}},{key:"language",getData:function(n,t){n(navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||t.NOT_AVAILABLE)}},{key:"colorDepth",getData:function(n,t){n(window.screen.colorDepth||t.NOT_AVAILABLE)}},{key:"deviceMemory",getData:function(n,t){n(navigator.deviceMemory||t.NOT_AVAILABLE)}},{key:"pixelRatio",getData:function(n,t){n(window.devicePixelRatio||t.NOT_AVAILABLE)}},{key:"hardwareConcurrency",getData:function(n,t){n(function(n){return navigator.hardwareConcurrency?navigator.hardwareConcurrency:n.NOT_AVAILABLE}(t))}},{key:"screenResolution",getData:function(n,t){n(function(n){var t=[window.screen.width,window.screen.height];return n.screen.detectScreenOrientation&&t.sort().reverse(),t}(t))}},{key:"availableScreenResolution",getData:function(n,t){n(function(n){if(window.screen.availWidth&&window.screen.availHeight){var t=[window.screen.availHeight,window.screen.availWidth];return n.screen.detectScreenOrientation&&t.sort().reverse(),t}return n.NOT_AVAILABLE}(t))}},{key:"timezoneOffset",getData:function(n){n((new Date).getTimezoneOffset())}},{key:"timezone",getData:function(n,t){window.Intl&&window.Intl.DateTimeFormat?n((new window.Intl.DateTimeFormat).resolvedOptions().timeZone):n(t.NOT_AVAILABLE)}},{key:"sessionStorage",getData:function(n,t){n(function(n){try{return!!window.sessionStorage}catch(t){return n.ERROR}}(t))}},{key:"localStorage",getData:function(n,t){n(function(n){try{return!!window.localStorage}catch(t){return n.ERROR}}(t))}},{key:"indexedDb",getData:function(n,t){n(function(n){try{return!!window.indexedDB}catch(t){return n.ERROR}}(t))}},{key:"addBehavior",getData:function(n){n(!(!document.body||!document.body.addBehavior))}},{key:"openDatabase",getData:function(n){n(!!window.openDatabase)}},{key:"cpuClass",getData:function(n,t){n(function(n){return navigator.cpuClass||n.NOT_AVAILABLE}(t))}},{key:"platform",getData:function(n,t){n(function(n){return navigator.platform?navigator.platform:n.NOT_AVAILABLE}(t))}},{key:"doNotTrack",getData:function(n,t){n(function(n){return navigator.doNotTrack?navigator.doNotTrack:navigator.msDoNotTrack?navigator.msDoNotTrack:window.doNotTrack?window.doNotTrack:n.NOT_AVAILABLE}(t))}},{key:"plugins",getData:function(n,t){"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&/Trident/.test(navigator.userAgent)?t.plugins.excludeIE?n(t.EXCLUDED):n(function(n){var t=[];return Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(window,"ActiveXObject")||"ActiveXObject"in window?t=o(["AcroPDF.PDF","Adodb.Stream","AgControl.AgControl","DevalVRXCtrl.DevalVRXCtrl.1","MacromediaFlashPaper.MacromediaFlashPaper","Msxml2.DOMDocument","Msxml2.XMLHTTP","PDF.PdfCtrl","QuickTime.QuickTime","QuickTimeCheckObject.QuickTimeCheck.1","RealPlayer","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","Scripting.Dictionary","SWCtl.SWCtl","Shell.UIHelper","ShockwaveFlash.ShockwaveFlash","Skype.Detection","TDCCtl.TDCCtl","WMPlayer.OCX","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1"],function(t){try{return new window.ActiveXObject(t),t}catch(t){return n.ERROR}}):t.push(n.NOT_AVAILABLE),navigator.plugins&&(t=t.concat(l(n))),t}(t)):n(l(t))}},{key:"canvas",getData:function(n,t){a()?n(function(n){var r=[],i=document.createElement("canvas"),t;return i.width=2e3,i.height=200,i.style.display="inline",t=i.getContext("2d"),t.rect(0,0,10,10),t.rect(2,2,6,6),r.push("canvas winding:"+(!1===t.isPointInPath(5,5,"evenodd")?"yes":"no")),t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.font=n.dontUseFakeFontInCanvas?"11pt Arial":"11pt no-real-font-123",t.fillText("Cwm fjordbank glyphs vext quiz, ????",2,15),t.fillStyle="rgba(102, 204, 0, 0.2)",t.font="18pt Arial",t.fillText("Cwm fjordbank glyphs vext quiz, ????",4,45),t.globalCompositeOperation="multiply",t.fillStyle="rgb(255,0,255)",t.beginPath(),t.arc(50,50,50,0,2*Math.PI,!0),t.closePath(),t.fill(),t.fillStyle="rgb(0,255,255)",t.beginPath(),t.arc(100,50,50,0,2*Math.PI,!0),t.closePath(),t.fill(),t.fillStyle="rgb(255,255,0)",t.beginPath(),t.arc(75,100,50,0,2*Math.PI,!0),t.closePath(),t.fill(),t.fillStyle="rgb(255,0,255)",t.arc(75,75,75,0,2*Math.PI,!0),t.arc(75,75,25,0,2*Math.PI,!0),t.fill("evenodd"),i.toDataURL&&r.push("canvas fp:"+i.toDataURL()),r}(t)):n(t.NOT_AVAILABLE)}},{key:"webgl",getData:function(n,t){v()?n(function(){var n,h=function(t){return n.clearColor(0,0,0,1),n.enable(n.DEPTH_TEST),n.depthFunc(n.LEQUAL),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),"["+t[0]+", "+t[1]+"]"},t,r,c,i,u,f,o;if(!(n=s()))return null;t=[];r=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,r);c=new Float32Array([-.2,-.9,0,.4,-.26,0,0,.732134444,0]);n.bufferData(n.ARRAY_BUFFER,c,n.STATIC_DRAW);r.itemSize=3;r.numItems=3;i=n.createProgram();u=n.createShader(n.VERTEX_SHADER);n.shaderSource(u,"attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}");n.compileShader(u);f=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(f,"precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}");n.compileShader(f);n.attachShader(i,u);n.attachShader(i,f);n.linkProgram(i);n.useProgram(i);i.vertexPosAttrib=n.getAttribLocation(i,"attrVertex");i.offsetUniform=n.getUniformLocation(i,"uniformOffset");n.enableVertexAttribArray(i.vertexPosArray);n.vertexAttribPointer(i.vertexPosAttrib,r.itemSize,n.FLOAT,!1,0,0);n.uniform2f(i.offsetUniform,1,1);n.drawArrays(n.TRIANGLE_STRIP,0,r.numItems);try{t.push(n.canvas.toDataURL())}catch(h){}t.push("extensions:"+(n.getSupportedExtensions()||[]).join(";"));t.push("webgl aliased line width range:"+h(n.getParameter(n.ALIASED_LINE_WIDTH_RANGE)));t.push("webgl aliased point size range:"+h(n.getParameter(n.ALIASED_POINT_SIZE_RANGE)));t.push("webgl alpha bits:"+n.getParameter(n.ALPHA_BITS));t.push("webgl antialiasing:"+(n.getContextAttributes().antialias?"yes":"no"));t.push("webgl blue bits:"+n.getParameter(n.BLUE_BITS));t.push("webgl depth bits:"+n.getParameter(n.DEPTH_BITS));t.push("webgl green bits:"+n.getParameter(n.GREEN_BITS));t.push("webgl max anisotropy:"+function(n){var i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic"),t;return i?(t=n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT),0===t&&(t=2),t):null}(n));t.push("webgl max combined texture image units:"+n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS));t.push("webgl max cube map texture size:"+n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE));t.push("webgl max fragment uniform vectors:"+n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS));t.push("webgl max render buffer size:"+n.getParameter(n.MAX_RENDERBUFFER_SIZE));t.push("webgl max texture image units:"+n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS));t.push("webgl max texture size:"+n.getParameter(n.MAX_TEXTURE_SIZE));t.push("webgl max varying vectors:"+n.getParameter(n.MAX_VARYING_VECTORS));t.push("webgl max vertex attribs:"+n.getParameter(n.MAX_VERTEX_ATTRIBS));t.push("webgl max vertex texture image units:"+n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS));t.push("webgl max vertex uniform vectors:"+n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS));t.push("webgl max viewport dims:"+h(n.getParameter(n.MAX_VIEWPORT_DIMS)));t.push("webgl red bits:"+n.getParameter(n.RED_BITS));t.push("webgl renderer:"+n.getParameter(n.RENDERER));t.push("webgl shading language version:"+n.getParameter(n.SHADING_LANGUAGE_VERSION));t.push("webgl stencil bits:"+n.getParameter(n.STENCIL_BITS));t.push("webgl vendor:"+n.getParameter(n.VENDOR));t.push("webgl version:"+n.getParameter(n.VERSION));try{o=n.getExtension("WEBGL_debug_renderer_info");o&&(t.push("webgl unmasked vendor:"+n.getParameter(o.UNMASKED_VENDOR_WEBGL)),t.push("webgl unmasked renderer:"+n.getParameter(o.UNMASKED_RENDERER_WEBGL)))}catch(h){}return n.getShaderPrecisionFormat&&e(["FLOAT","INT"],function(i){e(["VERTEX","FRAGMENT"],function(r){e(["HIGH","MEDIUM","LOW"],function(u){e(["precision","rangeMin","rangeMax"],function(f){var o=n.getShaderPrecisionFormat(n[r+"_SHADER"],n[u+"_"+i])[f],e;"precision"!==f&&(f="precision "+f);e=["webgl ",r.toLowerCase()," shader ",u.toLowerCase()," ",i.toLowerCase()," ",f,":",o].join("");t.push(e)})})})}),t}()):n(t.NOT_AVAILABLE)}},{key:"webglVendorAndRenderer",getData:function(n){v()?n(function(){try{var n=s(),t=n.getExtension("WEBGL_debug_renderer_info");return n.getParameter(t.UNMASKED_VENDOR_WEBGL)+"~"+n.getParameter(t.UNMASKED_RENDERER_WEBGL)}catch(n){return null}}()):n()}},{key:"adBlock",getData:function(n){n(function(){var n=document.createElement("div"),t;n.innerHTML="&nbsp;";t=!(n.className="adsbox");try{document.body.appendChild(n);t=0===document.getElementsByClassName("adsbox")[0].offsetHeight;document.body.removeChild(n)}catch(n){t=!1}return t}())}},{key:"hasLiedLanguages",getData:function(n){n(function(){if(void 0!==navigator.languages)try{if(navigator.languages[0].substr(0,2)!==navigator.language.substr(0,2))return!0}catch(n){return!0}return!1}())}},{key:"hasLiedResolution",getData:function(n){n(window.screen.width<window.screen.availWidth||window.screen.height<window.screen.availHeight)}},{key:"hasLiedOs",getData:function(n){n(function(){var n,i=navigator.userAgent.toLowerCase(),r=navigator.oscpu,t=navigator.platform.toLowerCase();return(n=0<=i.indexOf("windows phone")?"Windows Phone":0<=i.indexOf("win")?"Windows":0<=i.indexOf("android")?"Android":0<=i.indexOf("linux")||0<=i.indexOf("cros")?"Linux":0<=i.indexOf("iphone")||0<=i.indexOf("ipad")?"iOS":0<=i.indexOf("mac")?"Mac":"Other",("ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints)&&"Windows Phone"!==n&&"Android"!==n&&"iOS"!==n&&"Other"!==n)?!0:void 0!==r&&(0<=(r=r.toLowerCase()).indexOf("win")&&"Windows"!==n&&"Windows Phone"!==n||0<=r.indexOf("linux")&&"Linux"!==n&&"Android"!==n||0<=r.indexOf("mac")&&"Mac"!==n&&"iOS"!==n||(-1===r.indexOf("win")&&-1===r.indexOf("linux")&&-1===r.indexOf("mac"))!=("Other"===n))?!0:0<=t.indexOf("win")&&"Windows"!==n&&"Windows Phone"!==n||(0<=t.indexOf("linux")||0<=t.indexOf("android")||0<=t.indexOf("pike"))&&"Linux"!==n&&"Android"!==n||(0<=t.indexOf("mac")||0<=t.indexOf("ipad")||0<=t.indexOf("ipod")||0<=t.indexOf("iphone"))&&"Mac"!==n&&"iOS"!==n||(t.indexOf("win")<0&&t.indexOf("linux")<0&&t.indexOf("mac")<0&&t.indexOf("iphone")<0&&t.indexOf("ipad")<0)!=("Other"===n)||void 0===navigator.plugins&&"Windows"!==n&&"Windows Phone"!==n}())}},{key:"hasLiedBrowser",getData:function(n){n(function(){var n,t=navigator.userAgent.toLowerCase(),u=navigator.productSub,r,i;if(("Chrome"==(n=0<=t.indexOf("firefox")?"Firefox":0<=t.indexOf("opera")||0<=t.indexOf("opr")?"Opera":0<=t.indexOf("chrome")?"Chrome":0<=t.indexOf("safari")?"Safari":0<=t.indexOf("trident")?"Internet Explorer":"Other")||"Safari"===n||"Opera"===n)&&"20030107"!==u||(i=eval.toString().length,37===i&&"Safari"!==n&&"Firefox"!==n&&"Other"!==n)||39===i&&"Internet Explorer"!==n&&"Other"!==n||33===i&&"Chrome"!==n&&"Opera"!==n&&"Other"!==n)return!0;try{throw"a";}catch(n){try{n.toSource();r=!0}catch(n){r=!1}}return r&&"Firefox"!==n&&"Other"!==n}())}},{key:"touchSupport",getData:function(n){n(function(){var n,t=0;void 0!==navigator.maxTouchPoints?t=navigator.maxTouchPoints:void 0!==navigator.msMaxTouchPoints&&(t=navigator.msMaxTouchPoints);try{document.createEvent("TouchEvent");n=!0}catch(t){n=!1}return[t,n,"ontouchstart"in window]}())}},{key:"fonts",getData:function(n,t){var r=["monospace","sans-serif","serif"],i=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"],u,v,y;t.fonts.extendedJsFonts&&(i=i.concat(["Abadi MT Condensed Light","Academy Engraved LET","ADOBE CASLON PRO","Adobe Garamond","ADOBE GARAMOND PRO","Agency FB","Aharoni","Albertus Extra Bold","Albertus Medium","Algerian","Amazone BT","American Typewriter","American Typewriter Condensed","AmerType Md BT","Andalus","Angsana New","AngsanaUPC","Antique Olive","Aparajita","Apple Chancery","Apple Color Emoji","Apple SD Gothic Neo","Arabic Typesetting","ARCHER","ARNO PRO","Arrus BT","Aurora Cn BT","AvantGarde Bk BT","AvantGarde Md BT","AVENIR","Ayuthaya","Bandy","Bangla Sangam MN","Bank Gothic","BankGothic Md BT","Baskerville","Baskerville Old Face","Batang","BatangChe","Bauer Bodoni","Bauhaus 93","Bazooka","Bell MT","Bembo","Benguiat Bk BT","Berlin Sans FB","Berlin Sans FB Demi","Bernard MT Condensed","BernhardFashion BT","BernhardMod BT","Big Caslon","BinnerD","Blackadder ITC","BlairMdITC TT","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bodoni MT","Bodoni MT Black","Bodoni MT Condensed","Bodoni MT Poster Compressed","Bookshelf Symbol 7","Boulder","Bradley Hand","Bradley Hand ITC","Bremen Bd BT","Britannic Bold","Broadway","Browallia New","BrowalliaUPC","Brush Script MT","Californian FB","Calisto MT","Calligrapher","Candara","CaslonOpnface BT","Castellar","Centaur","Cezanne","CG Omega","CG Times","Chalkboard","Chalkboard SE","Chalkduster","Charlesworth","Charter Bd BT","Charter BT","Chaucer","ChelthmITC Bk BT","Chiller","Clarendon","Clarendon Condensed","CloisterBlack BT","Cochin","Colonna MT","Constantia","Cooper Black","Copperplate","Copperplate Gothic","Copperplate Gothic Bold","Copperplate Gothic Light","CopperplGoth Bd BT","Corbel","Cordia New","CordiaUPC","Cornerstone","Coronet","Cuckoo","Curlz MT","DaunPenh","Dauphin","David","DB LCD Temp","DELICIOUS","Denmark","DFKai-SB","Didot","DilleniaUPC","DIN","DokChampa","Dotum","DotumChe","Ebrima","Edwardian Script ITC","Elephant","English 111 Vivace BT","Engravers MT","EngraversGothic BT","Eras Bold ITC","Eras Demi ITC","Eras Light ITC","Eras Medium ITC","EucrosiaUPC","Euphemia","Euphemia UCAS","EUROSTILE","Exotc350 Bd BT","FangSong","Felix Titling","Fixedsys","FONTIN","Footlight MT Light","Forte","FrankRuehl","Fransiscan","Freefrm721 Blk BT","FreesiaUPC","Freestyle Script","French Script MT","FrnkGothITC Bk BT","Fruitger","FRUTIGER","Futura","Futura Bk BT","Futura Lt BT","Futura Md BT","Futura ZBlk BT","FuturaBlack BT","Gabriola","Galliard BT","Gautami","Geeza Pro","Geometr231 BT","Geometr231 Hv BT","Geometr231 Lt BT","GeoSlab 703 Lt BT","GeoSlab 703 XBd BT","Gigi","Gill Sans","Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Gisha","Gloucester MT Extra Condensed","GOTHAM","GOTHAM BOLD","Goudy Old Style","Goudy Stout","GoudyHandtooled BT","GoudyOLSt BT","Gujarati Sangam MN","Gulim","GulimChe","Gungsuh","GungsuhChe","Gurmukhi MN","Haettenschweiler","Harlow Solid Italic","Harrington","Heather","Heiti SC","Heiti TC","HELV","Herald","High Tower Text","Hiragino Kaku Gothic ProN","Hiragino Mincho ProN","Hoefler Text","Humanst 521 Cn BT","Humanst521 BT","Humanst521 Lt BT","Imprint MT Shadow","Incised901 Bd BT","Incised901 BT","Incised901 Lt BT","INCONSOLATA","Informal Roman","Informal011 BT","INTERSTATE","IrisUPC","Iskoola Pota","JasmineUPC","Jazz LET","Jenson","Jester","Jokerman","Juice ITC","Kabel Bk BT","Kabel Ult BT","Kailasa","KaiTi","Kalinga","Kannada Sangam MN","Kartika","Kaufmann Bd BT","Kaufmann BT","Khmer UI","KodchiangUPC","Kokila","Korinna BT","Kristen ITC","Krungthep","Kunstler Script","Lao UI","Latha","Leelawadee","Letter Gothic","Levenim MT","LilyUPC","Lithograph","Lithograph Light","Long Island","Lydian BT","Magneto","Maiandra GD","Malayalam Sangam MN","Malgun Gothic","Mangal","Marigold","Marion","Marker Felt","Market","Marlett","Matisse ITC","Matura MT Script Capitals","Meiryo","Meiryo UI","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Tai Le","Microsoft Uighur","Microsoft YaHei","Microsoft Yi Baiti","MingLiU","MingLiU_HKSCS","MingLiU_HKSCS-ExtB","MingLiU-ExtB","Minion","Minion Pro","Miriam","Miriam Fixed","Mistral","Modern","Modern No. 20","Mona Lisa Solid ITC TT","Mongolian Baiti","MONO","MoolBoran","Mrs Eaves","MS LineDraw","MS Mincho","MS PMincho","MS Reference Specialty","MS UI Gothic","MT Extra","MUSEO","MV Boli","Nadeem","Narkisim","NEVIS","News Gothic","News GothicMT","NewsGoth BT","Niagara Engraved","Niagara Solid","Noteworthy","NSimSun","Nyala","OCR A Extended","Old Century","Old English Text MT","Onyx","Onyx BT","OPTIMA","Oriya Sangam MN","OSAKA","OzHandicraft BT","Palace Script MT","Papyrus","Parchment","Party LET","Pegasus","Perpetua","Perpetua Titling MT","PetitaBold","Pickwick","Plantagenet Cherokee","Playbill","PMingLiU","PMingLiU-ExtB","Poor Richard","Poster","PosterBodoni BT","PRINCETOWN LET","Pristina","PTBarnum BT","Pythagoras","Raavi","Rage Italic","Ravie","Ribbon131 Bd BT","Rockwell","Rockwell Condensed","Rockwell Extra Bold","Rod","Roman","Sakkal Majalla","Santa Fe LET","Savoye LET","Sceptre","Script","Script MT Bold","SCRIPTINA","Serifa","Serifa BT","Serifa Th BT","ShelleyVolante BT","Sherwood","Shonar Bangla","Showcard Gothic","Shruti","Signboard","SILKSCREEN","SimHei","Simplified Arabic","Simplified Arabic Fixed","SimSun","SimSun-ExtB","Sinhala Sangam MN","Sketch Rockwell","Skia","Small Fonts","Snap ITC","Snell Roundhand","Socket","Souvenir Lt BT","Staccato222 BT","Steamer","Stencil","Storybook","Styllo","Subway","Swis721 BlkEx BT","Swiss911 XCm BT","Sylfaen","Synchro LET","System","Tamil Sangam MN","Technical","Teletype","Telugu Sangam MN","Tempus Sans ITC","Terminal","Thonburi","Traditional Arabic","Trajan","TRAJAN PRO","Tristan","Tubular","Tunga","Tw Cen MT","Tw Cen MT Condensed","Tw Cen MT Condensed Extra Bold","TypoUpright BT","Unicorn","Univers","Univers CE 55 Medium","Univers Condensed","Utsaah","Vagabond","Vani","Vijaya","Viner Hand ITC","VisualUI","Vivaldi","Vladimir Script","Vrinda","Westminster","WHITNEY","Wide Latin","ZapfEllipt BT","ZapfHumnst BT","ZapfHumnst Dm BT","Zapfino","Zurich BlkEx BT","Zurich Ex BT","ZWAdobeF"]));i=(i=i.concat(t.fonts.userDefinedFonts)).filter(function(n,t){return i.indexOf(n)===t});var f=document.getElementsByTagName("body")[0],o=document.createElement("div"),s=document.createElement("div"),h={},c={},l=function(){var n=document.createElement("span");return n.style.position="absolute",n.style.left="-9999px",n.style.fontSize="72px",n.style.fontStyle="normal",n.style.fontWeight="normal",n.style.letterSpacing="normal",n.style.lineBreak="auto",n.style.lineHeight="normal",n.style.textTransform="none",n.style.textAlign="left",n.style.textDecoration="none",n.style.textShadow="none",n.style.whiteSpace="normal",n.style.wordBreak="normal",n.style.wordSpacing="normal",n.innerHTML="mmmmmmmmmmlli",n},w=function(n){for(var i=!1,t=0;t<r.length;t++)if(i=n[t].offsetWidth!==h[r[t]]||n[t].offsetHeight!==c[r[t]])return i;return i},a=function(){for(var n,i=[],t=0,u=r.length;t<u;t++)n=l(),n.style.fontFamily=r[t],o.appendChild(n),i.push(n);return i}();for(f.appendChild(o),u=0,v=r.length;u<v;u++)h[r[u]]=a[u].offsetWidth,c[r[u]]=a[u].offsetHeight;y=function(){for(var f,e,o,t,h={},n=0,a=i.length;n<a;n++){for(var c=[],u=0,v=r.length;u<v;u++)f=(e=i[n],o=r[u],t=void 0,(t=l()).style.fontFamily="'"+e+"',"+o,t),s.appendChild(f),c.push(f);h[i[n]]=c}return h}();f.appendChild(s);for(var p=[],e=0,b=i.length;e<b;e++)w(y[i[e]])&&p.push(i[e]);f.removeChild(s);f.removeChild(o);n(p)},pauseBefore:!0},{key:"fontsFlash",getData:function(n,t){return void 0!==window.swfobject?window.swfobject.hasFlashPlayerVersion("9.0.0")?t.fonts.swfPath?void function(n,t){var i="___fp_swf_loaded",r,u,f;window[i]=function(t){n(t)};u=t.fonts.swfContainerId;(r=document.createElement("div")).setAttribute("id",(void 0).fonts.swfContainerId);document.body.appendChild(r);f={onReady:i};window.swfobject.embedSWF(t.fonts.swfPath,u,"1","1","9.0.0",!1,f,{allowScriptAccess:"always",menu:"false"},{})}(function(t){n(t)},t):n("missing options.fonts.swfPath"):n("flash not installed"):n("swf object not loaded")},pauseBefore:!0},{key:"audio",getData:function(n,t){var o=t.audio,f,i,u,r,s;if(o.excludeIOS11&&navigator.userAgent.match(/OS 11.+Version\/11.+Safari/))return n(t.EXCLUDED);if(f=window.OfflineAudioContext||window.webkitOfflineAudioContext,null==f)return n(t.NOT_AVAILABLE);i=new f(1,44100,44100);u=i.createOscillator();u.type="triangle";u.frequency.setValueAtTime(1e4,i.currentTime);r=i.createDynamicsCompressor();e([["threshold",-50],["knee",40],["ratio",12],["reduction",-20],["attack",0],["release",.25]],function(n){void 0!==r[n[0]]&&"function"==typeof r[n[0]].setValueAtTime&&r[n[0]].setValueAtTime(n[1],i.currentTime)});u.connect(r);r.connect(i.destination);u.start(0);i.startRendering();s=setTimeout(function(){return console.warn('Audio fingerprint timed out. Please report bug at https://github.com/Valve/fingerprintjs2 with your user agent: "'+navigator.userAgent+'".'),i.oncomplete=function(){},i=null,n("audioTimeout")},o.timeout);i.oncomplete=function(t){var i;try{clearTimeout(s);i=t.renderedBuffer.getChannelData(0).slice(4500,5e3).reduce(function(n,t){return n+Math.abs(t)},0).toString();u.disconnect();r.disconnect()}catch(t){return void n(t)}n(i)}}},{key:"enumerateDevices",getData:function(n,t){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return n(t.NOT_AVAILABLE);navigator.mediaDevices.enumerateDevices().then(function(t){n(t.map(function(n){return"id="+n.deviceId+";gid="+n.groupId+";"+n.kind+";"+n.label}))}).catch(function(t){n(t)})}}],u=function(){throw new Error("'new Fingerprint()' is deprecated, see https://github.com/Valve/fingerprintjs2#upgrade-guide-from-182-to-200");};return u.get=function(n,t){t?n||(n={}):(t=n,n={}),function(n,t){var r,i;if(null!=t)for(i in t)null==(r=t[i])||Object.prototype.hasOwnProperty.call(n,i)||(n[i]=r)}(n,y);n.components=n.extraComponents.concat(w);var i={data:[],addPreprocessedComponent:function(t,r){"function"==typeof n.preprocessor&&(r=n.preprocessor(t,r));i.data.push({key:t,value:r})}},u=-1;!function r(f){if((u+=1)>=n.components.length)t(i.data);else{var e=n.components[u];if(n.excludes[e.key])r(!1);else{if(!f&&e.pauseBefore)return u-=1,void setTimeout(function(){r(!0)},1);try{e.getData(function(n){i.addPreprocessedComponent(e.key,n);r(!1)},n)}catch(f){i.addPreprocessedComponent(e.key,String(f));r(!1)}}}}(!1)},u.getPromise=function(n){return new Promise(function(t){u.get(n,t)})},u.getV18=function(n,t){return null==t&&(t=n,n={}),u.get(n,function(i){for(var r,e,u=[],f=0;f<i.length;f++)if(r=i[f],r.value===(n.NOT_AVAILABLE||"not available"))u.push({key:r.key,value:"unknown"});else if("plugins"===r.key)u.push({key:"plugins",value:o(r.value,function(n){var t=o(n[2],function(n){return n.join?n.join("~"):n}).join(",");return[n[0],n[1],t].join("::")})});else if(-1!==["canvas","webgl"].indexOf(r.key))u.push({key:r.key,value:r.value.join("~")});else if(-1!==["sessionStorage","localStorage","indexedDb","addBehavior","openDatabase"].indexOf(r.key)){if(!r.value)continue;u.push({key:r.key,value:1})}else r.value?u.push(r.value.join?{key:r.key,value:r.value.join(";")}:r):u.push({key:r.key,value:r.value});e=c(o(u,function(n){return n.value}).join("~~~"),31);t(e,u)})},u.x64hash128=c,u.VERSION="2.1.0",u})}),et=vt(function(n,t){!function(i){var r="model",o="name",f="type",e="vendor",s="version",c="mobile",h="tablet",a="smarttv",v={extend:function(n,t){var r={};for(var i in n)r[i]=t[i]&&t[i].length%2==0?t[i].concat(n[i]):n[i];return r},has:function(n,t){return"string"==typeof n&&-1!==t.toLowerCase().indexOf(n.toLowerCase())},lowerize:function(n){return n.toLowerCase()},major:function(n){if("string"===u(n))return n.replace(/[^\d\.]/g,"").split(".")[0]},trim:function(n){return n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},l={rgx:function(n,t){for(var s,l,e,i,o,r,h,c,f=0;f<t.length&&!o;){for(h=t[f],c=t[f+1],s=l=0;s<h.length&&!o;)if(o=h[s++].exec(n))for(e=0;e<c.length;e++)r=o[++l],"object"===u(i=c[e])&&i.length>0?2==i.length?this[i[0]]="function"==u(i[1])?i[1].call(this,r):i[1]:3==i.length?this[i[0]]="function"!==u(i[1])||i[1].exec&&i[1].test?r?r.replace(i[1],i[2]):void 0:r?i[1].call(this,r,i[2]):void 0:4==i.length&&(this[i[0]]=r?i[3].call(this,r.replace(i[1],i[2])):void 0):this[i]=r||void 0;f+=2}},str:function(n,t){var i,r;for(i in t)if("object"===u(t[i])&&t[i].length>0){for(r=0;r<t[i].length;r++)if(v.has(t[i][r],n))return"?"===i?void 0:i}else if(v.has(t[i],n))return"?"===i?void 0:i;return n}},w={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},k={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[o,s],[/(opios)[\/\s]+([\w\.]+)/i],[[o,"Opera Mini"],s],[/\s(opr)\/([\w\.]+)/i],[[o,"Opera"],s],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[o,s],[/(konqueror)\/([\w\.]+)/i],[[o,"Konqueror"],s],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[o,"IE"],s],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[o,"Edge"],s],[/(yabrowser)\/([\w\.]+)/i],[[o,"Yandex"],s],[/(Avast)\/([\w\.]+)/i],[[o,"Avast Secure Browser"],s],[/(AVG)\/([\w\.]+)/i],[[o,"AVG Secure Browser"],s],[/(puffin)\/([\w\.]+)/i],[[o,"Puffin"],s],[/(focus)\/([\w\.]+)/i],[[o,"Firefox Focus"],s],[/(opt)\/([\w\.]+)/i],[[o,"Opera Touch"],s],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[o,"UCBrowser"],s],[/(comodo_dragon)\/([\w\.]+)/i],[[o,/_/g," "],s],[/(windowswechat qbcore)\/([\w\.]+)/i],[[o,"WeChat(Win) Desktop"],s],[/(micromessenger)\/([\w\.]+)/i],[[o,"WeChat"],s],[/(brave)\/([\w\.]+)/i],[[o,"Brave"],s],[/(qqbrowserlite)\/([\w\.]+)/i],[o,s],[/(QQ)\/([\d\.]+)/i],[o,s],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[o,s],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[o,s],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[o,s],[/(MetaSr)[\/\s]?([\w\.]+)/i],[o],[/(LBBROWSER)/i],[o],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[s,[o,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[s,[o,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[o,s],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[s,[o,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[o,/(.+)/,"$1 WebView"],s],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[o,/(.+(?:g|us))(.+)/,"$1 $2"],s],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[s,[o,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[o,"Sailfish Browser"],s],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[o,s],[/(dolfin)\/([\w\.]+)/i],[[o,"Dolphin"],s],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[o,"360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[o,"Chrome"],s],[/(coast)\/([\w\.]+)/i],[[o,"Opera Coast"],s],[/fxios\/([\w\.-]+)/i],[s,[o,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[s,[o,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[s,o],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[o,"GSA"],s],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[o,[s,l.str,w.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[o,s],[/(navigator|netscape)\/([\w\.-]+)/i],[[o,"Netscape"],s],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[o,s]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",v.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",v.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",v.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[r,e,[f,h]],[/applecoremedia\/[\w\.]+ \((ipad)/],[r,[e,"Apple"],[f,h]],[/(apple\s{0,1}tv)/i],[[r,"Apple TV"],[e,"Apple"],[f,a]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[e,r,[f,h]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[r,[e,"Amazon"],[f,h]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[r,l.str,w.device.amazon.model],[e,"Amazon"],[f,c]],[/android.+aft([bms])\sbuild/i],[r,[e,"Amazon"],[f,a]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[r,e,[f,c]],[/\((ip[honed|\s\w*]+);/i],[r,[e,"Apple"],[f,c]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[e,r,[f,c]],[/\(bb10;\s(\w+)/i],[r,[e,"BlackBerry"],[f,c]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[r,[e,"Asus"],[f,h]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[e,"Sony"],[r,"Xperia Tablet"],[f,h]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[r,[e,"Sony"],[f,c]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[e,r,[f,"console"]],[/android.+;\s(shield)\sbuild/i],[r,[e,"Nvidia"],[f,"console"]],[/(playstation\s[34portablevi]+)/i],[r,[e,"Sony"],[f,"console"]],[/(sprint\s(\w+))/i],[[e,l.str,w.device.sprint.vendor],[r,l.str,w.device.sprint.model],[f,c]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[e,[r,/_/g," "],[f,c]],[/(nexus\s9)/i],[r,[e,"HTC"],[f,h]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p|vog-l29|ane-lx1|eml-l29)/i],[r,[e,"Huawei"],[f,c]],[/android.+(bah2?-a?[lw]\d{2})/i],[r,[e,"Huawei"],[f,h]],[/(microsoft);\s(lumia[\s\w]+)/i],[e,r,[f,c]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[r,[e,"Microsoft"],[f,"console"]],[/(kin\.[onetw]{3})/i],[[r,/\./g," "],[e,"Microsoft"],[f,c]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[r,[e,"Motorola"],[f,c]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[r,[e,"Motorola"],[f,h]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[e,v.trim],[r,v.trim],[f,a]],[/hbbtv.+maple;(\d+)/i],[[r,/^/,"SmartTV"],[e,"Samsung"],[f,a]],[/\(dtv[\);].+(aquos)/i],[r,[e,"Sharp"],[f,a]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[e,"Samsung"],r,[f,h]],[/smart-tv.+(samsung)/i],[e,[f,a],r],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[e,"Samsung"],r,[f,c]],[/sie-(\w*)/i],[r,[e,"Siemens"],[f,c]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[e,"Nokia"],r,[f,c]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[r,[e,"Acer"],[f,h]],[/android.+([vl]k\-?\d{3})\s+build/i],[r,[e,"LG"],[f,h]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[e,"LG"],r,[f,h]],[/(lg) netcast\.tv/i],[e,r,[f,a]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[r,[e,"LG"],[f,c]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[e,r,[f,h]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[r,[e,"Lenovo"],[f,h]],[/(lenovo)[_\s-]?([\w-]+)/i],[e,r,[f,c]],[/linux;.+((jolla));/i],[e,r,[f,c]],[/((pebble))app\/[\d\.]+\s/i],[e,r,[f,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[e,r,[f,c]],[/crkey/i],[[r,"Chromecast"],[e,"Google"],[f,a]],[/android.+;\s(glass)\s\d/i],[r,[e,"Google"],[f,"wearable"]],[/android.+;\s(pixel c)[\s)]/i],[r,[e,"Google"],[f,h]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[r,[e,"Google"],[f,c]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[r,/_/g," "],[e,"Xiaomi"],[f,c]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[r,/_/g," "],[e,"Xiaomi"],[f,h]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[r,[e,"Meizu"],[f,c]],[/(mz)-([\w-]{2,})/i],[[e,"Meizu"],r,[f,c]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[r,[e,"OnePlus"],[f,c]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[r,[e,"RCA"],[f,h]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[r,[e,"Dell"],[f,h]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[r,[e,"Verizon"],[f,h]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[e,"Barnes & Noble"],r,[f,h]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[r,[e,"NuVision"],[f,h]],[/android.+;\s(k88)\sbuild/i],[r,[e,"ZTE"],[f,h]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[r,[e,"Swiss"],[f,c]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[r,[e,"Swiss"],[f,h]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[r,[e,"Zeki"],[f,h]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[e,"Dragon Touch"],r,[f,h]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[r,[e,"Insignia"],[f,h]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[r,[e,"NextBook"],[f,h]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[e,"Voice"],r,[f,c]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[e,"LvTel"],r,[f,c]],[/android.+;\s(PH-1)\s/i],[r,[e,"Essential"],[f,c]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[r,[e,"Envizen"],[f,h]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[e,r,[f,h]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[r,[e,"MachSpeed"],[f,h]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[e,r,[f,h]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[r,[e,"Rotor"],[f,h]],[/android.+(KS(.+))\s+build/i],[r,[e,"Amazon"],[f,h]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[e,r,[f,h]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[f,v.lowerize],e,r],[/[\s\/\(](smart-?tv)[;\)]/i],[[f,a]],[/(android[\w\.\s\-]{0,9});.+build/i],[r,[e,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[s,[o,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[s,[o,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[o,s],[/rv\:([\w\.]{1,9}).+(gecko)/i],[s,o]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[o,s],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[o,[s,l.str,w.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[o,"Windows"],[s,l.str,w.os.windows.version]],[/\((bb)(10);/i],[[o,"BlackBerry"],s],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[o,s],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[o,"Symbian"],s],[/\((series40);/i],[o],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[o,"Firefox OS"],s],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[o,s],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[o,"Chromium OS"],s],[/(sunos)\s?([\w\.\d]*)/i],[[o,"Solaris"],s],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[o,s],[/(haiku)\s(\w+)/i],[o,s],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[s,/_/g,"."],[o,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[o,"Mac OS"],[s,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[o,s]]},y=function n(t,r){if("object"===u(t)&&(r=t,t=void 0),!(this instanceof n))return new n(t,r).getResult();var f=t||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),e=r?v.extend(k,r):k;return this.getBrowser=function(){var n={name:void 0,version:void 0};return l.rgx.call(n,f,e.browser),n.major=v.major(n.version),n},this.getCPU=function(){var n={architecture:void 0};return l.rgx.call(n,f,e.cpu),n},this.getDevice=function(){var n={vendor:void 0,model:void 0,type:void 0};return l.rgx.call(n,f,e.device),n},this.getEngine=function(){var n={name:void 0,version:void 0};return l.rgx.call(n,f,e.engine),n},this.getOS=function(){var n={name:void 0,version:void 0};return l.rgx.call(n,f,e.os),n},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return f},this.setUA=function(n){return f=n,this},this},p,b;y.VERSION="0.7.21";y.BROWSER={NAME:o,MAJOR:"major",VERSION:s};y.CPU={ARCHITECTURE:"architecture"};y.DEVICE={MODEL:r,VENDOR:e,TYPE:f,CONSOLE:"console",MOBILE:c,SMARTTV:a,TABLET:h,WEARABLE:"wearable",EMBEDDED:"embedded"};y.ENGINE={NAME:o,VERSION:s};y.OS={NAME:o,VERSION:s};n.exports&&(t=n.exports=y);t.UAParser=y;p=i&&(i.jQuery||i.Zepto);p&&!p.ua&&(b=new y,p.ua=b.getResult(),p.ua.get=function(){return b.getUA()},p.ua.set=function(n){var t,i;b.setUA(n);t=b.getResult();for(i in t)p.ua[i]=t[i]})}("object"===("undefined"==typeof window?"undefined":u(window))?window:r)}),pt=et.UAParser,ot=Object.freeze({__proto__:null,"default":et,__moduleExports:et,UAParser:pt}),nt=void 0,tt=void 0;var si=function(){function n(){c(this,n);this.locales={}}return l(n,[{key:"getString",value:function(n,t){var r=t||"en-US",i=this.locales[r];return i&&i.hasOwnProperty(n)?i[n]:n}},{key:"addDictionary",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US",i=this.locales[t]||{},r=Object.assign(i,n);this.locales[t]=r}}]),n}(),hi=function(){function n(t,i){c(this,n);this.navi=navigator;this.opType=t;this.options=i}return l(n,[{key:"b64Encode",value:function(n){for(var i="",r=new Uint8Array(n),u=r.byteLength,t=0;t<u;t++)i+=String.fromCharCode(r[t]);return window.btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}},{key:"b64Decode",value:function(n){for(var f=n.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,""),i=window.atob(f),r=i.length,u=new Uint8Array(r),t=0;t<r;t++)u[t]=i.charCodeAt(t);return u.buffer}},{key:"publicKeyCredentialToJSON",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25,h,t,c,f,i;if(n instanceof ArrayBuffer)return this.b64Encode(n);if(r<=0)return n;if(n instanceof Array){var e=[],u=!0,o=!1,s=void 0;try{for(t=n[Symbol.iterator]();!(u=(h=t.next()).done);u=!0)c=h.value,e.push(this.publicKeyCredentialToJSON(c),r-1)}catch(n){o=!0;s=n}finally{try{u||null==t.return||t.return()}finally{if(o)throw s;}}return e}if(n instanceof Object){f={};for(i in n)"function"!=typeof n[i]&&(f[i]=this.publicKeyCredentialToJSON(n[i],r-1));return f}return n}},{key:"execute",value:function(){var t,r=this,n=JSON.parse(JSON.stringify(this.options)),s,i,f;switch(this.opType){case com.ts.mobile.sdkhost.Fido2CredentialsOpType.Create:n.publicKey.challenge=this.b64Decode(n.publicKey.challenge);n.publicKey.user.id=this.b64Decode(n.publicKey.user.id);n.publicKey.excludeCredentials.map(function(n){return n.id=r.b64Decode(n.id),n});t=this.navi.credentials.create(n).then(function(n){n.clientExtensionResults=n.getClientExtensionResults();var t=n.response&&n.response.getTransports&&n.response.getTransports(),i=r.publicKeyCredentialToJSON(n);return t&&t.length>0&&(i.response.transports=t),i});break;case com.ts.mobile.sdkhost.Fido2CredentialsOpType.Get:n.publicKey.challenge=this.b64Decode(n.publicKey.challenge);var u=!0,e=!1,o=void 0;try{for(i=n.publicKey.allowCredentials[Symbol.iterator]();!(u=(s=i.next()).done);u=!0)f=s.value,f.id=this.b64Decode(f.id)}catch(t){e=!0;o=t}finally{try{u||null==i.return||i.return()}finally{if(e)throw o;}}t=this.navi.credentials.get(n).then(function(n){return n.clientExtensionResults=n.getClientExtensionResults(),r.publicKeyCredentialToJSON(n)})}return t=t.catch(function(n){throw ci.indexOf(n.name)>-1?new com.ts.mobile.sdk.impl.AuthenticationErrorImpl(com.ts.mobile.sdk.AuthenticationErrorCode.UserCanceled,"Received FIDO2 cancellation request from platform; Error: ".concat(n)):n;})}}]),n}(),ci=["NotAllowedError","AbortError"],gt=function(){function n(t,i,r,u,f){c(this,n);this._tag=t;this._keyClass=i;this._protection=r;this._keyData=u;this._keyStore=f}return l(n,[{key:"getKeyClass",value:function(){return this._keyClass}},{key:"getTag",value:function(){return this._tag}},{key:"getBioProtected",value:function(){return this._protection}},{key:"setBiometricPromptInfo",value:function(){}},{key:"signHex",value:function(n){return this._keyStore.signWithKeyPair(this._tag,this._keyClass,n)}},{key:"encrypt",value:function(){throw new Error("Method not implemented.");}},{key:"decrypt",value:function(){throw new Error("Method not implemented.");}},{key:"unwrapAsymmetricKeyPairFromPrivateKeyHex",value:function(){throw new Error("Method not implemented.");}},{key:"unwrapSymmetricKeyHex",value:function(){throw new Error("Method not implemented.");}},{key:"wrapSymmetricKey",value:function(){throw new Error("Method not implemented.");}},{key:"publicKeyToJson",value:function(){return this._keyData}},{key:"closeKeyPair",value:function(){throw new Error("Method not implemented.");}}]),n}(),li=function(){function n(t){c(this,n);this._host=t}return l(n,[{key:"generateKeyPair",value:function(n,t,i,r){var u=this,f=this.keyGenParamsForKeyClass(t);return this.generateKeyPairInternal(n,f,t,i,r).catch(function(f){if(u._host.log(com.ts.mobile.sdk.LogLevel.Error,"TransmitSDK/Tarsus","Failed to generate key pair: ".concat(f)),f instanceof DOMException&&"DataCloneError"===f.name){var e=u.fallbackKeyGenParamsForKeyClass(t);return u.generateKeyPairInternal(n,e,t,i,r)}throw u._host.log(com.ts.mobile.sdk.LogLevel.Error,"TransmitSDK/Tarsus","Failed to generate key pair: ".concat(f)),com.ts.mobile.sdk.impl.AuthenticationErrorImpl.ensureAuthenticationError(f);})}},{key:"generateKeyPairInternal",value:function(n,t,i,r){var u=this;return new Promise(function(f,e){t||f(null);u.promiseLikeToPromise(crypto.subtle.generateKey(t.params,!1,u.keyUsagesForKeyClass(i))).then(function(o){return u._host.log(com.ts.mobile.sdk.LogLevel.Debug,"TransmitSDK/Tarsus","key pair generated, now will validate private key is not exportable."),new Promise(function(n,t){u.promiseLikeToPromise(crypto.subtle.exportKey("pkcs8",o.privateKey)).then(function(){var t="generated exportable private key",i,n;u._host.log(com.ts.mobile.sdk.LogLevel.Error,"TransmitSDK/Tarsus",t);i=new com.ts.mobile.sdk.impl.AuthenticationErrorImpl(com.ts.mobile.sdk.AuthenticationErrorCode.Internal,t);n={};throw n[com.ts.mobile.sdkhost.ErrorDataInternalError]=com.ts.mobile.sdkhost.InternalErrorCouldNotGenerateSecureKey,com.ts.mobile.sdk.impl.AuthenticationErrorImpl.augmentErrorData(i,n);}).catch(function(i){var r,e,f;(i instanceof com.ts.mobile.sdk.impl.AuthenticationErrorImpl&&t(i),!(i instanceof DOMException)||i instanceof DOMException&&"InvalidAccessError"!==i.name)&&(r="failed to verify private key is not exportable",u._host.log(com.ts.mobile.sdk.LogLevel.Error,"TransmitSDK/Tarsus",r),e=new com.ts.mobile.sdk.impl.AuthenticationErrorImpl(com.ts.mobile.sdk.AuthenticationErrorCode.Internal,r),f={},f[com.ts.mobile.sdkhost.ErrorDataInternalError]=com.ts.mobile.sdkhost.InternalErrorCouldNotGenerateSecureKey,t(com.ts.mobile.sdk.impl.AuthenticationErrorImpl.augmentErrorData(e,f)));n(!0)})}).then(function(){return u._host.log(com.ts.mobile.sdk.LogLevel.Debug,"TransmitSDK/Tarsus","generate key pair success"),u.promiseLikeToPromise(crypto.subtle.exportKey("spki",o.publicKey)).then(function(f){var s,h,c;u._host.log(com.ts.mobile.sdk.LogLevel.Debug,"TransmitSDK/Tarsus","export key pair success");s=u._db.transaction("keystore","readwrite");s.oncomplete=function(){u._host.log(com.ts.mobile.sdk.LogLevel.Debug,"TransmitSDK/Tarsus","object store transaction complete")};s.onerror=function(){var n="object store transaction failed: ".concat(s.error.message);u._host.log(com.ts.mobile.sdk.LogLevel.Debug,"TransmitSDK/Tarsus",n);e(new com.ts.mobile.sdk.impl.AuthenticationErrorImpl(com.ts.mobile.sdk.AuthenticationErrorCode.Internal,n))};h=s.objectStore("keystore");try{return c=h.add({tag:n,key:o.privateKey}),u.promiseRequestResult(c).then(function(){u._host.log(com.ts.mobile.sdk.LogLevel.Debug,"TransmitSDK/Tarsus","add key pair success");var e=btoa(String.fromCharCode.apply(String,ni(new Uint8Array(f))));return u.savePublicKeyData(n,e,t.keyType),new gt(n,i,r,{type:t.keyType,key:e},u)})}catch(n){throw u._host.log(com.ts.mobile.sdk.LogLevel.Error,"TransmitSDK/Tarsus","failed to add record to db: ".concat(n)),n;}})}).catch(function(n){throw u._host.log(com.ts.mobile.sdk.LogLevel.Error,"TransmitSDK/Tarsus","failed to generate key pair: ".concat(n)),n;}).then(f,e)})})}},{key:"getKeyPair",value:function(n,t,i){var r=this.getPublicKeyData(n);return r?new gt(n,t,i,{type:r.keyType,key:r.keyData},this):null}},{key:"deleteKeyPair",value:function(n){delete this._publicKeyDataCache[n];this._host.writeStorageKey("xmkeystore",this._publicKeyDataCache)}},{key:"signWithKeyPair",value:function(n,t,i){var r=this;return new Promise(function(t,u){var f=r._db.transaction("keystore"),e;f.oncomplete=function(){r._host.log(com.ts.mobile.sdk.LogLevel.Debug,"TransmitSDK/Tarsus","object store transaction complete")};f.onerror=function(){var n="object store transaction failed: ".concat(f.error.message);r._host.log(com.ts.mobile.sdk.LogLevel.Debug,"TransmitSDK/Tarsus",n);u(new com.ts.mobile.sdk.impl.AuthenticationErrorImpl(com.ts.mobile.sdk.AuthenticationErrorCode.Internal,n))};e=f.objectStore("keystore").get(n);r.promiseRequestResult(e).then(function(n){r._host.log(com.ts.mobile.sdk.LogLevel.Debug,"TransmitSDK/Tarsus","get key pair success");var e=new Uint8Array(com.ts.mobile.sdk.util.hexToBytes(i)),f=n.key.algorithm.name;r.promiseLikeToPromise(crypto.subtle.sign({name:f,hash:"SHA-256"},n.key,e)).then(function(n){var e,i;"ECDSA"===f?(e=r.convertSignatureToDERHex(new Uint8Array(n)),t(e)):"RSASSA-PKCS1-v1_5"===f?t(r.toHexString(n)):(i="invalid signing key algorithm",r._host.log(com.ts.mobile.sdk.LogLevel.Debug,"TransmitSDK/Tarsus",i),u(new com.ts.mobile.sdk.impl.AuthenticationErrorImpl(com.ts.mobile.sdk.AuthenticationErrorCode.Internal,i)))})})}).catch(function(n){throw r._host.log(com.ts.mobile.sdk.LogLevel.Error,"TransmitSDK/Tarsus","failed to sign with key pair: ".concat(n)),com.ts.mobile.sdk.impl.AuthenticationErrorImpl.ensureAuthenticationError(n);})}},{key:"initialize",value:function(){var n=this;return new Promise(function(t,i){var u=function(){try{n._publicKeyDataCache=n._host.readStorageKey("xmkeystore");t(!0)}catch(t){var r="failed to fetch public key data cache: ".concat(t);n._host.log(com.ts.mobile.sdk.LogLevel.Error,"TransmitSDK/Tarsus",r);i(new com.ts.mobile.sdk.impl.AuthenticationErrorImpl(com.ts.mobile.sdk.AuthenticationErrorCode.Internal,r))}},r=indexedDB.open("com.ts.mobile.sdk.key-store",1);r.onupgradeneeded=function(){n._host.log(com.ts.mobile.sdk.LogLevel.Debug,"TransmitSDK/Tarsus","indexedDB upgrade or create required");n._db=r.result;n._db.createObjectStore("keystore",{keyPath:"tag"});u()};r.onsuccess=function(){n._host.log(com.ts.mobile.sdk.LogLevel.Debug,"TransmitSDK/Tarsus","indexedDB opened successfully");n._db=r.result;u()};r.onerror=function(){var t="failed to open indexedDB: ".concat(r.error.message);n._host.log(com.ts.mobile.sdk.LogLevel.Error,"TransmitSDK/Tarsus",t);i(new com.ts.mobile.sdk.impl.AuthenticationErrorImpl(com.ts.mobile.sdk.AuthenticationErrorCode.Internal,t))}})}},{key:"promiseRequestResult",value:function(n){return new Promise(function(t,i){n.onsuccess=function(){t(n.result)};n.onerror=function(){i(n.error)}})}},{key:"promiseLikeToPromise",value:function(n){return new Promise(function(t,i){n.then(t,i)})}},{key:"keyUsagesForKeyClass",value:function(n){switch(n){case com.ts.mobile.sdkhost.KeyClass.StdEncryptionKey:case com.ts.mobile.sdkhost.KeyClass.HardwareProtectedSignAndEncryptKey:return["decrypt","encrypt"];default:return["sign"]}}},{key:"keyGenParamsForKeyClass",value:function(n){switch(n){case com.ts.mobile.sdkhost.KeyClass.StdEncryptionKey:case com.ts.mobile.sdkhost.KeyClass.HardwareProtectedSignAndEncryptKey:return null;default:return{keyType:"ec",params:{name:"ECDSA",namedCurve:"P-384"}}}}},{key:"fallbackKeyGenParamsForKeyClass",value:function(n){switch(n){case com.ts.mobile.sdkhost.KeyClass.StdEncryptionKey:case com.ts.mobile.sdkhost.KeyClass.HardwareProtectedSignAndEncryptKey:return null;default:return{keyType:"rsapkcs",params:{name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"}}}}},{key:"getPublicKeyData",value:function(n){return this._publicKeyDataCache[n]}},{key:"savePublicKeyData",value:function(n,t,i){this._publicKeyDataCache[n]={keyType:i,keyData:t};this._host.writeStorageKey("xmkeystore",this._publicKeyDataCache)}},{key:"convertSignatureToDERHex",value:function(n){for(var r,u,f=Array.prototype.map.call(n,function(n){return("00"+n.toString(16)).slice(-2)}).join(""),t=f.substring(0,96),i=f.substring(96),e=!0,o=!0;0===t.indexOf("00");)t=t.substring(2),e=!1;for(e&&parseInt(t.substring(0,2),16)>127&&(t="00"+t);0===i.indexOf("00");)i=i.substring(2),o=!1;return o&&parseInt(i.substring(0,2),16)>127&&(i="00"+i),r=function(n){return("00"+(n.length/2).toString(16)).slice(-2).toString()},u="02"+r(t)+t+"02"+r(i)+i,"30"+r(u)+u}},{key:"toHexString",value:function(n){return Array.prototype.map.call(new Uint8Array(n),function(n){return("00"+n.toString(16)).slice(-2)}).join("")}}],[{key:"isIndexedDBSupported",value:function(){return!!(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB)}}]),n}(),ai=function(){function n(){c(this,n)}return l(n,null,[{key:"isWebCryptoSupported",value:function(){if(!window.crypto||!window.crypto.subtle)return!1;var i=(new pt).setUA(navigator.userAgent).getBrowser(),t=i.name,n=i.major,r=i.minor||0;return"Chrome"===t&&n>=45||"Safari"===t&&n>=11||"Mobile Safari"===t&&(n>=12||11==n&&r>=3)||"Edge"===t&&n>=79||"Firefox"===t&&n>=34}},{key:"isIndexedDBAvailable",value:function(){return new Promise(function(n){var i,t,r;try{i=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;i?(t=i.open("capability-test"),r=setTimeout(function(){t.onsuccess=t.onerror=null;n(!1)},4e3),t.onerror=function(){clearTimeout(r);n(!1)},t.onsuccess=function(){clearTimeout(r);i.deleteDatabase("capability-test");n(!0)}):n(!1)}catch(i){n(!1)}})}},{key:"collect",value:function(){return new Promise(function(t){n.isIndexedDBAvailable().then(function(i){t({indexedDB:i,webCrypto:n.isWebCryptoSupported()})})})}}]),n}().collect(),vi=function(){function n(){c(this,n);this.logLevel=com.ts.mobile.sdk.LogLevel.Error;this.collectionResultsPromise=null;this.internalLogger=new ri;this.externalLogger=null;this.cachedFidoMfuvaSupported=null;this.localizer=new si;this.browserCapabilities=null;window.__XMSDK_PLUGINS={};this.localizer.addDictionary(ii)}return l(n,[{key:"initialize",value:function(n){var t=this;return this.log(com.ts.mobile.sdk.LogLevel.Debug,"TransmitSDK/Tarsus","initialize with collectors [".concat(n,"]")),new Promise(function(i,r){ai.then(function(u){t.browserCapabilities=u;t._enabledCollectors=n;"true"===t.queryHostInfo(com.ts.mobile.sdkhost.HostInformationKey.PersistentKeysSupported)?(t.keyStore=new li(t),t.keyStore.initialize().then(i,r)):i(!0)})})}},{key:"setLogLevel",value:function(n){this.logLevel=n}},{key:"log",value:function(n,t,i){n<=this.logLevel&&this.internalLogger.log(n,t,i);this.externalLogger&&this.externalLogger.log(n,t,i)}},{key:"readStorageKey",value:function(n){return JSON.parse(a.localStorage.getItem(n)||"{}")}},{key:"writeStorageKey",value:function(n,t){a.localStorage.setItem(n,JSON.stringify(t))}},{key:"deleteStorageKey",value:function(n){a.localStorage.removeItem(n)}},{key:"readSessionStorageKey",value:function(n){return JSON.parse(a.sessionStorage.getItem(n)||"{}")}},{key:"writeSessionStorageKey",value:function(n,t){a.sessionStorage.setItem(n,JSON.stringify(t))}},{key:"deleteSessionStorageKey",value:function(n){a.sessionStorage.removeItem(n)}},{key:"promiseCollectionResult",value:function(){var n,t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r,u;return null!=i?(this.log(com.ts.mobile.sdk.LogLevel.Debug,"TransmitSDK/Tarsus","promiseCollectionResult() override collectors"),n=i):n=this._enabledCollectors,r={location:{allow:n.indexOf(com.ts.mobile.sdk.CollectorType.Location)>=0,timeout:4e3,maximumAge:18e4},deviceFingerprint:n.indexOf(com.ts.mobile.sdk.CollectorType.DeviceFingerprint)>=0,largeData:n.indexOf(com.ts.mobile.sdk.CollectorType.LargeData)>=0},u=new Promise(function(i){t.log(com.ts.mobile.sdk.LogLevel.Debug,"TransmitSDK/Tarsus","promiseCollectionResult() invoked with collectors: [".concat(n,"]"));ei(r).get(function(n){t.log(com.ts.mobile.sdk.LogLevel.Debug,"TransmitSDK/Tarsus","promiseCollectionResult() completed");i(n)})}),Promise.all([u]).then(function(n){var t=Object.assign(n[0]);return t.toJson=function(){return t},t})}},{key:"calcHexStringEncodedMd5Hash",value:function(n){return oi(com.ts.mobile.sdk.util.hexToAscii(n))}},{key:"generateRandomHexString",value:function(n){var t=new Uint8Array(n);(window.crypto||window.msCrypto).getRandomValues(t);for(var r="",u=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],i=0;i<t.length;i++)r+=u[15&t[i]];return r}},{key:"queryHostInfo",value:function(n){switch(n){case com.ts.mobile.sdkhost.HostInformationKey.Version:return"6.2.0";case com.ts.mobile.sdkhost.HostInformationKey.Platform:return"web";case com.ts.mobile.sdkhost.HostInformationKey.FingerprintSupported:return"false";case com.ts.mobile.sdkhost.HostInformationKey.HostProvidedFeatures:return"";case com.ts.mobile.sdkhost.HostInformationKey.FaceIdKeyBioProtectionSupported:case com.ts.mobile.sdkhost.HostInformationKey.ImageAcquitisionSupported:return"false";case com.ts.mobile.sdkhost.HostInformationKey.AudioAcquitisionSupported:return"true";case com.ts.mobile.sdkhost.HostInformationKey.PersistentKeysSupported:return this.browserCapabilities&&this.browserCapabilities.indexedDB&&this.browserCapabilities.webCrypto?"true":"false";case com.ts.mobile.sdkhost.HostInformationKey.FidoClientPresent:case com.ts.mobile.sdkhost.HostInformationKey.DyadicPresent:return"false";case com.ts.mobile.sdkhost.HostInformationKey.Fido2ClientPresent:return navigator.credentials&&window.PublicKeyCredential?"true":"false";case com.ts.mobile.sdkhost.HostInformationKey.DeviceBiometricsSupported:case com.ts.mobile.sdkhost.HostInformationKey.DeviceBiometricsFPContinuation:case com.ts.mobile.sdkhost.HostInformationKey.DeviceBiometricsUsesSign:return"false";case com.ts.mobile.sdkhost.HostInformationKey.DevicePersistenceMode:return"persistent";default:throw new Error("Info key is unsupported: ".concat(n));}}},{key:"queryAsyncHostInfo",value:function(n){var t=this;return new Promise(function(i,r){switch(n){case com.ts.mobile.sdkhost.AsyncHostInformationKey.Fido2UserVerifyingPlatformAuthenticatorAvailable:if(t.log(com.ts.mobile.sdk.LogLevel.Debug,"TransmitSDK/Tarsus","queryAsyncHostInfo() for Fido2UserVerifyingPlatformAuthenticatorAvailable invoked"),null!=t.cachedFidoMfuvaSupported)t.log(com.ts.mobile.sdk.LogLevel.Debug,"TransmitSDK/Tarsus","queryAsyncHostInfo() for Fido2UserVerifyingPlatformAuthenticatorAvailable returning cached result"),i(t.cachedFidoMfuvaSupported?"true":"false");else{t.log(com.ts.mobile.sdk.LogLevel.Debug,"TransmitSDK/Tarsus","queryAsyncHostInfo() for Fido2UserVerifyingPlatformAuthenticatorAvailable evaluating");var u=window.PublicKeyCredential;(u?u.isUserVerifyingPlatformAuthenticatorAvailable().catch(function(){return!1}):Promise.resolve(!1)).then(function(n){t.cachedFidoMfuvaSupported=n;i(n?"true":"false")})}break;default:t.log(com.ts.mobile.sdk.LogLevel.Debug,"not-implemented","queryAsyncHostInfo not implemented for key \n                            [".concat(com.ts.mobile.sdkhost.AsyncHostInformationKey[n],"] in tarsus-web"));r("Info key is unsupported: ".concat(n))}})}},{key:"setExternalLogger",value:function(n){this.externalLogger=n}},{key:"getCurrentTime",value:function(){return Date.now()}},{key:"createDelayedPromise",value:function(n){return new Promise(function(t){setTimeout(function(){return t(n)},n)})}},{key:"calcHexStringEncodedHmacSha1HashWithHexEncodedKey",value:function(){return this.log(com.ts.mobile.sdk.LogLevel.Error,"not-implemented","calcHexStringEncodedHmacSha1HashWithHexEncodedKey not implemented for tarsus-web"),null}},{key:"generatePbkdf2HmacSha1HexString",value:function(){return Promise.reject("generatePbkdf2HmacSha1HexString not implemented for tarsus-web")}},{key:"fidoClientXact",value:function(){return Promise.reject("fidoClientXact not implemented for tarsus-web")}},{key:"fido2CredentialsOp",value:function(n,t,i,r,u){return new hi(r,u).execute()}},{key:"generateKeyPair",value:function(n,t,i,r){return this.keyStore.generateKeyPair(n,t,i,r)}},{key:"getKeyPair",value:function(n,t,i){return this.keyStore.getKeyPair(n,t,i)}},{key:"deleteKeyPair",value:function(n){this.keyStore.deleteKeyPair(n)}},{key:"importSymmetricKey",value:function(){return this.log(com.ts.mobile.sdk.LogLevel.Error,"not-implemented","importSymmetricKey not implemented for tarsus-web"),null}},{key:"calcHexStringEncodedSha256Hash",value:function(n){var t=com.ts.mobile.sdk.util.hexToAscii(n);return sha256(com.ts.mobile.sdk.util.toUTF8Array(t))}},{key:"calcHexStringEncodedSha512Hash",value:function(){throw this.log(com.ts.mobile.sdk.LogLevel.Error,"not-implemented","calcHexStringEncodedSha512Hash not implemented for tarsus-web"),new Error("Method not implemented.");}},{key:"generateHexSeededKeyPairExternalRepresentation",value:function(){return Promise.reject("Method not implemented.")}},{key:"generateKeyPairExternalRepresentation",value:function(){return Promise.reject("Method not implemented.")}},{key:"importVolatileKeyPair",value:function(){throw new Error("Method not implemented.");}},{key:"importVolatileSymmetricKey",value:function(){throw new Error("Method not implemented.");}},{key:"loadPlugin",value:function(n){var t=window.__XMSDK_PLUGINS[n];return t?(this.log(com.ts.mobile.sdk.LogLevel.Debug,"plugins","Found defined plugin "+n),Promise.resolve(t)):(this.log(com.ts.mobile.sdk.LogLevel.Error,"plugins","Could not find defined plugin "+n),Promise.reject(new com.ts.mobile.sdk.impl.AuthenticationErrorImpl(com.ts.mobile.sdk.AuthenticationErrorCode.AppImplementation,"Could not find defined plugin "+n)))}},{key:"dyadicRefreshToken",value:function(){throw new Error("Method not implemented.");}},{key:"dyadicEnroll",value:function(){return Promise.reject("Method not implemented.")}},{key:"dyadicSign",value:function(){return Promise.reject("Method not implemented.")}},{key:"dyadicDelete",value:function(){return Promise.reject("Method not implemented.")}},{key:"setDebugIndicatorVisible",value:function(n){n?this.debugIndicator||(this.debugIndicator=document.createElement("div"),Object.assign(this.debugIndicator.style,{position:"absolute",top:"5px",left:"5px",background:"black",opacity:"0.7",color:"white",borderRadius:"10px",padding:"12px",fontFamily:"sans-serif"}),this.debugIndicator.innerText="Transmit SDK: Journey is being debugged.",document.body.appendChild(this.debugIndicator)):this.debugIndicator&&(this.debugIndicator.remove(),this.debugIndicator=null)}},{key:"importVolatileKeyPairFromPublicKeyHex",value:function(){throw new Error("Method not implemented.");}},{key:"getString",value:function(n,t){return this.localizer.getString(n,t)}},{key:"getPreferredLocale",value:function(){var n=window.navigator,t=window.navigator.languages?window.navigator.languages[0]:null;return t||n.language||n.browserLanguage||n.userLanguage}},{key:"transformApiPath",value:function(n){return n}},{key:"getUIStyles",value:function(){return"{}"}}]),n}();!function(n){!function(n){!function(n){!function(n){!function(n){var t={},i=function(){function n(n){n?(this._reading=!0,this._root=n):(this._reading=!1,this._root={});this._currentContainer=this._root;this._otherContainerStack=[]}return Object.defineProperty(n.prototype,"serializedContent",{get:function(){return this._root},enumerable:!1,configurable:!0}),n.prototype.enterContainer=function(n){var t=this._currentContainer[n];if(this._reading||t||(t={},this._currentContainer[n]=t),"object"!=u(t))throw new Error("Attempt to enter non-container "+n);this._otherContainerStack.push(this._currentContainer);this._currentContainer=t},n.prototype.leaveContainer=function(){this._currentContainer=this._otherContainerStack.pop()},n.prototype.writePrimitive=function(n,t){this._currentContainer[n]=t},n.prototype.readPrimitive=function(n){return this._currentContainer[n]},n.prototype.writeObject=function(n,t){if(null!==t){var i=t.constructor.___serializationTag;if(!i)throw new Error("Invalid typetag for object passed to writeObject. Did you forget to decorate object with @Serializable?");this.enterContainer(n);this.writePrimitive("type",i);this.enterContainer("content");t.serializeTo(this);this.leaveContainer();this.leaveContainer()}else this.writePrimitive(n,null)},n.prototype.readObject=function(n,t){return this.internalReadObject(n,t)},n.prototype.readNonNullObject=function(n,t){var i=this.internalReadObject(n,t);if(!i)throw new Error("Invalid null object encountered");return i},n.prototype.internalReadObject=function(n,i){var r,u,e,f,o;if("string"==typeof n?(u=n,r=null):(r=n,u=i),null===this.readPrimitive(u))return null;if(this.enterContainer(u),e=this.readPrimitive("type"),f=t[e],!f)throw new Error("Invalid class tag encountered in archive "+e);if(this.enterContainer("content"),o=new f(this),this.leaveContainer(),r&&!(o instanceof r))throw new Error("Expected subclass of "+r+"; found "+f);return this.leaveContainer(),o},n}();n.SerializationContext=i;n.Serializable=function(n){return function(i){t[n]=i;i.___serializationTag=n}}}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.Hide=0]="Hide";n[n.Action=1]="Action";n[n.Cancel=2]="Cancel";n[n.Custom=3]="Custom"}(n.ActionEscapeOptionPresentation||(n.ActionEscapeOptionPresentation={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(){function n(){}return n.__tarsusInterfaceName="InputResponseType",n}();n.InputResponseType=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(){function n(){}return n.__tarsusInterfaceName="AuthenticationActionParameter",n}();n.AuthenticationActionParameter=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={}));i=r&&r.__extends||(ct=function(n,t){return(ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}ct(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});!function(n){!function(t){!function(t){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.prototype.getAuthenticatorInput=function(){return this._authenticatorInput},r.prototype.setAuthenticatorInput=function(n){this._authenticatorInput=n},r.prototype.getSelectedTargets=function(){return this._selectedTargets},r.prototype.setSelectedTargets=function(n){this._selectedTargets=n},r.createAuthenticatorInput=function(t){return n.ts.mobile.sdk.impl.TargetBasedAuthenticatorInputImpl.createAuthenticatorInput(t)},r.createTargetSelectionRequest=function(t){return n.ts.mobile.sdk.impl.TargetBasedAuthenticatorInputImpl.createTargetSelectionRequest(t)},r.createTargetsSelectionRequest=function(t){return n.ts.mobile.sdk.impl.TargetBasedAuthenticatorInputImpl.createTargetsSelectionRequest(t)},r.__tarsusInterfaceName="TargetBasedAuthenticatorInput",r}(t.InputResponseType);t.TargetBasedAuthenticatorInput=r}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.__tarsusInterfaceName="OtpInput",t}(n.InputResponseType);n.OtpInput=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.createSuccessResponse=function(t){return n.ts.mobile.sdk.impl.PlaceholderInputResponseImpl.createSuccessResponse(t)},r.createdFailedResponse=function(t,i){return n.ts.mobile.sdk.impl.PlaceholderInputResponseImpl.createdFailedResponse(t,i)},r.createFailedResponseWithServerProvidedStatus=function(t){return n.ts.mobile.sdk.impl.PlaceholderInputResponseImpl.createFailedResponseWithServerProvidedStatus(t)},r.__tarsusInterfaceName="PlaceholderInputResponse",r}(t.InputResponseType);t.PlaceholderInputResponse=r}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(){function n(){}return n.__tarsusInterfaceName="PushRequestPayload",n}();n.PushRequestPayload=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.createSuccessResponse=function(t){return n.ts.mobile.sdk.impl.FidoInputResponseImpl.createSuccessResponse(t)},r.createdFailedResponse=function(t,i){return n.ts.mobile.sdk.impl.FidoInputResponseImpl.createdFailedResponse(t,i)},r.__tarsusInterfaceName="FidoInputResponse",r}(t.InputResponseType);t.FidoInputResponse=r}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.createWithUserId=function(t){return n.ts.mobile.sdk.impl.MobileApprovePushRequestPayloadImpl.createWithUserId(t)},r.createWithUserTicket=function(t){return n.ts.mobile.sdk.impl.MobileApprovePushRequestPayloadImpl.createWithUserTicket(t)},r.createWithJsonPayload=function(t){return n.ts.mobile.sdk.impl.MobileApprovePushRequestPayloadImpl.createWithJsonPayload(t)},r.__tarsusInterfaceName="MobileApprovePushRequestPayload",r}(t.PushRequestPayload);t.MobileApprovePushRequestPayload=r}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.createSecurityQuestionAnswersInputResponse=function(t){return n.ts.mobile.sdk.impl.SecurityQuestionInputResponseImpl.createSecurityQuestionAnswersInputResponse(t)},r.__tarsusInterfaceName="SecurityQuestionInputResponse",r}(t.InputResponseType);t.SecurityQuestionInputResponse=r}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var i=function(){function t(){}return t.prototype.getAnswerText=function(){return this._answerText},t.createWithText=function(t){return n.ts.mobile.sdk.impl.SecurityQuestionAnswerImpl.createWithText(t)},t.__tarsusInterfaceName="SecurityQuestionAnswer",t}();t.SecurityQuestionAnswer=i}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var i=function(){function t(){}return t.prototype.getQuestion=function(){return this._question},t.prototype.getAnswer=function(){return this._answer},t.prototype.getIsRemoved=function(){return this._isRemoved},t.createAnswerToQuestion=function(t,i){return n.ts.mobile.sdk.impl.SecurityQuestionAndAnswerImpl.createAnswerToQuestion(t,i)},t.createAnswerRemovalRequest=function(t){return n.ts.mobile.sdk.impl.SecurityQuestionAndAnswerImpl.createAnswerRemovalRequest(t)},t.__tarsusInterfaceName="SecurityQuestionAndAnswer",t}();t.SecurityQuestionAndAnswer=i}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(){function n(){}return n.prototype.getFlowId=function(){return this._flowId},n.prototype.setFlowId=function(n){this._flowId=n},n.__tarsusInterfaceName="JourneyInvocationOptions",n}();n.JourneyInvocationOptions=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var i=function(){function t(){}return t.createEscapeRequest=function(t){return n.ts.mobile.tarsusplugin.impl.TotpProvisionResultImpl.createEscapeRequest(t)},t.__tarsusInterfaceName="TotpProvisionResult",t}();t.TotpProvisionResult=i}(t.tarsusplugin||(t.tarsusplugin={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.prototype.getAssertionData=function(){return this._assertionData},t.prototype.setAssertionData=function(n){this._assertionData=n},t.prototype.getStoredData=function(){return this._storedData},t.prototype.setStoredData=function(n){this._storedData=n},t.__tarsusInterfaceName="TotpProvisionOutput",t}(n.TotpProvisionResult);n.TotpProvisionOutput=t}(n.tarsusplugin||(n.tarsusplugin={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){var t=function(){function n(n,t){this._stepTag=n;this._passphraseText=t}return n.prototype.getStepTag=function(){return this._stepTag},n.prototype.getAcquisitionChallenges=function(){return[]},n.prototype.getPassphraseText=function(){return this._passphraseText},n.__tarsusInterfaceName="AudioAcquisitionStepDescription",n}();n.AudioAcquisitionStepDescriptionImpl=t}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.prototype.getTarget=function(){return this._target},r.create=function(t){return n.ts.mobile.sdk.impl.AuthenticationActionParameterTargetSelectionImpl.create(t)},r.__tarsusInterfaceName="AuthenticationActionParameterTargetSelection",r}(t.AuthenticationActionParameter);t.AuthenticationActionParameterTargetSelection=r}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(n){function t(t){var i=n.call(this)||this;return i._target=t,i}return i(t,n),t.create=function(n){return new t(n)},t.__tarsusInterfaceName="AuthenticationActionParameterTargetSelection",t}(n.AuthenticationActionParameterTargetSelection);t.AuthenticationActionParameterTargetSelectionImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var i=function(){function t(){}return t.prototype.getErrorCode=function(){return this._errorCode},t.prototype.getMessage=function(){return this._message},t.prototype.getData=function(){return this._data},t.createApplicationGeneratedGeneralError=function(t,i){return n.ts.mobile.sdk.impl.AuthenticationErrorImpl.createApplicationGeneratedGeneralError(t,i)},t.createApplicationGeneratedCommunicationError=function(t,i){return n.ts.mobile.sdk.impl.AuthenticationErrorImpl.createApplicationGeneratedCommunicationError(t,i)},t.__tarsusInterfaceName="AuthenticationError",t}();t.AuthenticationError=i}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={}));v=r&&r.__assign||function(){return(v=Object.assign||function(n){for(var r,i,t=1,u=arguments.length;t<u;t++)for(i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);return n}).apply(this,arguments)};!function(n){!function(n){!function(n){!function(t){!function(r){var u=function(u){function f(n,t,i){var r=u.call(this)||this;return r._errorCode=n,r._message=t,r._data=i||{},r._data.public_properties||(r._data=v(v({},r._data),{public_properties:{}})),r}return i(f,u),f.errorForServerResponse=function(n){var e={server_error_code:n.error_code,server_error_message:n.error_message,server_error_data:n.data},u=n.error_message||"Internal error",i=t.AuthenticationErrorCode.Internal,r;switch(n.error_code){case 2009:i=t.AuthenticationErrorCode.DeviceNotFound;break;case 28:return r=new f(t.AuthenticationErrorCode.InvalidIdToken,u),r.setPublicProperty(t.AuthenticationErrorProperty.InvalidIdTokenErrorReason,t.AuthenticationErrorPropertySymbol.InvalidIdTokenErrorReasonBadToken),r;case t.core.Protocol.ServerResponseErrorCode.UserIdTokenExpired:return(r=new f(t.AuthenticationErrorCode.InvalidIdToken,u)).setPublicProperty(t.AuthenticationErrorProperty.InvalidIdTokenErrorReason,t.AuthenticationErrorPropertySymbol.InvalidIdTokenErrorReasonExpiredToken),r;case 3001:case 3002:i=t.AuthenticationErrorCode.InvalidDeviceBinding;break;case 4e3:case 4002:i=t.AuthenticationErrorCode.ControlFlowExpired;break;case 4005:case 4006:i=t.AuthenticationErrorCode.SessionRequired;break;case 6001:case 6002:i=t.AuthenticationErrorCode.ApprovalWrongState}return new f(i,u,e)},f.createApplicationGeneratedGeneralError=function(n,i){return new f(t.AuthenticationErrorCode.Internal,n,i)},f.createApplicationGeneratedCommunicationError=function(n,i){return new f(t.AuthenticationErrorCode.Communication,n,i)},f.errorForSessionRejectionFailureData=function(n){var i=t.AuthenticationErrorCode.PolicyRejection,r="Session rejected by server.",u={failure_data:n};if(n&&n.source)switch(n.reason&&n.reason.type){case t.core.Protocol.FailureReasonType.ApprovalExpired:i=t.AuthenticationErrorCode.ApprovalWrongState;r="Approval expired.";u.approval_state="expired"}return new f(i,r,u)},f.errorForHostInternalBiometricErrorData=function(i,u){var f;switch(i[n.sdkhost.ErrorDataInternalError]){case n.sdkhost.InternalErrorBiometricInvalidated:f=new r.AuthenticationErrorImpl(t.AuthenticationErrorCode.AuthenticatorInvalidated,u+" registration invalidated.");break;case n.sdkhost.InternalErrorWrongBiometric:f=new r.AuthenticationErrorImpl(t.AuthenticationErrorCode.InvalidInput,"Invalid "+u+" was input.");break;case n.sdkhost.InternalErrorBiometricNotConfigured:(f=new r.AuthenticationErrorImpl(t.AuthenticationErrorCode.AuthenticatorExternalConfigError,u+" not configured on this device.")).setPublicProperty(t.AuthenticationErrorProperty.AuthenticatorExternalConfigErrorReason,t.AuthenticationErrorPropertySymbol.AuthenticatorExternalConfigErrorReasonBiometricsNotEnrolled);break;case n.sdkhost.InternalErrorBiometricOsLockTemporary:(f=new r.AuthenticationErrorImpl(t.AuthenticationErrorCode.AuthenticatorExternalConfigError,u+" authentication is temporarily locked by the OS.")).setPublicProperty(t.AuthenticationErrorProperty.AuthenticatorExternalConfigErrorReason,t.AuthenticationErrorPropertySymbol.AuthenticatorExternalConfigErrorReasonBiometricsOsLockTemporary);break;case n.sdkhost.InternalErrorBiometricOsLockPermanent:(f=new r.AuthenticationErrorImpl(t.AuthenticationErrorCode.AuthenticatorExternalConfigError,u+" authentication is permanently locked by the OS.")).setPublicProperty(t.AuthenticationErrorProperty.AuthenticatorExternalConfigErrorReason,t.AuthenticationErrorPropertySymbol.AuthenticatorExternalConfigErrorReasonBiometricsOsLockPermanent);break;default:f=null}return f},f.errorForHostInternalErrorData=function(i){var u;switch(i[n.sdkhost.ErrorDataInternalError]){case n.sdkhost.InternalErrorCouldNotGenerateSecureKey:(u=new r.AuthenticationErrorImpl(t.AuthenticationErrorCode.AuthenticatorExternalConfigError,"Failed to generate secure key.")).setPublicProperty(t.AuthenticationErrorProperty.AuthenticatorExternalConfigErrorReason,t.AuthenticationErrorPropertySymbol.AuthenticatorExternalConfigErrorReasonGeneratedKeyIsNotSecure);break;default:u=null}return u},f.prototype.setPublicProperty=function(n,i){this._data.public_properties[t.AuthenticationErrorProperty[n]]=i},f.prototype.getPublicProperty=function(n){return this._data.public_properties[t.AuthenticationErrorProperty[n]]},f.prototype.getPublicBooleanProperty=function(n){var i=this.getPublicProperty(n);if(i&&"boolean"!=typeof i)throw new f(t.AuthenticationErrorCode.AppImplementation,"type of property "+t.AuthenticationErrorProperty[n]+" is not 'boolean'");return i},f.prototype.getPublicNumberProperty=function(n){var i=this.getPublicProperty(n);if(i&&"number"!=typeof i)throw new f(t.AuthenticationErrorCode.AppImplementation,"type of property "+t.AuthenticationErrorProperty[n]+" is not 'number'");return i},f.prototype.getPublicStringProperty=function(n){var i=this.getPublicProperty(n);if(i&&"string"!=typeof i)throw new f(t.AuthenticationErrorCode.AppImplementation,"type of property "+t.AuthenticationErrorProperty[n]+" is not 'string'");return i},f.prototype.getPublicSymbolicProperty=function(n){var i=this.getPublicProperty(n);if(i&&!t.AuthenticationErrorProperty[n])throw new f(t.AuthenticationErrorCode.AppImplementation,"type of property "+t.AuthenticationErrorProperty[n]+" is not 'AuthenticationErrorPropertySymbol'");return i},f.prototype.toString=function(){return"AuthenticationError<"+t.AuthenticationErrorCode[this._errorCode]+", "+this._message+", "+JSON.stringify(this._data)+">"},f.errorForAssertionResponse=function(n){var i,r;switch(n.assertion_error_code){case t.core.Protocol.AssertionErrorCode.FailedAssertion:i=t.AuthenticationErrorCode.InvalidInput;break;case t.core.Protocol.AssertionErrorCode.MethodLocked:i=t.AuthenticationErrorCode.AuthenticatorLocked;break;case t.core.Protocol.AssertionErrorCode.HistoryRepeat:i=t.AuthenticationErrorCode.RegisteredSecretAlreadyInHistory;break;default:i=t.AuthenticationErrorCode.Internal}return r={assertion_error_code:n.assertion_error_code,additional_data:n.data},new f(i,n.assertion_error_message||"Assertion error code "+n.assertion_error_code,r)},f.appImplementationError=function(n){return new f(t.AuthenticationErrorCode.AppImplementation,n)},f.errorForTransportResponse=function(n){return new f(t.AuthenticationErrorCode.Communication,"HTTP response error",{status:n.getStatus(),body:n.getBodyJson()})},f.ensureAuthenticationError=function(n){if(f.dynamicCast(n))return n;var i={js_error_message:n.toString()};return n.stack&&(i.js_error_stack=n.stack),new f(t.AuthenticationErrorCode.Internal,"Internal error occurred ("+n.toString()+")",i)},f.augmentErrorData=function(n,t){var i,r={},u=n.getData();if(u)for(i in u)r[i]=u[i];for(i in t)r[i]=t[i];return new f(n.getErrorCode(),n.getMessage(),r)},f.dynamicCast=function(n){return void 0!==n.getErrorCode&&void 0!==n.getMessage&&void 0!==n.getData},f}(t.AuthenticationError);r.AuthenticationErrorImpl=u}(t.impl||(t.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){var t=function(){function n(n,t){this._authenticator=n;this._suggestedParams=t}return n.prototype.getAuthenticator=function(){return this._authenticator},n.prototype.getSuggestedParameters=function(){return this._suggestedParams},n}();n.AuthenticationOptionImpl=t}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){var t=function(){function n(n,t,i,r){this._appData=i||null;this._token=n||null;this._internalData=r||null;this._deviceId=t||null}return n.prototype.getToken=function(){return this._token||""},n.prototype.getDeviceId=function(){return this._deviceId||""},n.prototype.getData=function(){return this._appData||{}},n.prototype.getInternalData=function(){return this._internalData},n.fromCflowServerResponse=function(t,i){return new n(t.token,i,t.application_data,t.data)},n}();n.AuthenticationResultImpl=t}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var i=function(){function t(){}return t.prototype.getResultType=function(){return this._resultType},t.prototype.setResultType=function(n){this._resultType=n},t.prototype.getSelectedAuthenticator=function(){return this._selectedAuthenticator},t.prototype.setSelectedAuthenticator=function(n){this._selectedAuthenticator=n},t.prototype.getSelectedAuthenticationParameters=function(){return this._selectedAuthenticationParameters},t.prototype.setSelectedAuthenticationParameters=function(n){this._selectedAuthenticationParameters=n},t.prototype.getActionEscapeRequest=function(){return this._actionEscapeRequest},t.prototype.setActionEscapeRequest=function(n){this._actionEscapeRequest=n},t.createAbortRequest=function(){return n.ts.mobile.sdk.impl.AuthenticatorSelectionResultImpl.createAbortRequest()},t.createEscapeRequest=function(t,i){return n.ts.mobile.sdk.impl.AuthenticatorSelectionResultImpl.createEscapeRequest(t,i)},t.createSelectionRequest=function(t){return n.ts.mobile.sdk.impl.AuthenticatorSelectionResultImpl.createSelectionRequest(t)},t.createParameterizedSelectionRequest=function(t,i){return n.ts.mobile.sdk.impl.AuthenticatorSelectionResultImpl.createParameterizedSelectionRequest(t,i)},t.__tarsusInterfaceName="AuthenticatorSelectionResult",t}();t.AuthenticatorSelectionResult=i}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.createAbortRequest=function(){var t=new r;return t.setResultType(n.AuthenticatorSelectionResultType.Abort),t},r.createSelectionRequest=function(t){var i=new r;return i.setResultType(n.AuthenticatorSelectionResultType.SelectAuthenticator),i.setSelectedAuthenticator(t),i},r.createEscapeRequest=function(t,i){var u=new r;return u._resultType=n.AuthenticatorSelectionResultType.Escape,u._actionEscapeRequest=new n.ActionEscapeRequest,u._actionEscapeRequest._escapeOption=t,u._actionEscapeRequest._escapeParameters=i,u},r}(n.AuthenticatorSelectionResult);t.AuthenticatorSelectionResultImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){var t=function(){function n(n){this._acquisitionChallenges=n}return n.prototype.getStepTag=function(){return"imageAcquisition"},n.prototype.getAcquisitionChallenges=function(){return this._acquisitionChallenges},n.__tarsusInterfaceName="CameraAcquisitionStepDescription",n}();n.CameraAcquisitionStepDescriptionImpl=t}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var i=function(){function t(){}return t.prototype.getLocalEnrollmentKeySizeInBytes=function(){return this._localEnrollmentKeySizeInBytes},t.prototype.getLocalEnrollmentKeyIterationCount=function(){return this._localEnrollmentKeyIterationCount},t.prototype.setLocalEnrollmentKeyIterationCount=function(n){this._localEnrollmentKeyIterationCount=n},t.create=function(t){return n.ts.mobile.sdk.impl.ClientCryptoSettingsImpl.create(t)},t.__tarsusInterfaceName="ClientCryptoSettings",t}();t.ClientCryptoSettings=i}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.create=function(n){var i=new t;return i.setLocalEnrollmentKeyIterationCount(n),i._localEnrollmentKeySizeInBytes=32,i},t}(n.ClientCryptoSettings);t.ClientCryptoSettingsImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var i=function(){function t(n,t){this._description=n;this._menuItemOptions=t||{}}return t.prototype.getDescription=function(){return this._description},t.prototype.getAvailableActions=function(){var t=this,i=[];switch(this._description.getRegistrationStatus()){case n.AuthenticatorRegistrationStatus.Registered:i=[n.AuthenticatorConfigurationAction.Reregister,n.AuthenticatorConfigurationAction.Unregister];break;case n.AuthenticatorRegistrationStatus.Unregistered:case n.AuthenticatorRegistrationStatus.LocallyInvalid:i=[n.AuthenticatorConfigurationAction.Register]}return i.filter(function(i){return i==n.AuthenticatorConfigurationAction.Reregister&&!t._menuItemOptions.hide_reregister||i==n.AuthenticatorConfigurationAction.Register&&!t._menuItemOptions.hide_register||i==n.AuthenticatorConfigurationAction.Unregister&&!t._menuItemOptions.hide_unregister})},t}();t.ConfigurableAuthenticatorImpl=i}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var i=function(){function t(){}return t.prototype.getUserChoice=function(){return this._userChoice},t.prototype.setUserChoice=function(n){this._userChoice=n},t.prototype.getActionEscapeRequest=function(){return this._actionEscapeRequest},t.prototype.setActionEscapeRequest=function(n){this._actionEscapeRequest=n},t.create=function(t){return n.ts.mobile.sdk.impl.ConfirmationInputImpl.create(t)},t.createEscapeRequest=function(t,i){return n.ts.mobile.sdk.impl.ConfirmationInputImpl.createEscapeRequest(t,i)},t.__tarsusInterfaceName="ConfirmationInput",t}();t.ConfirmationInput=i}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.create=function(n){var t=new r;return t.setUserChoice(n),t},r.createEscapeRequest=function(t,i){var f=new r,u=new n.ActionEscapeRequest;return u.setEscapeOption(t),u.setEscapeParameters(i),f.setActionEscapeRequest(u),f},r}(n.ConfirmationInput);t.ConfirmationInputImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var i=function(){function t(){}return t.prototype.getRequestType=function(){return this._requestType},t.prototype.setRequestType=function(n){this._requestType=n},t.create=function(t){return n.ts.mobile.sdk.impl.ControlRequestImpl.create(t)},t.__tarsusInterfaceName="ControlRequest",t}();t.ControlRequest=i}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.create=function(n){var i=new t;return i.setRequestType(n),i},t}(n.ControlRequest);t.ControlRequestImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.prototype.getPrompt=function(){return this._prompt},r.prototype.setPrompt=function(n){this._prompt=n},r.prototype.getTitle=function(){return this._title},r.prototype.setTitle=function(n){this._title=n},r.prototype.getSubtitle=function(){return this._subtitle},r.prototype.setSubtitle=function(n){this._subtitle=n},r.prototype.getCancelButtonTitle=function(){return this._cancelButtonTitle},r.prototype.setCancelButtonTitle=function(n){this._cancelButtonTitle=n},r.create=function(t){return n.ts.mobile.sdk.impl.DeviceBiometricsInputImpl.create(t)},r.createFull=function(t,i,r,u){return n.ts.mobile.sdk.impl.DeviceBiometricsInputImpl.createFull(t,i,r,u)},r.__tarsusInterfaceName="DeviceBiometricsInput",r}(t.InputResponseType);t.DeviceBiometricsInput=r}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.create=function(n){var i=new t;return n&&i.setPrompt(n),i},t}(n.DeviceBiometricsInput);t.DeviceBiometricsInputImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){var t=function(){function n(n,t){this._id=n;this._name=t}return n.prototype.getId=function(){return this._id},n.prototype.getName=function(){return this._name},n}();n.DeviceGroupImpl=t}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var i=function(){function i(n){this.updateFromServer(n)}return i.prototype.getDeviceHwId=function(){return this._id},i.prototype.getName=function(){return this._name?this._name:this._model+" "+this._osType+" "+this._osVersion},i.prototype.getStatus=function(){return this._status},i.prototype.getLastAccess=function(){return this._lastAccess},i.prototype.getLastAccessLocation=function(){return this._lastAccessLocation},i.prototype.getLastAccessLocationAttributes=function(){return this._lastAccessLocationAttributes},i.prototype.getRegistered=function(){return this._registered},i.prototype.getModel=function(){return this._model},i.prototype.getOsType=function(){return this._osType},i.prototype.getOsVersion=function(){return this._osVersion},i.prototype.getUseCount=function(){return this._useCount},i.prototype.getIsCurrent=function(){return this._isCurrent},i.prototype.getDeviecId=function(){return this._id},i.prototype.setStatus=function(n){this._status=n},i.prototype.setName=function(n){this._name=n},i.prototype.forceCurrent=function(){this._isCurrent=!0},i.prototype.updateFromServer=function(i){switch(this._model=n.core.DeviceModelConverter.getDeviceModel(i.device_model,i.os_type),this._name=i.name,this._lastAccess=Date.parse(i.last_access),this._registered=Date.parse(i.registered),this._osType=n.core.DeviceModelConverter.getOsName(i.os_type),this._osVersion=i.os_version,this._useCount=i.use_count,this._isCurrent=i.cur_device,this._id=i.device_id,i.status){case n.core.Protocol.DeviceStatusServerFormat.Disabled:this._status=n.DeviceStatus.Disabled;break;case n.core.Protocol.DeviceStatusServerFormat.LongInactivity:this._status=n.DeviceStatus.LongInactivity;break;case n.core.Protocol.DeviceStatusServerFormat.NoRecentActivity:this._status=n.DeviceStatus.NoRecentActivity;break;case n.core.Protocol.DeviceStatusServerFormat.RecentlyUsed:this._status=n.DeviceStatus.RecentlyUsed;break;case n.core.Protocol.DeviceStatusServerFormat.Removed:this._status=n.DeviceStatus.Removed;break;default:throw new t.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Unknown device status "+i.status);}if(i.last_access_location){var r=new n.GeoLocation;r.longitude=i.last_access_location.lng;r.latitude=i.last_access_location.lat;this._lastAccessLocation=r;this._lastAccessLocationAttributes=new t.LocationAttributesImpl(i.last_access_location)}},i}();t.DeviceInfoImpl=i}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){var t=function(){function n(){}return n.getOsName=function(n){var t=n;switch(n){case"iPhone":case"iPad":t="iOS"}return t},n.getDeviceModel=function(n,t){var i=n;if("iPhone"==t)switch(n){case"i386":case"x86_64":i="Simulator";break;case"iPod1,1":case"iPod2,1":case"iPod3,1":case"iPod4,1":case"iPod7,1":i="iPod Touch";break;case"iPhone1,1":case"iPhone1,2":case"iPhone2,1":i="iPhone";break;case"iPad1,1":i="iPad";break;case"iPad2,1":i="iPad 2";break;case"iPad3,1":i="iPad";break;case"iPhone3,1":case"iPhone3,3":i="iPhone 4";break;case"iPhone4,1":i="iPhone 4S";break;case"iPhone5,1":case"iPhone5,2":i="iPhone 5";break;case"iPad3,4":i="iPad";break;case"iPad2,5":i="iPad Mini";break;case"iPhone5,3":case"iPhone5,4":i="iPhone 5c";break;case"iPhone6,1":case"iPhone6,2":i="iPhone 5s";break;case"iPhone7,1":i="iPhone 6 Plus";break;case"iPhone7,2":i="iPhone 6";break;case"iPhone8,1":i="iPhone 6S";break;case"iPhone8,2":i="iPhone 6S Plus";break;case"iPhone8,4":i="iPhone SE";break;case"iPhone9,1":case"iPhone9,3":i="iPhone 7";break;case"iPhone9,2":case"iPhone9,4":i="iPhone 7 Plus";break;case"iPhone10,1":case"iPhone10,4":i="iPhone 8";break;case"iPhone10,2":case"iPhone10,5":i="iPhone 8 Plus";break;case"iPhone10,3":case"iPhone10,6":i="iPhone X";break;case"iPad4,1":case"iPad4,2":i="iPad Air";break;case"iPad4,4":case"iPad4,5":case"iPad4,7":i="iPad Mini";break;case"iPad6,7":case"iPad6,8":i='iPad Pro (12.9")';break;case"iPad6,3":case"iPad6,4":i='iPad Pro (9.7")';break;case"iPhone11,2":i="iPhone XS";break;case"iPhone11,6":case"iPhone11,4":i="iPhone XS Max";break;case"iPhone11,8":i="iPhone XR";break;case"iPad6,7":case"iPad6,8":i='iPad Pro (12.9")';break;case"iPad6,11":case"iPad6,12":i="iPad (2017)";break;case"iPad7,1":case"iPad7,2":i="iPad Pro 2nd Gen";break;case"iPad7,3":case"iPad7,4":i='iPad Pro (10.5")';break;case"iPad7,5":case"iPad7,6":i="iPad";break;case"iPad8,1":case"iPad8,2":case"iPad8,3":case"iPad8,4":i='iPad Pro (11")';break;case"iPad8,5":case"iPad8,6":case"iPad8,7":case"iPad8,8":i='iPad Pro (12.9")';break;case"iPad8,9":case"iPad8,10":i='iPad Pro (11")';break;case"iPad8,11":case"iPad8,12":i='iPad Pro (12.9")';break;case"iPad11,1":case"iPad11,2":i="iPad mini";break;case"iPad11,3":case"iPad11,4":i="iPad Air";break;case"iPad11,6":case"iPad11,7":i="iPad";break;case"iPad13,1":case"iPad13,2":i="iPad Air";break;case"iPad13,4":case"iPad13,5":case"iPad13,6":case"iPad13,7":i='iPad Pro (11")';break;case"iPad13,8":case"iPad13,9":case"iPad13,10":case"iPad13,11":i='iPad Pro (12.9")';break;case"iPhone12,1":i="iPhone 11";break;case"iPhone12,3":i="iPhone 11 Pro";break;case"iPhone12,5":i="iPhone 11 Pro Max";break;case"iPhone12,8":i="iPhone SE 2nd Gen";break;case"iPhone13,1":i="iPhone 12 Mini";break;case"iPhone13,2":i="iPhone 12";break;case"iPhone13,3":i="iPhone 12 Pro";break;case"iPhone13,4":i="iPhone 12 Pro Max"}return i},n}();n.DeviceModelConverter=t}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.Password=0]="Password";n[n.Fingerprint=1]="Fingerprint";n[n.Pincode=2]="Pincode";n[n.Pattern=3]="Pattern";n[n.Otp=4]="Otp";n[n.Face=5]="Face";n[n.Voice=6]="Voice";n[n.Eye=7]="Eye";n[n.Emoji=8]="Emoji";n[n.Questions=9]="Questions";n[n.FaceID=10]="FaceID";n[n.Generic=11]="Generic";n[n.MobileApprove=12]="MobileApprove";n[n.Totp=13]="Totp";n[n.DeviceBiometrics=14]="DeviceBiometrics";n[n.Fido2=15]="Fido2"}(n.AuthenticatorType||(n.AuthenticatorType={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.RedirectTypeBind=0]="RedirectTypeBind";n[n.RedirectTypeAuthenticate=1]="RedirectTypeAuthenticate";n[n.RedirectTypeBindOrAuthenticate=2]="RedirectTypeBindOrAuthenticate";n[n.RedirectTypeInvokePolicy=3]="RedirectTypeInvokePolicy"}(n.RedirectType||(n.RedirectType={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(t){var i,r;t.AuthTypeData={password:{authTypeEnum:n.AuthenticatorType.Password,authTypeName:"Password"},fingerprint:{authTypeEnum:n.AuthenticatorType.Fingerprint,authTypeName:"Fingerprint"},pin:{authTypeEnum:n.AuthenticatorType.Pincode,authTypeName:"PIN"},pin_centralized:{authTypeEnum:n.AuthenticatorType.Pincode,authTypeName:"PIN"},pattern:{authTypeEnum:n.AuthenticatorType.Pattern,authTypeName:"Pattern"},pattern_centralized:{authTypeEnum:n.AuthenticatorType.Pattern,authTypeName:"Pattern"},otp:{authTypeEnum:n.AuthenticatorType.Otp,authTypeName:"OTP"},face:{authTypeEnum:n.AuthenticatorType.Face,authTypeName:"Face"},face_server:{authTypeEnum:n.AuthenticatorType.Face,authTypeName:"Face"},voice_server:{authTypeEnum:n.AuthenticatorType.Voice,authTypeName:"Voice"},eye:{authTypeEnum:n.AuthenticatorType.Eye,authTypeName:"Eye"},emoji:{authTypeEnum:n.AuthenticatorType.Emoji,authTypeName:"Emoji"},question:{authTypeEnum:n.AuthenticatorType.Questions,authTypeName:"Questions"},face_id:{authTypeEnum:n.AuthenticatorType.FaceID,authTypeName:"FaceID"},mobile_approve:{authTypeEnum:n.AuthenticatorType.MobileApprove,authTypeName:"MobileApprove"},totp:{authTypeEnum:n.AuthenticatorType.Totp,authTypeName:"Totp"},device_biometrics:{authTypeEnum:n.AuthenticatorType.DeviceBiometrics,authTypeName:"DeviceBiometrics"},fido2:{authTypeEnum:n.AuthenticatorType.Generic,authTypeName:"FIDO2Authenticator"}},function(n){n.Closed="closed"}(t.SessionStateChangeState||(t.SessionStateChangeState={}));t.flowIdHeaderName="flow_id",function(n){n.Pending="pending";n.Completed="completed";n.Rejected="rejected"}(t.AuthSessionState||(t.AuthSessionState={})),function(n){n.LOGINS="frequency_logins";n.DAYS="frequency_days"}(t.PromotionStrategyFrequency||(t.PromotionStrategyFrequency={})),function(n){n.Numeric="numeric";n.Alphanumeric="alphanumeric";n.Binary="binary"}(t.QrCodeFormatType||(t.QrCodeFormatType={})),function(n){n.Alphanumeric="alphanumeric";n.QrCode="qrcode"}(t.TicketIdFormatType||(t.TicketIdFormatType={})),function(n){n.ApprovalApprove="approval_approve"}(t.FailureSourceTransactionType||(t.FailureSourceTransactionType={})),function(n){n.AutoExecute="auto_execute";n.AssertionRejected="assertion_rejected";n.Policy="policy";n.Locked="locked";n.ApprovalExpired="approval_expired"}(t.FailureReasonType||(t.FailureReasonType={})),function(n){n.DefaultAuthenticator="default";n.AuthenticatorMenu="menu";n.FirstAuthenticator="first"}(t.AuthMenuPresentationMode||(t.AuthMenuPresentationMode={})),function(n){n.Registered="registered";n.Registering="registering";n.Unregistered="unregistered"}(t.AuthenticationMethodStatus||(t.AuthenticationMethodStatus={})),function(n){n.Validate="validate";n.Generate="generate"}(t.AuthenticationMethodOtpState||(t.AuthenticationMethodOtpState={})),function(n){n.None="none";n.Sms="sms";n.Email="email";n.Voice="voice";n.Push="push_notification"}(t.AuthenticationMethodOtpChannelType||(t.AuthenticationMethodOtpChannelType={})),function(n){n.Numeric="numeric";n.QrCode="qrcode";n.External="external";n.Unknown=""}(t.OtpFormatType||(t.OtpFormatType={})),function(n){n.WaitForApproval="wait_for_approval";n.WaitForAuthenticate="wait_for_authenticate"}(t.AuthenticationMethodMobileApproveState||(t.AuthenticationMethodMobileApproveState={})),function(n){n.AlphaNumeric="alpha_numeric";n.Numeric="numeric";n.QrCode="qrcode"}(t.TotpChallengeFormatType||(t.TotpChallengeFormatType={})),function(n){n.SelectTargets="select_targets";n.Validate="validate";n.Generate="generate"}(t.AuthenticationMethodTotpState||(t.AuthenticationMethodTotpState={})),function(n){n.RedirectTypeNameBind="bind";n.RedirectTypeNameAuthenticate="auth";n.RedirectTypeNameBindOrAuthenticate="bind_or_auth";n.RedirectTypeNameInvokePolicy="invoke"}(r=t.RedirectTypeName||(t.RedirectTypeName={}));t.RedirectTypeMap=((i={})[r.RedirectTypeNameBind]=n.RedirectType.RedirectTypeBind,i[r.RedirectTypeNameAuthenticate]=n.RedirectType.RedirectTypeAuthenticate,i[r.RedirectTypeNameBindOrAuthenticate]=n.RedirectType.RedirectTypeBindOrAuthenticate,i[r.RedirectTypeNameInvokePolicy]=n.RedirectType.RedirectTypeInvokePolicy,i),function(n){n[n.EncryptionStateError=23]="EncryptionStateError";n[n.UserIdTokenExpired=29]="UserIdTokenExpired";n[n.DeviceKeyExpired=2017]="DeviceKeyExpired"}(t.ServerResponseErrorCode||(t.ServerResponseErrorCode={})),function(n){n[n.NotRegistered=1]="NotRegistered";n[n.InvalidAction=2]="InvalidAction";n[n.BadConfig=3]="BadConfig";n[n.BadFch=4]="BadFch";n[n.FailedAssertion=5]="FailedAssertion";n[n.MethodLocked=6]="MethodLocked";n[n.DataMissing=7]="DataMissing";n[n.Internal=9]="Internal";n[n.HistoryRepeat=11]="HistoryRepeat";n[n.ExternalProcessPending=13]="ExternalProcessPending";n[n.MustRegister=14]="MustRegister";n[n.NotFinished=16]="NotFinished";n[n.MissingQuestions=17]="MissingQuestions";n[n.RepeatCurrentStep=18]="RepeatCurrentStep";n[n.FailOver=19]="FailOver";n[n.AssertionContainerNotComplete=20]="AssertionContainerNotComplete";n[n.AckRequired=22]="AckRequired"}(t.AssertionErrorCode||(t.AssertionErrorCode={})),function(n){n.Pending="pending";n.Approved="approved";n.Denied="declined";n.Expired="expired"}(t.ServerResponseDataApprovalsApprovalStatus||(t.ServerResponseDataApprovalsApprovalStatus={})),function(n){n.RecentlyUsed="recently_used";n.NoRecentActivity="no_recent_activity";n.LongInactivity="long_inactivity";n.Disabled="disabled";n.Removed="removed"}(t.DeviceStatusServerFormat||(t.DeviceStatusServerFormat={})),function(n){n.ErrorReasonAttestationReverificationFailed="attestation_verification_failed";n.ErrorReasonCredentialFiltered="credential_filtered"}(t.ServerResponseDataErrorReasonReasons||(t.ServerResponseDataErrorReasonReasons={})),function(n){n.Active="active";n.Disabled="disabled"}(t.CollectorState||(t.CollectorState={}))}(t.Protocol||(t.Protocol={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var i=function(){function i(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._styleSheet=i.merge.apply(i,t);this.replaceRefValues()}return i.prototype.getMatchingStyle=function(t){var r=this,i;return null!=this._styleSheet.styles?(i={},this._styleSheet.styles.forEach(function(n){var u=r.matchStyle(t,n);i=v(v({},i),u)}),new n.impl.UIStyleImpl(i)):n.impl.UIStyleImpl.emptyStyle()},i.merge=function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return t={styles:[],values:{}},i.forEach(function(n){var i;(i=t.styles).push.apply(i,n.styles);t.values=v(v({},t.values),n.values)}),t},i.prototype.matchStyle=function(n,t){return t.rule.tags.every(function(t){return n.indexOf(t)>-1})?t.properties:{}},i.prototype.replaceRefValues=function(){var n=this;null!=this._styleSheet.values&&this._styleSheet.styles&&this._styleSheet.styles.forEach(function(t){t.properties=n.replaceStyleProperties(t.properties)})},i.prototype.replaceRef=function(n){return t.Protocol.isRefType(n)?this._styleSheet.values[n.ref]:n},i.prototype.replaceStyleProperties=function(n){var t=n;for(var i in n)t[i]=this.replaceRef(n[i]);return t},i}();t.UIStyleSheets=i}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var i={hide:n.ActionEscapeOptionPresentation.Hide,action:n.ActionEscapeOptionPresentation.Action,cancel:n.ActionEscapeOptionPresentation.Cancel,custom:n.ActionEscapeOptionPresentation.Custom},r=function(){function n(n){this._id=n.id;this._displayName=n.display_name;this._presentation=i[n.presentation]}return n.prototype.getId=function(){return this._id},n.prototype.getDisplayName=function(){return this._displayName},n.prototype.getPresentation=function(){return this._presentation},n}();t.EscapeOptionImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.prototype.getDisplayName=function(){return this._displayName},r.prototype.setDisplayName=function(n){this._displayName=n},r.create=function(t){return n.ts.mobile.sdk.impl.Fido2InputResponseImpl.create(t)},r.__tarsusInterfaceName="Fido2InputResponse",r}(t.InputResponseType);t.Fido2InputResponse=r}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.create=function(n){var i=new t;return i.setDisplayName(n),i},t}(n.Fido2InputResponse);t.Fido2InputResponseImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.createSuccessResponse=function(t){var i=new n.FidoAuthSuccessResponse;return i.setFidoResponse(t),i},r.createdFailedResponse=function(t,i){var r=new n.FidoAuthFailureResponse;return r.setFailureError(i),r.setExpired(t.getExpired()),r.setLocked(t.getLocked()),r.setRegistered(t.getRegistered()),r.setRegistrationStatus(t.getRegistrationStatus()),r},r}(n.PlaceholderInputResponse);t.FidoInputResponseImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.prototype.getPrompt=function(){return this._prompt},r.prototype.setPrompt=function(n){this._prompt=n},r.prototype.getCancelButtonTitle=function(){return this._cancelButtonTitle},r.prototype.setCancelButtonTitle=function(n){this._cancelButtonTitle=n},r.prototype.getFallbackButtonTitle=function(){return this._fallbackButtonTitle},r.prototype.setFallbackButtonTitle=function(n){this._fallbackButtonTitle=n},r.prototype.getFallbackControlRequestType=function(){return this._fallbackControlRequestType},r.prototype.setFallbackControlRequestType=function(n){this._fallbackControlRequestType=n},r.create=function(t){return n.ts.mobile.sdk.impl.FingerprintInputImpl.create(t)},r.createFallbackEnabledPrompt=function(t,i,r){return n.ts.mobile.sdk.impl.FingerprintInputImpl.createFallbackEnabledPrompt(t,i,r)},r.__tarsusInterfaceName="FingerprintInput",r}(t.InputResponseType);t.FingerprintInput=r}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.create=function(n){var t=new r;return n&&t.setPrompt(n),t},r.createFallbackEnabledPrompt=function(t,i,u){var f=new r;return t&&f.setPrompt(t),i&&f.setFallbackButtonTitle(i),u?f.setFallbackControlRequestType(u):f.setFallbackControlRequestType(n.ControlRequestType.SelectMethod),f},r}(n.FingerprintInput);t.FingerprintInputImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var i=function(){function t(){}return t.prototype.getJsonData=function(){return this._jsonData},t.prototype.setJsonData=function(n){this._jsonData=n},t.prototype.getControlRequest=function(){return this._controlRequest},t.prototype.setControlRequest=function(n){this._controlRequest=n},t.prototype.getActionEscapeRequest=function(){return this._actionEscapeRequest},t.prototype.setActionEscapeRequest=function(n){this._actionEscapeRequest=n},t.createFormInputSubmissionRequest=function(t){return n.ts.mobile.sdk.impl.FormInputImpl.createFormInputSubmissionRequest(t)},t.createFormCancellationRequest=function(){return n.ts.mobile.sdk.impl.FormInputImpl.createFormCancellationRequest()},t.createEscapeRequest=function(t,i){return n.ts.mobile.sdk.impl.FormInputImpl.createEscapeRequest(t,i)},t.__tarsusInterfaceName="FormInput",t}();t.FormInput=i}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.createFormInputSubmissionRequest=function(t){var i=new r;return i.setJsonData(t),i.setControlRequest(n.FormControlRequest.Submit),i},r.createFormCancellationRequest=function(){var t=new r;return t.setControlRequest(n.FormControlRequest.Abort),t},r.createEscapeRequest=function(t,i){var u=new r,f=new n.ActionEscapeRequest;return f.setEscapeOption(t),f.setEscapeParameters(i),u.setActionEscapeRequest(f),u.setControlRequest(n.FormControlRequest.Escape),u},r}(n.FormInput);t.FormInputImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(){};n.GeoLocation=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var i=function(){function t(){}return t.prototype.getResponse=function(){return this._response},t.prototype.setResponse=function(n){this._response=n},t.prototype.getControlRequest=function(){return this._controlRequest},t.prototype.setControlRequest=function(n){this._controlRequest=n},t.prototype.getActionEscapeRequest=function(){return this._actionEscapeRequest},t.prototype.setActionEscapeRequest=function(n){this._actionEscapeRequest=n},t.createControlResponse=function(t){return n.ts.mobile.sdk.impl.InputOrControlResponseImpl.createControlResponse(t)},t.createEscapeResponse=function(t,i){return n.ts.mobile.sdk.impl.InputOrControlResponseImpl.createEscapeResponse(t,i)},t.createInputResponse=function(t){return n.ts.mobile.sdk.impl.InputOrControlResponseImpl.createInputResponse(t)},t.__tarsusInterfaceName="InputOrControlResponse",t}();t.InputOrControlResponse=i}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.createControlResponse=function(n){var t=new r;return t.setControlRequest(n),t},r.createInputResponse=function(n){var t=new r;return t.setResponse(n),t},r.createEscapeResponse=function(t,i){var u=new r;return u._actionEscapeRequest=new n.ActionEscapeRequest,u._actionEscapeRequest._escapeOption=t,u._actionEscapeRequest._escapeParameters=i,u},r.prototype.isControlRequest=function(){return!!this._controlRequest},r}(n.InputOrControlResponse);t.InputOrControlResponseImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var i=function(){function t(){}return t.prototype.getContinueProcessing=function(){return this._continueProcessing},t.prototype.setContinueProcessing=function(n){this._continueProcessing=n},t.create=function(t){return n.ts.mobile.sdk.impl.JsonDataProcessingResultImpl.create(t)},t.__tarsusInterfaceName="JsonDataProcessingResult",t}();t.JsonDataProcessingResult=i}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.create=function(n){var i=new t;return i.setContinueProcessing(n),i},t}(n.JsonDataProcessingResult);t.JsonDataProcessingResultImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){var t=function(){function n(n){this.city=n.city;this.state=n.state;this.country=n.country}return n.prototype.getCity=function(){return this.city},n.prototype.getCountry=function(){return this.country},n.prototype.getState=function(){return this.state},n}();n.LocationAttributesImpl=t}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var i=function(){function i(n){this._deviceInfo=new t.DeviceInfoImpl(n)}return i.prototype.getInfo=function(){return this._deviceInfo},i.prototype.getAvailableActions=function(){if(this._deviceInfo.getStatus()==n.DeviceStatus.Removed)return[];var t=[n.DeviceManagementAction.Rename];return this._deviceInfo.getIsCurrent()||t.push(n.DeviceManagementAction.Remove),t},i}();t.ManagedDeviceImpl=i}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var i=function(){function i(i){switch(this._approval=new t.MobileApprovalImpl(i),this._approval.getStatus()){case n.MobileApprovalStatus.Pending:this._availableActions=[n.MobileApprovalAction.Approve,n.MobileApprovalAction.Deny];break;default:this._availableActions=[]}}return i.prototype.getApproval=function(){return this._approval},i.prototype.getAvailableActions=function(){return this._availableActions},i}();t.ManagedMobileApprovalImpl=i}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var i=function(){function i(i){if(this._originDevice=null,this._approvalId=i.approval_id,this._source=i.source,this._title=i.title,this._details=i.details,this._creationTime=i.create,this._finishTime=i.finish,this._expiresAt=i.create+1e3*i.expiry_in,this._originAppId=i.origin_app_id,this._customParams=i.custom_params,i.origin_device&&(this._originDevice=n.TargetDeviceDetailsImpl.fromServerFormat(i.origin_device)),i.location){var r=new n.GeoLocation;r.longitude=i.location.lng;r.latitude=i.location.lat;this._location=r}switch(i.status){case n.core.Protocol.ServerResponseDataApprovalsApprovalStatus.Approved:this._status=n.MobileApprovalStatus.Approved;break;case n.core.Protocol.ServerResponseDataApprovalsApprovalStatus.Denied:this._status=n.MobileApprovalStatus.Denied;break;case n.core.Protocol.ServerResponseDataApprovalsApprovalStatus.Expired:this._status=n.MobileApprovalStatus.Expired;break;case n.core.Protocol.ServerResponseDataApprovalsApprovalStatus.Pending:this._status=n.MobileApprovalStatus.Pending;break;default:throw new t.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Unknown approval status "+i.status);}}return i.prototype.getApprovalId=function(){return this._approvalId},i.prototype.getSource=function(){return this._source},i.prototype.getTitle=function(){return this._title},i.prototype.getDetails=function(){return this._details},i.prototype.getCreationTime=function(){return this._creationTime},i.prototype.getFinishTime=function(){return this._finishTime},i.prototype.getExpiresAt=function(){return this._expiresAt},i.prototype.getOriginAppId=function(){return this._originAppId},i.prototype.getOriginDevice=function(){return this._originDevice},i.prototype.getLocation=function(){return this._location},i.prototype.getCustomParams=function(){return this._customParams},i.prototype.getStatus=function(){return this._status},i.prototype.isExpired=function(){return this._status==n.MobileApprovalStatus.Expired},i.prototype.updateStatus=function(n){this._status=n},i}();t.MobileApprovalImpl=i}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.__tarsusInterfaceName="MobileApproveInput",t}(n.InputResponseType);n.MobileApproveInput=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.prototype.getPollingTimeout=function(){return this._pollingTimeout},r.prototype.setPollingTimeout=function(n){this._pollingTimeout=n},r.createRequestPollingInput=function(){return n.ts.mobile.sdk.impl.MobileApproveInputRequestPollingImpl.createRequestPollingInput()},r.createRequestLongPollingInput=function(t){return n.ts.mobile.sdk.impl.MobileApproveInputRequestPollingImpl.createRequestLongPollingInput(t)},r.__tarsusInterfaceName="MobileApproveInputRequestPolling",r}(t.MobileApproveInput);t.MobileApproveInputRequestPolling=r}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.createRequestPollingInput=function(){var n=new t;return n.setPollingTimeout(0),n},t.createRequestLongPollingInput=function(n){var i=new t;return i.setPollingTimeout(n),i},t}(n.MobileApproveInputRequestPolling);t.MobileApproveInputRequestPollingImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var i=function(){function t(n,t,i){this.value=n;this.format=t;this.alt=i}return t.prototype.getValue=function(){return this.value},t.prototype.getFormat=function(){return this.format},t.prototype.getQrAlternativeRepresentation=function(){return this.alt},t.createFromServerFormat=function(i){var u=n.OtpFormatImpl.fromAssertionFormat(i.format),r=null;return(i.alt||[]).forEach(function(n){"qr_text"===n.type&&(r=n.value)}),new t(i.value,u,r)},t}();t.MobileApproveOtpImpl=i}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t,r;t=n.impl||(n.impl={});r=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.prototype.userId=function(){return this._userId},t.prototype.title=function(){return this._title},t.prototype.body=function(){return this._body},t.prototype.source=function(){return this._source},t.prototype.ticket=function(){return this._ticket},t.createWithUserId=function(n){var i=new t;return i._userId=n,i},t.createWithUserTicket=function(n){var i=new t;return i._userId=n,i},t.createWithJsonPayload=function(n){var r=n,i=new t;return i._userId=r.user_id,i._title=r.body,i._body=r.details,i._source=r.source,i},t}(n.MobileApprovePushRequestPayload);t.MobileApprovePushRequestPayloadImpl=r}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.prototype.getPrompt=function(){return this._prompt},r.prototype.setPrompt=function(n){this._prompt=n},r.prototype.getCancelButtonTitle=function(){return this._cancelButtonTitle},r.prototype.setCancelButtonTitle=function(n){this._cancelButtonTitle=n},r.prototype.getFallbackButtonTitle=function(){return this._fallbackButtonTitle},r.prototype.setFallbackButtonTitle=function(n){this._fallbackButtonTitle=n},r.prototype.getFallbackControlRequestType=function(){return this._fallbackControlRequestType},r.prototype.setFallbackControlRequestType=function(n){this._fallbackControlRequestType=n},r.create=function(t){return n.ts.mobile.sdk.impl.NativeFaceInputImpl.create(t)},r.createFallbackEnabledPrompt=function(t,i,r){return n.ts.mobile.sdk.impl.NativeFaceInputImpl.createFallbackEnabledPrompt(t,i,r)},r.__tarsusInterfaceName="NativeFaceInput",r}(t.InputResponseType);t.NativeFaceInput=r}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.create=function(n){var t=new r;return n&&t.setPrompt(n),t},r.createFallbackEnabledPrompt=function(t,i,u){var f=new r;return t&&f.setPrompt(t),i&&f.setFallbackButtonTitle(i),u?f.setFallbackControlRequestType(u):f.setFallbackControlRequestType(n.ControlRequestType.SelectMethod),f},r}(n.NativeFaceInput);t.NativeFaceInputImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var f=function(){function t(){}return t.fromAssertionFormat=function(t){switch(t.type){case n.core.Protocol.OtpFormatType.Numeric:return new i(t.length);case n.core.Protocol.OtpFormatType.QrCode:return new r;case n.core.Protocol.OtpFormatType.External:return new u(t.data);default:throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Invalid format type encountered: "+t.type);}},t}(),i,r,t,u;n.OtpFormatImpl=f;i=function(){function n(n){this._length=n}return n.prototype.getOtpLength=function(){return this._length},n.prototype.getType=function(){return t.Numeric},n.__tarsusInterfaceName="OtpFormatNumeric",n}();n.OtpFormatNumericImpl=i;r=function(){function n(){}return n.prototype.getType=function(){return t.QrCode},n.__tarsusInterfaceName="OtpFormatQr",n}();n.OtpFormatQrImpl=r;u=function(){function n(n){this._data=n}return n.prototype.getData=function(){return this._data},n.prototype.getType=function(){return t.External},n.__tarsusInterfaceName="OtpFormatExternal",n}();n.OtpFormatExternalImpl=u,function(n){n[n.Numeric=0]="Numeric";n[n.QrCode=1]="QrCode";n[n.External=2]="External"}(t=n.OtpFormatType||(n.OtpFormatType={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.prototype.getOtp=function(){return this._otp},r.prototype.setOtp=function(n){this._otp=n},r.createOtpSubmission=function(t){return n.ts.mobile.sdk.impl.OtpInputOtpSubmissionImpl.createOtpSubmission(t)},r.__tarsusInterfaceName="OtpInputOtpSubmission",r}(t.OtpInput);t.OtpInputOtpSubmission=r}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.createOtpSubmission=function(n){var i=new t;return i.setOtp(n),i},t}(n.OtpInputOtpSubmission);t.OtpInputOtpSubmissionImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.createOtpResendRequest=function(){return n.ts.mobile.sdk.impl.OtpInputRequestResendImpl.createOtpResendRequest()},r.__tarsusInterfaceName="OtpInputRequestResend",r}(t.OtpInput);t.OtpInputRequestResend=r}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.createOtpResendRequest=function(){return new t},t}(n.OtpInputRequestResend);t.OtpInputRequestResendImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.__tarsusInterfaceName="OtpPushRequestPayload",t}(n.PushRequestPayload);n.OtpPushRequestPayload=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t,r;t=n.impl||(n.impl={});r=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.prototype.userId=function(){return this._userId},t.prototype.title=function(){return this._title},t.prototype.body=function(){return this._body},t.createWithJsonPayload=function(n){var r=n,i=new t;return i._userId=r.user_id,i._title=r.title,i._body=r.body,i},t}(n.OtpPushRequestPayload);t.OtpPushRequestPayloadImpl=r}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.prototype.getPassword=function(){return this._password},r.prototype.setPassword=function(n){this._password=n},r.create=function(t){return n.ts.mobile.sdk.impl.PasswordInputImpl.create(t)},r.__tarsusInterfaceName="PasswordInput",r}(t.InputResponseType);t.PasswordInput=r}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.create=function(n){var i=new t;return i.setPassword(n),i},t}(n.PasswordInput);t.PasswordInputImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.prototype.getPatternDescription=function(){return this._patternDescription},r.prototype.setPatternDescription=function(n){this._patternDescription=n},r.create=function(t){return n.ts.mobile.sdk.impl.PatternInputImpl.create(t)},r.__tarsusInterfaceName="PatternInput",r}(t.InputResponseType);t.PatternInput=r}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(r){function u(){return null!==r&&r.apply(this,arguments)||this}return i(u,r),u.create=function(n){var t=new u;return t.setPatternDescription(n),t},u.validateFormat=function(n){return null!=n.getPatternDescription().match(/^(r:[0-9]+,c:[0-9]+)+$/)},u.getPatternLength=function(i){if(u.validateFormat(i))return i.getPatternDescription().match(/r/g).length;throw new t.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Invalid pattern input.");},u}(n.PatternInput);t.PatternInputImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.prototype.getPin=function(){return this._pin},r.prototype.setPin=function(n){this._pin=n},r.create=function(t){return n.ts.mobile.sdk.impl.PinInputImpl.create(t)},r.__tarsusInterfaceName="PinInput",r}(t.InputResponseType);t.PinInput=r}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.create=function(n){var i=new t;return i.setPin(n),i},t}(n.PinInput);t.PinInputImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.createSuccessResponse=function(t){var i=new n.PlaceholderAuthSuccessResponse;return i.setPlaceholderToken(t),i},r.createdFailedResponse=function(t,i){var r=new n.PlaceholderAuthFailureResponse;return r.setFailureError(i),r.setExpired(t.getExpired()),r.setLocked(t.getLocked()),r.setRegistered(t.getRegistered()),r.setRegistrationStatus(t.getRegistrationStatus()),r},r.createFailedResponseWithServerProvidedStatus=function(t){var i=new n.PlaceholderAuthFailureWithServerProvidedStatusResponse;return i.setFailureError(t),i},r}(n.PlaceholderInputResponse);t.PlaceholderInputResponseImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){function u(n){return!!n.createContinuation}function o(n){return u(n)&&n.run}var t=function(){},f,e,r;n.Continuation=t;n.IsResumableProcess=u;f=function(){function n(n){this._ctxt=n}return Object.defineProperty(n.prototype,"rtContext",{get:function(){return this._ctxt},enumerable:!1,configurable:!0}),n.prototype.resume=function(n,t){return n instanceof r?(this._currentStep=n.currentStepContinuation.createResumableProcess(this),this.pumpSteps(this._currentStep.resume(n.currentStepContinuation,t))):Promise.reject("Attempt to resume a MultiStageResumableProcess with a bad continuation class.")},n.prototype.startWithStage=function(n){return this._currentStep=n,this.pumpSteps(n.run())},n.prototype.pumpSteps=function(n){var t=this;return n.then(function(n){return o(n)?(t._currentStep=n,t.pumpSteps(n.run())):n})},n}();n.MultiStageResumableProcess=f;e=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t}(t);n.ResumableProcessStageContinuation=e;n.IsResumableProcessStage=o;r=function(t){function r(i){var r=t.call(this)||this;return i instanceof n.SerializationContext?r.serializeFrom(i):r._currentStepContinuation=i._currentStep.createContinuation(),r}return i(r,t),r.prototype.serializeTo=function(n){n.writeObject("currentStepContinuation",this._currentStepContinuation)},r.prototype.serializeFrom=function(n){this._currentStepContinuation=n.readNonNullObject("currentStepContinuation")},Object.defineProperty(r.prototype,"currentStepContinuation",{get:function(){return this._currentStepContinuation},enumerable:!1,configurable:!0}),r}(t);n.MultiStageResumableProcessContinuation=r}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(t){var i=function(){function t(n,t){this._controlFlowProcessor=n;this._action=t;this._sdk=this._controlFlowProcessor._sdk;this._uiHandler=this._controlFlowProcessor._uiHandler;this._clientContext=this._controlFlowProcessor._clientContext}return t.prototype.cancelRun=function(){},t.prototype.policyAction=function(){return this._policyAction||(this._policyAction=n.impl.PolicyActionImpl.fromServerAction(this._controlFlowProcessor,this._action)),this._policyAction},t.prototype.processEscapeRequest=function(t){var i=this;return new Promise(function(r,u){var f=t.getEscapeOption().getId();i._sdk.log(n.LogLevel.Debug,function(){return"Processing escape reques "+f});for(var o=i._policyAction.getEscapeOptions(),s=!1,e=0;e<o.length;e++)if(o[e].getId()===f){s=!0;break}s?i.sendAssertionEscapeRequest(t).then(r,u):u(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Attempt to invoke an invalid escape option "+f))})},t.prototype.sendPollingRequest=function(t,i){var r=this._controlFlowProcessor.createPollingRequest(t,i);return n.util.wrapPromiseWithActivityIndicator(this._uiHandler,this.policyAction(),this._clientContext,this._controlFlowProcessor._session.performSessionExchange(r).then(function(n){return n.data}))},t.prototype.sendAssertionRequest=function(t,i,r){var u=this._controlFlowProcessor.createAssertionRequest(this._action,t,i,r);return n.util.wrapPromiseWithActivityIndicator(this._uiHandler,this.policyAction(),this._clientContext,this._controlFlowProcessor._session.performSessionExchange(u).then(function(t){if(!t.data)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Communication,"Invalid response to assertion.",{responseBody:JSON.stringify(t)});return t.data}))},t.prototype.sendErrorReportAssertionRequest=function(n){var t={client_error:n};return this.sendAssertionRequest("report_error",t)},t.prototype.sendAssertionEscapeRequest=function(t){var i=this._controlFlowProcessor.createAssertionRequest(this._action,"escape",{escape_id:t.getEscapeOption().getId(),escape_params:t.getEscapeParameters()});return n.util.wrapPromiseWithActivityIndicator(this._uiHandler,this.policyAction(),this._clientContext,this._controlFlowProcessor._session.performSessionExchange(i).then(function(t){if(!t.data)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Communication,"Invalid response to assertion.",{responseBody:JSON.stringify(t)});return t.data}))},t}();t.ActionDriver=i}(t.actiondrivers||(t.actiondrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){!function(t){var u=function(){},r,f;t.ResumableProcessActionDriverRuntimeContext=u;r=function(t){function r(i){var r=t.call(this)||this;return i instanceof n.SerializationContext?r.serializeFrom(i):r._actionData=i,r}return i(r,t),r.prototype.serializeTo=function(n){n.writePrimitive("actionData",this._actionData)},r.prototype.serializeFrom=function(n){this._actionData=n.readPrimitive("actionData")},Object.defineProperty(r.prototype,"actionData",{get:function(){return this._actionData},enumerable:!1,configurable:!0}),r}(n.Continuation);t.ResumableProcessActionContinuation=r;f=function(n){function t(t,i){return t instanceof u&&(t=t.controlFlowProcessor),i instanceof r&&(i=i.actionData),n.call(this,t,i)||this}return i(t,n),t}(t.ActionDriver);t.ResumableProcessActionDriver=f}(n.actiondrivers||(n.actiondrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={}));h=r&&r.__decorate||function(n,t,i,r){var e,o=arguments.length,f=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,s;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)f=Reflect.decorate(n,t,i,r);else for(s=n.length-1;s>=0;s--)(e=n[s])&&(f=(o<3?e(f):o>3?e(t,i,f):e(t,i))||f);return o>3&&f&&Object.defineProperty(t,i,f),f};k=r&&r.__metadata||function(n,t){if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,t)};!function(n){!function(n){!function(n){var t;(function(n){var i=function(){},r,u;n.ControlFlowProcessorRuntimeContext=i;r=function(){function i(i,r,u,f,e){if(i instanceof n.SerializationContext)this.serializeFrom(i);else{if(!(r&&u&&void 0!==f&&e))throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Invalid arguments passed to ControlFlowProcessorContinuation ctor");this._initiatingRequest=i;this._initialCflowResponse=r;this._controlFlow=u;this._currentControlFlowStep=f;this._actionContinuation=e.createContinuation()}}return Object.defineProperty(i.prototype,"initiatingRequest",{get:function(){return this._initiatingRequest},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"initialCflowResponse",{get:function(){return this._initialCflowResponse},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"controlFlow",{get:function(){return this._controlFlow},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentControlFlowStep",{get:function(){return this._currentControlFlowStep},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"actionContinuation",{get:function(){return this._actionContinuation},enumerable:!1,configurable:!0}),i.prototype.createResumableProcess=function(n){return new u(n)},i.prototype.serializeTo=function(n){n.writeObject("intiatingRequest",this._initiatingRequest);n.writePrimitive("initialCflowResponse",this._initialCflowResponse);n.writePrimitive("controlFlow",this._controlFlow);n.writePrimitive("currentControlFlowStep",this._currentControlFlowStep);n.writeObject("actionContinuation",this._actionContinuation)},i.prototype.serializeFrom=function(t){this._initiatingRequest=t.readObject(n.SessionExchangeRequest,"intiatingRequest");this._initialCflowResponse=t.readPrimitive("initialCflowResponse");this._controlFlow=t.readPrimitive("controlFlow");this._currentControlFlowStep=t.readPrimitive("currentControlFlowStep");this._actionContinuation=t.readNonNullObject("actionContinuation")},i=h([n.Serializable("ControlFlowProcessorContinuation"),k("design:paramtypes",[Object,Object,Array,Number,n.actiondrivers.ResumableProcessActionDriver])],i)}();u=function(){function u(n,t,r,u){if(this._cancelled=!1,!(n instanceof i)){var f=n;(n=new i).sdk=f;n.cflowRequestContext=u||null;n.clientContext=r;n.session=t;n.uiHandler=f.currentUiHandler}this._sdk=n.sdk;this._session=n.session;this._uiHandler=n.uiHandler;this._clientContext=n.clientContext;this._requestContext=n.cflowRequestContext}return u.findByClientContext=function(n){var t=u._allRunningControlFlows.filter(function(t){return t._clientContext==n});return t.length?t[0]:null},u.prototype.createContinuation=function(){if(this._cancelled)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Cannot create continuation for cancelled control flow");if(!this._currentActionDriver)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Cannot create continuation for control flow without current action");if(this._currentActionDriver instanceof n.actiondrivers.ResumableProcessActionDriver)return new r(this._initiatingRequest,this._initialCflowResponse,this._controlFlow,this._currentControlFlowStep,this._currentActionDriver);throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Cannot create continuation for control flow running current action "+this._currentActionDriver._action.type);},Object.defineProperty(u.prototype,"sdk",{get:function(){return this._sdk},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"initiatingRequest",{get:function(){return this._initiatingRequest},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"requestContext",{get:function(){return this._requestContext},enumerable:!1,configurable:!0}),u.prototype.cancelFlow=function(){this._cancelled=!0;this._currentActionDriver&&this._currentActionDriver.cancelRun();this._uiHandler.controlFlowCancelled(this._clientContext)},u.prototype.startControlFlow=function(i){var u,r=this,f;return this._cancelled?this.createExternalCancellationRejectionPromise():(f=null,i instanceof n.SessionExchangeRequest?(f=i,u=t.util.wrapPromiseWithActivityIndicator(this._uiHandler,null,this._clientContext,this._session.performSessionExchange(i))):u=this._session.processInlineResponse(i),u.then(function(n){return r._initialCflowResponse=n.data,r._initiatingRequest=f,r.executeControlFlow(r._initialCflowResponse)}))},u.prototype.resume=function(i,u){var f=this;return new Promise(function(e,o){var s,h;if(!(i instanceof r))throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Invalid continuation type provided to resume()");f._initiatingRequest=i.initiatingRequest;f._initialCflowResponse=i.initialCflowResponse;f._controlFlow=i.controlFlow;f._currentControlFlowStep=i.currentControlFlowStep;s=new n.actiondrivers.ResumableProcessActionDriverRuntimeContext;s.controlFlowProcessor=f;h=i.actionContinuation.createResumableProcess(s);f._currentActionDriver=h;h.resume(i.actionContinuation,u).then(function(n){return f.executeControlFlow(n)}).then(e,o)})},Object.defineProperty(u.prototype,"challenge",{get:function(){return this._initialCflowResponse&&this._initialCflowResponse.challenge||null},enumerable:!1,configurable:!0}),u.prototype.executeControlFlow=function(n){var t=this;return new Promise(function(i,r){u._allRunningControlFlows.push(t);t._uiHandler.controlFlowStarting(t._clientContext);t.processSingleStepExchange(n).then(function(n){return t._uiHandler.controlFlowEnded(null,t._clientContext),n},function(n){throw t._uiHandler.controlFlowEnded(n,t._clientContext),n;}).finally(function(){var n=u._allRunningControlFlows.indexOf(t);u._allRunningControlFlows.splice(n,1)}).then(i,r)})},u.prototype.processSingleStepExchange=function(i){var u,r=this;return i.control_flow&&(this._controlFlow=i.control_flow,this._currentControlFlowStep=0,this._sdk.log(t.LogLevel.Debug,function(){return"Got ControlFlow with "+r._controlFlow.length+" steps."})),i.data&&i.data.json_data?(this._sdk.log(t.LogLevel.Debug,function(){return"Got a JSON data attachment on control flow response. Processing."}),u=n.actiondrivers.ActionDriverJsonData.handleJsonDataByUiHandler(this._uiHandler,i,i.data.json_data,null,this._clientContext)):u=Promise.resolve(i),u.then(function(){switch(i.state){case n.Protocol.AuthSessionState.Pending:return r._sdk.log(t.LogLevel.Debug,function(){return"Execute step "+r._currentControlFlowStep+"."}),(u=r._controlFlow[r._currentControlFlowStep])?r._cancelled?r.createExternalCancellationRejectionPromise():r.promiseCancellableSingleActionProcessing(u).then(function(n){return r._currentControlFlowStep++,r.processSingleStepExchange(n)}):(r._sdk.log(t.LogLevel.Error,function(){return"Step "+r._currentControlFlowStep+" nonexisting."}),Promise.reject(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Session state is pending but no control flow.")));case n.Protocol.AuthSessionState.Rejected:r._sdk.log(t.LogLevel.Debug,function(){return"Handle control flow rejection."});var u=r._controlFlow&&r._controlFlow[r._currentControlFlowStep]||null;return r._uiHandler.handlePolicyRejection(i.rejection_data&&i.rejection_data.title||null,i.rejection_data&&i.rejection_data.text||null,i.rejection_data&&i.rejection_data.button_text||null,i.failure_data,u?t.impl.PolicyActionImpl.fromServerAction(r,u):t.impl.PolicyActionImpl.createPseudoAction(r._sdk,"rejection"),r._clientContext).then(function(n){if(-1!=n.getUserChoice())throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"ConfirmationInput.getUserChoice must be set to -1.");throw t.impl.AuthenticationErrorImpl.errorForSessionRejectionFailureData(i.failure_data);});case n.Protocol.AuthSessionState.Completed:return r._sdk.log(t.LogLevel.Debug,function(){return"Handle control flow completion."}),Promise.resolve(t.impl.AuthenticationResultImpl.fromCflowServerResponse(i,r._session.deviceId()))}})},u.prototype.promiseCancellableSingleActionProcessing=function(i){var u=this,f=n.actiondrivers.ActionDrivers[i.type],r;return f?(r=new f(this,i),this._currentActionDriver=r,this._uiHandler.controlFlowActionStarting(r.policyAction(),this._clientContext),r.run().then(function(n){return u._uiHandler.controlFlowActionEnded(null,r.policyAction(),u._clientContext),n},function(n){var f=t.impl.AuthenticationErrorImpl.augmentErrorData(n,{});throw f.setPublicProperty(t.AuthenticationErrorProperty.AuthenticationErrorFailingActionType,i.type),u._uiHandler.controlFlowActionEnded(f,r.policyAction(),u._clientContext),f;}).finally(function(){u._currentActionDriver=null})):Promise.reject(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Don't know how to handle action.",{actionType:i.type}))},u.prototype.createAssertionRequest=function(i,r,u,f){var o,e,h,s;if(!this.challenge)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Attempt to create an assertion request without an initial control flow request.");if(e={action:i.type,assert:r||"action",assertion_id:i.assertion_id,fch:this.challenge},u&&(e.data=u),f){h=e;for(s in f)h[s]=f[s]}return new n.SessionExchangeRequest("POST","auth/assert",e,[],null===(o=this.requestContext)||void 0===o?void 0:o.getFlowId())},u.prototype.createPollingRequest=function(t,i){var r,u={};return Object.keys(t).forEach(function(n){u[n]=t[n]}),u.polling_timeout=i,new n.SessionExchangeRequest("POST","auth/poll",u,[],null===(r=this.requestContext)||void 0===r?void 0:r.getFlowId())},u.prototype.createExternalCancellationRejectionPromise=function(){return Promise.reject(this.createExternalCancellationError())},u.prototype.createExternalCancellationError=function(){return new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.UserCanceled,"Operation cancelled by user.",{control_flow_external_cancellation:!0})},u.prototype.generateDebugPin=function(){var t=this;return new Promise(function(i,r){var u=new n.SessionExchangeRequest("POST","auth/create_debug_token",{},[]);t._session.performSessionExchange(u).then(function(n){return n.data.debug_pin}).then(i,r)})},u._allRunningControlFlows=[],u}();n.ControlFlowProcessor=u})((t=n.sdk||(n.sdk={})).core||(t.core={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){var t,r,i;i=n.sdk||(n.sdk={});t=i.impl||(i.impl={});r=function(){function n(n,i,r,u,f,e){void 0===u&&(u=!1);void 0===f&&(f=null);void 0===e&&(e=null);this._isPseudoAction=!1;this._escapeOptions=[];this._actionType=i;this._isPseudoAction=u;this._actionLocalStrings=f;this._actionLocalStyles=e;this._uiContextImpl=new t.UIContextImpl(n,this._actionLocalStrings||void 0,this._actionLocalStyles);this._controlFlow=r}return n.prototype.getIsPseudoAction=function(){return this._isPseudoAction},n.prototype.getActionType=function(){return this._actionType},n.prototype.getAltLabel=function(){return""},n.prototype.getUiContext=function(){return this._uiContextImpl},n.prototype.getEscapeOptions=function(){return this._escapeOptions},n.prototype.escapeOptionById=function(n){var r=null;if(this._escapeOptions.forEach(function(t){t.getId()===n&&(r=t)}),!r)throw new t.AuthenticationErrorImpl(i.AuthenticationErrorCode.AppImplementation,"Invalid escape ID "+n+" for this action.");return r},Object.defineProperty(n.prototype,"controlFlow",{get:function(){return this._controlFlow},enumerable:!1,configurable:!0}),n.fromServerAction=function(i,r){var u=new n(i.sdk,r.type,i,!1,r.strings,r.styles);return r.escapes&&(u._escapeOptions=r.escapes.map(function(n){return new t.EscapeOptionImpl(n)})),u},n.createPseudoAction=function(t,i){return new n(t,i,null,!0)},n}();t.PolicyActionImpl=r}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var i=function(){function t(){}return t.prototype.getControlRequest=function(){return this._controlRequest},t.prototype.setControlRequest=function(n){this._controlRequest=n},t.prototype.getSelectedAuthenticator=function(){return this._selectedAuthenticator},t.prototype.setSelectedAuthenticator=function(n){this._selectedAuthenticator=n},t.prototype.getActionEscapeRequest=function(){return this._actionEscapeRequest},t.prototype.setActionEscapeRequest=function(n){this._actionEscapeRequest=n},t.createControlResponse=function(t){return n.ts.mobile.sdk.impl.PromotionInputImpl.createControlResponse(t)},t.createEscapeRequest=function(t,i){return n.ts.mobile.sdk.impl.PromotionInputImpl.createEscapeRequest(t,i)},t.createAuthenticatorDescription=function(t){return n.ts.mobile.sdk.impl.PromotionInputImpl.createAuthenticatorDescription(t)},t.__tarsusInterfaceName="PromotionInput",t}();t.PromotionInput=i}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.prototype.isControlRequest=function(){return!(void 0===this._controlRequest||null===this._controlRequest)},r.createControlResponse=function(n){var t=new r;return t.setControlRequest(n),t},r.createAuthenticatorDescription=function(n){var t=new r;return t.setSelectedAuthenticator(n),t},r.createEscapeRequest=function(t,i){var u=new r;return u._actionEscapeRequest=new n.ActionEscapeRequest,u._actionEscapeRequest._escapeOption=t,u._actionEscapeRequest._escapeParameters=i,u},r}(n.PromotionInput);t.PromotionInputImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(){function t(){}return t.fromAssertionFormat=function(t){switch(t){case n.core.Protocol.QrCodeFormatType.Numeric:return n.QrCodeFormat.Numeric;case n.core.Protocol.QrCodeFormatType.Alphanumeric:return n.QrCodeFormat.Alphanumeric;case n.core.Protocol.QrCodeFormatType.Binary:return n.QrCodeFormat.Binary;default:throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Invalid qr code format type encountered: "+t.type);}},t}();n.QrCodeFormatImpl=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var i=function(){function t(){}return t.prototype.getQrCode=function(){return this._qrCode},t.prototype.getQrCodeFormat=function(){return this._qrCodeFormat},t.createQrCodeResult=function(t,i){return n.ts.mobile.sdk.impl.QrCodeResultImpl.createQrCodeResult(t,i)},t.__tarsusInterfaceName="QrCodeResult",t}();t.QrCodeResult=i}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.createQrCodeResult=function(n,i){var r=new t;return r._qrCode=n,r._qrCodeFormat=i,r},t}(n.QrCodeResult);t.QrCodeResultImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var i=function(){function t(){}return t.prototype.getRedirectResponse=function(){return this._redirectResponse},t.prototype.setRedirectResponse=function(n){this._redirectResponse=n},t.prototype.getAdditionalParametersOverride=function(){return this._additionalParametersOverride},t.prototype.setAdditionalParametersOverride=function(n){this._additionalParametersOverride=n},t.create=function(t){return n.ts.mobile.sdk.impl.RedirectInputImpl.create(t)},t.__tarsusInterfaceName="RedirectInput",t}();t.RedirectInput=i}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.create=function(n){var i=new t;return i.setRedirectResponse(n),i},t}(n.RedirectInput);t.RedirectInputImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var i=function(){function t(){}return t.prototype.getServerAddress=function(){return this._serverAddress},t.prototype.setServerAddress=function(n){this._serverAddress=n},t.prototype.getRealm=function(){return this._realm},t.prototype.setRealm=function(n){this._realm=n},t.prototype.getAppId=function(){return this._appId},t.prototype.setAppId=function(n){this._appId=n},t.prototype.getTokenName=function(){return this._tokenName},t.prototype.setTokenName=function(n){this._tokenName=n},t.prototype.getToken=function(){return this._token},t.prototype.setToken=function(n){this._token=n},t.prototype.getCryptoMode=function(){return this._cryptoMode},t.prototype.setCryptoMode=function(n){this._cryptoMode=n},t.create=function(t,i,r,u){return n.ts.mobile.sdk.impl.SDKConnectionSettingsImpl.create(t,i,r,u)},t.createWithCryptoMode=function(t,i,r,u,f){return n.ts.mobile.sdk.impl.SDKConnectionSettingsImpl.createWithCryptoMode(t,i,r,u,f)},t.__tarsusInterfaceName="SDKConnectionSettings",t}();t.SDKConnectionSettings=i}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.create=function(t,i,r,u){return this.createWithCryptoMode(t,i,r,u,n.ConnectionCryptoMode.None)},r.createWithCryptoMode=function(n,t,i,u,f){var e=new r;return e.setServerAddress(n),e.setAppId(t),e.setTokenName(i),e.setToken(u),e.setCryptoMode(f),e},r.prototype.setSendFlowIdAsHttpHeader=function(n){this.sendFlowIdAsHttpHeader=n},r.prototype.shouldSendFlowIdAsHttpHeader=function(){return this.sendFlowIdAsHttpHeader},r}(n.SDKConnectionSettings);t.SDKConnectionSettingsImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.prototype.getQrCodeResult=function(){return this._qrCodeResult},r.prototype.setQrCodeResult=function(n){this._qrCodeResult=n},r.createScanQrCodeInput=function(t){return n.ts.mobile.sdk.impl.ScanQrCodeInputImpl.createScanQrCodeInput(t)},r.__tarsusInterfaceName="ScanQrCodeInput",r}(t.InputResponseType);t.ScanQrCodeInput=r}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.createScanQrCodeInput=function(n){var i=new t;return i.setQrCodeResult(n),i},t}(n.ScanQrCodeInput);t.ScanQrCodeInputImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.createAnswerToQuestion=function(n,i){var r=new t;return r._question=n,r._answer=i,r._isRemoved=!1,r},t.createAnswerRemovalRequest=function(n){var i=new t;return i._question=n,i._isRemoved=!0,i},t}(n.SecurityQuestionAndAnswer);t.SecurityQuestionAndAnswerImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.createWithText=function(n){var i=new t;return i._answerText=n,i},t}(n.SecurityQuestionAnswer);t.SecurityQuestionAnswerImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){var t=function(){function n(n,t,i){this._id=n;this._text=t;this._registered=i}return n.prototype.getSecurityQuestionId=function(){return this._id},n.prototype.getSecurityQuestionText=function(){return this._text},n.prototype.getAnswered=function(){return this._registered},n.__tarsusInterfaceName="SecurityQuestion",n}();n.SecurityQuestionImpl=t}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.createSecurityQuestionAnswersInputResponse=function(t){var i=new n.SecurityQuestionAnswersInputResponse;return i._answers=t,i},r}(n.SecurityQuestionInputResponse);t.SecurityQuestionInputResponseImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){var t=function(){function n(){}return n.prototype.getStepTag=function(){return"question"},n.prototype.getSecurityQuestions=function(){return this._securityQuestions},n.prototype.getMinAnswersNeeded=function(){return this._minAnswers},n.prototype.getMaxAnswerLength=function(){return this._maxAnswerLength},n.prototype.getMinAnswerLength=function(){return this._minAnswerLength},n.createForAuthQuestion=function(t){var i=new n;return i._minAnswers=1,i._securityQuestions=[t],i._maxAnswerLength=-1,i._minAnswerLength=-1,i},n.createForRegistrationQuestions=function(t,i,r,u){var f=new n;return f._minAnswers=i,f._securityQuestions=t,f._maxAnswerLength=r,f._minAnswerLength=u,f},n.__tarsusInterfaceName="SecurityQuestionStepDescription",n}();n.SecurityQuestionStepDescriptionImpl=t}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){var t="undefined"!=typeof window?window:t;t.com=n}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){var t=function(){function n(n){this._hex=n.hex||"";n.alpha&&(this._hex=this._hex.slice(0,1)+this.convertAlpha(n.alpha)+this._hex.slice(1))}return n.prototype.getHexValue=function(){return this._hex},n.prototype.convertAlpha=function(n){return Math.ceil(255*n).toString(16)},n}();n.TSColorImpl=t}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(n){function t(t,i){var r=n.call(this)||this;return i&&(r._selectedTargets=i),t&&(r._authenticatorInput=t),r}return i(t,n),t.createAuthenticatorInput=function(n){return new t(n,null)},t.createTargetSelectionRequest=function(n){return new t(null,[n])},t.createTargetsSelectionRequest=function(n){return new t(null,n)},t}(n.TargetBasedAuthenticatorInput);t.TargetBasedAuthenticatorInputImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(){function t(t,i,r,u,f,e,o){this._deviceId=t;this._model=n.core.DeviceModelConverter.getDeviceModel(i,f);this._isCurrentDevice=u;this._osType=n.core.DeviceModelConverter.getOsName(f);this._osVersion=e;this._lastAccessed=r;this._alias=o}return t.prototype.getDeviceId=function(){return this._deviceId},t.prototype.getModel=function(){return this._model},t.prototype.getLastAccessed=function(){return this._lastAccessed},t.prototype.getIsCurrent=function(){return this._isCurrentDevice},t.prototype.getOsType=function(){return this._osType},t.prototype.getOsVersion=function(){return this._osVersion},t.prototype.getAlias=function(){return this._alias},t.prototype.describe=function(){var n=new Date(this._lastAccessed).toLocaleDateString();return""+(this._alias?this._alias+" : ":"")+this._model+" last accessed on "+n},t.fromServerFormat=function(n){return new t(n.device_id,n.model,n.last_access,n.current_device,n.os_type,n.os_version,n.alias||null)},t}();n.TargetDeviceDetailsImpl=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.createPollRequest=function(){return n.ts.mobile.sdk.impl.TicketWaitInputImpl.createPollRequest()},r.createLongPollRequest=function(t){return n.ts.mobile.sdk.impl.TicketWaitInputImpl.createLongPollRequest(t)},r.__tarsusInterfaceName="TicketWaitInput",r}(t.InputResponseType);t.TicketWaitInput=r}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.prototype.getPollingTimeout=function(){return this._pollingTimeout},t.prototype.setPollingTimeout=function(n){this._pollingTimeout=n},t.__tarsusInterfaceName="TicketWaitInputPollRequest",t}(n.TicketWaitInput);n.TicketWaitInputPollRequest=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var u=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.createPollRequest=function(){var n=new r;return n.setPollingTimeout(0),n},t.createLongPollRequest=function(n){var t=new r;return t.setPollingTimeout(n),t},t}(n.TicketWaitInput),r;t.TicketWaitInputImpl=u;r=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.__tarsusInterfaceName="TicketWaitInputPollRequest",t}(n.TicketWaitInputPollRequest);t.TicketWaitInputPollRequestImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.Qr=0]="Qr";n[n.Alphanumeric=1]="Alphanumeric"}(n.TicketIdFormat||(n.TicketIdFormat={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var i=function(){function t(n){this._ticketId=n}return t.prototype.getFormat=function(){switch(this._ticketId.format){case n.core.Protocol.TicketIdFormatType.Alphanumeric:return n.TicketIdFormat.Alphanumeric;case n.core.Protocol.TicketIdFormatType.QrCode:default:return n.TicketIdFormat.Qr}},t.prototype.getValue=function(){return this._ticketId.value},t.prototype.getValueAltRepresentation=function(){return this._ticketId.alt},t}(),r;t.TicketIdImpl=i;r=function(){function n(n){this._title=n.title;this._text=n.text;this._ticketId=n.ticket_id?new i(n.ticket_id):null}return n.prototype.getTitle=function(){return this._title},n.prototype.getText=function(){return this._text},n.prototype.getTicketId=function(){return this._ticketId},n}();t.TicketWaitingInformationImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var f=function(){function t(){}return t.fromAssertionFormat=function(t){switch(t.type){case n.core.Protocol.TotpChallengeFormatType.Numeric:return new r;case n.core.Protocol.TotpChallengeFormatType.QrCode:return new u;case n.core.Protocol.TotpChallengeFormatType.AlphaNumeric:return new i;default:throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Invalid format type encountered: "+t.type);}},t}(),i,r,t,u;n.TotpChallengeFormatImpl=f;i=function(){function n(){}return n.prototype.getType=function(){return t.AlphaNumeric},n.__tarsusInterfaceName="TotpChallengeFormatAlphaNumeric",n}();n.TotpChallengeFormatAlphaNumericImpl=i;r=function(){function n(){}return n.prototype.getType=function(){return t.Numeric},n.__tarsusInterfaceName="TotpChallengeFormatNumeric",n}();n.TotpChallengeFormatNumericImpl=r;u=function(){function n(){}return n.prototype.getType=function(){return t.QrCode},n.__tarsusInterfaceName="TotpChallengeFormatQr",n}();n.TotpChallengeFormatQrImpl=u,function(n){n[n.AlphaNumeric=0]="AlphaNumeric";n[n.Numeric=1]="Numeric";n[n.QrCode=2]="QrCode"}(t=n.TotpChallengeFormatType||(n.TotpChallengeFormatType={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.prototype.getChallenge=function(){return this._challenge},r.prototype.setChallenge=function(n){this._challenge=n},r.create=function(t){return n.ts.mobile.sdk.impl.TotpChallengeInputImpl.create(t)},r.__tarsusInterfaceName="TotpChallengeInput",r}(t.InputResponseType);t.TotpChallengeInput=r}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.create=function(n){var i=new t;return i.setChallenge(n),i},t}(n.TotpChallengeInput);t.TotpChallengeInputImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){var t=function(){function n(){}return n.createTotpGenerationRequest=function(t,i,r){var u=new n;return u.setUserId(t.userHandle),u.setChallenge(i),u.setGeneratorName(r),u},n.prototype.getChallenge=function(){return this._challenge},n.prototype.getGeneratorName=function(){return this._generatorName},n.prototype.setGeneratorName=function(n){this._generatorName=n},n.prototype.setChallenge=function(n){this._challenge=n},n.prototype.setUserId=function(n){this._userId=n},n.prototype.getUserId=function(){return this._userId},n.prototype.setUserHandleType=function(n){this._userHandleType=n},n.prototype.getUserHandleType=function(){return this._userHandleType},n}();n.TotpGenerationRequestImpl=t}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.__tarsusInterfaceName="TotpInput",t}(n.InputResponseType);n.TotpInput=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.prototype.getCode=function(){return this._code},r.prototype.setCode=function(n){this._code=n},r.createTotpCodeSubmission=function(t){return n.ts.mobile.sdk.impl.TotpInputCodeSubmissionImpl.createTotpCodeSubmission(t)},r.__tarsusInterfaceName="TotpInputCodeSubmission",r}(t.TotpInput);t.TotpInputCodeSubmission=r}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.createTotpCodeSubmission=function(n){var i=new t;return i.setCode(n),i},t}(n.TotpInputCodeSubmission);t.TotpInputCodeSubmissionImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var i=function(){function t(){}return t.createEscapeRequest=function(t){var i=new n.TotpProvisionEscapeRequest;return i.setEscapeRequest(t),i},t}();t.TotpProvisionResultImpl=i}(n.impl||(n.impl={}))}(n.tarsusplugin||(n.tarsusplugin={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={}));ut=r&&r.__spreadArrays||function(){for(var t,i,u=0,n=0,f=arguments.length;n<f;n++)u+=arguments[n].length;for(t=Array(u),i=0,n=0;n<f;n++)for(var e=arguments[n],r=0,o=e.length;r<o;r++,i++)t[i]=e[r];return t};!function(n){!function(n){!function(n){!function(n){!function(n){var i=function(){function n(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._components=t}return n.prototype.toString=function(){return this._components.map(function(n){return n.replace(/([\\.])/g,function(n){return"\\"+("."==n?"p":n)})}).join(".")},n.fromString=function(t){return new(n.bind.apply(n,ut([void 0],t.split("."))))},n.prototype.concat=function(t){return new(n.bind.apply(n,ut([void 0],this._components.concat(t._components))))},n.prototype.component=function(n){return this._components[n]},n}(),t;n.TarsusKeyPath=i;t=function(){function n(n){this._host=n}return n.prototype.readStorageKey=function(n){return this._host.readStorageKey(n.toString())},n.prototype.writeStorageKey=function(n,t){this._host.writeStorageKey(n.toString(),t)},n.prototype.deleteStorageKey=function(n){this._host.deleteStorageKey(n.toString())},n.prototype.readSessionStorageKey=function(n){return this._host.readSessionStorageKey(n.toString())},n.prototype.writeSessionStorageKey=function(n,t){this._host.writeSessionStorageKey(n.toString(),t)},n.prototype.deleteSessionStorageKey=function(n){this._host.deleteSessionStorageKey(n.toString())},n.prototype.generateKeyPair=function(n,t,i,r){return this._host.generateKeyPair(n.toString(),t,i,r)},n.prototype.generateKeyPairExternalRepresentation=function(n){return this._host.generateKeyPairExternalRepresentation(n)},n.prototype.generateHexSeededKeyPairExternalRepresentation=function(n,t){return this._host.generateHexSeededKeyPairExternalRepresentation(n,t)},n.prototype.getKeyPair=function(n,t,i){return this._host.getKeyPair(n.toString(),t,i)},n.prototype.deleteKeyPair=function(n){this._host.deleteKeyPair(n.toString())},n.prototype.importVolatileSymmetricKey=function(n,t){return this._host.importVolatileSymmetricKey(n,t)},n.prototype.importVolatileKeyPair=function(n,t){return this._host.importVolatileKeyPair(n,t)},n.prototype.importVolatileKeyPairFromPublicKeyHex=function(n,t){return this._host.importVolatileKeyPairFromPublicKeyHex(n,t)},n.prototype.generatePbkdf2HmacSha1HexString=function(n,t,i,r){return this._host.generatePbkdf2HmacSha1HexString(n,t,i,r)},n.prototype.calcHexStringEncodedSha256Hash=function(n){return this._host.calcHexStringEncodedSha256Hash(n)},n.prototype.calcHexStringEncodedSha512Hash=function(n){return this._host.calcHexStringEncodedSha512Hash(n)},n.prototype.generateRandomHexString=function(n){return this._host.generateRandomHexString(n)},n.prototype.queryHostInfo=function(n){return this._host.queryHostInfo(n)},n.prototype.queryAsyncHostInfo=function(n){return this._host.queryAsyncHostInfo(n)},n.prototype.calcHexStringEncodedHmacSha1HashWithHexEncodedKey=function(n,t){return this._host.calcHexStringEncodedHmacSha1HashWithHexEncodedKey(n,t)},n.prototype.getCurrentTime=function(){return this._host.getCurrentTime()},n.prototype.createDelayedPromise=function(n){return this._host.createDelayedPromise(n)},n.prototype.fidoClientXact=function(n,t,i,r){return this._host.fidoClientXact(n,t,i,r)},n.prototype.fido2CredentialsOp=function(n,t,i,r,u){return this._host.fido2CredentialsOp(n,t,i,r,u)},n.prototype.dyadicEnroll=function(n,t){return this._host.dyadicEnroll(n,t)},n.prototype.dyadicSign=function(n,t){return this._host.dyadicSign(n,t)},n.prototype.dyadicDelete=function(n){return this._host.dyadicDelete(n)},n.prototype.dyadicRefreshToken=function(n){return this._host.dyadicRefreshToken(n)},n.prototype.log=function(n,t,i){return this._host.log(n,t,i)},n.prototype.setDebugIndicatorVisible=function(n){this._host.setDebugIndicatorVisible(n)},n.prototype.getUIStyles=function(){return this._host.getUIStyles()},n.prototype.getString=function(n,t){return this._host.getString(n,t)},n.prototype.loadPlugin=function(n){return this._host.loadPlugin(n)},n}();n.TarsusHostServices=t}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){var t=function(){function n(n){this._strings=n}return Object.defineProperty(n.prototype,"strings",{get:function(){return this._strings},enumerable:!1,configurable:!0}),n.prototype.getString=function(n){return this._strings?this._strings[n]:null},n}();n.ClientStrings=t}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){var i,r,t;t=n.sdk||(n.sdk={});i=t.impl||(t.impl={});r=function(){function n(n,t,i){this._sdk=n;this._contextLocalStrings=t||null;this._contextStylesheetJson=i||null}return n.prototype.getString=function(n){return this.internalFormatString(n,null)},n.prototype.formatString=function(n,t){return this.internalFormatString(n,t)},n.prototype.internalFormatString=function(n,t){var i;return null==(i=this.resolveStringKey(n))?n:t&&t.length>0?this.format(i,t):i},n.prototype.resolveStringKey=function(n){var r,i;return null!=(r=this._contextLocalStrings&&this._contextLocalStrings[n])?r:(i=this._sdk.uiAssetsData,i?i.getString(n):(this._sdk.log(t.LogLevel.Warning,function(){return"Attempt to get string value without initialized asset data."}),null))},n.prototype.format=function(n,t){var r=this,i=n;return i&&(i=i.replace(/%(\d+)\$s/g,function(n,i){var u=+i-1;return r.stringForIndex(u,t,n)})),i},n.prototype.stringForIndex=function(n,t,i){return n>=0&&n<t.length?t[n]:i},n.prototype.getStyle=function(n){return this._contextStylesheet||(this._contextStylesheet=this._contextStylesheetJson?this._sdk.uiAssetsData.getUiStylesheetsWithOverrides(this._contextStylesheetJson):this._sdk.uiAssetsData.uiStylesheets),this._contextStylesheet.getMatchingStyle(n)},n}();i.UIContextImpl=r}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(i){var u=new i.core.TarsusKeyPath("currentSession"),r=new i.core.TarsusKeyPath("continuations","default_cflow"),e=(new i.core.TarsusKeyPath("flow_id"),function(){function e(){this.mandatoryCollectors=[i.CollectorType.DeviceDetails,i.CollectorType.ExternalSDKDetails,i.CollectorType.HWAuthenticators,i.CollectorType.LocalEnrollments,i.CollectorType.Capabilities,i.CollectorType.DeviceFingerprint];this.mandatoryCollectorsForAnonymous=[i.CollectorType.DeviceDetails];this.uiAssetsDownloadMode=i.UIAssetsDownloadMode.DownloadOnInit;this._wasLocaleSet=!1}return e.prototype.pushRequestPayloadFromJSON=function(n){var t=n.push_type;switch(t){case"otp_notification":return i.impl.OtpPushRequestPayloadImpl.createWithJsonPayload(n);case"approval":return i.impl.MobileApprovePushRequestPayloadImpl.createWithJsonPayload(n)}throw new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.AppImplementation,"Payload with type "+t+" isn't recognized");},Object.defineProperty(e.prototype,"apiLevel",{get:function(){if(null==this._apiLevel)throw new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.Internal,"Attempt to access uninitialized API level");return this._apiLevel},enumerable:!1,configurable:!0}),e.prototype.setTarsusHost=function(n){this._nativeHost=n;this.host=new i.core.TarsusHostServices(n);this.setLogLevel(i.LogLevel.Debug);this.pluginManager=new i.core.TarsusPluginManager(this);this.enabledCollectors=[i.CollectorType.Accounts,i.CollectorType.DeviceDetails,i.CollectorType.Contacts,i.CollectorType.Owner,i.CollectorType.Software,i.CollectorType.Location,i.CollectorType.Bluetooth,i.CollectorType.ExternalSDKDetails,i.CollectorType.HWAuthenticators,i.CollectorType.FidoAuthenticators,i.CollectorType.Capabilities,i.CollectorType.LargeData,i.CollectorType.LocalEnrollments,i.CollectorType.DeviceFingerprint,i.CollectorType.AppPermissions];this._enabledCollectorsAnonymous=null;this.currentPersistUserData=!0},Object.defineProperty(e.prototype,"fidoClient",{get:function(){return this._fidoClient||(this._fidoClient=new i.core.fidoclient.TarsusFidoClient(this)),this._fidoClient},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabledCollectorsAnonymous",{get:function(){return null==this._enabledCollectorsAnonymous?this.apiLevel<11?(this.log(i.LogLevel.Debug,function(){return"enabledCollectorsAnonymous() returning regular collectors"}),this.enabledCollectors):(this.log(i.LogLevel.Debug,function(){return"enabledCollectorsAnonymous() returning mandatory collectors for anonymous only"}),this.mandatoryCollectorsForAnonymous):(this.log(i.LogLevel.Debug,function(){return"enabledCollectorsAnonymous() returning collectors set by the customer"}),this._enabledCollectorsAnonymous)},enumerable:!1,configurable:!0}),e.prototype.setUiAssetsDownloadMode=function(n){this.uiAssetsDownloadMode=n},e.prototype.setLocale=function(n){var t=this;return(this.log(i.LogLevel.Debug,function(){return"Start setLocale with locale "+n}),n&&""!=n)&&(this._wasLocaleSet=!0,(this.uiAssetsData&&this.uiAssetsData.locale)!=n||this.uiAssetsData.isServerClientStringsEmpty())?(this.log(i.LogLevel.Debug,function(){return"Updating locale to "+n}),this.uiAssetsDownloadMode!==i.UIAssetsDownloadMode.Disable?this.loadUiAssetsFromServer(n).then(function(n){return Promise.resolve(n)}).catch(function(r){return t.log(i.LogLevel.Warning,function(){return"Error loading locale from server; using empty locale "+n}),t.uiAssetsData=new i.core.UIAssetsData(t,n),Promise.reject(i.impl.AuthenticationErrorImpl.ensureAuthenticationError(r))}):(this.uiAssetsData=new i.core.UIAssetsData(this,n),Promise.resolve(!0))):Promise.resolve(!1)},e.prototype.setConnectionSettings=function(n){this.connectionSettings=n},e.prototype.setClientCryptoSettings=function(n){this.cryptoSettings=n},e.prototype.setEnabledCollectors=function(n){this.enabledCollectors=n;this.addMandatoryCollectorsIfNeeded()},e.prototype.setEnabledCollectorsForAnonymousJourneys=function(n){this.log(i.LogLevel.Debug,function(){return"Overriding collectors for anonymous"});this._enabledCollectorsAnonymous=n;this.addMandatoryCollectorsForAnonymousIfNeeded()},e.prototype.setLogLevel=function(n){this._logLevel=n;this._nativeHost.setLogLevel(this._logLevel)},e.prototype.setExternalLogger=function(n){this._nativeHost.setExternalLogger(n)},e.prototype.setTransportProvider=function(n){this.transportProvider=n},e.prototype.setUiHandler=function(n){this.currentUiHandler=n},e.prototype.setPushToken=function(n){this._lastReceivedPushToken=n},e.prototype.setPersistUserData=function(n){this.currentPersistUserData=n},e.prototype.setInvalidUserRecordRecoveryMode=function(n){if(null!=this.invalidUserRecoveryMode&&this.invalidUserRecoveryMode!=n)throw new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.AppImplementation,"Duplicate invocation of setInvalidUserRecordRecoveryMode.");this.invalidUserRecoveryMode=n},e.prototype.setClientApiLevel=function(t){if(null!=this._apiLevel&&this._apiLevel!=t)throw new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.AppImplementation,"Duplicate invocation of setClientApiLevel.");if(t>n.ts.mobile.sdk.core.API_LEVEL)throw new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.AppImplementation,"This SDK does not support API level "+this.apiLevel+".");this._apiLevel=t},Object.defineProperty(e.prototype,"currentSession",{get:function(){return this._currentSession},enumerable:!1,configurable:!0}),e.prototype.installPlugin=function(n,t){this.pluginManager.installPlugin(n,t)},e.prototype.initialize=function(){var n=this;return new Promise(function(t,r){if(!n.host)throw new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.AppImplementation,"Attempt to initialize SDK without host.");if(!n.connectionSettings)throw new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.AppImplementation,"Attempt to initialize SDK without connection settings.");if(!n.transportProvider)throw new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.AppImplementation,"Attempt to initialize SDK without transport provider.");n.cryptoSettings||(n.cryptoSettings=i.ClientCryptoSettings.create(1e4));n.applyConfigurationDefaultsAndLogConfiguration();n._nativeHost.initialize(n.allCollectorsSet()).then(function(){var t=null,f,r;return n._wasLocaleSet||(f=n._nativeHost.getPreferredLocale(),r=n.getFullLocale(f),n.uiAssetsDownloadMode===i.UIAssetsDownloadMode.DownloadOnInit?t=n.setLocale(r).catch(function(){return!1}):n.uiAssetsData=new i.core.UIAssetsData(n,r)),t=t||Promise.resolve(!0),Promise.all([n.pluginManager.initializePlugins(),t]).then(function(){var t=n.host.readSessionStorageKey(u);if(t){n.log(i.LogLevel.Info,function(){return"Loading existing session from session store"});try{n._currentSession=i.core.Session.fromJson(n,t);n.log(i.LogLevel.Debug,function(){return"Loaded existing session for user "+(n._currentSession.user&&n._currentSession.user.displayName)})}catch(t){n.log(i.LogLevel.Warning,function(){return"Failed to load existing session from session store. Discarding existing session "+t+"."})}}return!0})}).then(t,r)}).catch(function(n){return Promise.reject(i.impl.AuthenticationErrorImpl.ensureAuthenticationError(n))})},e.prototype.getUsersInfo=function(){var n=[];return i.core.User.iterateUsers(this,function(t){n.push(i.impl.UserInfoImpl.createWithUser(t))}),n},e.prototype.getUserInfo=function(n){var t=i.core.User.findUser(this,n);if(!t)throw new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.UserNotFound,"Attempt to call getUserInfo with a non existing user.");return i.impl.UserInfoImpl.createWithUser(t)},e.prototype.isBoundForUser=function(n){var t=i.core.User.findUser(this,n);return!(!t||!t.deviceBound)},e.prototype.getBoundUserIds=function(){var n=[];return i.core.User.iterateUsers(this,function(t){t.userId&&t.deviceBound&&n.push(t.userId)}),n},e.prototype.getKnownUserIds=function(){var n=[];return i.core.User.iterateUsers(this,function(t){t.userId&&(t.hasLoggedIn||t.deviceBound)&&n.push(t.userId)}),n},e.prototype.logout=function(){var n=this;return new Promise(function(t,r){if(n._currentSession)if(n._currentSession.canTerminate()){var u,e=n._currentSession.createLogoutRequest(),f=n._currentSession;n._currentSession=null;n.saveCurrentSession();f.invalidated?(n.log(i.LogLevel.Info,function(){return"Logging out with an invalidated session; not issuing server request."}),u=Promise.resolve(!0)):u=f.performSessionExchange(e).then(function(){return Promise.resolve(!0)});u.then(function(n){return i.core.Session.notifySessionObserversOnMainSessionLogout(f),n}).then(t,r)}else r(new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.AppImplementation,"Attempt to logout with a locked session."));else r(new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.AppImplementation,"No logged in user."))}).catch(function(n){return Promise.reject(i.impl.AuthenticationErrorImpl.ensureAuthenticationError(n))})},e.prototype.isTotpProvisionedForUser=function(n,t){var r=i.core.User.findUser(this,n),u;return r?(u=new i.core.LocalSession(this,r),i.core.totp.TotpPropertiesProcessor.createWithUserWithoutUIInteraction(r,this,u).isTotpProvisionedForGenerator(t||i.core.totp.TotpPropertiesProcessor.BACKWARD_COMPATIBILITY_DEFAULT_GENERATOR)):(this.log(i.LogLevel.Error,function(){return"Can not find user record for <"+n+">"}),!1)},e.prototype.getVersionInfo=function(){return this._versionInfo||(this._versionInfo=new i.impl.VersionInfoImpl(this.host.queryHostInfo(t.sdkhost.HostInformationKey.Platform),this.host.queryHostInfo(t.sdkhost.HostInformationKey.Version))),this._versionInfo},e.prototype.resolveUserForBind=function(n){var t=i.core.User.findUser(this,n);return t||(this.log(i.LogLevel.Debug,function(){return"bind: Creating new user "+n}),t=i.core.User.createUserWithUserId(this,n)),t},e.prototype.resumableControlFlowRequestRuntimeContext=function(n){var t=this;return{clientContext:n,sdk:this,sdkSessionManagementServices:new(function(){function n(){}return n.prototype.setCurrentSession=function(n){t._currentSession=n},Object.defineProperty(n.prototype,"lastReceivedPushToken",{get:function(){return t._lastReceivedPushToken},enumerable:!1,configurable:!0}),n.prototype.saveCurrentSession=function(){t.saveCurrentSession()},n}()),uiHandler:this.currentUiHandler}},e.prototype.internalBind=function(n,t,r,u){return this.log(i.LogLevel.Debug,function(){return"Bind for user "+(n.userId||n.idToken)}),new i.core.BindControlFlowRequest(this.resumableControlFlowRequestRuntimeContext(r),this.getOrGenerateFlowId(u)).run(n,t)},e.prototype.bind=function(n,t,i){return this.bindWithOptions(n,t,i,null)},e.prototype.bindWithOptions=function(n,t,r,u){var f=this;return new Promise(function(i,e){var o=f.resolveUserForBind(n);return f.internalBind(o,t,r,u).then(i,e)}).catch(function(n){return Promise.reject(i.impl.AuthenticationErrorImpl.ensureAuthenticationError(n))})},e.prototype.deviceSupportsCryptoBinding=function(){return"true"==this.host.queryHostInfo(t.sdkhost.HostInformationKey.PersistentKeysSupported)},e.prototype.resolveUserForAuthenticate=function(n,t){var r=i.core.User.findUserWithType(this,n,t);if(!r){if(t!==i.UserHandleType.UserId)throw t===i.UserHandleType.IdToken?new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.AppImplementation,"Attempt to authenticate with ID Token that is not provisioned on this device.",{uid_token:n}):new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.Internal,"Unsupported user handle type",{user_handle_type:t});this.log(i.LogLevel.Debug,function(){return"authenticate: Creating new user "+n});r=i.core.User.createUserWithUserId(this,n)}return r},e.prototype.internalAuthenticate=function(n,t,r,u,f){var e=this;return this.log(i.LogLevel.Debug,function(){return"Authenticate for user "+(n.userId||n.idToken)+" with policy "+t}),new i.core.AuthenticateControlFlowRequest(this.resumableControlFlowRequestRuntimeContext(u),this.getOrGenerateFlowId(f)).run(n,t,r).catch(function(t){return e.applyInvalidUserRecordRecovery(n.userHandle,i.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))})},e.prototype.authenticate=function(n,t,i,r){return this.authenticateWithOptions(n,t,i,r,null)},e.prototype.authenticateWithOptions=function(n,t,r,u,f){try{var e=this.resolveUserForAuthenticate(n,i.UserHandleType.UserId);return this.internalAuthenticate(e,t,r,u,f)}catch(n){return Promise.reject(i.impl.AuthenticationErrorImpl.ensureAuthenticationError(n))}},e.prototype.authenticateWithIdToken=function(n,t,i,r){return this.authenticateWithIdTokenWithOptions(n,t,i,r,null)},e.prototype.authenticateWithIdTokenWithOptions=function(n,t,r,u,f){try{var e=this.resolveUserForAuthenticate(n,i.UserHandleType.IdToken);return this.internalAuthenticate(e,t,r,u,f)}catch(n){return Promise.reject(i.impl.AuthenticationErrorImpl.ensureAuthenticationError(n))}},e.prototype.invokePolicy=function(n,t,i){return this.invokePolicyWithOptions(n,t,i,null)},e.prototype.invokePolicyWithOptions=function(n,t,r,u){return this.log(i.LogLevel.Debug,function(){return"Invoke policy "+n+" for current session."}),new i.core.InvokePolicyControlFlowRequest(this.resumableControlFlowRequestRuntimeContext(r),this.getOrGenerateFlowId(u)).run(n,t)},e.prototype.startTotpSessionForUser=function(n,t,r,u){var f=this;return r=r||i.core.totp.TotpPropertiesProcessor.BACKWARD_COMPATIBILITY_DEFAULT_GENERATOR,this.log(i.LogLevel.Debug,function(){return"Start TOTP session for user "+n+", generator "+r}),new Promise(function(e,o){var s,h;if(f.ensureConfigured(),f.log(i.LogLevel.Debug,function(){return"Get TOTP data for <"+n+", "+r+">"}),s=i.core.User.findUser(f,n),!s)throw f.log(i.LogLevel.Error,function(){return"Can not find user record for <"+n+">"}),new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.Internal,"Can not find user <"+n+">");h=new i.core.LocalSession(f,s);i.core.totp.TotpPropertiesProcessor.createWithUserHandle(n,f,h,u).runCodeGenerationSession(r,t,u,f.currentUiHandler).then(e,o)}).catch(function(n){return Promise.reject(i.impl.AuthenticationErrorImpl.ensureAuthenticationError(n))})},e.prototype.totpGenerationRequestForUserFromCanonicalString=function(n,t){var r,u;if(this.ensureConfigured(),this.log(i.LogLevel.Debug,function(){return"Get TOTP request for <"+n+">"}),r=i.core.User.findUser(this,n),!r)throw this.log(i.LogLevel.Error,function(){return"Can not find user record for <"+n+">"}),new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.Internal,"Can not find user <"+n+">");return u=new i.core.LocalSession(this,r),i.core.totp.TotpPropertiesProcessor.createWithUserWithoutUIInteraction(r,this,u).totpRequestFromCanonicalString(t)},e.prototype.startTotpSessionWithRequest=function(n,t){var r=this;return new Promise(function(u,f){var e,o;if(r.ensureConfigured(),r.log(i.LogLevel.Debug,function(){return"Start TOTP session for user "+n.getUserId()+", generator "+n.getGeneratorName()}),e=i.core.User.findUser(r,n.getUserId()),!e)throw r.log(i.LogLevel.Error,function(){return"Can not find user record for <"+n.getUserId()+">"}),new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.Internal,"Can not find user <"+n.getUserId()+">");o=new i.core.LocalSession(r,e);i.core.totp.TotpPropertiesProcessor.createWithUserHandle(n.getUserId(),r,o,t).runCodeGenerationSessionWithRequest(n,t,r.currentUiHandler).then(u,f)}).catch(function(n){return Promise.reject(i.impl.AuthenticationErrorImpl.ensureAuthenticationError(n))})},e.prototype.startDeviceManagementSession=function(n){var t=this;return new Promise(function(r,u){t.ensureConfigured();t.runWithCurrentSession(function(r){return t.log(i.LogLevel.Debug,function(){return"User in current session: "+r.user.displayName}),new i.core.DeviceManagementSessionProcessor(t,r,n).run()}).then(function(n){switch(n){case i.core.DeviceManagementSessionProcessorReturnReason.CurrentDeviceDeleted:var r=t._currentSession&&t._currentSession.user;return t.log(i.LogLevel.Debug,function(){return"Invalidating current session after deletion of current device."}),t._currentSession=null,t.saveCurrentSession(),r?(t.log(i.LogLevel.Debug,function(){return"Clearing data for current user ("+r.displayName+") after deletion of current device."}),t.clearDataForUser(r.userHandle)):t.log(i.LogLevel.Warning,function(){return"No current user after deletion of current device; not clearing sesison."}),!0;case i.core.DeviceManagementSessionProcessorReturnReason.FinishSession:return!0}}).then(r,u)}).catch(function(n){return Promise.reject(i.impl.AuthenticationErrorImpl.ensureAuthenticationError(n))})},e.prototype.startAuthenticationConfiguration=function(n){var t=this;return this.log(i.LogLevel.Debug,function(){return"Start authentication configuration for current session"}),new Promise(function(r,u){t.ensureConfigured();t.runWithCurrentSession(function(r){return t.log(i.LogLevel.Debug,function(){return"User in current session: "+r.user.displayName}),new i.core.AuthenticationConfigurationSessionProcessor(t,r,n).run()}).then(r,u)}).catch(function(n){return Promise.reject(i.impl.AuthenticationErrorImpl.ensureAuthenticationError(n))})},e.prototype.startAuthenticationConfigurationWithToken=function(n,t){var r=this;return this.log(i.LogLevel.Debug,function(){return"Start approval for provided session token"}),new Promise(function(u,f){r.ensureConfigured();r.runWithCurrentSession(function(u){return r.log(i.LogLevel.Debug,function(){return"User in current session: "+u.user.displayName}),new i.core.AuthenticationConfigurationSessionProcessor(r,u,t,n).run()}).then(u,f)}).catch(function(n){return Promise.reject(i.impl.AuthenticationErrorImpl.ensureAuthenticationError(n))})},e.prototype.startApprovalsSessionForCurrentSession=function(n){var t=this;return this.log(i.LogLevel.Debug,function(){return"Start approval for current session"}),new Promise(function(r,u){t.ensureConfigured();t.runWithCurrentSession(function(r){return t.log(i.LogLevel.Debug,function(){return"User in current session: "+r.user.displayName}),new i.core.ApprovalSessionProcessor(t,r,n).run()}).then(r,u)}).catch(function(n){return Promise.reject(i.impl.AuthenticationErrorImpl.ensureAuthenticationError(n))})},e.prototype.startApprovalsSessionForPushedRequest=function(n,t){return this.startApprovalsSessionForPushedRequestWithOptions(n,t,null)},e.prototype.startApprovalsSessionForPushedRequestWithOptions=function(n,t){var r=this;return this.log(i.LogLevel.Debug,function(){return"Start approval for push request"}),new Promise(function(u,f){if(r.ensureConfigured(),!n.userId())return n.ticket()?void f(new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.Internal,"Mobile approval push by ticket not yet implemented.")):void f(new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.Internal,"Unknown mobile approval push request."));r.log(i.LogLevel.Debug,function(){return"startApprovalsSessionForPushedRequest with userid "+n.userId()});var e=r.lookupBoundUser(n.userId()),o=new i.core.Session(r,e);new i.core.ApprovalSessionProcessor(r,o,t).run().then(u,f)}).catch(function(n){return Promise.reject(i.impl.AuthenticationErrorImpl.ensureAuthenticationError(n))})},e.prototype.invokeAnonymousPolicy=function(n,t,i){return this.invokeAnonymousPolicyWithOptions(n,t,i,null)},e.prototype.invokeAnonymousPolicyWithOptions=function(n,t,r,u){return this.log(i.LogLevel.Debug,function(){return"Start anonymous policy "+n}),new i.core.InvokeAnonymousPolicyControlFlowRequest(this.resumableControlFlowRequestRuntimeContext(r),this.getOrGenerateFlowId(u)).run(n,t)},e.prototype.invokeAnonymousPolicyWithInlineInvokeResponse=function(n,t){return this.log(i.LogLevel.Debug,function(){return"Start anonymous policy with inline server response"}),new i.core.InvokeAnonymousPolicyControlFlowRequest(this.resumableControlFlowRequestRuntimeContext(t),n.flow_id).run(n.inline_invoke_response)},e.prototype.cancelCurrentRunningControlFlow=function(){this.log(i.LogLevel.Debug,function(){return"Cancel current running control flow requested."});this._currentSession?this._currentSession.cancelCurrentControlFlow():this.log(i.LogLevel.Error,function(){return"No current session"})},e.prototype.ensureConfigured=function(){if(!this.currentUiHandler)throw new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.AppImplementation,"Attempt to start authentication without a registered UIHandler.");},e.prototype.getAppGlobalUIContext=function(){return this._appGlobalUiContext||(this._appGlobalUiContext=new i.impl.UIContextImpl(this)),this._appGlobalUiContext},e.prototype.userVaultExists=function(n,t){return i.UserVault.exists(this,n,t)},e.prototype.readUserVault=function(n,t,r){var u=this;return new Promise(function(f,e){i.UserVault.open(u,n,t).readData(r).then(f,e)})},e.prototype.writeUserVault=function(n,t,r,u){var f=this;return new Promise(function(e,o){i.UserVault.open(f,n,t).writeData(r,u).then(function(){return e(!0)},o)})},e.prototype.saveCurrentSession=function(){this._currentSession?this.host.writeSessionStorageKey(u,this._currentSession.toJson()):this.host.deleteSessionStorageKey(u)},e.prototype.runWithCurrentSession=function(n){var r=this,t;return this._currentSession?(t=this._currentSession,t.lock(),n(t).finally(function(){t.unlock();r.saveCurrentSession()})):Promise.reject(new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.SessionRequired,"Operation requires an active session."))},e.prototype.log=function(n,t){n<=this._logLevel&&this._nativeHost.log(n,"TransmitSDK/Tarsus",t())},e.prototype.getOrGenerateFlowId=function(n){return(null==n?void 0:n.getFlowId())||this.generateFlowId()},e.prototype.generateFlowId=function(){return this.host.generateRandomHexString(64)},e.prototype.promiseCollectionResult=function(n){var t=this;return void 0===n&&(n=null),this._nativeHost.promiseCollectionResult(n).then(function(i){return null!=n?t.addTarsusCollectedData(i,n):t.addTarsusCollectedData(i,t.enabledCollectors)})},e.prototype.getClientFeatureSet=function(){var n,r=this.host.queryHostInfo(t.sdkhost.HostInformationKey.HostProvidedFeatures);return n=r&&r.length?r.split(",").map(function(n){return parseInt(n)}):[],"true"==this.host.queryHostInfo(t.sdkhost.HostInformationKey.DeviceBiometricsFPContinuation)&&n.push(t.sdkhost.FeatureDeviceBiometricsFPContinuation),i.core.STATIC_FEATURE_SET.concat(n)},e.prototype.clearDataForUser=function(n){var t,r;try{if(this.log(i.LogLevel.Debug,function(){return"Delete data for user "+n+"."}),this._currentSession)throw new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.AppImplementation,"Attempt to call clearDataForUser with an active primary ongoing session.");if(t=i.core.User.findUser(this,n),!t)throw new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.AppImplementation,"Attempt to call clearDataForUser with a non existing user.");try{this.host.deleteKeyPair(t.deviceSigningKeyTag)}catch(n){this.log(i.LogLevel.Warning,function(){return"Can't delete device signing key."})}try{this.host.deleteKeyPair(t.deviceEncryptionKeyTag)}catch(n){this.log(i.LogLevel.Warning,function(){return"Can't delete device encryption key."})}try{i.core.LocalEnrollment.deleteEnrollmentsForUser(t,this)}catch(n){this.log(i.LogLevel.Warning,function(){return"Can't delete enrollments for user."})}r=new i.core.LocalSession(this,t);try{i.core.totp&&i.core.totp.TotpPropertiesProcessor.createWithUserWithoutUIInteraction(t,this,r).deleteAllProvisions()}catch(n){this.log(i.LogLevel.Warning,function(){return"Can't delete enrollments for user."})}i.core.User.deleteUser(t,this)}catch(t){throw this.log(i.LogLevel.Warning,function(){return"Can't delete data for user "+n+": "+t}),t;}},e.prototype.clearAllData=function(){var t=this,n;if(this._currentSession)throw new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.AppImplementation,"Attempt to call clearAllData with an active primary ongoing session.");this.log(i.LogLevel.Debug,function(){return"Delete all data: collecting users"});n=[];i.core.User.iterateUsers(this,function(t){n.push(t.userHandle)});this.log(i.LogLevel.Debug,function(){return"Delete all data: deleting users"});n.forEach(function(n){try{t.clearDataForUser(n)}catch(r){t.log(i.LogLevel.Warning,function(){return"Error when deleting user "+n+": "+r})}})},e.prototype.generateDebugPinForControlFlow=function(n){var t=this;return this.log(i.LogLevel.Debug,function(){return"generateDebugPinForMainSession: Starting"}),new Promise(function(r,u){t.ensureConfigured();var f=i.core.ControlFlowProcessor.findByClientContext(n);if(!f)throw new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.AppImplementation,"Attempt to start debugging for an unknown control flow.");f.generateDebugPin().then(r,u)})},e.prototype.lookupBoundUser=function(n,t){var r=i.core.User.findUserWithType(this,n,t);if(!r)throw new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.AppImplementation,"Attempt to authenticate with an unknown user on this device.",{user:n});if(!r.deviceBound)throw new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.AppImplementation,"Attempt to authenticate with an unbound user on this device.",{user:n});return r},e.prototype.addTarsusCollectedData=function(n,t){var r=this;return new Promise(function(u,e){var s=[],o=[];Object.keys(i.core.collectors.TarsusCollectors).forEach(function(n){var u=new i.core.collectors.TarsusCollectors[n].createCollector(t);u.isEnabled()&&(o.push(n),s.push(u.provide(r)))});Promise.all(s.map(function(n){return n.catch(function(n){return new Error(n)})})).then(function(t){for(var e=n.toJson(),h=function(n){t[n]instanceof Error?r.log(i.LogLevel.Error,function(){return"caught collection error "+t[n]}):(r.log(i.LogLevel.Debug,function(){return"Tarsus collected from: "+o[n]+" "+JSON.stringify(t[n])}),e.content[o[n]]=r.mergeCollectedData(t[n],e.content[o[n]]))},s=0;s<t.length;s++)h(s);u(new f(e))}).catch(function(n){e(n)})})},e.prototype.mergeCollectedData=function(n,t){var r={};for(var i in n)r[i]=n[i];for(i in t)r[i]=t[i];return r},e.prototype.addMandatoryCollectorsIfNeeded=function(){var n=this;this.mandatoryCollectors.forEach(function(t){n.enabledCollectors.indexOf(t)<0&&(n.enabledCollectors.push(t),n.log(i.LogLevel.Warning,function(){return i.CollectorType[t]+" collector is mandatory, and will remain enabled."}))})},e.prototype.addMandatoryCollectorsForAnonymousIfNeeded=function(){var n=this;this.mandatoryCollectorsForAnonymous.forEach(function(t){null!==n._enabledCollectorsAnonymous&&n._enabledCollectorsAnonymous.indexOf(t)<0&&(n._enabledCollectorsAnonymous.push(t),n.log(i.LogLevel.Warning,function(){return i.CollectorType[t]+" collector is mandatory for anonymous, and will remain enabled."}))})},e.prototype.allCollectorsSet=function(){var n=[];return this.enabledCollectors.forEach(function(t){-1==n.indexOf(t)&&n.push(t)}),this.enabledCollectorsAnonymous.forEach(function(t){-1==n.indexOf(t)&&n.push(t)}),n},e.prototype.loadUiAssetsFromServer=function(n){var t=this,r,u;try{return this.log(i.LogLevel.Debug,function(){return"Start ClientStrings request with locale: "+n}),r=new i.core.PublicNetworkRequest(this),u=r.createClientStringsRequest(n),r.performRequest(u).then(function(r){if(t.uiAssetsData=new i.core.UIAssetsData(t,n),r){var u=r&&r.data;if(u&&u.values)return t.uiAssetsData.setServerClientStrings(new i.core.ClientStrings(u.values)),!0;throw new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.Internal,r.error_message);}return!1})}catch(n){return this.log(i.LogLevel.Error,function(){return"ClientStrings general error: "+n.getMessage()}),Promise.reject(n)}},e.prototype.getFullLocale=function(n){return n&&n.indexOf("-")>=0&&(i.util.LANGUAGES[n]=n),i.util.LANGUAGES[n]||n},e.prototype.applyConfigurationDefaultsAndLogConfiguration=function(){var t=this;null==this._apiLevel&&(this._apiLevel=n.ts.mobile.sdk.core.API_LEVEL);null==this.invalidUserRecoveryMode&&(this.invalidUserRecoveryMode=this.apiLevel>=9?i.InvalidUserRecordRecoveryMode.RecoverDeviceAndBindingOnAuthenticate:i.InvalidUserRecordRecoveryMode.Disable);this.log(i.LogLevel.Debug,function(){return"Using Client API Level "+t.apiLevel});this.log(i.LogLevel.Debug,function(){return"Using invalid user recovery mode "+i.InvalidUserRecordRecoveryMode[t.invalidUserRecoveryMode]})},e.prototype.applyInvalidUserRecordRecovery=function(n,t){switch(this.invalidUserRecoveryMode){case i.InvalidUserRecordRecoveryMode.RecoverDeviceAndBindingOnAuthenticate:t.getErrorCode()!=i.AuthenticationErrorCode.DeviceNotFound&&t.getErrorCode()!=i.AuthenticationErrorCode.InvalidDeviceBinding||(this.log(i.LogLevel.Error,function(){return"Resetting user record due to error "+t}),this.clearDataForUser(n),t instanceof i.impl.AuthenticationErrorImpl||(t=new i.impl.AuthenticationErrorImpl(t.getErrorCode(),t.getMessage(),t.getData())),t.setPublicProperty(i.AuthenticationErrorProperty.UserRecordDeleted,!0))}return Promise.reject(t)},e.prototype.suspendControlFlowToDefaultSuspensionContext=function(n){if(!(n instanceof i.impl.PolicyActionImpl))throw this.log(i.LogLevel.Error,function(){return"Attempt to request continuation for an unknown PolicyAction implementation"}),new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.Internal,"Cannot prepare SDK for continuation in this context.");if(!(n.controlFlow&&n.controlFlow.requestContext&&n.controlFlow.requestContext instanceof i.core.ResumableControlFlowRequest))throw this.log(i.LogLevel.Error,function(){return"Attempt to request continuation for a PolicyAction implementation without a control flow request context"}),new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.Internal,"Cannot prepare SDK for continuation in this context.");this.log(i.LogLevel.Debug,function(){return"Preparing for continuation of "+n.controlFlow});var u=n.controlFlow.requestContext.topmost.createContinuation(),t=new i.core.SerializationContext;t.writeObject("continuation",u);this.log(i.LogLevel.Debug,function(){return"Storing continuation"});this.host.writeStorageKey(r,t.serializedContent)},e.prototype.resumeSuspendedControlFlow=function(n,t,u){var f=this;return new Promise(function(n,e){var s,o;f.log(i.LogLevel.Debug,function(){return"resumeSuspendedControlFlow Fetching continuation and deleting it..."});s=f.host.readStorageKey(r);f.host.deleteStorageKey(r);f.log(i.LogLevel.Debug,function(){return"Deserializing continuation"});o=new i.core.SerializationContext(s).readNonNullObject("continuation");f.log(i.LogLevel.Debug,function(){return"Resuming process based on continuation"});o.createResumableProcess(f.resumableControlFlowRequestRuntimeContext(u)).resume(o,t).then(n,e)}).catch(function(n){throw i.impl.AuthenticationErrorImpl.ensureAuthenticationError(n);})},e.prototype.resetCurrentSession=function(){var n=this;return new Promise(function(t){if(n.log(i.LogLevel.Debug,function(){return"resetCurrentSession Invoked"}),n.log(i.LogLevel.Debug,function(){return"resetCurrentSession will discard session"}),n._currentSession&&!n._currentSession.canTerminate())throw n.log(i.LogLevel.Error,function(){return"resetCurrentSession Attempt to reset current session with a locked session"}),new i.impl.AuthenticationErrorImpl(i.AuthenticationErrorCode.AppImplementation,"Attempt to resetCurrentSession with a locked session.");n._currentSession=null;n.saveCurrentSession();n.log(i.LogLevel.Debug,function(){return"resetCurrentSession will discard continuation"});n.host.deleteStorageKey(r);t(!0)})},e.__tarsusInterfaceName="TransmitSDKXm",e}()),f;i.TransmitSDKXmImpl=e;f=function(){function n(n){this.theResult=n}return n.prototype.toJson=function(){return this.theResult},n}();i.CollectionResultImpl=f;i.createSdk=function(){return new e}}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var i=function(){function i(i){this._backgroundColor=i.backgroundColor&&new t.TSColorImpl(n.core.Protocol.unwrap(i.backgroundColor));this._tintColor=i.tintColor&&new t.TSColorImpl(n.core.Protocol.unwrap(i.tintColor));this._lineColor=i.lineColor&&new t.TSColorImpl(n.core.Protocol.unwrap(i.lineColor));this._iconColor=i.iconColor&&new t.TSColorImpl(n.core.Protocol.unwrap(i.iconColor));this._imageUrl=i.imageUrl&&n.core.Protocol.unwrap(i.imageUrl);this._fontName=i.fontName&&n.core.Protocol.unwrap(i.fontName);this._fontSize=i.fontSize&&n.core.Protocol.unwrap(i.fontSize);this._fontBold=i.fontBold&&n.core.Protocol.unwrap(i.fontBold);this._maskInput=i.maskInput&&n.core.Protocol.unwrap(i.maskInput);this._rawJson=JSON.stringify({backgroundColor:this._backgroundColor&&this._backgroundColor.getHexValue(),tintColor:this._tintColor&&this._tintColor.getHexValue(),lineColor:this._lineColor&&this._lineColor.getHexValue(),iconColor:this._iconColor&&this._iconColor.getHexValue(),imageUrl:this._imageUrl,fontName:this._fontName,fontSize:this._fontSize,fontBold:this._fontBold,maskInput:this._maskInput})}return i.prototype.getBackgroundColor=function(){return this._backgroundColor||null},i.prototype.getTintColor=function(){return this._tintColor||null},i.prototype.getLineColor=function(){return this._lineColor||null},i.prototype.getIconColor=function(){return this._iconColor||null},i.prototype.getImageUrl=function(){return this._imageUrl||null},i.prototype.getFontName=function(){return this._fontName||null},i.prototype.getFontSize=function(){return this._fontSize||0},i.prototype.getFontBold=function(){return this._fontBold||!1},i.prototype.getMaskInput=function(){return this._maskInput||!1},i.prototype.getRawJson=function(){return this._rawJson},i.emptyStyle=function(){return this._emptyStyle||(this._emptyStyle=new i({})),this._emptyStyle},i}();t.UIStyleImpl=i}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var i=function(){function t(){}return t.prototype.getUserChoice=function(){return this._userChoice},t.prototype.setUserChoice=function(n){this._userChoice=n},t.create=function(t){return n.ts.mobile.sdk.impl.UnregistrationInputImpl.create(t)},t.__tarsusInterfaceName="UnregistrationInput",t}();t.UnregistrationInput=i}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.create=function(n){var i=new t;return i.setUserChoice(n),i},t}(n.UnregistrationInput);t.UnregistrationInputImpl=r}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){var t=function(){function n(){}return n.prototype.getUserHandle=function(){return this._user.userHandle},n.prototype.getUserHandleType=function(){return this._user.userHandleType},n.prototype.getDisplayName=function(){return this._user.displayName},n.prototype.getDeviceBound=function(){return this._user.deviceBound},n.prototype.getHasLoggedIn=function(){return this._user.hasLoggedIn},n.createWithUser=function(t){var i=new n;return i._user=t,i},n}();n.UserInfoImpl=t}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){var t,i,r;t=n.sdk||(n.sdk={});i=function(){function n(){}return n.prototype.getValidCancelOptions=function(){return null},n.prototype.getValidErrorRecoveryOptions=function(){return[t.AuthenticationErrorRecovery.ChangeAuthenticator,t.AuthenticationErrorRecovery.SelectAuthenticator,t.AuthenticationErrorRecovery.Fail,t.AuthenticationErrorRecovery.RetryAuthenticator]},n}();r=function(){function n(n,t){this._sdk=n;this._vault=t}return n.keyPathForUserVaultNamed=function(n){return new t.core.TarsusKeyPath("user_vaults",n)},n.isValidKeyPathForUserVault=function(n){return"user_vaults"==n.component(0)},n.open=function(r,u,f){var e=t.core.User.findUser(r,u);if(!e)throw r.log(t.LogLevel.Error,function(){return"Can not find user record for <"+u+">"}),new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.InvalidInput,"Can not find user <"+u+">");return new n(r,t.core.vault.Vault.getVaultForUserWithId(e,this.keyPathForUserVaultNamed(f),new i,r,r.currentUiHandler))},n.exists=function(n,i,r){var u=t.core.User.findUser(n,i);return u?t.core.vault.Vault.vaultExists(u,this.keyPathForUserVaultNamed(r),n):(n.log(t.LogLevel.Error,function(){return"Can not find user record for <"+i+">"}),!1)},n.prototype.readData=function(n){var i=this,r=t.impl.PolicyActionImpl.createPseudoAction(this._sdk,"user_vault_read");return this._vault.unlock(r,n,!0).then(function(n){if(n instanceof t.core.vault.VaultUnlockResultSuccessOrFailed&&n.successful){var r=i._vault.readVaultKey(t.core.vault.Vault.noIntegrityElementKey),u=t.util.hexToBase64(r);return i._vault.lock(),u}throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Invalid response from vault unlock operation",{result:JSON.stringify(n)});})},n.prototype.writeData=function(n,i){var r=this,u=t.impl.PolicyActionImpl.createPseudoAction(this._sdk,"user_vault_write");return this._vault.unlock(u,i,!0).then(function(i){if(i instanceof t.core.vault.VaultUnlockResultSuccessOrFailed&&i.successful){var u=t.util.base64ToHex(n);return r._vault.writeVaultKey(t.core.vault.Vault.noIntegrityElementKey,u).then(function(){return r._vault.lock()})}throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Invalid response from vault unlock operation");})},n}();t.UserVault=r}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var i=function(){function t(n,t){this._sdkVersion=t;this._platformName=n}return t.prototype.getSdkVersion=function(){return this._sdkVersion},t.prototype.getTarsusVersion=function(){return n.core.TARSUS_VERSION},t.prototype.getPlatformName=function(){return this._platformName},t.prototype.getApiLevel=function(){return n.core.API_LEVEL},t}();t.VersionInfoImpl=i}(n.impl||(n.impl={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){function v(n){return parseInt(n)===n}function b(n){if(!v(n.length))return!1;for(var t=0;t<n.length;t++)if(!v(n[t])||n[t]<0||n[t]>255)return!1;return!0}function t(n,t){if(n.buffer&&ArrayBuffer.isView(n)&&"Uint8Array"===n.name)return t&&(n=n.slice?n.slice():Array.prototype.slice.call(n)),n;if(Array.isArray(n)){if(!b(n))throw new Error("Array contains invalid value: "+n);return new Uint8Array(n)}if(v(n.length)&&b(n))return new Uint8Array(n);throw new Error("unsupported array-like object");}function i(n){return new Uint8Array(n)}function r(n,t,i,r,u){null==r&&null==u||(n=n.slice?n.slice(r,u):Array.prototype.slice.call(n,r,u));t.set(n,i)}function p(n){for(var i=[],t=0;t<n.length;t+=4)i.push(n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3]);return i}var y,k={toBytes:function(n){var r=[],i=0,u;for(n=encodeURI(n);i<n.length;)u=n.charCodeAt(i++),37===u?(r.push(parseInt(n.substr(i,2),16)),i+=2):r.push(u);return t(r)},fromBytes:function(n){for(var t,i=0,r="";i<n.length;){if(t=n[i++],t>127)if(t>191&&t<224){if(i>=n.length)throw new Error("UTF-8 decode: incomplete 2-byte sequence");t=(31&t)<<6|63&n[i++]}else if(t>223&&t<240){if(i+1>=n.length)throw new Error("UTF-8 decode: incomplete 3-byte sequence");t=(15&t)<<12|(63&n[i++])<<6|63&n[i++]}else{if(!(t>239&&t<248))throw new Error("UTF-8 decode: unknown multibyte start 0x"+t.toString(16)+" at index "+(i-1));if(i+2>=n.length)throw new Error("UTF-8 decode: incomplete 4-byte sequence");t=(7&t)<<18|(63&n[i++])<<12|(63&n[i++])<<6|63&n[i++]}if(t<=65535)r+=String.fromCharCode(t);else{if(!(t<=1114111))throw new Error("UTF-8 decode: code point 0x"+t.toString(16)+" exceeds UTF-16 reach");t-=65536;r+=String.fromCharCode(t>>10|55296);r+=String.fromCharCode(1023&t|56320)}}return r}},d=(y="0123456789abcdef",{toBytes:function(n){for(var i=[],t=0;t<n.length;t+=2)i.push(parseInt(n.substr(t,2),16));return i},fromBytes:function(n){for(var r,i=[],t=0;t<n.length;t++)r=n[t],i.push(y[(240&r)>>4]+y[15&r]);return i.join("")}}),g={16:10,24:12,32:14},nt=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],u=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],h=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],tt=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],it=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],rt=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],ut=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],ft=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],et=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],ot=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],st=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],ht=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],ct=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],lt=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],at=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925],f=function n(i){if(!(this instanceof n))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:t(i,!0)});this._prepare()},c,l,a,o,e,s,w;f.prototype._prepare=function(){var o=g[this.key.length],n,t,c,s,f,e;if(null==o)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");for(this._Ke=[],this._Kd=[],n=0;n<=o;n++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var h,l=4*(o+1),r=this.key.length/4,i=p(this.key);for(n=0;n<r;n++)h=n>>2,this._Ke[h][n%4]=i[n],this._Kd[o-h][n%4]=i[n];for(c=0,s=r;s<l;){if(t=i[r-1],i[0]^=u[t>>16&255]<<24^u[t>>8&255]<<16^u[255&t]<<8^u[t>>24&255]^nt[c]<<24,c+=1,8!=r)for(n=1;n<r;n++)i[n]^=i[n-1];else{for(n=1;n<r/2;n++)i[n]^=i[n-1];for(t=i[r/2-1],i[r/2]^=u[255&t]^u[t>>8&255]<<8^u[t>>16&255]<<16^u[t>>24&255]<<24,n=r/2+1;n<r;n++)i[n]^=i[n-1]}for(n=0;n<r&&s<l;)f=s>>2,e=s%4,this._Ke[f][e]=i[n],this._Kd[o-f][e]=i[n++],s++}for(f=1;f<o;f++)for(e=0;e<4;e++)t=this._Kd[f][e],this._Kd[f][e]=ht[t>>24&255]^ct[t>>16&255]^lt[t>>8&255]^at[255&t]};f.prototype.encrypt=function(n){var o,e,f;if(16!=n.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var s=this._Ke.length-1,h=[0,0,0,0],r=p(n),t=0;t<4;t++)r[t]^=this._Ke[0][t];for(o=1;o<s;o++){for(t=0;t<4;t++)h[t]=tt[r[t]>>24&255]^it[r[(t+1)%4]>>16&255]^rt[r[(t+2)%4]>>8&255]^ut[255&r[(t+3)%4]]^this._Ke[o][t];r=h.slice()}for(f=i(16),t=0;t<4;t++)e=this._Ke[s][t],f[4*t]=255&(u[r[t]>>24&255]^e>>24),f[4*t+1]=255&(u[r[(t+1)%4]>>16&255]^e>>16),f[4*t+2]=255&(u[r[(t+2)%4]>>8&255]^e>>8),f[4*t+3]=255&(u[255&r[(t+3)%4]]^e);return f};f.prototype.decrypt=function(n){var e,f,u;if(16!=n.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var o=this._Kd.length-1,s=[0,0,0,0],r=p(n),t=0;t<4;t++)r[t]^=this._Kd[0][t];for(e=1;e<o;e++){for(t=0;t<4;t++)s[t]=ft[r[t]>>24&255]^et[r[(t+3)%4]>>16&255]^ot[r[(t+2)%4]>>8&255]^st[255&r[(t+1)%4]]^this._Kd[e][t];r=s.slice()}for(u=i(16),t=0;t<4;t++)f=this._Kd[o][t],u[4*t]=255&(h[r[t]>>24&255]^f>>24),u[4*t+1]=255&(h[r[(t+3)%4]>>16&255]^f>>16),u[4*t+2]=255&(h[r[(t+2)%4]>>8&255]^f>>8),u[4*t+3]=255&(h[255&r[(t+1)%4]]^f);return u};c=function n(t){if(!(this instanceof n))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block";this.name="ecb";this._aes=new f(t)};c.prototype.encrypt=function(n){if((n=t(n)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=i(n.length),f=i(16),u=0;u<n.length;u+=16)r(n,f,0,u,u+16),r(f=this._aes.encrypt(f),e,u);return e};c.prototype.decrypt=function(n){if((n=t(n)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=i(n.length),f=i(16),u=0;u<n.length;u+=16)r(n,f,0,u,u+16),r(f=this._aes.decrypt(f),e,u);return e};l=function n(r,u){if(!(this instanceof n))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",u){if(16!=u.length)throw new Error("invalid initialation vector size (must be 16 bytes)");}else u=i(16);this._lastCipherblock=t(u,!0);this._aes=new f(r)};l.prototype.encrypt=function(n){var f;if((n=t(n)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var o=i(n.length),e=i(16),u=0;u<n.length;u+=16){for(r(n,e,0,u,u+16),f=0;f<16;f++)e[f]^=this._lastCipherblock[f];this._lastCipherblock=this._aes.encrypt(e);r(this._lastCipherblock,o,u)}return o};l.prototype.decrypt=function(n){var f;if((n=t(n)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var o=i(n.length),e=i(16),u=0;u<n.length;u+=16){for(r(n,e,0,u,u+16),e=this._aes.decrypt(e),f=0;f<16;f++)o[u+f]=e[f]^this._lastCipherblock[f];r(n,this._lastCipherblock,0,u,u+16)}return o};a=function n(r,u,e){if(!(this instanceof n))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",u){if(16!=u.length)throw new Error("invalid initialation vector size (must be 16 size)");}else u=i(16);e||(e=1);this.segmentSize=e;this._shiftRegister=t(u,!0);this._aes=new f(r)};a.prototype.encrypt=function(n){var e,u,i,f;if(n.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(u=t(n,!0),i=0;i<u.length;i+=this.segmentSize){for(e=this._aes.encrypt(this._shiftRegister),f=0;f<this.segmentSize;f++)u[i+f]^=e[f];r(this._shiftRegister,this._shiftRegister,0,this.segmentSize);r(u,this._shiftRegister,16-this.segmentSize,i,i+this.segmentSize)}return u};a.prototype.decrypt=function(n){var e,f,i,u;if(n.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(f=t(n,!0),i=0;i<f.length;i+=this.segmentSize){for(e=this._aes.encrypt(this._shiftRegister),u=0;u<this.segmentSize;u++)f[i+u]^=e[u];r(this._shiftRegister,this._shiftRegister,0,this.segmentSize);r(n,this._shiftRegister,16-this.segmentSize,i,i+this.segmentSize)}return f};o=function n(r,u){if(!(this instanceof n))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",u){if(16!=u.length)throw new Error("invalid initialation vector size (must be 16 bytes)");}else u=i(16);this._lastPrecipher=t(u,!0);this._lastPrecipherIndex=16;this._aes=new f(r)};o.prototype.encrypt=function(n){for(var i=t(n,!0),r=0;r<i.length;r++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),i[r]^=this._lastPrecipher[this._lastPrecipherIndex++];return i};o.prototype.decrypt=o.prototype.encrypt;e=function n(t){if(!(this instanceof n))throw Error("Counter must be instanitated with `new`");0===t||t||(t=1);"number"==typeof t?(this._counter=i(16),this.setValue(t)):this.setBytes(t)};e.prototype.setValue=function(n){if("number"!=typeof n||parseInt(n)!=n)throw new Error("invalid counter value (must be an integer)");if(n>Number.MAX_SAFE_INTEGER)throw new Error("integer value out of safe range");for(var t=15;t>=0;--t)this._counter[t]=n%256,n=parseInt(n/256)};e.prototype.setBytes=function(n){if(16!=(n=t(n,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=n};e.prototype.increment=function(){for(var n=15;n>=0;n--){if(255!==this._counter[n]){this._counter[n]++;break}this._counter[n]=0}};s=function n(t,i){if(!(this instanceof n))throw Error("AES must be instanitated with `new`");this.description="Counter";this.name="ctr";i instanceof e||(i=new e(i));this._counter=i;this._remainingCounter=null;this._remainingCounterIndex=16;this._aes=new f(t)};s.prototype.encrypt=function(n){for(var i=t(n,!0),r=0;r<i.length;r++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),i[r]^=this._remainingCounter[this._remainingCounterIndex++];return i};s.prototype.decrypt=s.prototype.encrypt;w={AES:f,Counter:e,ModeOfOperation:{ecb:c,cbc:l,cfb:a,ofb:o,ctr:s},utils:{hex:d,utf8:k},padding:{pkcs7:{pad:function(n){var e=16-(n=t(n,!0)).length%16,u=i(n.length+e),f;for(r(n,u),f=n.length;f<u.length;f++)u[f]=e;return u},strip:function(n){var u,f,e,o;if((n=t(n,!0)).length<16)throw new Error("PKCS#7 invalid length");if(u=n[n.length-1],u>16)throw new Error("PKCS#7 padding byte out of range");for(f=n.length-u,e=0;e<u;e++)if(n[f+e]!==u)throw new Error("PKCS#7 invalid padding byte");return o=i(f),r(n,o,0,0,f),o}}},_arrayTest:{coerceArray:t,createArray:i,copyArray:r}};n.aesjs&&(w._aesjs=n.aesjs);n.aesjs=w}("undefined"!=typeof window?window:r),function(n){("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this).elliptic=function n(t,i,r){function u(f,o){var h,s;if(!i[f]){if(!t[f]){if(!o&&ft)return ft();if(e)return e(f,!0);h=new Error("Cannot find module '"+f+"'");throw h.code="MODULE_NOT_FOUND",h;}s=i[f]={exports:{}};t[f][0].call(s.exports,function(n){var i=t[f][1][n];return u(i||n)},s,s.exports,n,t,i,r)}return i[f].exports}for(var e=ft,f=0;f<r.length;f++)u(r[f]);return u}({1:[function(n,t,i){var r=i;r.version=n("../package.json").version;r.utils=n("./elliptic/utils");r.rand=n("brorand");r.curve=n("./elliptic/curve");r.curves=n("./elliptic/curves");r.ec=n("./elliptic/ec");r.eddsa=n("./elliptic/eddsa")},{"../package.json":30,"./elliptic/curve":4,"./elliptic/curves":7,"./elliptic/ec":8,"./elliptic/eddsa":11,"./elliptic/utils":15,brorand:17}],2:[function(n,t){function r(n,t){this.type=n;this.p=new u(t.p,16);this.red=t.prime?u.red(t.prime):u.mont(this.p);this.zero=new u(0).toRed(this.red);this.one=new u(1).toRed(this.red);this.two=new u(2).toRed(this.red);this.n=t.n&&new u(t.n,16);this.g=t.g&&this.pointFromJSON(t.g,t.gRed);this._wnafT1=new Array(4);this._wnafT2=new Array(4);this._wnafT3=new Array(4);this._wnafT4=new Array(4);var i=this.n&&this.p.div(this.n);!i||i.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function i(n,t){this.curve=n;this.type=t;this.precomputed=null}var u=n("bn.js"),f=n("../../elliptic").utils,e=f.getNAF,s=f.getJSF,o=f.assert;t.exports=r;r.prototype.point=function(){throw new Error("Not implemented");};r.prototype.validate=function(){throw new Error("Not implemented");};r.prototype._fixedNafMul=function(n,t){var s,i,u;o(n.precomputed);var r=n._getDoubles(),l=e(t,1),a=(1<<r.step+1)-(r.step%2==0?2:1);for(a/=3,s=[],i=0;i<l.length;i+=r.step){for(u=0,t=i+r.step-1;t>=i;t--)u=(u<<1)+l[t];s.push(u)}for(var c=this.jpoint(null,null,null),f=this.jpoint(null,null,null),h=a;h>0;h--){for(i=0;i<s.length;i++)(u=s[i])===h?f=f.mixedAdd(r.points[i]):u===-h&&(f=f.mixedAdd(r.points[i].neg()));c=c.add(f)}return c.toP()};r.prototype._wnafMul=function(n,t){var s=4,c=n._getNAFPoints(s),u;s=c.wnd;for(var f=c.points,h=e(t,s),i=this.jpoint(null,null,null),r=h.length-1;r>=0;r--){for(t=0;r>=0&&0===h[r];r--)t++;if(r>=0&&t++,i=i.dblp(t),r<0)break;u=h[r];o(0!==u);i="affine"===n.type?u>0?i.mixedAdd(f[u-1>>1]):i.mixedAdd(f[-u-1>>1].neg()):u>0?i.add(f[u-1>>1]):i.add(f[-u-1>>1].neg())}return"affine"===n.type?i.toP():i};r.prototype._wnafMulAdd=function(n,t,i,r,u){for(var tt,o,c,v,rt,d,h,ut,ft,y,g,nt,it,p,w,b=this._wnafT1,k=this._wnafT2,a=this._wnafT3,l=0,f=0;f<r;f++)tt=(p=t[f])._getNAFPoints(n),b[f]=tt.wnd,k[f]=tt.points;for(f=r-1;f>=1;f-=2)if(o=f-1,c=f,1===b[o]&&1===b[c])for(v=[t[o],null,null,t[c]],0===t[o].y.cmp(t[c].y)?(v[1]=t[o].add(t[c]),v[2]=t[o].toJ().mixedAdd(t[c].neg())):0===t[o].y.cmp(t[c].y.redNeg())?(v[1]=t[o].toJ().mixedAdd(t[c]),v[2]=t[o].add(t[c].neg())):(v[1]=t[o].toJ().mixedAdd(t[c]),v[2]=t[o].toJ().mixedAdd(t[c].neg())),rt=[-3,-1,-5,-7,0,7,5,1,3],d=s(i[o],i[c]),l=Math.max(d[0].length,l),a[o]=new Array(l),a[c]=new Array(l),h=0;h<l;h++)ut=0|d[0][h],ft=0|d[1][h],a[o][h]=rt[3*(ut+1)+(ft+1)],a[c][h]=0,k[o]=v;else a[o]=e(i[o],b[o]),a[c]=e(i[c],b[c]),l=Math.max(a[o].length,l),l=Math.max(a[c].length,l);for(y=this.jpoint(null,null,null),g=this._wnafT4,f=l;f>=0;f--){for(nt=0;f>=0;){for(it=!0,h=0;h<r;h++)g[h]=0|a[h][f],0!==g[h]&&(it=!1);if(!it)break;nt++;f--}if(f>=0&&nt++,y=y.dblp(nt),f<0)break;for(h=0;h<r;h++)w=g[h],0!==w&&(w>0?p=k[h][w-1>>1]:w<0&&(p=k[h][-w-1>>1].neg()),y="affine"===p.type?y.mixedAdd(p):y.add(p))}for(f=0;f<r;f++)k[f]=null;return u?y:y.toP()};r.BasePoint=i;i.prototype.eq=function(){throw new Error("Not implemented");};i.prototype.validate=function(){return this.curve.validate(this)};r.prototype.decodePoint=function(n,t){n=f.toArray(n,t);var i=this.p.byteLength();if((4===n[0]||6===n[0]||7===n[0])&&n.length-1==2*i)return 6===n[0]?o(n[n.length-1]%2==0):7===n[0]&&o(n[n.length-1]%2==1),this.point(n.slice(1,1+i),n.slice(1+i,1+2*i));if((2===n[0]||3===n[0])&&n.length-1===i)return this.pointFromX(n.slice(1,1+i),3===n[0]);throw new Error("Unknown point format");};i.prototype.encodeCompressed=function(n){return this.encode(n,!0)};i.prototype._encode=function(n){var t=this.curve.p.byteLength(),i=this.getX().toArray("be",t);return n?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",t))};i.prototype.encode=function(n,t){return f.encode(this._encode(t),n)};i.prototype.precompute=function(n){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,n),t.beta=this._getBeta(),this.precomputed=t,this};i.prototype._hasDoubles=function(n){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((n.bitLength()+1)/t.step)};i.prototype._getDoubles=function(n,t){var r;if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var u=[this],i=this,f=0;f<t;f+=n){for(r=0;r<n;r++)i=i.dbl();u.push(i)}return{step:n,points:u}};i.prototype._getNAFPoints=function(n){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var i=[this],r=(1<<n)-1,u=1===r?null:this.dbl(),t=1;t<r;t++)i[t]=i[t-1].add(u);return{wnd:n,points:i}};i.prototype._getBeta=function(){return null};i.prototype.dblp=function(n){for(var t=this,i=0;i<n;i++)t=t.dbl();return t}},{"../../elliptic":1,"bn.js":16}],3:[function(n,t){function r(n){this.twisted=1!=(0|n.a);this.mOneA=this.twisted&&-1==(0|n.a);this.extended=this.mOneA;f.call(this,"edwards",n);this.a=new u(n.a,16).umod(this.red.m);this.a=this.a.toRed(this.red);this.c=new u(n.c,16).toRed(this.red);this.c2=this.c.redSqr();this.d=new u(n.d,16).toRed(this.red);this.dd=this.d.redAdd(this.d);h(!this.twisted||0===this.c.fromRed().cmpn(1));this.oneC=1==(0|n.c)}function i(n,t,i,r,e){f.BasePoint.call(this,n,"projective");null===t&&null===i&&null===r?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new u(t,16),this.y=new u(i,16),this.z=r?new u(r,16):this.curve.one,this.t=e&&new u(e,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}var o=n("../curve"),s=n("../../elliptic"),u=n("bn.js"),e=n("inherits"),f=o.base,h=s.utils.assert;e(r,f);t.exports=r;r.prototype._mulA=function(n){return this.mOneA?n.redNeg():this.a.redMul(n)};r.prototype._mulC=function(n){return this.oneC?n:this.c.redMul(n)};r.prototype.jpoint=function(n,t,i,r){return this.point(n,t,i,r)};r.prototype.pointFromX=function(n,t){var r;(n=new u(n,16)).red||(n=n.toRed(this.red));var f=n.redSqr(),o=this.c2.redSub(this.a.redMul(f)),s=this.one.redSub(this.c2.redMul(this.d).redMul(f)),e=o.redMul(s.redInvm()),i=e.redSqrt();if(0!==i.redSqr().redSub(e).cmp(this.zero))throw new Error("invalid point");return r=i.fromRed().isOdd(),(t&&!r||!t&&r)&&(i=i.redNeg()),this.point(n,i)};r.prototype.pointFromY=function(n,t){var i;(n=new u(n,16)).red||(n=n.toRed(this.red));var f=n.redSqr(),e=f.redSub(this.one),o=f.redMul(this.d).redAdd(this.one),r=e.redMul(o.redInvm());if(0===r.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,n)}if(i=r.redSqrt(),0!==i.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");return i.isOdd()!==t&&(i=i.redNeg()),this.point(i,n)};r.prototype.validate=function(n){if(n.isInfinity())return!0;n.normalize();var t=n.x.redSqr(),i=n.y.redSqr(),r=t.redMul(this.a).redAdd(i),u=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(i)));return 0===r.cmp(u)};e(i,f.BasePoint);r.prototype.pointFromJSON=function(n){return i.fromJSON(this,n)};r.prototype.point=function(n,t,r,u){return new i(this,n,t,r,u)};i.fromJSON=function(n,t){return new i(n,t[0],t[1],t[2])};i.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};i.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&0===this.y.cmp(this.z)};i.prototype._extDbl=function(){var r=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var u=this.curve._mulA(r),f=this.x.redAdd(this.y).redSqr().redISub(r).redISub(t),i=u.redAdd(t),e=i.redSub(n),o=u.redSub(t),s=f.redMul(e),h=i.redMul(o),c=f.redMul(o),l=e.redMul(i);return this.curve.point(s,h,l,c)};i.prototype._projDbl=function(){var e,o,s,h=this.x.redAdd(this.y).redSqr(),f=this.x.redSqr(),i=this.y.redSqr(),n,r,u,t;return this.curve.twisted?(n=(t=this.curve._mulA(f)).redAdd(i),this.zOne?(e=h.redSub(f).redSub(i).redMul(n.redSub(this.curve.two)),o=n.redMul(t.redSub(i)),s=n.redSqr().redSub(n).redSub(n)):(r=this.z.redSqr(),u=n.redSub(r).redISub(r),e=h.redSub(f).redISub(i).redMul(u),o=n.redMul(t.redSub(i)),s=n.redMul(u))):(t=f.redAdd(i),r=this.curve._mulC(this.c.redMul(this.z)).redSqr(),u=t.redSub(r).redSub(r),e=this.curve._mulC(h.redISub(t)).redMul(u),o=this.curve._mulC(t).redMul(f.redISub(i)),s=t.redMul(u)),this.curve.point(e,o,s)};i.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};i.prototype._extAdd=function(n){var t=this.y.redSub(this.x).redMul(n.y.redSub(n.x)),i=this.y.redAdd(this.x).redMul(n.y.redAdd(n.x)),r=this.t.redMul(this.curve.dd).redMul(n.t),u=this.z.redMul(n.z.redAdd(n.z)),f=i.redSub(t),e=u.redSub(r),o=u.redAdd(r),s=i.redAdd(t),h=f.redMul(e),c=o.redMul(s),l=f.redMul(s),a=e.redMul(o);return this.curve.point(h,c,a,l)};i.prototype._projAdd=function(n){var f,e,t=this.z.redMul(n.z),s=t.redSqr(),i=this.x.redMul(n.x),r=this.y.redMul(n.y),h=this.curve.d.redMul(i).redMul(r),o=s.redSub(h),u=s.redAdd(h),c=this.x.redAdd(this.y).redMul(n.x.redAdd(n.y)).redISub(i).redISub(r),l=t.redMul(o).redMul(c);return this.curve.twisted?(f=t.redMul(u).redMul(r.redSub(this.curve._mulA(i))),e=o.redMul(u)):(f=t.redMul(u).redMul(r.redSub(i)),e=this.curve._mulC(o).redMul(u)),this.curve.point(l,f,e)};i.prototype.add=function(n){return this.isInfinity()?n:n.isInfinity()?this:this.curve.extended?this._extAdd(n):this._projAdd(n)};i.prototype.mul=function(n){return this._hasDoubles(n)?this.curve._fixedNafMul(this,n):this.curve._wnafMul(this,n)};i.prototype.mulAdd=function(n,t,i){return this.curve._wnafMulAdd(1,[this,t],[n,i],2,!1)};i.prototype.jmulAdd=function(n,t,i){return this.curve._wnafMulAdd(1,[this,t],[n,i],2,!0)};i.prototype.normalize=function(){if(this.zOne)return this;var n=this.z.redInvm();return this.x=this.x.redMul(n),this.y=this.y.redMul(n),this.t&&(this.t=this.t.redMul(n)),this.z=this.curve.one,this.zOne=!0,this};i.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};i.prototype.getX=function(){return this.normalize(),this.x.fromRed()};i.prototype.getY=function(){return this.normalize(),this.y.fromRed()};i.prototype.eq=function(n){return this===n||0===this.getX().cmp(n.getX())&&0===this.getY().cmp(n.getY())};i.prototype.eqXToP=function(n){var t=n.toRed(this.curve.red).redMul(this.z),i,r;if(0===this.x.cmp(t))return!0;for(i=n.clone(),r=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(r),0===this.x.cmp(t))return!0}return!1};i.prototype.toP=i.prototype.normalize;i.prototype.mixedAdd=i.prototype.add},{"../../elliptic":1,"../curve":4,"bn.js":16,inherits:27}],4:[function(n,t,i){var r=i;r.base=n("./base");r.short=n("./short");r.mont=n("./mont");r.edwards=n("./edwards")},{"./base":2,"./edwards":3,"./mont":5,"./short":6}],5:[function(n,t){function r(n){f.call(this,"mont",n);this.a=new u(n.a,16).toRed(this.red);this.b=new u(n.b,16).toRed(this.red);this.i4=new u(4).toRed(this.red).redInvm();this.two=new u(2).toRed(this.red);this.a24=this.i4.redMul(this.a.redAdd(this.two))}function i(n,t,i){f.BasePoint.call(this,n,"projective");null===t&&null===i?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new u(t,16),this.z=new u(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}var o=n("../curve"),u=n("bn.js"),e=n("inherits"),f=o.base,s=n("../../elliptic").utils;e(r,f);t.exports=r;r.prototype.validate=function(n){var t=n.normalize().x,i=t.redSqr(),r=i.redMul(t).redAdd(i.redMul(this.a)).redAdd(t);return 0===r.redSqrt().redSqr().cmp(r)};e(i,f.BasePoint);r.prototype.decodePoint=function(n,t){return this.point(s.toArray(n,t),1)};r.prototype.point=function(n,t){return new i(this,n,t)};r.prototype.pointFromJSON=function(n){return i.fromJSON(this,n)};i.prototype.precompute=function(){};i.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};i.fromJSON=function(n,t){return new i(n,t[0],t[1]||n.one)};i.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};i.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};i.prototype.dbl=function(){var t=this.x.redAdd(this.z).redSqr(),n=this.x.redSub(this.z).redSqr(),i=t.redSub(n),r=t.redMul(n),u=i.redMul(n.redAdd(this.curve.a24.redMul(i)));return this.curve.point(r,u)};i.prototype.add=function(){throw new Error("Not supported on Montgomery curve");};i.prototype.diffAdd=function(n,t){var u=this.x.redAdd(this.z),f=this.x.redSub(this.z),e=n.x.redAdd(n.z),i=n.x.redSub(n.z).redMul(u),r=e.redMul(f),o=t.z.redMul(i.redAdd(r).redSqr()),s=t.x.redMul(i.redISub(r).redSqr());return this.curve.point(o,s)};i.prototype.mul=function(n){for(var r,u=n.clone(),i=this,t=this.curve.point(null,null),f=[];0!==u.cmpn(0);u.iushrn(1))f.push(u.andln(1));for(r=f.length-1;r>=0;r--)0===f[r]?(i=i.diffAdd(t,this),t=t.dbl()):(t=i.diffAdd(t,this),i=i.dbl());return t};i.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve");};i.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve");};i.prototype.eq=function(n){return 0===this.getX().cmp(n.getX())};i.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};i.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../../elliptic":1,"../curve":4,"bn.js":16,inherits:27}],6:[function(n,t){function f(n){e.call(this,"short",n);this.a=new i(n.a,16).toRed(this.red);this.b=new i(n.b,16).toRed(this.red);this.tinv=this.two.redInvm();this.zeroA=0===this.a.fromRed().cmpn(0);this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3);this.endo=this._getEndomorphism(n);this._endoWnafT1=new Array(4);this._endoWnafT2=new Array(4)}function r(n,t,r,u){e.BasePoint.call(this,n,"affine");null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(t,16),this.y=new i(r,16),u&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function u(n,t,r,u){e.BasePoint.call(this,n,"jacobian");null===t&&null===r&&null===u?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(t,16),this.y=new i(r,16),this.z=new i(u,16));this.x.red||(this.x=this.x.toRed(this.curve.red));this.y.red||(this.y=this.y.toRed(this.curve.red));this.z.red||(this.z=this.z.toRed(this.curve.red));this.zOne=this.z===this.curve.one}var s=n("../curve"),h=n("../../elliptic"),i=n("bn.js"),o=n("inherits"),e=s.base,c=h.utils.assert;o(f,e);t.exports=f;f.prototype._getEndomorphism=function(n){var t,r,u,f;if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3))return n.beta?t=new i(n.beta,16).toRed(this.red):(u=this._getEndoRoots(this.p),t=(t=u[0].cmp(u[1])<0?u[0]:u[1]).toRed(this.red)),n.lambda?r=new i(n.lambda,16):(f=this._getEndoRoots(this.n),0===this.g.mul(f[0]).x.cmp(this.g.x.redMul(t))?r=f[0]:(r=f[1],c(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))),{beta:t,lambda:r,basis:n.basis?n.basis.map(function(n){return{a:new i(n.a,16),b:new i(n.b,16)}}):this._getEndoBasis(r)}};f.prototype._getEndoRoots=function(n){var t=n===this.p?this.red:i.mont(n),r=new i(2).toRed(t).redInvm(),u=r.redNeg(),f=new i(3).toRed(t).redNeg().redSqrt().redMul(r);return[u.redAdd(f).fromRed(),u.redSub(f).fromRed()]};f.prototype._getEndoBasis=function(n){for(var c,k,d,v,y,t,e,r,u,p,f,s,g=this.n.ushrn(Math.floor(this.n.bitLength()/2)),o=n,l=this.n.clone(),h=new i(1),a=new i(0),w=new i(0),b=new i(1),nt=0;0!==o.cmpn(0);){if(c=l.div(o),f=l.sub(c.mul(o)),s=w.sub(c.mul(h)),k=b.sub(c.mul(a)),!t&&f.cmp(g)<0)v=p.neg(),y=h,t=f.neg(),e=s;else if(t&&2==++nt)break;p=f;l=o;o=f;w=h;h=s;b=a;a=k}return r=f.neg(),u=s,d=t.sqr().add(e.sqr()),r.sqr().add(u.sqr()).cmp(d)>=0&&(r=v,u=y),t.negative&&(t=t.neg(),e=e.neg()),r.negative&&(r=r.neg(),u=u.neg()),[{a:t,b:e},{a:r,b:u}]};f.prototype._endoSplit=function(n){var r=this.endo.basis,t=r[0],i=r[1],u=i.b.mul(n).divRound(this.n),f=t.b.neg().mul(n).divRound(this.n),e=u.mul(t.a),o=f.mul(i.a),s=u.mul(t.b),h=f.mul(i.b);return{k1:n.sub(e).sub(o),k2:s.add(h).neg()}};f.prototype.pointFromX=function(n,t){var u,r,f;if((n=new i(n,16)).red||(n=n.toRed(this.red)),u=n.redSqr().redMul(n).redIAdd(n.redMul(this.a)).redIAdd(this.b),r=u.redSqrt(),0!==r.redSqr().redSub(u).cmp(this.zero))throw new Error("invalid point");return f=r.fromRed().isOdd(),(t&&!f||!t&&f)&&(r=r.redNeg()),this.point(n,r)};f.prototype.validate=function(n){if(n.inf)return!0;var t=n.x,i=n.y,r=this.a.redMul(t),u=t.redSqr().redMul(t).redIAdd(r).redIAdd(this.b);return 0===i.redSqr().redISub(u).cmpn(0)};f.prototype._endoWnafMulAdd=function(n,t,i){for(var c,f,e=this._endoWnafT1,o=this._endoWnafT2,r=0;r<n.length;r++){var u=this._endoSplit(t[r]),s=n[r],h=s._getBeta();u.k1.negative&&(u.k1.ineg(),s=s.neg(!0));u.k2.negative&&(u.k2.ineg(),h=h.neg(!0));e[2*r]=s;e[2*r+1]=h;o[2*r]=u.k1;o[2*r+1]=u.k2}for(c=this._wnafMulAdd(1,e,o,2*r,i),f=0;f<2*r;f++)e[f]=null,o[f]=null;return c};o(r,e.BasePoint);f.prototype.point=function(n,t,i){return new r(this,n,t,i)};f.prototype.pointFromJSON=function(n,t){return r.fromJSON(this,n,t)};r.prototype._getBeta=function(){var n,t,i,r;if(this.curve.endo)return(n=this.precomputed,n&&n.beta)?n.beta:(t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y),n&&(i=this.curve,r=function(n){return i.point(n.x.redMul(i.endo.beta),n.y)},n.beta=t,t.precomputed={beta:null,naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(r)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(r)}}),t)};r.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};r.fromJSON=function(n,t,i){function f(t){return n.point(t[0],t[1],i)}var u,r;return("string"==typeof t&&(t=JSON.parse(t)),u=n.point(t[0],t[1],i),!t[2])?u:(r=t[2],u.precomputed={beta:null,doubles:r.doubles&&{step:r.doubles.step,points:[u].concat(r.doubles.points.map(f))},naf:r.naf&&{wnd:r.naf.wnd,points:[u].concat(r.naf.points.map(f))}},u)};r.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};r.prototype.isInfinity=function(){return this.inf};r.prototype.add=function(n){var t,i,r;return this.inf?n:n.inf?this:this.eq(n)?this.dbl():this.neg().eq(n)?this.curve.point(null,null):0===this.x.cmp(n.x)?this.curve.point(null,null):(t=this.y.redSub(n.y),0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(n.x).redInvm())),i=t.redSqr().redISub(this.x).redISub(n.x),r=t.redMul(this.x.redSub(i)).redISub(this.y),this.curve.point(i,r))};r.prototype.dbl=function(){var n;if(this.inf)return this;if(n=this.y.redAdd(this.y),0===n.cmpn(0))return this.curve.point(null,null);var u=this.curve.a,t=this.x.redSqr(),f=n.redInvm(),i=t.redAdd(t).redIAdd(t).redIAdd(u).redMul(f),r=i.redSqr().redISub(this.x.redAdd(this.x)),e=i.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,e)};r.prototype.getX=function(){return this.x.fromRed()};r.prototype.getY=function(){return this.y.fromRed()};r.prototype.mul=function(n){return n=new i(n,16),this._hasDoubles(n)?this.curve._fixedNafMul(this,n):this.curve.endo?this.curve._endoWnafMulAdd([this],[n]):this.curve._wnafMul(this,n)};r.prototype.mulAdd=function(n,t,i){var r=[this,t],u=[n,i];return this.curve.endo?this.curve._endoWnafMulAdd(r,u):this.curve._wnafMulAdd(1,r,u,2)};r.prototype.jmulAdd=function(n,t,i){var r=[this,t],u=[n,i];return this.curve.endo?this.curve._endoWnafMulAdd(r,u,!0):this.curve._wnafMulAdd(1,r,u,2,!0)};r.prototype.eq=function(n){return this===n||this.inf===n.inf&&(this.inf||0===this.x.cmp(n.x)&&0===this.y.cmp(n.y))};r.prototype.neg=function(n){var i,t,r;return this.inf?this:(i=this.curve.point(this.x,this.y.redNeg()),n&&this.precomputed&&(t=this.precomputed,r=function(n){return n.neg()},i.precomputed={naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(r)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(r)}}),i)};r.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)};o(u,e.BasePoint);f.prototype.jpoint=function(n,t,i){return new u(this,n,t,i)};u.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var n=this.z.redInvm(),t=n.redSqr(),i=this.x.redMul(t),r=this.y.redMul(t).redMul(n);return this.curve.point(i,r)};u.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};u.prototype.add=function(n){if(this.isInfinity())return n;if(n.isInfinity())return this;var u=n.z.redSqr(),f=this.z.redSqr(),e=this.x.redMul(u),l=n.x.redMul(f),o=this.y.redMul(u.redMul(n.z)),a=n.y.redMul(f.redMul(this.z)),t=e.redSub(l),i=o.redSub(a);if(0===t.cmpn(0))return 0!==i.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var s=t.redSqr(),h=s.redMul(t),r=e.redMul(s),c=i.redSqr().redIAdd(h).redISub(r).redISub(r),v=i.redMul(r.redISub(c)).redISub(o.redMul(h)),y=this.z.redMul(n.z).redMul(t);return this.curve.jpoint(c,v,y)};u.prototype.mixedAdd=function(n){if(this.isInfinity())return n.toJ();if(n.isInfinity())return this;var u=this.z.redSqr(),f=this.x,c=n.x.redMul(u),e=this.y,l=n.y.redMul(u).redMul(this.z),t=f.redSub(c),i=e.redSub(l);if(0===t.cmpn(0))return 0!==i.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var o=t.redSqr(),s=o.redMul(t),r=f.redMul(o),h=i.redSqr().redIAdd(s).redISub(r).redISub(r),a=i.redMul(r.redISub(h)).redISub(e.redMul(s)),v=this.z.redMul(t);return this.curve.jpoint(h,a,v)};u.prototype.dblp=function(n){var i,t,p;if(0===n||this.isInfinity())return this;if(!n)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(i=this,t=0;t<n;t++)i=i.dbl();return i}var w=this.curve.a,b=this.curve.tinv,r=this.x,c=this.y,u=this.z,o=u.redSqr().redSqr(),f=c.redAdd(c);for(t=0;t<n;t++){var s=r.redSqr(),l=f.redSqr(),a=l.redSqr(),v=s.redAdd(s).redIAdd(s).redIAdd(w.redMul(o)),h=r.redMul(l),y=v.redSqr().redISub(h.redAdd(h)),k=h.redISub(y),e=v.redMul(k);e=e.redIAdd(e).redISub(a);p=f.redMul(u);t+1<n&&(o=o.redMul(a));r=y;u=p;f=e}return this.curve.jpoint(r,f.redMul(b),u)};u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};u.prototype._zeroDbl=function(){var f,s,u;if(this.zOne){var e=this.x.redSqr(),l=this.y.redSqr(),h=l.redSqr(),n=this.x.redAdd(l).redSqr().redISub(e).redISub(h);n=n.redIAdd(n);var a=e.redAdd(e).redIAdd(e),v=a.redSqr().redISub(n).redISub(n),t=h.redIAdd(h);t=(t=t.redIAdd(t)).redIAdd(t);f=v;s=a.redMul(n.redISub(v)).redISub(t);u=this.y.redAdd(this.y)}else{var o=this.x.redSqr(),y=this.y.redSqr(),c=y.redSqr(),i=this.x.redAdd(y).redSqr().redISub(o).redISub(c);i=i.redIAdd(i);var p=o.redAdd(o).redIAdd(o),w=p.redSqr(),r=c.redIAdd(c);r=(r=r.redIAdd(r)).redIAdd(r);f=w.redISub(i).redISub(i);s=p.redMul(i.redISub(f)).redISub(r);u=(u=this.y.redMul(this.z)).redIAdd(u)}return this.curve.jpoint(f,s,u)};u.prototype._threeDbl=function(){var f,o,s,c,l,t,u,w,n;if(this.zOne){var e=this.x.redSqr(),y=this.y.redSqr(),h=y.redSqr(),i=this.x.redAdd(y).redSqr().redISub(e).redISub(h);i=i.redIAdd(i);c=e.redAdd(e).redIAdd(e).redIAdd(this.curve.a);l=c.redSqr().redISub(i).redISub(i);f=l;t=h.redIAdd(h);t=(t=t.redIAdd(t)).redIAdd(t);o=c.redMul(i.redISub(l)).redISub(t);s=this.y.redAdd(this.y)}else{var a=this.z.redSqr(),v=this.y.redSqr(),p=this.x.redMul(v),r=this.x.redSub(a).redMul(this.x.redAdd(a));r=r.redAdd(r).redIAdd(r);u=p.redIAdd(p);w=(u=u.redIAdd(u)).redAdd(u);f=r.redSqr().redISub(w);s=this.y.redAdd(this.z).redSqr().redISub(v).redISub(a);n=v.redSqr();n=(n=(n=n.redIAdd(n)).redIAdd(n)).redIAdd(n);o=r.redMul(u.redISub(f)).redISub(n)}return this.curve.jpoint(f,o,s)};u.prototype._dbl=function(){var a=this.curve.a,t=this.x,i=this.y,e=this.z,v=e.redSqr().redSqr(),r=t.redSqr(),o=i.redSqr(),s=r.redAdd(r).redIAdd(r).redIAdd(a.redMul(v)),u=t.redAdd(t),f=(u=u.redIAdd(u)).redMul(o),h=s.redSqr().redISub(f.redAdd(f)),y=f.redISub(h),n=o.redSqr(),c,l;return n=(n=(n=n.redIAdd(n)).redIAdd(n)).redIAdd(n),c=s.redMul(y).redISub(n),l=i.redAdd(i).redMul(e),this.curve.jpoint(h,c,l)};u.prototype.trpl=function(){var o,r,u,i,a;if(!this.curve.zeroA)return this.dbl().add(this);var f=this.x.redSqr(),s=this.y.redSqr(),v=this.z.redSqr(),h=s.redSqr(),c=f.redAdd(f).redIAdd(f),l=c.redSqr(),n=this.x.redAdd(s).redSqr().redISub(f).redISub(h),e=(n=(n=(n=n.redIAdd(n)).redAdd(n).redIAdd(n)).redISub(l)).redSqr(),t=h.redIAdd(h);return t=(t=(t=t.redIAdd(t)).redIAdd(t)).redIAdd(t),o=c.redIAdd(n).redSqr().redISub(l).redISub(e).redISub(t),r=s.redMul(o),r=(r=r.redIAdd(r)).redIAdd(r),u=this.x.redMul(e).redISub(r),u=(u=u.redIAdd(u)).redIAdd(u),i=this.y.redMul(o.redMul(t.redISub(o)).redISub(n.redMul(e))),i=(i=(i=i.redIAdd(i)).redIAdd(i)).redIAdd(i),a=this.z.redAdd(n).redSqr().redISub(v).redISub(e),this.curve.jpoint(u,i,a)};u.prototype.mul=function(n,t){return n=new i(n,t),this.curve._wnafMul(this,n)};u.prototype.eq=function(n){var t,i,r,u;return"affine"===n.type?this.eq(n.toJ()):this===n?!0:(t=this.z.redSqr(),i=n.z.redSqr(),0!==this.x.redMul(i).redISub(n.x.redMul(t)).cmpn(0))?!1:(r=t.redMul(this.z),u=i.redMul(n.z),0===this.y.redMul(u).redISub(n.y.redMul(r)).cmpn(0))};u.prototype.eqXToP=function(n){var r=this.z.redSqr(),t=n.toRed(this.curve.red).redMul(r),i,u;if(0===this.x.cmp(t))return!0;for(i=n.clone(),u=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(u),0===this.x.cmp(t))return!0}return!1};u.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},{"../../elliptic":1,"../curve":4,"bn.js":16,inherits:27}],7:[function(n,t,i){function s(n){this.curve="short"===n.type?new f.curve.short(n):"edwards"===n.type?new f.curve.edwards(n):new f.curve.mont(n);this.g=this.curve.g;this.n=this.curve.n;this.hash=n.hash;h(this.g.validate(),"Invalid curve");h(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function r(n,t){Object.defineProperty(o,n,{configurable:!0,enumerable:!0,get:function(){var i=new s(t);return Object.defineProperty(o,n,{configurable:!0,enumerable:!0,value:i}),i}})}var e,o=i,u=n("hash.js"),f=n("../elliptic"),h=f.utils.assert;o.PresetCurve=s;r("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:u.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});r("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:u.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});r("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:u.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});r("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:u.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});r("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:u.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});r("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:u.sha256,gRed:!1,g:["9"]});r("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:u.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{e=n("./precomputed/secp256k1")}catch(n){e=void 0}r("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:u.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",e]})},{"../elliptic":1,"./precomputed/secp256k1":14,"hash.js":19}],8:[function(n,t){function i(n){return this instanceof i?("string"==typeof n&&(h(f.curves.hasOwnProperty(n),"Unknown curve "+n),n=f.curves[n]),n instanceof f.curves.PresetCurve&&(n={curve:n}),this.curve=n.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=n.curve.g,this.g.precompute(n.curve.n.bitLength()+1),void(this.hash=n.hash||n.curve.hash)):new i(n)}var r=n("bn.js"),s=n("hmac-drbg"),f=n("../../elliptic"),h=f.utils.assert,o=n("./key"),e=n("./signature");t.exports=i;i.prototype.keyPair=function(n){return new o(this,n)};i.prototype.keyFromPrivate=function(n,t){return o.fromPrivate(this,n,t)};i.prototype.keyFromPublic=function(n,t){return o.fromPublic(this,n,t)};i.prototype.genKeyPair=function(n){var t;n||(n={});for(var i=new s({hash:this.hash,pers:n.pers,persEnc:n.persEnc||"utf8",entropy:n.entropy||f.rand(this.hash.hmacStrength),entropyEnc:n.entropy&&n.entropyEnc||"utf8",nonce:this.n.toArray()}),u=this.n.byteLength(),e=this.n.sub(new r(2));;)if(t=new r(i.generate(u)),!(t.cmp(e)>0))return t.iaddn(1),this.keyFromPrivate(t)};i.prototype._truncateToN=function(n,t){var i=8*n.byteLength()-this.n.bitLength();return i>0&&(n=n.ushrn(i)),!t&&n.cmp(this.n)>=0?n.sub(this.n):n};i.prototype.sign=function(n,t,i,f){var h,l,a,c,o,v;"object"==u(i)&&(f=i,i=null);f||(f={});t=this.keyFromPrivate(t,i);n=this._truncateToN(new r(n,16));for(var y=this.n.byteLength(),w=t.getPrivate().toArray("be",y),b=n.toArray("be",y),k=new s({hash:this.hash,entropy:w,nonce:b,pers:f.pers,persEnc:f.persEnc||"utf8"}),d=this.n.sub(new r(1)),p=0;;p++)if(h=f.k?f.k(p):new r(k.generate(this.n.byteLength())),!((h=this._truncateToN(h,!0)).cmpn(1)<=0||h.cmp(d)>=0)&&(l=this.g.mul(h),!l.isInfinity()&&(a=l.getX(),c=a.umod(this.n),0!==c.cmpn(0)&&(o=h.invm(this.n).mul(c.mul(t.getPrivate()).iadd(n)),0!==(o=o.umod(this.n)).cmpn(0)))))return v=(l.getY().isOdd()?1:0)|(0!==a.cmp(c)?2:0),f.canonical&&o.cmp(this.nh)>0&&(o=this.n.sub(o),v^=1),new e({r:c,s:o,recoveryParam:v})};i.prototype.verify=function(n,t,i,u){var f,o;if((n=this._truncateToN(new r(n,16)),i=this.keyFromPublic(i,u),f=(t=new e(t,"hex")).r,o=t.s,f.cmpn(1)<0||f.cmp(this.n)>=0)||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var s,h=o.invm(this.n),c=h.mul(n).umod(this.n),l=h.mul(f).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(c,i.getPublic(),l)).isInfinity()&&s.eqXToP(f):!(s=this.g.mulAdd(c,i.getPublic(),l)).isInfinity()&&0===s.getX().umod(this.n).cmp(f)};i.prototype.recoverPubKey=function(n,t,i,u){h((3&i)===i,"The recovery param is more than two bits");t=new e(t,u);var o=this.n,a=new r(n),f=t.r,v=t.s,s=1&i,c=i>>1;if(f.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");f=c?this.curve.pointFromX(f.add(this.curve.n),s):this.curve.pointFromX(f,s);var l=t.r.invm(o),y=o.sub(a).mul(l).umod(o),p=v.mul(l).umod(o);return this.g.mulAdd(y,f,p)};i.prototype.getKeyRecoveryParam=function(n,t,i,r){var u,f;if(null!==(t=new e(t,r)).recoveryParam)return t.recoveryParam;for(u=0;u<4;u++){try{f=this.recoverPubKey(n,t,u)}catch(n){continue}if(f.eq(i))return u}throw new Error("Unable to find valid recovery factor");}},{"../../elliptic":1,"./key":9,"./signature":10,"bn.js":16,"hmac-drbg":25}],9:[function(n,t){function i(n,t){this.ec=n;this.priv=null;this.pub=null;t.priv&&this._importPrivate(t.priv,t.privEnc);t.pub&&this._importPublic(t.pub,t.pubEnc)}var u=n("bn.js"),r=n("../../elliptic").utils.assert;t.exports=i;i.fromPublic=function(n,t,r){return t instanceof i?t:new i(n,{pub:t,pubEnc:r})};i.fromPrivate=function(n,t,r){return t instanceof i?t:new i(n,{priv:t,privEnc:r})};i.prototype.validate=function(){var n=this.getPublic();return n.isInfinity()?{result:!1,reason:"Invalid public key"}:n.validate()?n.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};i.prototype.getPublic=function(n,t){return"string"==typeof n&&(t=n,n=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,n):this.pub};i.prototype.getPrivate=function(n){return"hex"===n?this.priv.toString(16,2):this.priv};i.prototype._importPrivate=function(n,t){this.priv=new u(n,t||16);this.priv=this.priv.umod(this.ec.curve.n)};i.prototype._importPublic=function(n,t){return n.x||n.y?("mont"===this.ec.curve.type?r(n.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||r(n.x&&n.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(n.x,n.y))):void(this.pub=this.ec.curve.decodePoint(n,t))};i.prototype.derive=function(n){return n.mul(this.priv).getX()};i.prototype.sign=function(n,t,i){return this.ec.sign(n,this,t,i)};i.prototype.verify=function(n,t){return this.ec.verify(n,t,this)};i.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../../elliptic":1,"bn.js":16}],10:[function(n,t){function i(n,t){return n instanceof i?n:void(this._importDER(n,t)||(h(n.r&&n.s,"Signature without r or s"),this.r=new r(n.r,16),this.s=new r(n.s,16),this.recoveryParam=void 0===n.recoveryParam?null:n.recoveryParam))}function s(){this.place=0}function u(n,t){var i=n[t.place++];if(!(128&i))return i;for(var e=15&i,r=0,f=0,u=t.place;f<e;f++,u++)r<<=8,r|=n[u];return t.place=u,r}function o(n){for(var t=0,i=n.length-1;!n[t]&&!(128&n[t+1])&&t<i;)t++;return 0===t?n:n.slice(t)}function f(n,t){if(t<128)n.push(t);else{var i=1+(Math.log(t)/Math.LN2>>>3);for(n.push(128|i);--i;)n.push(t>>>(i<<3)&255);n.push(t)}}var r=n("bn.js"),e=n("../../elliptic").utils,h=e.assert;t.exports=i;i.prototype._importDER=function(n,t){var i,h,f,c,o;return(n=e.toArray(n,t),i=new s,48!==n[i.place++])?!1:u(n,i)+i.place!==n.length?!1:2!==n[i.place++]?!1:(h=u(n,i),f=n.slice(i.place,h+i.place),i.place+=h,2!==n[i.place++])?!1:(c=u(n,i),n.length!==c+i.place)?!1:(o=n.slice(i.place,c+i.place),0===f[0]&&128&f[1]&&(f=f.slice(1)),0===o[0]&&128&o[1]&&(o=o.slice(1)),this.r=new r(f),this.s=new r(o),this.recoveryParam=null,!0)};i.prototype.toDER=function(n){var i=this.r.toArray(),t=this.s.toArray(),r,s,u;for(128&i[0]&&(i=[0].concat(i)),128&t[0]&&(t=[0].concat(t)),i=o(i),t=o(t);!(t[0]||128&t[1]);)t=t.slice(1);return r=[2],f(r,i.length),(r=r.concat(i)).push(2),f(r,t.length),s=r.concat(t),u=[48],f(u,s.length),u=u.concat(s),e.encode(u,n)}},{"../../elliptic":1,"bn.js":16}],11:[function(n,t){function i(n){if(h("ed25519"===n,"only tested with ed25519 so far"),!(this instanceof i))return new i(n);n=u.curves[n].curve;this.curve=n;this.g=n.g;this.g.precompute(n.n.bitLength()+1);this.pointClass=n.point().constructor;this.encodingLength=Math.ceil(n.n.bitLength()/8);this.hash=s.sha512}var s=n("hash.js"),u=n("../../elliptic"),r=u.utils,h=r.assert,f=r.parseBytes,e=n("./key"),o=n("./signature");t.exports=i;i.prototype.sign=function(n,t){n=f(n);var i=this.keyFromSecret(t),r=this.hashInt(i.messagePrefix(),n),u=this.g.mul(r),e=this.encodePoint(u),o=this.hashInt(e,i.pubBytes(),n).mul(i.priv()),s=r.add(o).umod(this.curve.n);return this.makeSignature({R:u,S:s,Rencoded:e})};i.prototype.verify=function(n,t,i){n=f(n);t=this.makeSignature(t);var r=this.keyFromPublic(i),u=this.hashInt(t.Rencoded(),r.pubBytes(),n),e=this.g.mul(t.S());return t.R().add(r.pub().mul(u)).eq(e)};i.prototype.hashInt=function(){for(var t=this.hash(),n=0;n<arguments.length;n++)t.update(arguments[n]);return r.intFromLE(t.digest()).umod(this.curve.n)};i.prototype.keyFromPublic=function(n){return e.fromPublic(this,n)};i.prototype.keyFromSecret=function(n){return e.fromSecret(this,n)};i.prototype.makeSignature=function(n){return n instanceof o?n:new o(this,n)};i.prototype.encodePoint=function(n){var t=n.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=n.getX().isOdd()?128:0,t};i.prototype.decodePoint=function(n){var t=(n=r.parseBytes(n)).length-1,i=n.slice(0,t).concat(-129&n[t]),u=0!=(128&n[t]),f=r.intFromLE(i);return this.curve.pointFromY(f,u)};i.prototype.encodeInt=function(n){return n.toArray("le",this.encodingLength)};i.prototype.decodeInt=function(n){return r.intFromLE(n)};i.prototype.isPoint=function(n){return n instanceof this.pointClass}},{"../../elliptic":1,"./key":12,"./signature":13,"hash.js":19}],12:[function(n,t){function i(n,t){this.eddsa=n;this._secret=e(t.secret);n.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=e(t.pub)}var u=n("../../elliptic").utils,f=u.assert,e=u.parseBytes,r=u.cachedProperty;i.fromPublic=function(n,t){return t instanceof i?t:new i(n,{pub:t})};i.fromSecret=function(n,t){return t instanceof i?t:new i(n,{secret:t})};i.prototype.secret=function(){return this._secret};r(i,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});r(i,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});r(i,"privBytes",function(){var t=this.eddsa,r=this.hash(),i=t.encodingLength-1,n=r.slice(0,t.encodingLength);return n[0]&=248,n[i]&=127,n[i]|=64,n});r(i,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});r(i,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});r(i,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});i.prototype.sign=function(n){return f(this._secret,"KeyPair can only verify"),this.eddsa.sign(n,this)};i.prototype.verify=function(n,t){return this.eddsa.verify(n,t,this)};i.prototype.getSecret=function(n){return f(this._secret,"KeyPair is public only"),u.encode(this.secret(),n)};i.prototype.getPublic=function(n){return u.encode(this.pubBytes(),n)};t.exports=i},{"../../elliptic":1}],13:[function(n,t){function i(n,t){this.eddsa=n;"object"!=u(t)&&(t=s(t));Array.isArray(t)&&(t={R:t.slice(0,n.encodingLength),S:t.slice(n.encodingLength)});o(t.R&&t.S,"Signature without R or S");n.isPoint(t.R)&&(this._R=t.R);t.S instanceof e&&(this._S=t.S);this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded;this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}var e=n("bn.js"),r=n("../../elliptic").utils,o=r.assert,f=r.cachedProperty,s=r.parseBytes;f(i,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});f(i,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});f(i,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});f(i,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});i.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};i.prototype.toHex=function(){return r.encode(this.toBytes(),"hex").toUpperCase()};t.exports=i},{"../../elliptic":1,"bn.js":16}],14:[function(n,t){t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],15:[function(n,t,i){var r=i,f=n("bn.js"),e=n("minimalistic-assert"),u=n("minimalistic-crypto-utils");r.assert=e;r.toArray=u.toArray;r.zero2=u.zero2;r.toHex=u.toHex;r.encode=u.encode;r.getNAF=function(n,t){for(var u,f,o,s,e=[],r=1<<t+1,i=n.clone();i.cmpn(1)>=0;){for(i.isOdd()?(f=i.andln(r-1),u=f>(r>>1)-1?(r>>1)-f:f,i.isubn(u)):u=0,e.push(u),o=0!==i.cmpn(0)&&0===i.andln(r-1)?t+1:1,s=1;s<o;s++)e.push(0);i.iushrn(o)}return e};r.getJSF=function(n,t){var o=[[],[]],i,r,s,h,e,u,f;for(n=n.clone(),t=t.clone(),i=0,r=0;n.cmpn(-i)>0||t.cmpn(-r)>0;)u=n.andln(3)+i&3,f=t.andln(3)+r&3,3===u&&(u=-1),3===f&&(f=-1),s=0==(1&u)?0:3!=(e=n.andln(7)+i&7)&&5!==e||2!==f?u:-u,o[0].push(s),h=0==(1&f)?0:3!=(e=t.andln(7)+r&7)&&5!==e||2!==u?f:-f,o[1].push(h),2*i===s+1&&(i=1-i),2*r===h+1&&(r=1-r),n.iushrn(1),t.iushrn(1);return o};r.cachedProperty=function(n,t,i){var r="_"+t;n.prototype[t]=function(){return void 0!==this[r]?this[r]:this[r]=i.call(this)}};r.parseBytes=function(n){return"string"==typeof n?r.toArray(n,"hex"):n};r.intFromLE=function(n){return new f(n,"hex","le")}},{"bn.js":16,"minimalistic-assert":28,"minimalistic-crypto-utils":29}],16:[function(n,t){!function(t,i){function f(n,t){if(!n)throw new Error(t||"Assertion failed");}function c(n,t){n.super_=t;var i=function(){};i.prototype=t.prototype;n.prototype=new i;n.prototype.constructor=n}function r(n,t,i){return r.isBN(n)?n:(this.negative=0,this.words=null,this.length=0,this.red=null,void(null!==n&&("le"!==t&&"be"!==t||(i=t,t=10),this._init(n||0,t||10,i||"be"))))}function w(n,t,i){for(var r,u=0,e=Math.min(n.length,i),f=t;f<e;f++)r=n.charCodeAt(f)-48,u<<=4,u|=r>=49&&r<=54?r-39:r>=17&&r<=22?r-7:15&r;return u}function b(n,t,i,r){for(var u,f=0,o=Math.min(n.length,i),e=t;e<o;e++)u=n.charCodeAt(e)-48,f*=r,f+=u>=49?u-39:u>=17?u-7:u;return f}function k(n,t,i){var u,r,a;i.negative=t.negative^n.negative;u=n.length+t.length|0;i.length=u;u=u-1|0;var h=0|n.words[0],c=0|t.words[0],e=h*c,v=67108863&e,f=e/67108864|0;for(i.words[0]=v,r=1;r<u;r++){for(var l=f>>>26,s=67108863&f,y=Math.min(r,t.length-1),o=Math.max(0,r-n.length+1);o<=y;o++)a=r-o|0,l+=(e=(h=0|n.words[a])*(c=0|t.words[o])+s)/67108864|0,s=67108863&e;i.words[r]=0|s;f=0|l}return 0!==f?i.words[r]=0|f:i.length--,i.strip()}function d(n,t,i){return(new s).mulp(n,t,i)}function s(n,t){this.x=n;this.y=t}function o(n,t){this.name=n;this.p=new r(t,16);this.n=this.p.bitLength();this.k=new r(1).iushln(this.n).isub(this.p);this.tmp=this._tmp()}function l(){o.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function g(){o.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function nt(){o.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function v(){o.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function e(n){if("string"==typeof n){var t=r._prime(n);this.m=t.p;this.prime=t}else f(n.gtn(1),"modulus must be greater than 1"),this.m=n,this.prime=null}function h(n){e.call(this,n);this.shift=this.m.bitLength();this.shift%26!=0&&(this.shift+=26-this.shift%26);this.r=new r(1).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}var y,p,a;"object"==u(t)?t.exports=r:i.BN=r;r.BN=r;r.wordSize=26;try{y=n("buffer").Buffer}catch(n){}r.isBN=function(n){return n instanceof r||null!==n&&"object"==u(n)&&n.constructor.wordSize===r.wordSize&&Array.isArray(n.words)};r.max=function(n,t){return n.cmp(t)>0?n:t};r.min=function(n,t){return n.cmp(t)<0?n:t};r.prototype._init=function(n,t,i){if("number"==typeof n)return this._initNumber(n,t,i);if("object"==u(n))return this._initArray(n,t,i);"hex"===t&&(t=16);f(t===(0|t)&&t>=2&&t<=36);var r=0;"-"===(n=n.toString().replace(/\s+/g,""))[0]&&r++;16===t?this._parseHex(n,r):this._parseBase(n,t,r);"-"===n[0]&&(this.negative=1);this.strip();"le"===i&&this._initArray(this.toArray(),t,i)};r.prototype._initNumber=function(n,t,i){n<0&&(this.negative=1,n=-n);n<67108864?(this.words=[67108863&n],this.length=1):n<4503599627370496?(this.words=[67108863&n,n/67108864&67108863],this.length=2):(f(n<9007199254740992),this.words=[67108863&n,n/67108864&67108863,1],this.length=3);"le"===i&&this._initArray(this.toArray(),t,i)};r.prototype._initArray=function(n,t,i){var r,e,o,u;if(f("number"==typeof n.length),n.length<=0)return this.words=[0],this.length=1,this;for(this.length=Math.ceil(n.length/3),this.words=new Array(this.length),r=0;r<this.length;r++)this.words[r]=0;if(u=0,"be"===i)for(r=n.length-1,e=0;r>=0;r-=3)o=n[r]|n[r-1]<<8|n[r-2]<<16,this.words[e]|=o<<u&67108863,this.words[e+1]=o>>>26-u&67108863,(u+=24)>=26&&(u-=26,e++);else if("le"===i)for(r=0,e=0;r<n.length;r+=3)o=n[r]|n[r+1]<<8|n[r+2]<<16,this.words[e]|=o<<u&67108863,this.words[e+1]=o>>>26-u&67108863,(u+=24)>=26&&(u-=26,e++);return this.strip()};r.prototype._parseHex=function(n,t){var i,u,f,r;for(this.length=Math.ceil((n.length-t)/6),this.words=new Array(this.length),i=0;i<this.length;i++)this.words[i]=0;for(r=0,i=n.length-6,u=0;i>=t;i-=6)f=w(n,i,i+6),this.words[u]|=f<<r&67108863,this.words[u+1]|=f>>>26-r&4194303,(r+=24)>=26&&(r-=26,u++);i+6!==t&&(f=w(n,t,i+6),this.words[u]|=f<<r&67108863,this.words[u+1]|=f>>>26-r&4194303);this.strip()};r.prototype._parseBase=function(n,t,i){var f,e,h;for(this.words=[0],this.length=1,f=0,e=1;e<=67108863;e*=t)f++;f--;e=e/t|0;for(var o=n.length-i,s=o%f,c=Math.min(o,o-s)+i,r=0,u=i;u<c;u+=f)r=b(n,u,u+f,t),this.imuln(e),this.words[0]+r<67108864?this.words[0]+=r:this._iaddn(r);if(0!==s){for(h=1,r=b(n,u,n.length,t),u=0;u<s;u++)h*=t;this.imuln(h);this.words[0]+r<67108864?this.words[0]+=r:this._iaddn(r)}};r.prototype.copy=function(n){n.words=new Array(this.length);for(var t=0;t<this.length;t++)n.words[t]=this.words[t];n.length=this.length;n.negative=this.negative;n.red=this.red};r.prototype.clone=function(){var n=new r(null);return this.copy(n),n};r.prototype._expand=function(n){for(;this.length<n;)this.words[this.length++]=0;return this};r.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()};r.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this};r.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var tt=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],it=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],rt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];r.prototype.toString=function(n,t){var i,c,s,a,l,r,h;if(t=0|t||1,16===(n=n||10)||"hex"===n){i="";for(var e=0,o=0,u=0;u<this.length;u++)c=this.words[u],s=(16777215&(c<<e|o)).toString(16),i=0!=(o=c>>>24-e&16777215)||u!==this.length-1?tt[6-s.length]+s+i:s+i,(e+=2)>=26&&(e-=26,u--);for(0!==o&&(i=o.toString(16)+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(n===(0|n)&&n>=2&&n<=36){for(a=it[n],l=rt[n],i="",r=this.clone(),r.negative=0;!r.isZero();)h=r.modn(l).toString(n),i=(r=r.idivn(l)).isZero()?h+i:tt[a-h.length]+h+i;for(this.isZero()&&(i="0"+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}f(!1,"Base should be between 2 and 36")};r.prototype.toNumber=function(){var n=this.words[0];return 2===this.length?n+=67108864*this.words[1]:3===this.length&&1===this.words[2]?n+=4503599627370496+67108864*this.words[1]:this.length>2&&f(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-n:n};r.prototype.toJSON=function(){return this.toString(16)};r.prototype.toBuffer=function(n,t){return f(void 0!==y),this.toArrayLike(y,n,t)};r.prototype.toArray=function(n,t){return this.toArrayLike(Array,n,t)};r.prototype.toArrayLike=function(n,t,i){var h=this.byteLength(),u=i||Math.max(1,h);f(h<=u,"byte array longer than desired length");f(u>0,"Requested array length <= 0");this.strip();var s,r,c="le"===t,o=new n(u),e=this.clone();if(c){for(r=0;!e.isZero();r++)s=e.andln(255),e.iushrn(8),o[r]=s;for(;r<u;r++)o[r]=0}else{for(r=0;r<u-h;r++)o[r]=0;for(r=0;!e.isZero();r++)s=e.andln(255),e.iushrn(8),o[u-r-1]=s}return o};r.prototype._countBits=Math.clz32?function(n){return 32-Math.clz32(n)}:function(n){var t=n,i=0;return t>=4096&&(i+=13,t>>>=13),t>=64&&(i+=7,t>>>=7),t>=8&&(i+=4,t>>>=4),t>=2&&(i+=2,t>>>=2),i+t};r.prototype._zeroBits=function(n){if(0===n)return 26;var t=n,i=0;return 0==(8191&t)&&(i+=13,t>>>=13),0==(127&t)&&(i+=7,t>>>=7),0==(15&t)&&(i+=4,t>>>=4),0==(3&t)&&(i+=2,t>>>=2),0==(1&t)&&i++,i};r.prototype.bitLength=function(){var n=this.words[this.length-1],t=this._countBits(n);return 26*(this.length-1)+t};r.prototype.zeroBits=function(){var t,n,i;if(this.isZero())return 0;for(t=0,n=0;n<this.length;n++)if(i=this._zeroBits(this.words[n]),t+=i,26!==i)break;return t};r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};r.prototype.toTwos=function(n){return 0!==this.negative?this.abs().inotn(n).iaddn(1):this.clone()};r.prototype.fromTwos=function(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()};r.prototype.isNeg=function(){return 0!==this.negative};r.prototype.neg=function(){return this.clone().ineg()};r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this};r.prototype.iuor=function(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var t=0;t<n.length;t++)this.words[t]=this.words[t]|n.words[t];return this.strip()};r.prototype.ior=function(n){return f(0==(this.negative|n.negative)),this.iuor(n)};r.prototype.or=function(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)};r.prototype.uor=function(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)};r.prototype.iuand=function(n){for(var i=this.length>n.length?n:this,t=0;t<i.length;t++)this.words[t]=this.words[t]&n.words[t];return this.length=i.length,this.strip()};r.prototype.iand=function(n){return f(0==(this.negative|n.negative)),this.iuand(n)};r.prototype.and=function(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)};r.prototype.uand=function(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)};r.prototype.iuxor=function(n){var i,r,t;for(this.length>n.length?(i=this,r=n):(i=n,r=this),t=0;t<r.length;t++)this.words[t]=i.words[t]^r.words[t];if(this!==i)for(;t<i.length;t++)this.words[t]=i.words[t];return this.length=i.length,this.strip()};r.prototype.ixor=function(n){return f(0==(this.negative|n.negative)),this.iuxor(n)};r.prototype.xor=function(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)};r.prototype.uxor=function(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)};r.prototype.inotn=function(n){var i,r,t;for(f("number"==typeof n&&n>=0),i=0|Math.ceil(n/26),r=n%26,this._expand(i),r>0&&i--,t=0;t<i;t++)this.words[t]=67108863&~this.words[t];return r>0&&(this.words[t]=~this.words[t]&67108863>>26-r),this.strip()};r.prototype.notn=function(n){return this.clone().inotn(n)};r.prototype.setn=function(n,t){f("number"==typeof n&&n>=0);var i=n/26|0,r=n%26;return this._expand(i+1),this.words[i]=t?this.words[i]|1<<r:this.words[i]&~(1<<r),this.strip()};r.prototype.iadd=function(n){var i,r,f,u,t;if(0!==this.negative&&0===n.negative)return this.negative=0,i=this.isub(n),this.negative^=1,this._normSign();if(0===this.negative&&0!==n.negative)return n.negative=0,i=this.isub(n),n.negative=1,i._normSign();for(this.length>n.length?(r=this,f=n):(r=n,f=this),u=0,t=0;t<f.length;t++)i=(0|r.words[t])+(0|f.words[t])+u,this.words[t]=67108863&i,u=i>>>26;for(;0!==u&&t<r.length;t++)i=(0|r.words[t])+u,this.words[t]=67108863&i,u=i>>>26;if(this.length=r.length,0!==u)this.words[this.length]=u,this.length++;else if(r!==this)for(;t<r.length;t++)this.words[t]=r.words[t];return this};r.prototype.add=function(n){var t;return 0!==n.negative&&0===this.negative?(n.negative=0,t=this.sub(n),n.negative^=1,t):0===n.negative&&0!==this.negative?(this.negative=0,t=n.sub(this),this.negative=1,t):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)};r.prototype.isub=function(n){var u,i,f,e,r,t;if(0!==n.negative)return n.negative=0,u=this.iadd(n),n.negative=1,u._normSign();if(0!==this.negative)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();if(e=this.cmp(n),0===e)return this.negative=0,this.length=1,this.words[0]=0,this;for(e>0?(i=this,f=n):(i=n,f=this),r=0,t=0;t<f.length;t++)r=(u=(0|i.words[t])-(0|f.words[t])+r)>>26,this.words[t]=67108863&u;for(;0!==r&&t<i.length;t++)r=(u=(0|i.words[t])+r)>>26,this.words[t]=67108863&u;if(0===r&&t<i.length&&i!==this)for(;t<i.length;t++)this.words[t]=i.words[t];return this.length=Math.max(this.length,t),i!==this&&(this.negative=1),this.strip()};r.prototype.sub=function(n){return this.clone().isub(n)};p=function(n,t,i){var u,r,f,ei=n.words,oi=t.words,o=i.words,e=0,er=0|ei[0],s=8191&er,h=er>>>13,or=0|ei[1],c=8191&or,l=or>>>13,sr=0|ei[2],a=8191&sr,v=sr>>>13,hr=0|ei[3],y=8191&hr,p=hr>>>13,cr=0|ei[4],w=8191&cr,b=cr>>>13,lr=0|ei[5],k=8191&lr,d=lr>>>13,ar=0|ei[6],g=8191&ar,nt=ar>>>13,vr=0|ei[7],tt=8191&vr,it=vr>>>13,yr=0|ei[8],rt=8191&yr,ut=yr>>>13,pr=0|ei[9],ft=8191&pr,et=pr>>>13,wr=0|oi[0],ot=8191&wr,st=wr>>>13,br=0|oi[1],ht=8191&br,ct=br>>>13,kr=0|oi[2],lt=8191&kr,at=kr>>>13,dr=0|oi[3],vt=8191&dr,yt=dr>>>13,gr=0|oi[4],pt=8191&gr,wt=gr>>>13,nu=0|oi[5],bt=8191&nu,kt=nu>>>13,tu=0|oi[6],dt=8191&tu,gt=tu>>>13,iu=0|oi[7],ni=8191&iu,ti=iu>>>13,ru=0|oi[8],ii=8191&ru,ri=ru>>>13,uu=0|oi[9],ui=8191&uu,fi=uu>>>13,si,hi,ci,li,ai,vi,yi,pi,wi,bi,ki,di,gi,nr,tr,ir,rr,ur,fr;return i.negative=n.negative^t.negative,i.length=19,si=(e+(u=Math.imul(s,ot))|0)+((8191&(r=(r=Math.imul(s,st))+Math.imul(h,ot)|0))<<13)|0,e=((f=Math.imul(h,st))+(r>>>13)|0)+(si>>>26)|0,si&=67108863,u=Math.imul(c,ot),r=(r=Math.imul(c,st))+Math.imul(l,ot)|0,f=Math.imul(l,st),hi=(e+(u=u+Math.imul(s,ht)|0)|0)+((8191&(r=(r=r+Math.imul(s,ct)|0)+Math.imul(h,ht)|0))<<13)|0,e=((f=f+Math.imul(h,ct)|0)+(r>>>13)|0)+(hi>>>26)|0,hi&=67108863,u=Math.imul(a,ot),r=(r=Math.imul(a,st))+Math.imul(v,ot)|0,f=Math.imul(v,st),u=u+Math.imul(c,ht)|0,r=(r=r+Math.imul(c,ct)|0)+Math.imul(l,ht)|0,f=f+Math.imul(l,ct)|0,ci=(e+(u=u+Math.imul(s,lt)|0)|0)+((8191&(r=(r=r+Math.imul(s,at)|0)+Math.imul(h,lt)|0))<<13)|0,e=((f=f+Math.imul(h,at)|0)+(r>>>13)|0)+(ci>>>26)|0,ci&=67108863,u=Math.imul(y,ot),r=(r=Math.imul(y,st))+Math.imul(p,ot)|0,f=Math.imul(p,st),u=u+Math.imul(a,ht)|0,r=(r=r+Math.imul(a,ct)|0)+Math.imul(v,ht)|0,f=f+Math.imul(v,ct)|0,u=u+Math.imul(c,lt)|0,r=(r=r+Math.imul(c,at)|0)+Math.imul(l,lt)|0,f=f+Math.imul(l,at)|0,li=(e+(u=u+Math.imul(s,vt)|0)|0)+((8191&(r=(r=r+Math.imul(s,yt)|0)+Math.imul(h,vt)|0))<<13)|0,e=((f=f+Math.imul(h,yt)|0)+(r>>>13)|0)+(li>>>26)|0,li&=67108863,u=Math.imul(w,ot),r=(r=Math.imul(w,st))+Math.imul(b,ot)|0,f=Math.imul(b,st),u=u+Math.imul(y,ht)|0,r=(r=r+Math.imul(y,ct)|0)+Math.imul(p,ht)|0,f=f+Math.imul(p,ct)|0,u=u+Math.imul(a,lt)|0,r=(r=r+Math.imul(a,at)|0)+Math.imul(v,lt)|0,f=f+Math.imul(v,at)|0,u=u+Math.imul(c,vt)|0,r=(r=r+Math.imul(c,yt)|0)+Math.imul(l,vt)|0,f=f+Math.imul(l,yt)|0,ai=(e+(u=u+Math.imul(s,pt)|0)|0)+((8191&(r=(r=r+Math.imul(s,wt)|0)+Math.imul(h,pt)|0))<<13)|0,e=((f=f+Math.imul(h,wt)|0)+(r>>>13)|0)+(ai>>>26)|0,ai&=67108863,u=Math.imul(k,ot),r=(r=Math.imul(k,st))+Math.imul(d,ot)|0,f=Math.imul(d,st),u=u+Math.imul(w,ht)|0,r=(r=r+Math.imul(w,ct)|0)+Math.imul(b,ht)|0,f=f+Math.imul(b,ct)|0,u=u+Math.imul(y,lt)|0,r=(r=r+Math.imul(y,at)|0)+Math.imul(p,lt)|0,f=f+Math.imul(p,at)|0,u=u+Math.imul(a,vt)|0,r=(r=r+Math.imul(a,yt)|0)+Math.imul(v,vt)|0,f=f+Math.imul(v,yt)|0,u=u+Math.imul(c,pt)|0,r=(r=r+Math.imul(c,wt)|0)+Math.imul(l,pt)|0,f=f+Math.imul(l,wt)|0,vi=(e+(u=u+Math.imul(s,bt)|0)|0)+((8191&(r=(r=r+Math.imul(s,kt)|0)+Math.imul(h,bt)|0))<<13)|0,e=((f=f+Math.imul(h,kt)|0)+(r>>>13)|0)+(vi>>>26)|0,vi&=67108863,u=Math.imul(g,ot),r=(r=Math.imul(g,st))+Math.imul(nt,ot)|0,f=Math.imul(nt,st),u=u+Math.imul(k,ht)|0,r=(r=r+Math.imul(k,ct)|0)+Math.imul(d,ht)|0,f=f+Math.imul(d,ct)|0,u=u+Math.imul(w,lt)|0,r=(r=r+Math.imul(w,at)|0)+Math.imul(b,lt)|0,f=f+Math.imul(b,at)|0,u=u+Math.imul(y,vt)|0,r=(r=r+Math.imul(y,yt)|0)+Math.imul(p,vt)|0,f=f+Math.imul(p,yt)|0,u=u+Math.imul(a,pt)|0,r=(r=r+Math.imul(a,wt)|0)+Math.imul(v,pt)|0,f=f+Math.imul(v,wt)|0,u=u+Math.imul(c,bt)|0,r=(r=r+Math.imul(c,kt)|0)+Math.imul(l,bt)|0,f=f+Math.imul(l,kt)|0,yi=(e+(u=u+Math.imul(s,dt)|0)|0)+((8191&(r=(r=r+Math.imul(s,gt)|0)+Math.imul(h,dt)|0))<<13)|0,e=((f=f+Math.imul(h,gt)|0)+(r>>>13)|0)+(yi>>>26)|0,yi&=67108863,u=Math.imul(tt,ot),r=(r=Math.imul(tt,st))+Math.imul(it,ot)|0,f=Math.imul(it,st),u=u+Math.imul(g,ht)|0,r=(r=r+Math.imul(g,ct)|0)+Math.imul(nt,ht)|0,f=f+Math.imul(nt,ct)|0,u=u+Math.imul(k,lt)|0,r=(r=r+Math.imul(k,at)|0)+Math.imul(d,lt)|0,f=f+Math.imul(d,at)|0,u=u+Math.imul(w,vt)|0,r=(r=r+Math.imul(w,yt)|0)+Math.imul(b,vt)|0,f=f+Math.imul(b,yt)|0,u=u+Math.imul(y,pt)|0,r=(r=r+Math.imul(y,wt)|0)+Math.imul(p,pt)|0,f=f+Math.imul(p,wt)|0,u=u+Math.imul(a,bt)|0,r=(r=r+Math.imul(a,kt)|0)+Math.imul(v,bt)|0,f=f+Math.imul(v,kt)|0,u=u+Math.imul(c,dt)|0,r=(r=r+Math.imul(c,gt)|0)+Math.imul(l,dt)|0,f=f+Math.imul(l,gt)|0,pi=(e+(u=u+Math.imul(s,ni)|0)|0)+((8191&(r=(r=r+Math.imul(s,ti)|0)+Math.imul(h,ni)|0))<<13)|0,e=((f=f+Math.imul(h,ti)|0)+(r>>>13)|0)+(pi>>>26)|0,pi&=67108863,u=Math.imul(rt,ot),r=(r=Math.imul(rt,st))+Math.imul(ut,ot)|0,f=Math.imul(ut,st),u=u+Math.imul(tt,ht)|0,r=(r=r+Math.imul(tt,ct)|0)+Math.imul(it,ht)|0,f=f+Math.imul(it,ct)|0,u=u+Math.imul(g,lt)|0,r=(r=r+Math.imul(g,at)|0)+Math.imul(nt,lt)|0,f=f+Math.imul(nt,at)|0,u=u+Math.imul(k,vt)|0,r=(r=r+Math.imul(k,yt)|0)+Math.imul(d,vt)|0,f=f+Math.imul(d,yt)|0,u=u+Math.imul(w,pt)|0,r=(r=r+Math.imul(w,wt)|0)+Math.imul(b,pt)|0,f=f+Math.imul(b,wt)|0,u=u+Math.imul(y,bt)|0,r=(r=r+Math.imul(y,kt)|0)+Math.imul(p,bt)|0,f=f+Math.imul(p,kt)|0,u=u+Math.imul(a,dt)|0,r=(r=r+Math.imul(a,gt)|0)+Math.imul(v,dt)|0,f=f+Math.imul(v,gt)|0,u=u+Math.imul(c,ni)|0,r=(r=r+Math.imul(c,ti)|0)+Math.imul(l,ni)|0,f=f+Math.imul(l,ti)|0,wi=(e+(u=u+Math.imul(s,ii)|0)|0)+((8191&(r=(r=r+Math.imul(s,ri)|0)+Math.imul(h,ii)|0))<<13)|0,e=((f=f+Math.imul(h,ri)|0)+(r>>>13)|0)+(wi>>>26)|0,wi&=67108863,u=Math.imul(ft,ot),r=(r=Math.imul(ft,st))+Math.imul(et,ot)|0,f=Math.imul(et,st),u=u+Math.imul(rt,ht)|0,r=(r=r+Math.imul(rt,ct)|0)+Math.imul(ut,ht)|0,f=f+Math.imul(ut,ct)|0,u=u+Math.imul(tt,lt)|0,r=(r=r+Math.imul(tt,at)|0)+Math.imul(it,lt)|0,f=f+Math.imul(it,at)|0,u=u+Math.imul(g,vt)|0,r=(r=r+Math.imul(g,yt)|0)+Math.imul(nt,vt)|0,f=f+Math.imul(nt,yt)|0,u=u+Math.imul(k,pt)|0,r=(r=r+Math.imul(k,wt)|0)+Math.imul(d,pt)|0,f=f+Math.imul(d,wt)|0,u=u+Math.imul(w,bt)|0,r=(r=r+Math.imul(w,kt)|0)+Math.imul(b,bt)|0,f=f+Math.imul(b,kt)|0,u=u+Math.imul(y,dt)|0,r=(r=r+Math.imul(y,gt)|0)+Math.imul(p,dt)|0,f=f+Math.imul(p,gt)|0,u=u+Math.imul(a,ni)|0,r=(r=r+Math.imul(a,ti)|0)+Math.imul(v,ni)|0,f=f+Math.imul(v,ti)|0,u=u+Math.imul(c,ii)|0,r=(r=r+Math.imul(c,ri)|0)+Math.imul(l,ii)|0,f=f+Math.imul(l,ri)|0,bi=(e+(u=u+Math.imul(s,ui)|0)|0)+((8191&(r=(r=r+Math.imul(s,fi)|0)+Math.imul(h,ui)|0))<<13)|0,e=((f=f+Math.imul(h,fi)|0)+(r>>>13)|0)+(bi>>>26)|0,bi&=67108863,u=Math.imul(ft,ht),r=(r=Math.imul(ft,ct))+Math.imul(et,ht)|0,f=Math.imul(et,ct),u=u+Math.imul(rt,lt)|0,r=(r=r+Math.imul(rt,at)|0)+Math.imul(ut,lt)|0,f=f+Math.imul(ut,at)|0,u=u+Math.imul(tt,vt)|0,r=(r=r+Math.imul(tt,yt)|0)+Math.imul(it,vt)|0,f=f+Math.imul(it,yt)|0,u=u+Math.imul(g,pt)|0,r=(r=r+Math.imul(g,wt)|0)+Math.imul(nt,pt)|0,f=f+Math.imul(nt,wt)|0,u=u+Math.imul(k,bt)|0,r=(r=r+Math.imul(k,kt)|0)+Math.imul(d,bt)|0,f=f+Math.imul(d,kt)|0,u=u+Math.imul(w,dt)|0,r=(r=r+Math.imul(w,gt)|0)+Math.imul(b,dt)|0,f=f+Math.imul(b,gt)|0,u=u+Math.imul(y,ni)|0,r=(r=r+Math.imul(y,ti)|0)+Math.imul(p,ni)|0,f=f+Math.imul(p,ti)|0,u=u+Math.imul(a,ii)|0,r=(r=r+Math.imul(a,ri)|0)+Math.imul(v,ii)|0,f=f+Math.imul(v,ri)|0,ki=(e+(u=u+Math.imul(c,ui)|0)|0)+((8191&(r=(r=r+Math.imul(c,fi)|0)+Math.imul(l,ui)|0))<<13)|0,e=((f=f+Math.imul(l,fi)|0)+(r>>>13)|0)+(ki>>>26)|0,ki&=67108863,u=Math.imul(ft,lt),r=(r=Math.imul(ft,at))+Math.imul(et,lt)|0,f=Math.imul(et,at),u=u+Math.imul(rt,vt)|0,r=(r=r+Math.imul(rt,yt)|0)+Math.imul(ut,vt)|0,f=f+Math.imul(ut,yt)|0,u=u+Math.imul(tt,pt)|0,r=(r=r+Math.imul(tt,wt)|0)+Math.imul(it,pt)|0,f=f+Math.imul(it,wt)|0,u=u+Math.imul(g,bt)|0,r=(r=r+Math.imul(g,kt)|0)+Math.imul(nt,bt)|0,f=f+Math.imul(nt,kt)|0,u=u+Math.imul(k,dt)|0,r=(r=r+Math.imul(k,gt)|0)+Math.imul(d,dt)|0,f=f+Math.imul(d,gt)|0,u=u+Math.imul(w,ni)|0,r=(r=r+Math.imul(w,ti)|0)+Math.imul(b,ni)|0,f=f+Math.imul(b,ti)|0,u=u+Math.imul(y,ii)|0,r=(r=r+Math.imul(y,ri)|0)+Math.imul(p,ii)|0,f=f+Math.imul(p,ri)|0,di=(e+(u=u+Math.imul(a,ui)|0)|0)+((8191&(r=(r=r+Math.imul(a,fi)|0)+Math.imul(v,ui)|0))<<13)|0,e=((f=f+Math.imul(v,fi)|0)+(r>>>13)|0)+(di>>>26)|0,di&=67108863,u=Math.imul(ft,vt),r=(r=Math.imul(ft,yt))+Math.imul(et,vt)|0,f=Math.imul(et,yt),u=u+Math.imul(rt,pt)|0,r=(r=r+Math.imul(rt,wt)|0)+Math.imul(ut,pt)|0,f=f+Math.imul(ut,wt)|0,u=u+Math.imul(tt,bt)|0,r=(r=r+Math.imul(tt,kt)|0)+Math.imul(it,bt)|0,f=f+Math.imul(it,kt)|0,u=u+Math.imul(g,dt)|0,r=(r=r+Math.imul(g,gt)|0)+Math.imul(nt,dt)|0,f=f+Math.imul(nt,gt)|0,u=u+Math.imul(k,ni)|0,r=(r=r+Math.imul(k,ti)|0)+Math.imul(d,ni)|0,f=f+Math.imul(d,ti)|0,u=u+Math.imul(w,ii)|0,r=(r=r+Math.imul(w,ri)|0)+Math.imul(b,ii)|0,f=f+Math.imul(b,ri)|0,gi=(e+(u=u+Math.imul(y,ui)|0)|0)+((8191&(r=(r=r+Math.imul(y,fi)|0)+Math.imul(p,ui)|0))<<13)|0,e=((f=f+Math.imul(p,fi)|0)+(r>>>13)|0)+(gi>>>26)|0,gi&=67108863,u=Math.imul(ft,pt),r=(r=Math.imul(ft,wt))+Math.imul(et,pt)|0,f=Math.imul(et,wt),u=u+Math.imul(rt,bt)|0,r=(r=r+Math.imul(rt,kt)|0)+Math.imul(ut,bt)|0,f=f+Math.imul(ut,kt)|0,u=u+Math.imul(tt,dt)|0,r=(r=r+Math.imul(tt,gt)|0)+Math.imul(it,dt)|0,f=f+Math.imul(it,gt)|0,u=u+Math.imul(g,ni)|0,r=(r=r+Math.imul(g,ti)|0)+Math.imul(nt,ni)|0,f=f+Math.imul(nt,ti)|0,u=u+Math.imul(k,ii)|0,r=(r=r+Math.imul(k,ri)|0)+Math.imul(d,ii)|0,f=f+Math.imul(d,ri)|0,nr=(e+(u=u+Math.imul(w,ui)|0)|0)+((8191&(r=(r=r+Math.imul(w,fi)|0)+Math.imul(b,ui)|0))<<13)|0,e=((f=f+Math.imul(b,fi)|0)+(r>>>13)|0)+(nr>>>26)|0,nr&=67108863,u=Math.imul(ft,bt),r=(r=Math.imul(ft,kt))+Math.imul(et,bt)|0,f=Math.imul(et,kt),u=u+Math.imul(rt,dt)|0,r=(r=r+Math.imul(rt,gt)|0)+Math.imul(ut,dt)|0,f=f+Math.imul(ut,gt)|0,u=u+Math.imul(tt,ni)|0,r=(r=r+Math.imul(tt,ti)|0)+Math.imul(it,ni)|0,f=f+Math.imul(it,ti)|0,u=u+Math.imul(g,ii)|0,r=(r=r+Math.imul(g,ri)|0)+Math.imul(nt,ii)|0,f=f+Math.imul(nt,ri)|0,tr=(e+(u=u+Math.imul(k,ui)|0)|0)+((8191&(r=(r=r+Math.imul(k,fi)|0)+Math.imul(d,ui)|0))<<13)|0,e=((f=f+Math.imul(d,fi)|0)+(r>>>13)|0)+(tr>>>26)|0,tr&=67108863,u=Math.imul(ft,dt),r=(r=Math.imul(ft,gt))+Math.imul(et,dt)|0,f=Math.imul(et,gt),u=u+Math.imul(rt,ni)|0,r=(r=r+Math.imul(rt,ti)|0)+Math.imul(ut,ni)|0,f=f+Math.imul(ut,ti)|0,u=u+Math.imul(tt,ii)|0,r=(r=r+Math.imul(tt,ri)|0)+Math.imul(it,ii)|0,f=f+Math.imul(it,ri)|0,ir=(e+(u=u+Math.imul(g,ui)|0)|0)+((8191&(r=(r=r+Math.imul(g,fi)|0)+Math.imul(nt,ui)|0))<<13)|0,e=((f=f+Math.imul(nt,fi)|0)+(r>>>13)|0)+(ir>>>26)|0,ir&=67108863,u=Math.imul(ft,ni),r=(r=Math.imul(ft,ti))+Math.imul(et,ni)|0,f=Math.imul(et,ti),u=u+Math.imul(rt,ii)|0,r=(r=r+Math.imul(rt,ri)|0)+Math.imul(ut,ii)|0,f=f+Math.imul(ut,ri)|0,rr=(e+(u=u+Math.imul(tt,ui)|0)|0)+((8191&(r=(r=r+Math.imul(tt,fi)|0)+Math.imul(it,ui)|0))<<13)|0,e=((f=f+Math.imul(it,fi)|0)+(r>>>13)|0)+(rr>>>26)|0,rr&=67108863,u=Math.imul(ft,ii),r=(r=Math.imul(ft,ri))+Math.imul(et,ii)|0,f=Math.imul(et,ri),ur=(e+(u=u+Math.imul(rt,ui)|0)|0)+((8191&(r=(r=r+Math.imul(rt,fi)|0)+Math.imul(ut,ui)|0))<<13)|0,e=((f=f+Math.imul(ut,fi)|0)+(r>>>13)|0)+(ur>>>26)|0,ur&=67108863,fr=(e+(u=Math.imul(ft,ui))|0)+((8191&(r=(r=Math.imul(ft,fi))+Math.imul(et,ui)|0))<<13)|0,e=((f=Math.imul(et,fi))+(r>>>13)|0)+(fr>>>26)|0,fr&=67108863,o[0]=si,o[1]=hi,o[2]=ci,o[3]=li,o[4]=ai,o[5]=vi,o[6]=yi,o[7]=pi,o[8]=wi,o[9]=bi,o[10]=ki,o[11]=di,o[12]=gi,o[13]=nr,o[14]=tr,o[15]=ir,o[16]=rr,o[17]=ur,o[18]=fr,0!==e&&(o[19]=e,i.length++),i};Math.imul||(p=k);r.prototype.mulTo=function(n,t){var i=this.length+n.length;return 10===this.length&&10===n.length?p(this,n,t):i<63?k(this,n,t):i<1024?function(n,t,i){var u;i.negative=t.negative^n.negative;i.length=n.length+t.length;for(var f=0,e=0,r=0;r<i.length-1;r++){u=e;e=0;for(var s=67108863&f,l=Math.min(r,t.length-1),o=Math.max(0,r-n.length+1);o<=l;o++){var a=r-o,c=(0|n.words[a])*(0|t.words[o]),h=67108863&c;s=67108863&(h=h+s|0);e+=(u=(u=u+(c/67108864|0)|0)+(h>>>26)|0)>>>26;u&=67108863}i.words[r]=s;f=u;u=e}return 0!==f?i.words[r]=f:i.length--,i.strip()}(this,n,t):d(this,n,t)};s.prototype.makeRBT=function(n){for(var i=new Array(n),u=r.prototype._countBits(n)-1,t=0;t<n;t++)i[t]=this.revBin(t,u,n);return i};s.prototype.revBin=function(n,t,i){if(0===n||n===i-1)return n;for(var u=0,r=0;r<t;r++)u|=(1&n)<<t-r-1,n>>=1;return u};s.prototype.permute=function(n,t,i,r,u,f){for(var e=0;e<f;e++)r[e]=t[n[e]],u[e]=i[n[e]]};s.prototype.transform=function(n,t,i,r,u,f){var s;for(this.permute(f,n,t,i,r,u),s=1;s<u;s<<=1)for(var v=s<<1,y=Math.cos(2*Math.PI/v),p=Math.sin(2*Math.PI/v),o=0;o<u;o+=v)for(var h=y,c=p,e=0;e<s;e++){var b=i[o+e],k=r[o+e],l=i[o+e+s],a=r[o+e+s],w=h*l-c*a;a=h*a+c*l;l=w;i[o+e]=b+l;r[o+e]=k+a;i[o+e+s]=b-l;r[o+e+s]=k-a;e!==v&&(w=y*h-p*c,c=y*c+p*h,h=w)}};s.prototype.guessLen13b=function(n,t){for(var i=1|Math.max(t,n),u=1&i,r=0,i=i/2|0;i;i>>>=1)r++;return 1<<r+1+u};s.prototype.conjugate=function(n,t,i){var r,u;if(!(i<=1))for(r=0;r<i/2;r++)u=n[r],n[r]=n[i-r-1],n[i-r-1]=u,u=t[r],t[r]=-t[i-r-1],t[i-r-1]=-u};s.prototype.normalize13b=function(n,t){for(var r,u=0,i=0;i<t/2;i++)r=8192*Math.round(n[2*i+1]/t)+Math.round(n[2*i]/t)+u,n[i]=67108863&r,u=r<67108864?0:r/67108864|0;return n};s.prototype.convert13b=function(n,t,i,r){for(var e=0,u=0;u<t;u++)e+=0|n[u],i[2*u]=8191&e,e>>>=13,i[2*u+1]=8191&e,e>>>=13;for(u=2*t;u<r;++u)i[u]=0;f(0===e);f(0==(-8192&e))};s.prototype.stub=function(n){for(var i=new Array(n),t=0;t<n;t++)i[t]=0;return i};s.prototype.mulp=function(n,t,i){var r=2*this.guessLen13b(n.length,t.length),h=this.makeRBT(r),o=this.stub(r),a=new Array(r),f=new Array(r),e=new Array(r),v=new Array(r),c=new Array(r),l=new Array(r),s=i.words,u,y;for(s.length=r,this.convert13b(n.words,n.length,a,r),this.convert13b(t.words,t.length,v,r),this.transform(a,o,f,e,r,h),this.transform(v,o,c,l,r,h),u=0;u<r;u++)y=f[u]*c[u]-e[u]*l[u],e[u]=f[u]*l[u]+e[u]*c[u],f[u]=y;return this.conjugate(f,e,r),this.transform(f,e,s,o,r,h),this.conjugate(s,o,r),this.normalize13b(s,r),i.negative=n.negative^t.negative,i.length=n.length+t.length,i.strip()};r.prototype.mul=function(n){var t=new r(null);return t.words=new Array(this.length+n.length),this.mulTo(n,t)};r.prototype.mulf=function(n){var t=new r(null);return t.words=new Array(this.length+n.length),d(this,n,t)};r.prototype.imul=function(n){return this.clone().mulTo(n,this)};r.prototype.imuln=function(n){var t,i,r,u;for(f("number"==typeof n),f(n<67108864),t=0,i=0;i<this.length;i++)r=(0|this.words[i])*n,u=(67108863&r)+(67108863&t),t>>=26,t+=r/67108864|0,t+=u>>>26,this.words[i]=67108863&u;return 0!==t&&(this.words[i]=t,this.length++),this};r.prototype.muln=function(n){return this.clone().imuln(n)};r.prototype.sqr=function(){return this.mul(this)};r.prototype.isqr=function(){return this.imul(this.clone())};r.prototype.pow=function(n){var u=function(n){for(var u,r,i=new Array(n.bitLength()),t=0;t<i.length;t++)u=t/26|0,r=t%26,i[t]=(n.words[u]&1<<r)>>>r;return i}(n),i,t,f;if(0===u.length)return new r(1);for(i=this,t=0;t<u.length&&0===u[t];t++,i=i.sqr());if(++t<u.length)for(f=i.sqr();t<u.length;t++,f=f.sqr())0!==u[t]&&(i=i.mul(f));return i};r.prototype.iushln=function(n){var r,e,o;f("number"==typeof n&&n>=0);var t,i=n%26,u=(n-i)/26,s=67108863>>>26-i<<26-i;if(0!==i){for(r=0,t=0;t<this.length;t++)e=this.words[t]&s,o=(0|this.words[t])-e<<i,this.words[t]=o|r,r=e>>>26-i;r&&(this.words[t]=r,this.length++)}if(0!==u){for(t=this.length-1;t>=0;t--)this.words[t+u]=this.words[t];for(t=0;t<u;t++)this.words[t]=0;this.length+=u}return this.strip()};r.prototype.ishln=function(n){return f(0===this.negative),this.iushln(n)};r.prototype.iushrn=function(n,t,i){var s,r,o,c;f("number"==typeof n&&n>=0);s=t?(t-t%26)/26:0;var h=n%26,u=Math.min((n-h)/26,this.length),l=67108863^67108863>>>h<<h,e=i;if(s-=u,s=Math.max(0,s),e){for(r=0;r<u;r++)e.words[r]=this.words[r];e.length=u}if(0!==u)if(this.length>u)for(this.length-=u,r=0;r<this.length;r++)this.words[r]=this.words[r+u];else this.words[0]=0,this.length=1;for(o=0,r=this.length-1;r>=0&&(0!==o||r>=s);r--)c=0|this.words[r],this.words[r]=o<<26-h|c>>>h,o=c&l;return e&&0!==o&&(e.words[e.length++]=o),0===this.length&&(this.words[0]=0,this.length=1),this.strip()};r.prototype.ishrn=function(n,t,i){return f(0===this.negative),this.iushrn(n,t,i)};r.prototype.shln=function(n){return this.clone().ishln(n)};r.prototype.ushln=function(n){return this.clone().iushln(n)};r.prototype.shrn=function(n){return this.clone().ishrn(n)};r.prototype.ushrn=function(n){return this.clone().iushrn(n)};r.prototype.testn=function(n){f("number"==typeof n&&n>=0);var t=n%26,i=(n-t)/26,r=1<<t;return!(this.length<=i||!(this.words[i]&r))};r.prototype.imaskn=function(n){var t,i,r;return(f("number"==typeof n&&n>=0),t=n%26,i=(n-t)/26,f(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)?this:((0!==t&&i++,this.length=Math.min(i,this.length),0!==t)&&(r=67108863^67108863>>>t<<t,this.words[this.length-1]&=r),this.strip())};r.prototype.maskn=function(n){return this.clone().imaskn(n)};r.prototype.iaddn=function(n){return f("number"==typeof n),f(n<67108864),n<0?this.isubn(-n):0!==this.negative?1===this.length&&(0|this.words[0])<n?(this.words[0]=n-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this):this._iaddn(n)};r.prototype._iaddn=function(n){this.words[0]+=n;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this};r.prototype.isubn=function(n){if(f("number"==typeof n),f(n<67108864),n<0)return this.iaddn(-n);if(0!==this.negative)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()};r.prototype.addn=function(n){return this.clone().iaddn(n)};r.prototype.subn=function(n){return this.clone().isubn(n)};r.prototype.iabs=function(){return this.negative=0,this};r.prototype.abs=function(){return this.clone().iabs()};r.prototype._ishlnsubmul=function(n,t,i){var r,s=n.length+i,e,u,o;for(this._expand(s),u=0,r=0;r<n.length;r++)e=(0|this.words[r+i])+u,o=(0|n.words[r])*t,u=((e-=67108863&o)>>26)-(o/67108864|0),this.words[r+i]=67108863&e;for(;r<this.length-i;r++)u=(e=(0|this.words[r+i])+u)>>26,this.words[r+i]=67108863&e;if(0===u)return this.strip();for(f(-1===u),u=0,r=0;r<this.length;r++)u=(e=-(0|this.words[r])+u)>>26,this.words[r]=67108863&e;return this.negative=1,this.strip()};r.prototype._wordDiv=function(n,t){var s=(this.length,n.length),i=this.clone(),u=n,l=0|u.words[u.length-1],f,h,c,a,e,o;if(0!=(s=26-this._countBits(l))&&(u=u.ushln(s),i.iushln(s),l=0|u.words[u.length-1]),h=i.length-u.length,"mod"!==t)for((f=new r(null)).length=h+1,f.words=new Array(f.length),c=0;c<f.length;c++)f.words[c]=0;for(a=i.clone()._ishlnsubmul(u,1,h),0===a.negative&&(i=a,f&&(f.words[h]=1)),e=h-1;e>=0;e--){for(o=67108864*(0|i.words[u.length+e])+(0|i.words[u.length+e-1]),o=Math.min(o/l|0,67108863),i._ishlnsubmul(u,o,e);0!==i.negative;)o--,i.negative=0,i._ishlnsubmul(u,1,e),i.isZero()||(i.negative^=1);f&&(f.words[e]=o)}return f&&f.strip(),i.strip(),"div"!==t&&0!==s&&i.iushrn(s),{div:f||null,mod:i}};r.prototype.divmod=function(n,t,i){return f(!n.isZero()),this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===n.negative?(u=this.neg().divmod(n,t),"mod"!==t&&(o=u.div.neg()),"div"!==t&&(e=u.mod.neg(),i&&0!==e.negative&&e.iadd(n)),{div:o,mod:e}):0===this.negative&&0!==n.negative?(u=this.divmod(n.neg(),t),"mod"!==t&&(o=u.div.neg()),{div:o,mod:u.mod}):0!=(this.negative&n.negative)?(u=this.neg().divmod(n.neg(),t),"div"!==t&&(e=u.mod.neg(),i&&0!==e.negative&&e.isub(n)),{div:u.div,mod:e}):n.length>this.length||this.cmp(n)<0?{div:new r(0),mod:this}:1===n.length?"div"===t?{div:this.divn(n.words[0]),mod:null}:"mod"===t?{div:null,mod:new r(this.modn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new r(this.modn(n.words[0]))}:this._wordDiv(n,t);var o,e,u};r.prototype.div=function(n){return this.divmod(n,"div",!1).div};r.prototype.mod=function(n){return this.divmod(n,"mod",!1).mod};r.prototype.umod=function(n){return this.divmod(n,"mod",!0).mod};r.prototype.divRound=function(n){var t=this.divmod(n);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(n):t.mod,u=n.ushrn(1),f=n.andln(1),i=r.cmp(u);return i<0||1===f&&0===i?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)};r.prototype.modn=function(n){f(n<=67108863);for(var r=67108864%n,t=0,i=this.length-1;i>=0;i--)t=(r*t+(0|this.words[i]))%n;return t};r.prototype.idivn=function(n){var i,t,r;for(f(n<=67108863),i=0,t=this.length-1;t>=0;t--)r=(0|this.words[t])+67108864*i,this.words[t]=r/n|0,i=r%n;return this.strip()};r.prototype.divn=function(n){return this.clone().idivn(n)};r.prototype.egcd=function(n){var t,i,l,a,o,v,s,y;f(0===n.negative);f(!n.isZero());t=this;i=n.clone();t=0!==t.negative?t.umod(n):t.clone();for(var h=new r(1),c=new r(0),u=new r(0),e=new r(1),p=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++p;for(l=i.clone(),a=t.clone();!t.isZero();){for(o=0,v=1;0==(t.words[0]&v)&&o<26;++o,v<<=1);if(o>0)for(t.iushrn(o);o-->0;)(h.isOdd()||c.isOdd())&&(h.iadd(l),c.isub(a)),h.iushrn(1),c.iushrn(1);for(s=0,y=1;0==(i.words[0]&y)&&s<26;++s,y<<=1);if(s>0)for(i.iushrn(s);s-->0;)(u.isOdd()||e.isOdd())&&(u.iadd(l),e.isub(a)),u.iushrn(1),e.iushrn(1);t.cmp(i)>=0?(t.isub(i),h.isub(u),c.isub(e)):(i.isub(t),u.isub(h),e.isub(c))}return{a:u,b:e,gcd:i.iushln(p)}};r.prototype._invmp=function(n){var h,t,i,o,c,s,l;f(0===n.negative);f(!n.isZero());t=this;i=n.clone();t=0!==t.negative?t.umod(n):t.clone();for(var u=new r(1),e=new r(0),a=i.clone();t.cmpn(1)>0&&i.cmpn(1)>0;){for(o=0,c=1;0==(t.words[0]&c)&&o<26;++o,c<<=1);if(o>0)for(t.iushrn(o);o-->0;)u.isOdd()&&u.iadd(a),u.iushrn(1);for(s=0,l=1;0==(i.words[0]&l)&&s<26;++s,l<<=1);if(s>0)for(i.iushrn(s);s-->0;)e.isOdd()&&e.iadd(a),e.iushrn(1);t.cmp(i)>=0?(t.isub(i),u.isub(e)):(i.isub(t),e.isub(u))}return(h=0===t.cmpn(1)?u:e).cmpn(0)<0&&h.iadd(n),h};r.prototype.gcd=function(n){var i,t,r,u,f;if(this.isZero())return n.abs();if(n.isZero())return this.abs();for(i=this.clone(),t=n.clone(),i.negative=0,t.negative=0,r=0;i.isEven()&&t.isEven();r++)i.iushrn(1),t.iushrn(1);for(;;){for(;i.isEven();)i.iushrn(1);for(;t.isEven();)t.iushrn(1);if(u=i.cmp(t),u<0)f=i,i=t,t=f;else if(0===u||0===t.cmpn(1))break;i.isub(t)}return t.iushln(r)};r.prototype.invm=function(n){return this.egcd(n).a.umod(n)};r.prototype.isEven=function(){return 0==(1&this.words[0])};r.prototype.isOdd=function(){return 1==(1&this.words[0])};r.prototype.andln=function(n){return this.words[0]&n};r.prototype.bincn=function(n){var t,i,u;f("number"==typeof n);var e=n%26,r=(n-e)/26,o=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=o,this;for(t=o,i=r;0!==t&&i<this.length;i++)u=0|this.words[i],t=(u+=t)>>>26,u&=67108863,this.words[i]=u;return 0!==t&&(this.words[i]=t,this.length++),this};r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]};r.prototype.cmpn=function(n){var t,i=n<0,r;return 0!==this.negative&&!i?-1:0===this.negative&&i?1:((this.strip(),this.length>1)?t=1:(i&&(n=-n),f(n<=67108863,"Number is too big"),r=0|this.words[0],t=r===n?0:r<n?-1:1),0!==this.negative?0|-t:t)};r.prototype.cmp=function(n){if(0!==this.negative&&0===n.negative)return-1;if(0===this.negative&&0!==n.negative)return 1;var t=this.ucmp(n);return 0!==this.negative?0|-t:t};r.prototype.ucmp=function(n){var i,t,r,u;if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(i=0,t=this.length-1;t>=0;t--)if(r=0|this.words[t],u=0|n.words[t],r!==u){r<u?i=-1:r>u&&(i=1);break}return i};r.prototype.gtn=function(n){return 1===this.cmpn(n)};r.prototype.gt=function(n){return 1===this.cmp(n)};r.prototype.gten=function(n){return this.cmpn(n)>=0};r.prototype.gte=function(n){return this.cmp(n)>=0};r.prototype.ltn=function(n){return-1===this.cmpn(n)};r.prototype.lt=function(n){return-1===this.cmp(n)};r.prototype.lten=function(n){return this.cmpn(n)<=0};r.prototype.lte=function(n){return this.cmp(n)<=0};r.prototype.eqn=function(n){return 0===this.cmpn(n)};r.prototype.eq=function(n){return 0===this.cmp(n)};r.red=function(n){return new e(n)};r.prototype.toRed=function(n){return f(!this.red,"Already a number in reduction context"),f(0===this.negative,"red works only with positives"),n.convertTo(this)._forceRed(n)};r.prototype.fromRed=function(){return f(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)};r.prototype._forceRed=function(n){return this.red=n,this};r.prototype.forceRed=function(n){return f(!this.red,"Already a number in reduction context"),this._forceRed(n)};r.prototype.redAdd=function(n){return f(this.red,"redAdd works only with red numbers"),this.red.add(this,n)};r.prototype.redIAdd=function(n){return f(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,n)};r.prototype.redSub=function(n){return f(this.red,"redSub works only with red numbers"),this.red.sub(this,n)};r.prototype.redISub=function(n){return f(this.red,"redISub works only with red numbers"),this.red.isub(this,n)};r.prototype.redShl=function(n){return f(this.red,"redShl works only with red numbers"),this.red.shl(this,n)};r.prototype.redMul=function(n){return f(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.mul(this,n)};r.prototype.redIMul=function(n){return f(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.imul(this,n)};r.prototype.redSqr=function(){return f(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)};r.prototype.redISqr=function(){return f(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)};r.prototype.redSqrt=function(){return f(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)};r.prototype.redInvm=function(){return f(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)};r.prototype.redNeg=function(){return f(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)};r.prototype.redPow=function(n){return f(this.red&&!n.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,n)};a={k256:null,p224:null,p192:null,p25519:null};o.prototype._tmp=function(){var n=new r(null);return n.words=new Array(Math.ceil(this.n/13)),n};o.prototype.ireduce=function(n){var i,t=n,r;do this.split(t,this.tmp),i=(t=(t=this.imulK(t)).iadd(this.tmp)).bitLength();while(i>this.n);return r=i<this.n?-1:t.ucmp(this.p),0===r?(t.words[0]=0,t.length=1):r>0?t.isub(this.p):t.strip(),t};o.prototype.split=function(n,t){n.iushrn(this.n,0,t)};o.prototype.imulK=function(n){return n.imul(this.k)};c(l,o);l.prototype.split=function(n,t){for(var r,u,f=4194303,e=Math.min(n.length,9),i=0;i<e;i++)t.words[i]=n.words[i];if(t.length=e,n.length<=9)return n.words[0]=0,void(n.length=1);for(r=n.words[9],t.words[t.length++]=r&f,i=10;i<n.length;i++)u=0|n.words[i],n.words[i-10]=(u&f)<<4|r>>>22,r=u;r>>>=22;n.words[i-10]=r;n.length-=0===r&&n.length>10?10:9};l.prototype.imulK=function(n){var t,i,r;for(n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2,t=0,i=0;i<n.length;i++)r=0|n.words[i],t+=977*r,n.words[i]=67108863&t,t=64*r+(t/67108864|0);return 0===n.words[n.length-1]&&(n.length--,0===n.words[n.length-1]&&n.length--),n};c(g,o);c(nt,o);c(v,o);v.prototype.imulK=function(n){for(var r,u,t=0,i=0;i<n.length;i++)r=19*(0|n.words[i])+t,u=67108863&r,r>>>=26,n.words[i]=u,t=r;return 0!==t&&(n.words[n.length++]=t),n};r._prime=function(n){if(a[n])return a[n];var t;if("k256"===n)t=new l;else if("p224"===n)t=new g;else if("p192"===n)t=new nt;else{if("p25519"!==n)throw new Error("Unknown prime "+n);t=new v}return a[n]=t,t};e.prototype._verify1=function(n){f(0===n.negative,"red works only with positives");f(n.red,"red works only with red numbers")};e.prototype._verify2=function(n,t){f(0==(n.negative|t.negative),"red works only with positives");f(n.red&&n.red===t.red,"red works only with red numbers")};e.prototype.imod=function(n){return this.prime?this.prime.ireduce(n)._forceRed(this):n.umod(this.m)._forceRed(this)};e.prototype.neg=function(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)};e.prototype.add=function(n,t){this._verify2(n,t);var i=n.add(t);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)};e.prototype.iadd=function(n,t){this._verify2(n,t);var i=n.iadd(t);return i.cmp(this.m)>=0&&i.isub(this.m),i};e.prototype.sub=function(n,t){this._verify2(n,t);var i=n.sub(t);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)};e.prototype.isub=function(n,t){this._verify2(n,t);var i=n.isub(t);return i.cmpn(0)<0&&i.iadd(this.m),i};e.prototype.shl=function(n,t){return this._verify1(n),this.imod(n.ushln(t))};e.prototype.imul=function(n,t){return this._verify2(n,t),this.imod(n.imul(t))};e.prototype.mul=function(n,t){return this._verify2(n,t),this.imod(n.mul(t))};e.prototype.isqr=function(n){return this.imul(n,n.clone())};e.prototype.sqr=function(n){return this.mul(n,n)};e.prototype.sqrt=function(n){var s,p,t,h,o,u,y;if(n.isZero())return n.clone();if(s=this.m.andln(3),f(s%2==1),3===s)return p=this.m.add(new r(1)).iushrn(2),this.pow(n,p);for(t=this.m.subn(1),h=0;!t.isZero()&&0===t.andln(1);)h++,t.iushrn(1);f(!t.isZero());for(var c=new r(1).toRed(this),w=c.redNeg(),b=this.m.subn(1).iushrn(1),i=this.m.bitLength(),i=new r(2*i*i).toRed(this);0!==this.pow(i,b).cmp(w);)i.redIAdd(w);for(var l=this.pow(i,t),a=this.pow(n,t.addn(1).iushrn(1)),e=this.pow(n,t),v=h;0!==e.cmp(c);){for(o=e,u=0;0!==o.cmp(c);u++)o=o.redSqr();f(u<v);y=this.pow(l,new r(1).iushln(v-u-1));a=a.redMul(y);l=y.redSqr();e=e.redMul(l);v=u}return a};e.prototype.invm=function(n){var t=n._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)};e.prototype.pow=function(n,t){var u,i,l,o,c;if(t.isZero())return new r(1);if(0===t.cmpn(1))return n.clone();for(u=new Array(16),u[0]=new r(1).toRed(this),u[1]=n,i=2;i<u.length;i++)u[i]=this.mul(u[i-1],n);var f=u[0],e=0,h=0,s=t.bitLength()%26;for(0===s&&(s=26),i=t.length-1;i>=0;i--){for(l=t.words[i],o=s-1;o>=0;o--)c=l>>o&1,f!==u[0]&&(f=this.sqr(f)),0!==c||0!==e?(e<<=1,e|=c,(4==++h||0===i&&0===o)&&(f=this.mul(f,u[e]),h=0,e=0)):h=0;s=26}return f};e.prototype.convertTo=function(n){var t=n.umod(this.m);return t===n?t.clone():t};e.prototype.convertFrom=function(n){var t=n.clone();return t.red=null,t};r.mont=function(n){return new h(n)};c(h,e);h.prototype.convertTo=function(n){return this.imod(n.ushln(this.shift))};h.prototype.convertFrom=function(n){var t=this.imod(n.mul(this.rinv));return t.red=null,t};h.prototype.imul=function(n,t){if(n.isZero()||t.isZero())return n.words[0]=0,n.length=1,n;var u=n.imul(t),f=u.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=u.isub(f).iushrn(this.shift),r=i;return i.cmp(this.m)>=0?r=i.isub(this.m):i.cmpn(0)<0&&(r=i.iadd(this.m)),r._forceRed(this)};h.prototype.mul=function(n,t){if(n.isZero()||t.isZero())return new r(0)._forceRed(this);var f=n.mul(t),e=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=f.isub(e).iushrn(this.shift),u=i;return i.cmp(this.m)>=0?u=i.isub(this.m):i.cmpn(0)<0&&(u=i.iadd(this.m)),u._forceRed(this)};h.prototype.invm=function(n){return this.imod(n._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t,this)},{}],17:[function(n,t){function i(n){this.rand=n}var r,f;if(t.exports=function(n){return r||(r=new i(null)),r.generate(n)},t.exports.Rand=i,i.prototype.generate=function(n){return this._rand(n)},"object"==("undefined"==typeof self?"undefined":u(self)))i.prototype._rand=self.crypto&&self.crypto.getRandomValues?function(n){var t=new Uint8Array(n);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?function(n){var t=new Uint8Array(n);return self.msCrypto.getRandomValues(t),t}:function(){throw new Error("Not implemented yet");};else try{f=n("crypto");i.prototype._rand=function(n){return f.randomBytes(n)}}catch(n){i.prototype._rand=function(n){for(var t=new Uint8Array(n),i=0;i<t.length;i++)t[i]=this.rand.getByte();return t}}},{crypto:18}],18:[function(){},{}],19:[function(n,t,i){var r=i;r.utils=n("./hash/utils");r.common=n("./hash/common");r.sha=n("./hash/sha");r.ripemd=n("./hash/ripemd");r.hmac=n("./hash/hmac");r.sha1=r.sha.sha1;r.sha256=r.sha.sha256;r.sha224=r.sha.sha224;r.sha384=r.sha.sha384;r.sha512=r.sha.sha512;r.ripemd160=r.ripemd.ripemd160},{"./hash/common":20,"./hash/hmac":21,"./hash/ripemd":22,"./hash/sha":23,"./hash/utils":24}],20:[function(n,t,i){function r(){this.pending=null;this.pendingTotal=0;this.blockSize=this.constructor.blockSize;this.outSize=this.constructor.outSize;this.hmacStrength=this.constructor.hmacStrength;this.padLength=this.constructor.padLength/8;this.endian="big";this._delta8=this.blockSize/8;this._delta32=this.blockSize/32}var u=n("../hash").utils,f=u.assert;i.BlockHash=r;r.prototype.update=function(n,t){var r,i;if(n=u.toArray(n,t),this.pending=this.pending?this.pending.concat(n):n,this.pendingTotal+=n.length,this.pending.length>=this._delta8)for(r=(n=this.pending).length%this._delta8,this.pending=n.slice(n.length-r,n.length),0===this.pending.length&&(this.pending=null),n=u.join32(n,0,n.length-r,this.endian),i=0;i<n.length;i+=this._delta32)this._update(n,i,i+this._delta32);return this};r.prototype.digest=function(n){return this.update(this._pad()),f(null===this.pending),this._digest(n)};r.prototype._pad=function(){var i=this.pendingTotal,u=this._delta8,f=u-(i+this.padLength)%u,t=new Array(f+this.padLength),n,r;for(t[0]=128,n=1;n<f;n++)t[n]=0;if(i<<=3,"big"===this.endian){for(r=8;r<this.padLength;r++)t[n++]=0;t[n++]=0;t[n++]=0;t[n++]=0;t[n++]=0;t[n++]=i>>>24&255;t[n++]=i>>>16&255;t[n++]=i>>>8&255;t[n++]=255&i}else for(t[n++]=255&i,t[n++]=i>>>8&255,t[n++]=i>>>16&255,t[n++]=i>>>24&255,t[n++]=0,t[n++]=0,t[n++]=0,t[n++]=0,r=8;r<this.padLength;r++)t[n++]=0;return t}},{"../hash":19}],21:[function(n,t){function i(n,t,u){return this instanceof i?(this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,void this._init(r.toArray(t,u))):new i(n,t,u)}var r=n("../hash").utils,u=r.assert;t.exports=i;i.prototype._init=function(n){n.length>this.blockSize&&(n=(new this.Hash).update(n).digest());u(n.length<=this.blockSize);for(var t=n.length;t<this.blockSize;t++)n.push(0);for(t=0;t<n.length;t++)n[t]^=54;for(this.inner=(new this.Hash).update(n),t=0;t<n.length;t++)n[t]^=106;this.outer=(new this.Hash).update(n)};i.prototype.update=function(n,t){return this.inner.update(n,t),this};i.prototype.digest=function(n){return this.outer.update(this.inner.digest()),this.outer.digest(n)}},{"../hash":19}],22:[function(n,t,i){function r(){return this instanceof r?(l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],void(this.endian="little")):new r}function o(n,t,i,r){return n<=15?t^i^r:n<=31?t&i|~t&r:n<=47?(t|~i)^r:n<=63?t&r|i&~r:t^(i|~r)}function a(n){return n<=15?0:n<=31?1518500249:n<=47?1859775393:n<=63?2400959708:2840853838}function v(n){return n<=15?1352829926:n<=31?1548603684:n<=47?1836072691:n<=63?2053994217:0}var s=n("../hash"),u=s.utils,e=u.rotl32,h=u.sum32,f=u.sum32_3,c=u.sum32_4,l=s.common.BlockHash;u.inherits(r,l);i.ripemd160=r;r.blockSize=512;r.outSize=160;r.hmacStrength=192;r.padLength=64;r.prototype._update=function(n,t){for(var r,d=this.h[0],u=this.h[1],s=this.h[2],l=this.h[3],k=this.h[4],rt=d,g=u,nt=s,tt=l,it=k,i=0;i<80;i++)r=h(e(c(d,o(i,u,s,l),n[y[i]+t],a(i)),w[i]),k),d=k,k=l,l=e(s,10),s=u,u=r,r=h(e(c(rt,o(79-i,g,nt,tt),n[p[i]+t],v(i)),b[i]),it),rt=it,it=tt,tt=e(nt,10),nt=g,g=r;r=f(this.h[1],s,tt);this.h[1]=f(this.h[2],l,it);this.h[2]=f(this.h[3],k,rt);this.h[3]=f(this.h[4],d,g);this.h[4]=f(this.h[0],u,nt);this.h[0]=r};r.prototype._digest=function(n){return"hex"===n?u.toHex32(this.h,"little"):u.split32(this.h,"little")};var y=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],p=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],w=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],b=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"../hash":19}],23:[function(n,t,i){function e(){return this instanceof e?(y.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=fi,void(this.W=new Array(64))):new e}function l(){return this instanceof l?(e.call(this),void(this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])):new l}function f(){return this instanceof f?(y.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=ei,void(this.W=new Array(160))):new f}function a(){return this instanceof a?(f.call(this),void(this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428])):new a}function o(){return this instanceof o?(y.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],void(this.W=new Array(80))):new o}function k(n,t,i){return n&t^~n&i}function d(n,t,i){return n&t^n&i^t&i}function ut(n){return s(n,2)^s(n,13)^s(n,22)}function ft(n){return s(n,6)^s(n,11)^s(n,25)}function et(n){return s(n,7)^s(n,18)^n>>>3}function ot(n){return s(n,17)^s(n,19)^n>>>10}function st(n,t,i,r){return 0===n?k(t,i,r):1===n||3===n?function(n,t,i){return n^t^i}(t,i,r):2===n?d(t,i,r):void 0}function ht(n,t,i,r,u){var f=n&i^~n&u;return f<0&&(f+=4294967296),f}function ct(n,t,i,r,u,f){var e=t&r^~t&f;return e<0&&(e+=4294967296),e}function lt(n,t,i,r,u){var f=n&i^n&u^i&u;return f<0&&(f+=4294967296),f}function at(n,t,i,r,u,f){var e=t&r^t&f^r&f;return e<0&&(e+=4294967296),e}function vt(n,t){var i=h(n,t,28)^h(t,n,2)^h(t,n,7);return i<0&&(i+=4294967296),i}function yt(n,t){var i=c(n,t,28)^c(t,n,2)^c(t,n,7);return i<0&&(i+=4294967296),i}function pt(n,t){var i=h(n,t,14)^h(n,t,18)^h(t,n,9);return i<0&&(i+=4294967296),i}function wt(n,t){var i=c(n,t,14)^c(n,t,18)^c(t,n,9);return i<0&&(i+=4294967296),i}function bt(n,t){var i=h(n,t,1)^h(n,t,8)^it(n,t,7);return i<0&&(i+=4294967296),i}function kt(n,t){var i=c(n,t,1)^c(n,t,8)^rt(n,t,7);return i<0&&(i+=4294967296),i}function dt(n,t){var i=h(n,t,19)^h(t,n,29)^it(n,t,6);return i<0&&(i+=4294967296),i}function gt(n,t){var i=c(n,t,19)^c(t,n,29)^rt(n,t,6);return i<0&&(i+=4294967296),i}var g=n("../hash"),r=g.utils,nt=r.assert,s=r.rotr32,p=r.rotl32,u=r.sum32,ni=r.sum32_4,tt=r.sum32_5,h=r.rotr64_hi,c=r.rotr64_lo,it=r.shr64_hi,rt=r.shr64_lo,v=r.sum64,w=r.sum64_hi,b=r.sum64_lo,ti=r.sum64_4_hi,ii=r.sum64_4_lo,ri=r.sum64_5_hi,ui=r.sum64_5_lo,y=g.common.BlockHash,fi=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],ei=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],oi=[1518500249,1859775393,2400959708,3395469782];r.inherits(e,y);i.sha256=e;e.blockSize=512;e.outSize=256;e.hmacStrength=192;e.padLength=64;e.prototype._update=function(n,t){for(var v,y,r=this.W,i=0;i<16;i++)r[i]=n[t+i];for(;i<r.length;i++)r[i]=ni(ot(r[i-2]),r[i-7],et(r[i-15]),r[i-16]);var f=this.h[0],o=this.h[1],s=this.h[2],l=this.h[3],e=this.h[4],h=this.h[5],c=this.h[6],a=this.h[7];for(nt(this.k.length===r.length),i=0;i<r.length;i++)v=tt(a,ft(e),k(e,h,c),this.k[i],r[i]),y=u(ut(f),d(f,o,s)),a=c,c=h,h=e,e=u(l,v),l=s,s=o,o=f,f=u(v,y);this.h[0]=u(this.h[0],f);this.h[1]=u(this.h[1],o);this.h[2]=u(this.h[2],s);this.h[3]=u(this.h[3],l);this.h[4]=u(this.h[4],e);this.h[5]=u(this.h[5],h);this.h[6]=u(this.h[6],c);this.h[7]=u(this.h[7],a)};e.prototype._digest=function(n){return"hex"===n?r.toHex32(this.h,"big"):r.split32(this.h,"big")};r.inherits(l,e);i.sha224=l;l.blockSize=512;l.outSize=224;l.hmacStrength=192;l.padLength=64;l.prototype._digest=function(n){return"hex"===n?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")};r.inherits(f,y);i.sha512=f;f.blockSize=1024;f.outSize=512;f.hmacStrength=192;f.padLength=128;f.prototype._prepareBlock=function(n,t){for(var r=this.W,i=0;i<32;i++)r[i]=n[t+i];for(;i<r.length;i+=2){var u=dt(r[i-4],r[i-3]),f=gt(r[i-4],r[i-3]),e=r[i-14],o=r[i-13],s=bt(r[i-30],r[i-29]),h=kt(r[i-30],r[i-29]),c=r[i-32],l=r[i-31];r[i]=ti(u,f,e,o,s,h,c,l);r[i+1]=ii(u,f,e,o,s,h,c,l)}};f.prototype._update=function(n,t){var i;this._prepareBlock(n,t);var a=this.W,r=this.h[0],u=this.h[1],y=this.h[2],p=this.h[3],k=this.h[4],d=this.h[5],et=this.h[6],o=this.h[7],f=this.h[8],e=this.h[9],g=this.h[10],tt=this.h[11],it=this.h[12],rt=this.h[13],ot=this.h[14],st=this.h[15];for(nt(this.k.length===a.length),i=0;i<a.length;i+=2){var s=ot,h=st,c=pt(f,e),l=wt(f,e),bt=ht(f,0,g,0,it),kt=ct(0,e,0,tt,0,rt),dt=this.k[i],gt=this.k[i+1],ni=a[i],ti=a[i+1],ut=ri(s,h,c,l,bt,kt,dt,gt,ni,ti),ft=ui(s,h,c,l,bt,kt,dt,gt,ni,ti),ii=(s=vt(r,u),h=yt(r,u),c=lt(r,0,y,0,k),l=at(0,u,0,p,0,d),w(s,h,c,l)),fi=b(s,h,c,l);ot=it;st=rt;it=g;rt=tt;g=f;tt=e;f=w(et,o,ut,ft);e=b(o,o,ut,ft);et=k;o=d;k=y;d=p;y=r;p=u;r=w(ut,ft,ii,fi);u=b(ut,ft,ii,fi)}v(this.h,0,r,u);v(this.h,2,y,p);v(this.h,4,k,d);v(this.h,6,et,o);v(this.h,8,f,e);v(this.h,10,g,tt);v(this.h,12,it,rt);v(this.h,14,ot,st)};f.prototype._digest=function(n){return"hex"===n?r.toHex32(this.h,"big"):r.split32(this.h,"big")};r.inherits(a,f);i.sha384=a;a.blockSize=1024;a.outSize=384;a.hmacStrength=192;a.padLength=128;a.prototype._digest=function(n){return"hex"===n?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")};r.inherits(o,y);i.sha1=o;o.blockSize=512;o.outSize=160;o.hmacStrength=80;o.padLength=64;o.prototype._update=function(n,t){for(var c,l,r=this.W,i=0;i<16;i++)r[i]=n[t+i];for(;i<r.length;i++)r[i]=p(r[i-3]^r[i-8]^r[i-14]^r[i-16],1);var f=this.h[0],e=this.h[1],o=this.h[2],s=this.h[3],h=this.h[4];for(i=0;i<r.length;i++)c=~~(i/20),l=tt(p(f,5),st(c,e,o,s),h,r[i],oi[c]),h=s,s=o,o=p(e,30),e=f,f=l;this.h[0]=u(this.h[0],f);this.h[1]=u(this.h[1],e);this.h[2]=u(this.h[2],o);this.h[3]=u(this.h[3],s);this.h[4]=u(this.h[4],h)};o.prototype._digest=function(n){return"hex"===n?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},{"../hash":19}],24:[function(n,t,i){function u(n){return(n>>>24|n>>>8&65280|n<<8&16711680|(255&n)<<24)>>>0}function f(n){return 1===n.length?"0"+n:n}function e(n){return 7===n.length?"0"+n:6===n.length?"00"+n:5===n.length?"000"+n:4===n.length?"0000"+n:3===n.length?"00000"+n:2===n.length?"000000"+n:1===n.length?"0000000"+n:n}function o(n,t){if(!n)throw new Error(t||"Assertion failed");}var r=i,s=n("inherits");r.toArray=function(n,t){var r,i;if(Array.isArray(n))return n.slice();if(!n)return[];if(r=[],"string"==typeof n)if(t){if("hex"===t)for((n=n.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(n="0"+n),i=0;i<n.length;i+=2)r.push(parseInt(n[i]+n[i+1],16))}else for(i=0;i<n.length;i++){var u=n.charCodeAt(i),f=u>>8,e=255&u;f?r.push(f,e):r.push(e)}else for(i=0;i<n.length;i++)r[i]=0|n[i];return r};r.toHex=function(n){for(var i="",t=0;t<n.length;t++)i+=f(n[t].toString(16));return i};r.htonl=u;r.toHex32=function(n,t){for(var r,f="",i=0;i<n.length;i++)r=n[i],"little"===t&&(r=u(r)),f+=e(r.toString(16));return f};r.zero2=f;r.zero8=e;r.join32=function(n,t,i,r){var s=i-t,h;o(s%4==0);for(var f=new Array(s/4),e=0,u=t;e<f.length;e++,u+=4)h="big"===r?n[u]<<24|n[u+1]<<16|n[u+2]<<8|n[u+3]:n[u+3]<<24|n[u+2]<<16|n[u+1]<<8|n[u],f[e]=h>>>0;return f};r.split32=function(n,t){for(var u,i=new Array(4*n.length),f=0,r=0;f<n.length;f++,r+=4)u=n[f],"big"===t?(i[r]=u>>>24,i[r+1]=u>>>16&255,i[r+2]=u>>>8&255,i[r+3]=255&u):(i[r+3]=u>>>24,i[r+2]=u>>>16&255,i[r+1]=u>>>8&255,i[r]=255&u);return i};r.rotr32=function(n,t){return n>>>t|n<<32-t};r.rotl32=function(n,t){return n<<t|n>>>32-t};r.sum32=function(n,t){return n+t>>>0};r.sum32_3=function(n,t,i){return n+t+i>>>0};r.sum32_4=function(n,t,i,r){return n+t+i+r>>>0};r.sum32_5=function(n,t,i,r,u){return n+t+i+r+u>>>0};r.assert=o;r.inherits=s;i.sum64=function(n,t,i,r){var f=n[t],u=r+n[t+1]>>>0,e=(u<r?1:0)+i+f;n[t]=e>>>0;n[t+1]=u};i.sum64_hi=function(n,t,i,r){return(t+r>>>0<t?1:0)+n+i>>>0};i.sum64_lo=function(n,t,i,r){return t+r>>>0};i.sum64_4_hi=function(n,t,i,r,u,f,e,o){var h=0,s=t;return h+=(s=s+r>>>0)<t?1:0,h+=(s=s+f>>>0)<f?1:0,n+i+u+e+(h+=(s=s+o>>>0)<o?1:0)>>>0};i.sum64_4_lo=function(n,t,i,r,u,f,e,o){return t+r+f+o>>>0};i.sum64_5_hi=function(n,t,i,r,u,f,e,o,s,h){var l=0,c=t;return l+=(c=c+r>>>0)<t?1:0,l+=(c=c+f>>>0)<f?1:0,l+=(c=c+o>>>0)<o?1:0,n+i+u+e+s+(l+=(c=c+h>>>0)<h?1:0)>>>0};i.sum64_5_lo=function(n,t,i,r,u,f,e,o,s,h){return t+r+f+o+h>>>0};i.rotr64_hi=function(n,t,i){return(t<<32-i|n>>>i)>>>0};i.rotr64_lo=function(n,t,i){return(n<<32-i|t>>>i)>>>0};i.shr64_hi=function(n,t,i){return n>>>i};i.shr64_lo=function(n,t,i){return(n<<32-i|t>>>i)>>>0}},{inherits:27}],25:[function(n,t){function i(n){if(!(this instanceof i))return new i(n);this.hash=n.hash;this.predResist=!!n.predResist;this.outLen=this.hash.outSize;this.minEntropy=n.minEntropy||this.hash.hmacStrength;this.reseed=null;this.reseedInterval=null;this.K=null;this.V=null;var t=r.toArray(n.entropy,n.entropyEnc||"hex"),f=r.toArray(n.nonce,n.nonceEnc||"hex"),e=r.toArray(n.pers,n.persEnc||"hex");u(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._init(t,f,e)}var f=n("hash.js"),r=n("minimalistic-crypto-utils"),u=n("minimalistic-assert");t.exports=i;i.prototype._init=function(n,t,i){var u=n.concat(t).concat(i),r;for(this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8),r=0;r<this.V.length;r++)this.K[r]=0,this.V[r]=1;this._update(u);this.reseed=1;this.reseedInterval=281474976710656};i.prototype._hmac=function(){return new f.hmac(this.hash,this.K)};i.prototype._update=function(n){var t=this._hmac().update(this.V).update([0]);n&&(t=t.update(n));this.K=t.digest();this.V=this._hmac().update(this.V).digest();n&&(this.K=this._hmac().update(this.V).update([1]).update(n).digest(),this.V=this._hmac().update(this.V).digest())};i.prototype.reseed=function(n,t,i,f){"string"!=typeof t&&(f=i,i=t,t=null);n=r.toArray(n,t);i=r.toArray(i,f);u(n.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._update(n.concat(i||[]));this.reseed=1};i.prototype.generate=function(n,t,i,u){var f,e;if(this.reseed>this.reseedInterval)throw new Error("Reseed is required");for("string"!=typeof t&&(u=i,i=t,t=null),i&&(i=r.toArray(i,u||"hex"),this._update(i)),f=[];f.length<n;)this.V=this._hmac().update(this.V).digest(),f=f.concat(this.V);return e=f.slice(0,n),this._update(i),this.reseed++,r.encode(e,t)}},{"hash.js":19,"minimalistic-assert":28,"minimalistic-crypto-utils":26}],26:[function(n,t,i){function u(n){return 1===n.length?"0"+n:n}function f(n){for(var i="",t=0;t<n.length;t++)i+=u(n[t].toString(16));return i}var r=i;r.toArray=function(n,t){var r,i;if(Array.isArray(n))return n.slice();if(!n)return[];if(r=[],"string"!=typeof n){for(i=0;i<n.length;i++)r[i]=0|n[i];return r}if("hex"===t)for((n=n.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(n="0"+n),i=0;i<n.length;i+=2)r.push(parseInt(n[i]+n[i+1],16));else for(i=0;i<n.length;i++){var u=n.charCodeAt(i),f=u>>8,e=255&u;f?r.push(f,e):r.push(e)}return r};r.zero2=u;r.toHex=f;r.encode=function(n,t){return"hex"===t?f(n):n}},{}],27:[function(n,t){t.exports="function"==typeof Object.create?function(n,t){n.super_=t;n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}})}:function(n,t){n.super_=t;var i=function(){};i.prototype=t.prototype;n.prototype=new i;n.prototype.constructor=n}},{}],28:[function(n,t){function i(n,t){if(!n)throw new Error(t||"Assertion failed");}t.exports=i;i.equal=function(n,t,i){if(n!=t)throw new Error(i||"Assertion failed: "+n+" != "+t);}},{}],29:[function(n,t,i){function u(n){return 1===n.length?"0"+n:n}function f(n){for(var i="",t=0;t<n.length;t++)i+=u(n[t].toString(16));return i}var r=i;r.toArray=function(n,t){var r,i;if(Array.isArray(n))return n.slice();if(!n)return[];if(r=[],"string"!=typeof n){for(i=0;i<n.length;i++)r[i]=0|n[i];return r}if(t){if("hex"===t)for((n=n.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(n="0"+n),i=0;i<n.length;i+=2)r.push(parseInt(n[i]+n[i+1],16))}else for(i=0;i<n.length;i++){var u=n.charCodeAt(i),f=u>>8,e=255&u;f?r.push(f,e):r.push(e)}return r};r.zero2=u;r.toHex=f;r.encode=function(n,t){return"hex"===t?f(n):n}},{}],30:[function(n,t){t.exports={name:"elliptic",version:"6.4.0",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{jscs:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",jshint:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",lint:"npm run jscs && npm run jshint",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^1.4.3",coveralls:"^2.11.3",grunt:"^0.4.5","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^8.6.2",istanbul:"^0.4.2",jscs:"^2.9.0",jshint:"^2.6.0",mocha:"^2.1.0"},dependencies:{"bn.js":"^4.4.0",brorand:"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0",inherits:"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"}}},{}]},{},[1])(1)}(),function(n){function r(n,t){t?(i[0]=i[16]=i[1]=i[2]=i[3]=i[4]=i[5]=i[6]=i[7]=i[8]=i[9]=i[10]=i[11]=i[12]=i[13]=i[14]=i[15]=0,this.blocks=i):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];n?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225);this.block=this.start=this.bytes=this.hBytes=0;this.finalized=this.hashed=!1;this.first=!0;this.is224=n}function l(n,t,i){var e,y=u(n),l,a,v;if("string"===y){var f,h=[],p=n.length,c=0;for(e=0;e<p;++e)(f=n.charCodeAt(e))<128?h[c++]=f:f<2048?(h[c++]=192|f>>6,h[c++]=128|63&f):f<55296||f>=57344?(h[c++]=224|f>>12,h[c++]=128|f>>6&63,h[c++]=128|63&f):(f=65536+((1023&f)<<10|1023&n.charCodeAt(++e)),h[c++]=240|f>>18,h[c++]=128|f>>12&63,h[c++]=128|f>>6&63,h[c++]=128|63&f);n=h}else{if("object"!==y)throw new Error(o);if(null===n)throw new Error(o);if(s&&n.constructor===ArrayBuffer)n=new Uint8Array(n);else if(!(Array.isArray(n)||s&&ArrayBuffer.isView(n)))throw new Error(o);}for(n.length>64&&(n=new r(t,!0).update(n).array()),l=[],a=[],e=0;e<64;++e)v=n[e]||0,l[e]=92^v,a[e]=54^v;r.call(this,t,i);this.update(a);this.oKeyPad=l;this.inner=!0;this.sharedMemory=i}var o="input is invalid type",s=!n.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,t="0123456789abcdef".split(""),w=[-2147483648,8388608,32768,128],f=[24,16,8,0],h=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],c=["hex","array","digest","arrayBuffer"],i=[],e;!n.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(n){return"[object Array]"===Object.prototype.toString.call(n)});s&&(n.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(n){return"object"===u(n)&&n.buffer&&n.buffer.constructor===ArrayBuffer});var a=function(n,t){return function(i){return new r(t,!0).update(i)[n]()}},v=function(n){var t=a("hex",n),i,u;for(t.create=function(){return new r(n)},t.update=function(n){return t.create().update(n)},i=0;i<c.length;++i)u=c[i],t[u]=a(u,n);return t},y=function(n,t){return function(i,r){return new l(i,t,!0).update(r)[n]()}},p=function(n){var t=y("hex",n),i,r;for(t.create=function(t){return new l(t,n)},t.update=function(n,i){return t.create(n).update(i)},i=0;i<c.length;++i)r=c[i],t[r]=y(r,n);return t};r.prototype.update=function(n){var l,h;if(!this.finalized){if(h=u(n),"string"!==h){if("object"!==h)throw new Error(o);if(null===n)throw new Error(o);if(s&&n.constructor===ArrayBuffer)n=new Uint8Array(n);else if(!(Array.isArray(n)||s&&ArrayBuffer.isView(n)))throw new Error(o);l=!0}for(var r,t,e=0,c=n.length,i=this.blocks;e<c;){if(this.hashed&&(this.hashed=!1,i[0]=this.block,i[16]=i[1]=i[2]=i[3]=i[4]=i[5]=i[6]=i[7]=i[8]=i[9]=i[10]=i[11]=i[12]=i[13]=i[14]=i[15]=0),l)for(t=this.start;e<c&&t<64;++e)i[t>>2]|=n[e]<<f[3&t++];else for(t=this.start;e<c&&t<64;++e)(r=n.charCodeAt(e))<128?i[t>>2]|=r<<f[3&t++]:r<2048?(i[t>>2]|=(192|r>>6)<<f[3&t++],i[t>>2]|=(128|63&r)<<f[3&t++]):r<55296||r>=57344?(i[t>>2]|=(224|r>>12)<<f[3&t++],i[t>>2]|=(128|r>>6&63)<<f[3&t++],i[t>>2]|=(128|63&r)<<f[3&t++]):(r=65536+((1023&r)<<10|1023&n.charCodeAt(++e)),i[t>>2]|=(240|r>>18)<<f[3&t++],i[t>>2]|=(128|r>>12&63)<<f[3&t++],i[t>>2]|=(128|r>>6&63)<<f[3&t++],i[t>>2]|=(128|63&r)<<f[3&t++]);this.lastByteIndex=t;this.bytes+=t-this.start;t>=64?(this.block=i[16],this.start=t-64,this.hash(),this.hashed=!0):this.start=t}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};r.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var n=this.blocks,t=this.lastByteIndex;n[16]=this.block;n[t>>2]|=w[3&t];this.block=n[16];t>=56&&(this.hashed||this.hash(),n[0]=this.block,n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0);n[14]=this.hBytes<<3|this.bytes>>>29;n[15]=this.bytes<<3;this.hash()}};r.prototype.hash=function(){for(var a,y,v,n,p,b,k,w,u=this.h0,f=this.h1,e=this.h2,i=this.h3,o=this.h4,s=this.h5,c=this.h6,r=this.h7,l=this.blocks,t=16;t<64;++t)a=((n=l[t-15])>>>7|n<<25)^(n>>>18|n<<14)^n>>>3,y=((n=l[t-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,l[t]=l[t-16]+a+l[t-7]+y<<0;for(w=f&e,t=0;t<64;t+=4)this.first?(this.is224?(p=300032,r=(n=l[0]-1413257819)-150054599<<0,i=n+24177077<<0):(p=704751109,r=(n=l[0]-210244248)-1521486534<<0,i=n+143694565<<0),this.first=!1):(a=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),v=(p=u&f)^u&e^w,r=i+(n=r+(y=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7))+(o&s^~o&c)+h[t]+l[t])<<0,i=n+(a+v)<<0),a=(i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10),v=(b=i&u)^i&f^p,c=e+(n=c+(y=(r>>>6|r<<26)^(r>>>11|r<<21)^(r>>>25|r<<7))+(r&o^~r&s)+h[t+1]+l[t+1])<<0,a=((e=n+(a+v)<<0)>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),v=(k=e&i)^e&u^b,s=f+(n=s+(y=(c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))+(c&r^~c&o)+h[t+2]+l[t+2])<<0,a=((f=n+(a+v)<<0)>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),v=(w=f&e)^f&i^k,o=u+(n=o+(y=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7))+(s&c^~s&r)+h[t+3]+l[t+3])<<0,u=n+(a+v)<<0;this.h0=this.h0+u<<0;this.h1=this.h1+f<<0;this.h2=this.h2+e<<0;this.h3=this.h3+i<<0;this.h4=this.h4+o<<0;this.h5=this.h5+s<<0;this.h6=this.h6+c<<0;this.h7=this.h7+r<<0};r.prototype.hex=function(){this.finalize();var n=this.h0,i=this.h1,r=this.h2,u=this.h3,f=this.h4,e=this.h5,o=this.h6,s=this.h7,h=t[n>>28&15]+t[n>>24&15]+t[n>>20&15]+t[n>>16&15]+t[n>>12&15]+t[n>>8&15]+t[n>>4&15]+t[15&n]+t[i>>28&15]+t[i>>24&15]+t[i>>20&15]+t[i>>16&15]+t[i>>12&15]+t[i>>8&15]+t[i>>4&15]+t[15&i]+t[r>>28&15]+t[r>>24&15]+t[r>>20&15]+t[r>>16&15]+t[r>>12&15]+t[r>>8&15]+t[r>>4&15]+t[15&r]+t[u>>28&15]+t[u>>24&15]+t[u>>20&15]+t[u>>16&15]+t[u>>12&15]+t[u>>8&15]+t[u>>4&15]+t[15&u]+t[f>>28&15]+t[f>>24&15]+t[f>>20&15]+t[f>>16&15]+t[f>>12&15]+t[f>>8&15]+t[f>>4&15]+t[15&f]+t[e>>28&15]+t[e>>24&15]+t[e>>20&15]+t[e>>16&15]+t[e>>12&15]+t[e>>8&15]+t[e>>4&15]+t[15&e]+t[o>>28&15]+t[o>>24&15]+t[o>>20&15]+t[o>>16&15]+t[o>>12&15]+t[o>>8&15]+t[o>>4&15]+t[15&o];return this.is224||(h+=t[s>>28&15]+t[s>>24&15]+t[s>>20&15]+t[s>>16&15]+t[s>>12&15]+t[s>>8&15]+t[s>>4&15]+t[15&s]),h};r.prototype.toString=r.prototype.hex;r.prototype.digest=function(){this.finalize();var n=this.h0,t=this.h1,i=this.h2,r=this.h3,u=this.h4,f=this.h5,e=this.h6,o=this.h7,s=[n>>24&255,n>>16&255,n>>8&255,255&n,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24&255,i>>16&255,i>>8&255,255&i,r>>24&255,r>>16&255,r>>8&255,255&r,u>>24&255,u>>16&255,u>>8&255,255&u,f>>24&255,f>>16&255,f>>8&255,255&f,e>>24&255,e>>16&255,e>>8&255,255&e];return this.is224||s.push(o>>24&255,o>>16&255,o>>8&255,255&o),s};r.prototype.array=r.prototype.digest;r.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(this.is224?28:32),n=new DataView(t);return n.setUint32(0,this.h0),n.setUint32(4,this.h1),n.setUint32(8,this.h2),n.setUint32(12,this.h3),n.setUint32(16,this.h4),n.setUint32(20,this.h5),n.setUint32(24,this.h6),this.is224||n.setUint32(28,this.h7),t};l.prototype=new r;l.prototype.finalize=function(){if(r.prototype.finalize.call(this),this.inner){this.inner=!1;var n=this.array();r.call(this,this.is224,this.sharedMemory);this.update(this.oKeyPad);this.update(n);r.prototype.finalize.call(this)}};e=v();e.sha256=e;e.sha224=v(!0);e.sha256.hmac=p();e.sha224.hmac=p(!0);n.sha256=e.sha256;n.sha224=e.sha224}("undefined"!=typeof window?window:r),function(n){!function(n){!function(n){var t;(function(n){var i=function(){function n(n){this.flowId=n}return n.prototype.getFlowId=function(){return this.flowId},n}(),r;n.ApprovalControlFlowExecutionContext=i;r=function(){function n(n,i,r){this._session=i;this._sdk=n;this._clientContext=r;this._uiHandler=n.currentUiHandler;this._uiContextImpl=new t.impl.UIContextImpl(n)}return n.prototype.getUiContext=function(){return this._uiContextImpl},n.prototype.run=function(){var n=this;return this._sdk.log(t.LogLevel.Debug,function(){return"approvals: Starting session"}),this.queryApprovalsFromServer().then(function(t){return new Promise(function(i,r){n._completeFn=i;n._rejectFn=r;n.kickStartSession(t)})})},n.prototype.approve=function(n,i){return this.changeApprovalStatus(n,t.MobileApprovalStatus.Approved,i)},n.prototype.deny=function(n){return this.changeApprovalStatus(n,t.MobileApprovalStatus.Denied).then(function(){return!0})},n.prototype.requestRefreshApprovals=function(){var n=this;return this.queryApprovalsFromServer().then(function(t){return n.updateManagedApprovals(t),!0},function(n){throw t.impl.AuthenticationErrorImpl.ensureAuthenticationError(n);})},n.prototype.finishSession=function(){if(!this._appSession)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Attempt to finish a non started approval session.");this._appSession.endSession();this._appSession=null;this._completeFn(!0)},n.prototype.kickStartSession=function(n){this._appSession=this._sdk.currentUiHandler.createApprovalsSession(this._session.user.displayName);this._appSession?(this.updateManagedApprovals(n),this._appSession.startSession(this,null,this._clientContext)):this._rejectFn(t.impl.AuthenticationErrorImpl.appImplementationError("Invalid return from createTicketWaitSession."))},n.prototype.updateManagedApprovals=function(n){if(this._managedApprovals=n,!this._appSession)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Attempt to update approvals on a non started approval session.");this._appSession.setSessionApprovalsList(n)},n.prototype.queryApprovalsFromServer=function(){var n=this,i;return this._sdk.log(t.LogLevel.Debug,function(){return"approvals: Initiating collection"}),i=this._sdk.promiseCollectionResult(),t.util.wrapPromiseWithActivityIndicator(this._uiHandler,null,this._clientContext,i.then(function(i){n._sdk.log(t.LogLevel.Debug,function(){return"approvals: Collection done; setting up request to query approvals"});var r=n._session.createApprovalsFetchRequest(i);return n._sdk.log(t.LogLevel.Debug,function(){return"approvals: Sending request to query approvals"}),n._session.performSessionExchange(r).then(function(n){return n.data.approvals.map(function(n){return new t.impl.ManagedMobileApprovalImpl(n)})})}))},n.prototype.changeApprovalStatus=function(n,r,u){var f=this;return this._sdk.log(t.LogLevel.Debug,function(){return"approval: change status of approval "+n.getApproval().getApprovalId()+" to "+r}),this._sdk.log(t.LogLevel.Debug,function(){return"approval: Initiating request promise"}),this._sdk.promiseCollectionResult().then(function(i){return f._sdk.log(t.LogLevel.Debug,function(){return"approval: Collection done; setting up request"}),f._session.createApprovalReplyRequest(i,n.getApproval().getApprovalId(),r)}).then(function(e){f._sdk.log(t.LogLevel.Debug,function(){return"approval: Initiating control flow"});var o=new i(e.getFlowId());return o.approval=n.getApproval(),f._session.startControlFlow(e,o,u||f._clientContext).then(function(t){return n.getApproval().updateStatus(r),f.updateManagedApprovals(f._managedApprovals),t},function(n){var i=t.impl.AuthenticationErrorImpl.ensureAuthenticationError(n);throw f._sdk.log(t.LogLevel.Debug,function(){return"approval: Got server error "+i}),i.getErrorCode()==t.AuthenticationErrorCode.Internal&&i.getData()&&6001==i.getData().server_error_code?(f._sdk.log(t.LogLevel.Debug,function(){return"approval: Converting server error"}),new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.ApprovalWrongState,i.getMessage())):i;})})},n}();n.ApprovalSessionProcessor=r})((t=n.sdk||(n.sdk={})).core||(t.core={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={}));w=r&&r.__awaiter||function(n,t,i,r){return new(i||(i=Promise))(function(u,f){function o(n){try{e(r.next(n))}catch(n){f(n)}}function s(n){try{e(r.throw(n))}catch(n){f(n)}}function e(n){var t;n.done?u(n.value):(t=n.value,t instanceof i?t:new i(function(n){n(t)})).then(o,s)}e((r=r.apply(n,t||[])).next())})};b=r&&r.__generator||function(n,t){function o(e){return function(o){return function(e){if(f)throw new TypeError("Generator is already executing.");for(;r;)try{if(f=1,u&&(i=2&e[0]?u.return:e[0]?u.throw||((i=u.return)&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;switch(u=0,i&&(e=[2&e[0],i.value]),e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===e[0]||2===e[0])){r=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(6===e[0]&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(n){e=[6,n];u=0}finally{f=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,o])}}var f,u,i,e,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return e={next:o(0),"throw":o(1),"return":o(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e};!function(n){!function(n){!function(n){var t;(function(n){var v=function(n){function t(t,i){var r=n.call(this,t)||this;return i&&(r.flowId=i),r}return i(t,n),t.prototype.serializeTo=function(t){n.prototype.serializeTo.call(this,t);t.writePrimitive("flowId",this.flowId)},t.prototype.serializeFrom=function(t){n.prototype.serializeFrom.call(this,t);this.flowId=t.readPrimitive("flowId")},t}(n.MultiStageResumableProcessContinuation),e,o,u,r,s,c,l,f,a;n.ResumableControlFlowRequestContinuation=v;e=function(t){function r(i){var r=t.call(this)||this;return i instanceof n.Session?r.initFromSession(i):r.serializeFrom(i),r}return i(r,t),Object.defineProperty(r.prototype,"userRecord",{get:function(){return this._userRecord},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"usedSessionJson",{get:function(){return this._sessionJson},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"controlFlowContinuation",{get:function(){return this._cflowContinuation},enumerable:!1,configurable:!0}),r.prototype.createUsedSession=function(t){var i=n.User.fromUserRecord(this._userRecord,t);return n.Session.fromJsonWithUser(t,this._sessionJson,i)},r.prototype.serializeTo=function(n){n.writePrimitive("user",this._userRecord);n.writePrimitive("session",this._sessionJson);n.writeObject("cflowContinuation",this._cflowContinuation)},r.prototype.serializeFrom=function(n){this._userRecord=n.readPrimitive("user");this._sessionJson=n.readPrimitive("session");this._cflowContinuation=n.readObject("cflowContinuation")},r.prototype.initFromSession=function(t){this._sessionJson=t.toJson();this._userRecord=n.User.toUserRecord(t.user);this._cflowContinuation=t.createCurrentControlFlowContinuation()},r}(n.ResumableProcessStageContinuation);n.ExecuteControlFlowStageContinuation=e;o=function(){function n(n){this._ownerRequest=n;this._rtContext=n.rtContext}return Object.defineProperty(n.prototype,"clientContext",{get:function(){return this._rtContext.clientContext},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sdk",{get:function(){return this._rtContext.sdk},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"uiHandler",{get:function(){return this._rtContext.uiHandler},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sdkSessionManagementServices",{get:function(){return this._rtContext.sdkSessionManagementServices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"session",{get:function(){return this._usedSession},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"user",{get:function(){return this._usedSession.user},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"additionalParameters",{get:function(){return this._additionalParameters},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"policy",{get:function(){return this._policy},enumerable:!1,configurable:!0}),n.prototype.run=function(){return this.runOrContinue()},n.prototype.resume=function(n,i){var r=this;return new Promise(function(u,f){if(!(n instanceof e))return Promise.reject(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Invalid continuation type for resume"));r.restoreParametersFromContinuation(n);r.runOrContinue(n,i).then(u,f)})},n.prototype.restoreParametersFromContinuation=function(n){this._usedSession=n.createUsedSession(this.sdk)},n.prototype.postProcessControlFlowResult=function(n){return n},n.prototype.prepareForControlFlowExecution=function(){},n.prototype.handleControlFlowError=function(){},n.prototype.createNextStage=function(n){return new r(this._ownerRequest,this._usedSession,n)},n.prototype.runOrContinue=function(n,i){var r=this;return this._usedSession.lock(),new Promise(function(u,f){var e;r.sdk.log(t.LogLevel.Debug,function(){return"Running "+r.opName+" for user "+(r.user.userId||r.user.idToken)+"; continuation: "+!!n});r.sdk.ensureConfigured();r.prepareForControlFlowExecution();n?(r.sdk.log(t.LogLevel.Debug,function(){return r.opName+": Resuming control flow from continuation"}),e=r._usedSession.continueControlFlow(n.controlFlowContinuation,i,r._ownerRequest,r.clientContext)):r._inlineControlFlowInitiationServerResponse?(r.sdk.log(t.LogLevel.Debug,function(){return r.opName+": Non continuation, starting control flow with inline server response"}),e=r._usedSession.startControlFlow(r._inlineControlFlowInitiationServerResponse,r._ownerRequest,r.clientContext)):(r.sdk.log(t.LogLevel.Debug,function(){return r.opName+": Non continuation, starting control flow with server request"}),e=t.util.wrapPromiseWithActivityIndicator(r.uiHandler,null,r.clientContext,r.generateControlFlowRequest()).then(function(n){return r.sdk.log(t.LogLevel.Debug,function(){return r.opName+": Starting control flow"}),r._usedSession.startControlFlow(n,r._ownerRequest,r.clientContext)}));e.then(function(n){return u(r.postProcessControlFlowResult(n))},function(n){if(n.getErrorCode()==t.AuthenticationErrorCode.Internal&&n.getData()){var i=n.getData();n=t.impl.AuthenticationErrorImpl.errorForHostInternalErrorData(i)||n}r.handleControlFlowError(n);f(n)})}).finally(function(){r._usedSession.unlock()}).catch(function(n){return Promise.reject(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(n))}).then(function(n){return r.createNextStage(n)})},n.prototype.getFlowId=function(){return this._ownerRequest.getFlowId()},n}();n.ExecuteControlFlowStage=o;u=function(u){function f(n){var t=u.call(this)||this;return n instanceof r?t.initFromProc(n):t.serializeFrom(n),t}return i(f,u),Object.defineProperty(f.prototype,"redirectionContinuation",{get:function(){return this._redirectionContinuation},enumerable:!1,configurable:!0}),f.prototype.serializeTo=function(n){n.writeObject("redirectionContinuation",this._redirectionContinuation)},f.prototype.serializeFrom=function(n){this._redirectionContinuation=n.readNonNullObject("redirectionContinuation")},f.prototype.initFromProc=function(n){var i=n.requestProcess;if(!i)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Invalid state for requesting contination");this._redirectionContinuation=i.createContinuation()},f.prototype.createResumableProcess=function(n){return new r(n)},f=h([n.Serializable("RunRedirectsStageContinuation"),k("design:paramtypes",[Object])],f)}(n.ResumableProcessStageContinuation);r=function(){function i(n,t,i){this._ownerRequest=n;this._rtContext=n.rtContext;this._usedSession=t||null;this._authResult=i||null;var r=i&&this._authResult.getInternalData();this._redirectData=r&&r.redirect&&r.redirect}return Object.defineProperty(i.prototype,"requestProcess",{get:function(){return this._requestProcess},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clientContext",{get:function(){return this._rtContext.clientContext},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sdk",{get:function(){return this._rtContext.sdk},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"uiHandler",{get:function(){return this._rtContext.uiHandler},enumerable:!1,configurable:!0}),i.prototype.createContinuation=function(){return new u(this)},i.prototype.run=function(){return w(this,void 0,void 0,function(){var i,u,f,r;return b(this,function(e){switch(e.label){case 0:if(!this._authResult)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Invalid resumable control flow request state");return this._redirectData?[3,1]:[2,this._authResult];case 1:return i=this._redirectData,u=i.policy_id||null,f=i.target.user_id||i.target.token||null,[4,this.uiHandler.handlePolicyRedirect(n.Protocol.RedirectTypeMap[i.redirect_type],u,f,i.params,this.clientContext)];case 2:switch((r=e.sent()).getAdditionalParametersOverride()&&(i.params=r.getAdditionalParametersOverride()),r.getRedirectResponse()){case t.RedirectResponseType.RedirectToPolicy:return[2,this.processRedirectRequest(i)];case t.RedirectResponseType.CancelRedirect:throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.UserCanceled,"Redirection to next policy canceled.");default:throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Invalid redirect response type.");}case 3:return[2]}})})},i.prototype.resume=function(n,i){return n instanceof u?(this._requestProcess=n.redirectionContinuation.createResumableProcess(this._rtContext),this._requestProcess.resume(n.redirectionContinuation,i)):Promise.reject(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Invalid continuation type for resume"))},i.prototype.runtimeContextForCallee=function(){return{clientContext:this.clientContext,sdk:this.sdk,sdkSessionManagementServices:this._ownerRequest.rtContext.sdkSessionManagementServices,uiHandler:this.uiHandler,caller:this._ownerRequest}},i.prototype.processRedirectRequest=function(i){return w(this,void 0,void 0,function(){var e,o,r,u,s,f,c,h,l,a,v,y=this;return b(this,function(){if(!this._usedSession)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Invalid resumable control flow request state");if(e=i.policy_id||null,o=i.params,r=this._usedSession.user,"current"!=i.target.type)if("user_id"==i.target.type){if(!(u=i.target.user_id||this._usedSession.user.userId))throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"failed to resolve user id for redirect request <"+i.redirect_type+", "+i.target.type+">");u!=this._usedSession.user.userId&&(this.sdk.log(t.LogLevel.Debug,function(){return"User id in request is different than that of the current user <"+u+", "+y._usedSession.user.userId+">"}),r=n.User.findUser(this.sdk,u)||n.User.createUserWithUserId(this.sdk,u))}else{if("uid_token"!=i.target.type)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Unhandled redirect target type '"+i.target.type+"'");if(s=i.target.uid_hash,!(f=i.target.token||this._usedSession.user.idToken))throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"failed to resolve id token for redirect request <"+i.redirect_type+", "+i.target.type+">");f!=this._usedSession.user.idToken&&(this.sdk.log(t.LogLevel.Debug,function(){return"Id token in request is different than that of the current user <"+f+", "+y._usedSession.user.idToken+">"}),r=s&&n.User.findUserByUidHash(this.sdk,s)||n.User.findUser(this.sdk,f)||n.User.createUserWithIdToken(this.sdk,f,s))}switch(this.sdk.log(t.LogLevel.Info,function(){return"control flow || type:"+i.redirect_type+" policy: "+e}),(c=i.redirect_type)===n.Protocol.RedirectTypeName.RedirectTypeNameBindOrAuthenticate&&(c=r.deviceBound?n.Protocol.RedirectTypeName.RedirectTypeNameAuthenticate:n.Protocol.RedirectTypeName.RedirectTypeNameBind),h=this.runtimeContextForCallee(),c){case n.Protocol.RedirectTypeName.RedirectTypeNameAuthenticate:return l=new n.AuthenticateControlFlowRequest(h,this._ownerRequest.getFlowId()),this._requestProcess=l,[2,l.run(r,e,o)];case n.Protocol.RedirectTypeName.RedirectTypeNameBind:return a=new n.BindControlFlowRequest(h,this._ownerRequest.getFlowId()),this._requestProcess=a,[2,a.run(r,o)];case n.Protocol.RedirectTypeName.RedirectTypeNameInvokePolicy:return v=new n.InvokePolicyControlFlowRequest(h,this._ownerRequest.getFlowId()),this._requestProcess=v,[2,v.run(e,o)];default:throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Unhandled redirect type '"+i.redirect_type+"'");}})})},i}();n.RunRedirectsStage=r;s=function(n){function t(t,i){var r=n.call(this,t)||this;return r._flowId=i,r}return i(t,n),Object.defineProperty(t.prototype,"topmost",{get:function(){for(var n=this;n.rtContext.caller;)n=n.rtContext.caller;return n},enumerable:!1,configurable:!0}),t.prototype.getFlowId=function(){return this._flowId},t}(n.MultiStageResumableProcess);n.ResumableControlFlowRequest=s;c=function(r){function u(){return null!==r&&r.apply(this,arguments)||this}return i(u,r),u.prototype.prepareForControlFlowExecution=function(){if(this.sdk.currentSession)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Attempt to start a session (bind) with a current primary active session.");this.sdkSessionManagementServices.setCurrentSession(this._usedSession)},u.prototype.handleControlFlowError=function(){this.sdk.log(t.LogLevel.Debug,function(){return"Clearing session after error"});this.sdkSessionManagementServices.setCurrentSession(null);this.sdkSessionManagementServices.saveCurrentSession()},u.prototype.postProcessControlFlowResult=function(t){return this._usedSession.persistUserData&&n.User.save(this.sdk,this._usedSession.user),this.sdkSessionManagementServices.saveCurrentSession(),n.Session.notifySessionObserversOnMainSessionLogin(this._usedSession),t},u.prototype.createNextStage=function(n){return new f(this._ownerRequest,this._usedSession,n)},u}(o);n.SessionSetupExecuteControlFlowStage=c;l=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.prototype.createResumableProcess=function(n){return new f(n)},r=h([n.Serializable("SessionSetupProcessRedirectsStageContination")],r)}(u);f=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return i(r,n),r.prototype.resume=function(t,i){var r=this;return n.prototype.resume.call(this,t,i).catch(function(n){return r.handleRedirectionError(n)})},r.prototype.processRedirectRequest=function(t){var i=this;return n.prototype.processRedirectRequest.call(this,t).catch(function(n){return i.handleRedirectionError(n)})},r.prototype.createContinuation=function(){return new l(this)},r.prototype.handleRedirectionError=function(n){return this.sdk.apiLevel>=10?(this.sdk.log(t.LogLevel.Debug,function(){return"Error in redirect after session establishing call. Logging out session."}),this.sdk.logout().then(function(){throw n;},function(){throw n;})):Promise.reject(n)},r}(r);n.SessionSetupRunRedirectsStage=f;a=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t}(s);n.SessionSetupResumableControlFlowRequest=a})((t=n.sdk||(n.sdk={})).core||(t.core={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var f=function(n){function u(){return null!==n&&n.apply(this,arguments)||this}return i(u,n),u.prototype.createResumableProcess=function(n){return new r(n)},u=h([t.Serializable("AuthenticateRequestExecuteControlFlowStageContinuation")],u)}(t.ExecuteControlFlowStageContinuation),r,e,u;t.AuthenticateRequestExecuteControlFlowStageContinuation=f;r=function(r){function u(n,t,i,u){void 0===u&&(u=null);var f=r.call(this,n)||this;return f.opName="authenticate",t&&(f._usedSession=t,f._additionalParameters=i,f._policy=u),f}return i(u,r),u.generateLoginRequest=function(n,i){var r={collection_result:n.toJson(),push_token:i.sdkSessionManagementServices.lastReceivedPushToken};return i.policy&&(r.policy_request_id=i.policy),i.additionalParameters&&(r.params=i.additionalParameters),new t.SessionExchangeRequest("POST","auth/login",r,[],i.getFlowId())},u.prototype.generateControlFlowRequest=function(){var t=this;return this.sdk.promiseCollectionResult().then(function(i){return t.sdk.log(n.LogLevel.Debug,function(){return"authenticate: Collection done; setting up request"}),u.generateLoginRequest(i,t)})},u.prototype.postProcessControlFlowResult=function(t){return this.sdk.log(n.LogLevel.Debug,function(){return"authenticate: marking user has logged in after succesful completion"}),this.user.markLoggedIn(),r.prototype.postProcessControlFlowResult.call(this,t)},u.prototype.createContinuation=function(){return new f(this.session,this.getFlowId())},u}(t.SessionSetupExecuteControlFlowStage);t.AuthenticateRequestExecuteControlFlowStage=r;e=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return i(r,n),r.prototype.createResumableProcess=function(n){return new u(n,this.flowId)},r=h([t.Serializable("AuthenticateControlFlowRequestContinuation")],r)}(t.ResumableControlFlowRequestContinuation);u=function(n){function u(){return null!==n&&n.apply(this,arguments)||this}return i(u,n),u.prototype.createContinuation=function(){return new e(this,this.getFlowId())},u.prototype.run=function(n,i,u){return this.startWithStage(new r(this,new t.Session(this.rtContext.sdk,n),u,i))},u}(t.SessionSetupResumableControlFlowRequest);t.AuthenticateControlFlowRequest=u}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){!function(i){!function(r){var u,f;!function(n){n[n.Builtin=0]="Builtin";n[n.Placeholder=1]="Placeholder";n[n.Fido=2]="Fido";n[n.OTP=3]="OTP";n[n.Totp=4]="Totp";n[n.MobileApprove=5]="MobileApprove"}(u=r.AuthenticatorPrototype||(r.AuthenticatorPrototype={}));f=function(){function f(t,i,r,f){var e,o,s;this._session=t;this._authenticatorId=i;e=i.match(/^placeholder_(.*)$/);e?(this._authenticatorPrototype=u.Placeholder,this._placeholderId=e[1],o=r,this._authetnicationMethodTypeName=o.placeholder_type):i.match(/^fido_(.*)$/)?(this._authenticatorPrototype=u.Fido,s=r,this._authetnicationMethodTypeName=s.authenticator_type):i.match(/^otp_(.*)$/)?(this._authenticatorPrototype=u.OTP,this._authetnicationMethodTypeName=this.getAuthenticatorIdForMultiStep()):i.match(/^totp_(.*)$/)?(this._authenticatorPrototype=u.Totp,this._authetnicationMethodTypeName=this.getAuthenticatorIdForMultiStep()):i.match(/^mobile_approve_(.*)$/)?(this._authenticatorPrototype=u.MobileApprove,this._authetnicationMethodTypeName=this.getAuthenticatorIdForMobileApprove()):(this._authenticatorPrototype=u.Builtin,this._authetnicationMethodTypeName=this._authenticatorId);this._authenticatorMethodConfig=r;this._serverReportedRegistrationStatus=f.status;this._expired=f.expired||!1;this._locked=f.locked||!1;r.recovery_escape&&(this._recoveryEscapeOption=new n.ts.mobile.sdk.impl.EscapeOptionImpl(r.recovery_escape))}return Object.defineProperty(f.prototype,"authenticationDriverDescriptor",{get:function(){var t=this.internalAuthenticationDriverDescriptor();if(!t)throw new n.ts.mobile.sdk.impl.AuthenticationErrorImpl(n.ts.mobile.sdk.AuthenticationErrorCode.Internal,"Unhandled authenticator: "+this.getAuthenticatorId());return t},enumerable:!1,configurable:!0}),f.prototype.internalAuthenticationDriverDescriptor=function(){var n,t;switch(this._authenticatorPrototype){case u.Placeholder:return r.AuthenticatorDrivers.__placeholder;case u.Fido:return new r.AuthenticationDriverDescriptorFido(this._authenticatorMethodConfig.fido_policy);case u.Totp:case u.OTP:return n=this.getAuthenticatorIdForMultiStep(),r.AuthenticatorDrivers[n];case u.MobileApprove:return t=this.getAuthenticatorIdForMobileApprove(),r.AuthenticatorDrivers[t];case u.Builtin:default:return r.AuthenticatorDrivers[this.getAuthenticatorId()]}},f.prototype.getAuthenticatorIdForMobileApprove=function(){var n=this._authenticatorId.split("_");return n[0]+"_"+n[1]},f.prototype.getAuthenticatorIdForMultiStep=function(){return""+this._authenticatorId.split("_")[0]},f.prototype.getAuthenticatorId=function(){return this._authenticatorId},f.prototype.getType=function(){var n=i.Protocol.AuthTypeData[this._authetnicationMethodTypeName];return n&&"authTypeEnum"in n?n.authTypeEnum:t.AuthenticatorType.Generic},f.prototype.getName=function(){var n=i.Protocol.AuthTypeData[this._authetnicationMethodTypeName];return n&&n.authTypeName||"Generic"},f.prototype.getExpired=function(){return this._expired},f.prototype.getRegistered=function(){return this.getRegistrationStatus()==t.AuthenticatorRegistrationStatus.Registered},f.prototype.getRegistrationStatus=function(){return this._serverReportedRegistrationStatus!=i.Protocol.AuthenticationMethodStatus.Registered?t.AuthenticatorRegistrationStatus.Unregistered:this.authenticationDriverDescriptor.evaluateLocalRegistrationStatus(this._session)},f.prototype.getLocked=function(){return this._locked},f.prototype.getDefaultAuthenticator=function(){return this._session.user.defaultAuthId==this.getAuthenticatorId()},f.prototype.getSupportedOnDevice=function(){return this.internalAuthenticationDriverDescriptor()&&this.authenticationDriverDescriptor.isSupportedOnDevice(this._session)},f.prototype.getPlaceholderId=function(){return this._placeholderId},f.prototype.updateWithAuthenticatorState=function(n){this._expired=n.expired||!1;this._locked=n.locked||!1;this._serverReportedRegistrationStatus=n.status},f.prototype.getCredentialRecoveryEscapeOption=function(){return this._recoveryEscapeOption},f}();r.AuthenticatorDescriptionImpl=f}(i.authenticationdrivers||(i.authenticationdrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){var r,u,f,t;t=n.sdk||(n.sdk={});r=t.core||(t.core={});u=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.prototype.getEnabled=function(){return this.getSupportedOnDevice()},t}(r.authenticationdrivers.AuthenticatorDescriptionImpl);f=function(){function n(n,i,r,u){this._sdk=n;this._session=i;this._token=u||null;this._clientContext=r;this._uiHandler=this._sdk.currentUiHandler;this._uiContextImpl=new t.impl.UIContextImpl(n)}return n.prototype.getUiContext=function(){return this._uiContextImpl},n.prototype.run=function(){var n=this;return this._sdk.log(t.LogLevel.Debug,function(){return"configuration: Starting session"}),this.queryConfigMenuFromServerAndFilter().then(function(t){return new Promise(function(i,r){n.kickStartSession(t);n._completeFn=i;n._rejectFn=r})})},n.prototype.registerAuthenticator=function(n,t){return this.requestAuthenticatorRegistrationChange(n,!0,t)},n.prototype.reregisterAuthenticator=function(n,t){return this.requestAuthenticatorRegistrationChange(n,!0,t)},n.prototype.setDefaultAuthenticator=function(n){var i=this;return this._sdk.log(t.LogLevel.Info,function(){return"Configuration: Updating user default authenticator."}),new Promise(function(t){if(!i._session.anonymous){var u=i._session.user;u.updateDefaultAuthId(n.getDescription().getAuthenticatorId());i._session.persistUserData&&r.User.save(i._sdk,u)}t(!0);i.updateManagedAuthenticators(i._authenticators)})},n.prototype.unregisterAuthenticator=function(n,t){return this.requestAuthenticatorRegistrationChange(n,!1,t).then(function(){return!0})},n.prototype.requestRefreshAuthenticators=function(){var n=this;return this.queryConfigMenuFromServerAndFilter().then(function(t){return n.updateManagedAuthenticators(t),!0},function(n){throw t.impl.AuthenticationErrorImpl.ensureAuthenticationError(n);})},n.prototype.finishSession=function(){if(!this._appSession)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Attempt to finish a non started config session.");this._appSession.endSession();this._appSession=null;this._completeFn(!0)},n.prototype.kickStartSession=function(n){this._appSession=this._uiHandler.createAuthenticationConfigurationSession(this._session.user.displayName);this._appSession?(this._appSession.startSession(this,null,this._clientContext),this.updateManagedAuthenticators(n)):this._rejectFn(t.impl.AuthenticationErrorImpl.appImplementationError("Invalid return from createAuthenticationConfigurationSession."))},n.prototype.updateManagedAuthenticators=function(n){if(!this._appSession)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Attempt to work with a non started config session.");var i={};n.forEach(function(n){i[n.getDescription().getAuthenticatorId()]=n});this._authenticators=n;this._authenticatorsByName=i;this._appSession.setAuthenticatorsList(n)},n.prototype.queryConfigMenuFromServerAndFilter=function(){var n=this,i;return this._sdk.log(t.LogLevel.Debug,function(){return"configuration: Initiating collection"}),i=this._sdk.promiseCollectionResult(),t.util.wrapPromiseWithActivityIndicator(this._uiHandler,null,this._clientContext,i.then(function(i){n._sdk.log(t.LogLevel.Debug,function(){return"configuration: Collection done; setting up request to query for config menu"});var r=n._session.createConfigMenuFetchRequest(i,n._token);return n._sdk.log(t.LogLevel.Debug,function(){return"configuration: Sending request to query approvals"}),n._session.performSessionExchange(r).then(function(i){var r=i.data&&"configuration"==i.data.type&&i.data;if(!r)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Invalid configuration screen structure encountered.");return r.methods.map(function(i){var r=new u(n._session,i.type,i,i);return new t.impl.ConfigurableAuthenticatorImpl(r,i.options)}).filter(function(n){return n.getDescription().getSupportedOnDevice()})})}))},n.prototype.requestAuthenticatorRegistrationChange=function(n,i,u){var f=this,e;return this._sdk.log(t.LogLevel.Debug,function(){return"configuration: Authenticator "+n.getDescription().getName()+" request (un)registration "+i}),this._sdk.log(t.LogLevel.Debug,function(){return"configuration: Initiating registration request promise"}),e=this._sdk.promiseCollectionResult().then(function(r){return f._sdk.log(t.LogLevel.Debug,function(){return"configuration: Collection done; setting up request"}),f._session.createAuthRegistrationRequest(r,n.getDescription().getAuthenticatorId(),i,f._token)}),this._sdk.log(t.LogLevel.Debug,function(){return"configuration: Initiating control flow"}),e.then(function(e){return f._session.startControlFlow(e,null,u||f._clientContext).then(function(u){var e=u.getInternalData(),s=!1,o;return(e&&e.methods&&e.methods.length&&(f._sdk.log(t.LogLevel.Debug,function(){return"configuration: Processing updates."}),e.methods.forEach(function(n){var t=f._authenticatorsByName[n.type];t&&(t.getDescription().updateWithAuthenticatorState(n),s=!0)})),s)&&(i||!n.getDescription().getDefaultAuthenticator()||f._session.anonymous||(o=f._session.user,o.updateDefaultAuthId(""),f._session.persistUserData&&r.User.save(f._sdk,o)),f.updateManagedAuthenticators(f._authenticators)),u},function(n){throw t.impl.AuthenticationErrorImpl.ensureAuthenticationError(n);})})},n}();r.AuthenticationConfigurationSessionProcessor=f}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){var t;(function(n){var t=function(){function n(n,t){this._sdk=n;this._user=t}return Object.defineProperty(n.prototype,"user",{get:function(){return this._user},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sdk",{get:function(){return this._sdk},enumerable:!1,configurable:!0}),n}(),r;n.BaseSession=t;r=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t}(t);n.LocalSession=r})((t=n.sdk||(n.sdk={})).core||(t.core={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(t){!function(r){var o=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.prototype.createResumableProcess=function(n){return new u(n)},t=h([r.Serializable("BindRequestExecuteControlFlowStageContinuation")],t)}(r.ExecuteControlFlowStageContinuation),u=function(u){function f(n,t,i){var r=u.call(this,n)||this;return r.opName="bind",t&&(r._usedSession=t,r._additionalParameters=i),r}return i(f,u),f.prototype.generateControlFlowRequest=function(){var i=this,u,f;return this.sdk.log(t.LogLevel.Debug,function(){return i.opName+": Generating new device keys for "+(i.user.userId||i.user.idToken)}),u=this.sdk.host.generateKeyPair(this.user.deviceSigningKeyTag,n.sdkhost.KeyClass.StdSigningKey,n.sdkhost.KeyBiometricProtectionMode.None,!0),f=this.sdk.host.generateKeyPair(this.user.deviceEncryptionKeyTag,n.sdkhost.KeyClass.StdEncryptionKey,n.sdkhost.KeyBiometricProtectionMode.None,!0),Promise.all([u,f]).then(function(n){var f=n[0],u=n[1];return i.sdk.log(t.LogLevel.Debug,function(){return i.opName+": key generation done"}),i.sdk.promiseCollectionResult().then(function(n){i.sdk.log(t.LogLevel.Debug,function(){return i.opName+": Collection result completed, Initiating request promise"});var e={collection_result:n.toJson(),public_key:f.publicKeyToJson(),push_token:i.sdkSessionManagementServices.lastReceivedPushToken};return u&&(e.encryption_public_key=u.publicKeyToJson()),i.additionalParameters&&(e.params=i.additionalParameters),new r.SessionExchangeRequest("POST","auth/bind",e,[],i.getFlowId())})})},f.prototype.postProcessControlFlowResult=function(n){var r=this,i=this.sdk.currentSession&&this.sdk.currentSession.deviceId();return this.sdk.currentSession&&i&&(this.sdk.log(t.LogLevel.Debug,function(){return r.opName+": binding device to user after succesful completion"}),this.sdk.currentSession.user.bindDeviceToUser(i)),u.prototype.postProcessControlFlowResult.call(this,n)},f.prototype.createContinuation=function(){return new o(this.session,this.getFlowId())},f}(r.SessionSetupExecuteControlFlowStage),e,f;r.BindRequestExecuteControlFlowStage=u;e=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.prototype.createResumableProcess=function(n){return new f(n,this.flowId)},t=h([r.Serializable("BindControlFlowRequestContinuation")],t)}(r.ResumableControlFlowRequestContinuation);f=function(n){function f(){return null!==n&&n.apply(this,arguments)||this}return i(f,n),f.prototype.createContinuation=function(){return new e(this,this.getFlowId())},f.prototype.run=function(n,i){var f=this;return new Promise(function(e,o){f._ctxt.sdk.deviceSupportsCryptoBinding()?n.deviceBound?o(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Attempt to bind an already bound user on this device.",{user:n.userHandle})):e(f.startWithStage(new u(f,new r.Session(f.rtContext.sdk,n),i))):o(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"cryptographic binding is not supported for this device"))})},f}(r.SessionSetupResumableControlFlowRequest);r.BindControlFlowRequest=f}(t.core||(t.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){var i,r,t;t=n.sdk||(n.sdk={});i=t.core||(t.core={});r=function(){function n(n,i){if(this.sdk=n,this.ec=new elliptic.ec("secp256k1"),i&&(this.sessionId=i.session_id,this.aesKey=this.base64ToJsArray(i.key),!this.isReady()))throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Can't deserialize crypto session");}return n.prototype.getExchangeRequestHeader=function(){if(!this.kp){var n={entropy:this.sdk.host.generateRandomHexString(192),entropyEnc:"hex"};this.kp=this.ec.genKeyPair(n)}return{type:"key_exchange",scheme:2,y:this.jsArrayToBase64(this.kp.getPublic().encode())}},n.prototype.processExchangeResponseHeader=function(n){if(2!=n.scheme)throw"Unsupported crypto scheme "+n.scheme;this.sessionId=n.crypto_session_id;var i=this.kp.derive(this.ec.keyFromPublic(atob(n.y)).getPublic()),t=sha256.create();t.update(i.toArray("be",32));this.aesKey=t.digest()},n.prototype.isReady=function(){return!(!this.aesKey||!this.sessionId)},n.prototype.decryptResponse=function(n){var t=null;if(n.headers.forEach(function(n){"encryption"==n.type&&(t=n)}),t){var r=this.base64ToJsArray(t.iv),u=new aesjs.ModeOfOperation.cbc(this.aesKey,r),f=this.base64ToJsArray(n.data),e=u.decrypt(f),i=aesjs.utils.utf8.fromBytes(e);i=this.pkcs7Unpad(i);n.data=JSON.parse(i)}return n},n.prototype.encryptRequest=function(n){var u=this,i=this.sdk.host.generateRandomHexString(32),r=aesjs.utils.hex.toBytes(i),f={type:"encryption",iv:t.util.hexToBase64(i),crypto_session_id:this.sessionId},e=n.headers.map(function(n){return u.encryptStringToBase64(JSON.stringify(n),r)}),o=JSON.stringify(n.data),s=this.encryptStringToBase64(o,r);n.headers=[f];n.enc_headers=e;n.data=s},n.prototype.encryptStringToBase64=function(n,t){var i=new aesjs.ModeOfOperation.cbc(this.aesKey,t),r=aesjs.utils.utf8.toBytes(n),u=this.pkcs7Pad(r),f=i.encrypt(u);return this.jsArrayToBase64(f)},n.prototype.toJson=function(){return{scheme:2,session_id:this.sessionId,key:this.jsArrayToBase64(this.aesKey)}},n.fromJson=function(t,i){return new n(t,i)},n.prototype.jsArrayToBase64=function(n){for(var i="",t=0;t<n.length;t++)i+=String.fromCharCode(n[t]);return btoa(i)},n.prototype.base64ToJsArray=function(n){for(var i=atob(n),r=[],t=0;t<i.length;t++)r.push(i.charCodeAt(t));return r},n.prototype.pkcs7Pad=function(n){var i=16-n.length%16,r=new Uint8Array(n.length+i),t;for(r.set(n,0),t=0;t<i;t++)r[n.length+t]=i;return r},n.prototype.pkcs7Unpad=function(n){var t=n.charCodeAt(n.length-1);return n.slice(0,-t)},n}();i.Scheme2CryptoSession=r}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){var t;(function(n){var i,r;!function(n){n[n.FinishSession=0]="FinishSession";n[n.CurrentDeviceDeleted=1]="CurrentDeviceDeleted"}(i=n.DeviceManagementSessionProcessorReturnReason||(n.DeviceManagementSessionProcessorReturnReason={}));r=function(){function n(n,i,r,u){this._sdk=n;this._session=i;this._clientContext=r;this._token=u||null;this._uiHandler=this._sdk.currentUiHandler;this._uiContextImpl=new t.impl.UIContextImpl(n)}return n.prototype.getUiContext=function(){return this._uiContextImpl},n.prototype.run=function(){var n=this;return this._sdk.log(t.LogLevel.Debug,function(){return"device management: Starting session"}),this.queryDevicesFromServer().then(function(t){return new Promise(function(i,r){n._completeFn=i;n._rejectFn=r;n.kickStartSession(t)})})},n.prototype.removeDevice=function(n,i){var r=this;return new Promise(function(u,f){if(n.getInfo().getIsCurrent())throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Illegal attempt to delete the current device using 'DeviceManagementSessionServices.removeDevice'. The current device must only be deleted using DeviceManagementSessionServices.removeCurrentDeviceAndFinishSession.");var e=r.ensureValidDevice(n);r.performDeviceAction(e,t.DeviceManagementAction.Remove,i,null).then(function(){return r._sdk.log(t.LogLevel.Debug,function(){return"device management: Updating device state locally"}),e.getInfo().setStatus(t.DeviceStatus.Removed),r.updateManagedDevices(r._managedDevices.filter(function(n){return n!=e})),!0}).then(u,f)})},n.prototype.removeCurrentDeviceAndFinishSession=function(n){var u,r=this;return this._appSession?(u=this._appSession,new Promise(function(f,e){var o,s;if(r._sdk.log(t.LogLevel.Debug,function(){return"device management: Start removing current device"}),o=r._managedDevices.filter(function(n){return n.getInfo().getIsCurrent()}),1!=o.length)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Couldn't locate current device in device list.");s=o[0];r.performDeviceAction(s,t.DeviceManagementAction.Remove,n,null).then(function(){return r._sdk.log(t.LogLevel.Debug,function(){return"device management: Updating device state locally"}),s.getInfo().setStatus(t.DeviceStatus.Removed),!0}).then(function(){f(!0);u.endSession();r._appSession=null;r._completeFn(i.CurrentDeviceDeleted)}).catch(e)})):Promise.reject(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Attempt to finish a non started device management session."))},n.prototype.renameDevice=function(n,i,r){var u=this;return new Promise(function(f,e){var o=u.ensureValidDevice(n),s={name:i};return u.performDeviceAction(o,t.DeviceManagementAction.Rename,r,s).then(function(){return u._sdk.log(t.LogLevel.Debug,function(){return"device management: Updating device state locally"}),o.getInfo().setName(i),u.updateManagedDevices(u._managedDevices),!0}).then(f,e)})},n.prototype.requestRefreshDevices=function(){var n=this;return this.queryDevicesFromServer().then(function(t){return n.updateManagedDevices(t),!0},function(n){throw t.impl.AuthenticationErrorImpl.ensureAuthenticationError(n);})},n.prototype.finishSession=function(){if(!this._appSession)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Attempt to finish a non started device management session.");this._appSession.endSession();this._appSession=null;this._completeFn(i.FinishSession)},n.prototype.kickStartSession=function(n){this._appSession=this._sdk.currentUiHandler.createDeviceManagementSession(this._session.user.displayName);this._appSession?(this.updateManagedDevices(n),this._appSession.startSession(this,null,this._clientContext)):this._rejectFn(t.impl.AuthenticationErrorImpl.appImplementationError("Invalid return from createDeviceManagementSession."))},n.prototype.updateManagedDevices=function(n){if(!this._appSession)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Attempt to update device list for a non started device management session.");this._managedDevices=n;this._appSession.setSessionDevicesList(n)},n.prototype.queryDevicesFromServer=function(){var n=this,i;return this._sdk.log(t.LogLevel.Debug,function(){return"device management: Initiating collection"}),i=this._sdk.promiseCollectionResult(),t.util.wrapPromiseWithActivityIndicator(this._uiHandler,null,this._clientContext,i.then(function(i){n._sdk.log(t.LogLevel.Debug,function(){return"device management: Collection done; setting up request to query devices"});var r=n._session.createDevicesFetchRequest(i,n._token);return n._sdk.log(t.LogLevel.Debug,function(){return"device management: Sending request to query devices"}),n._session.startControlFlow(r,null,n._clientContext).then(function(i){return n._uiHandler.endActivityIndicator(null,n._clientContext),i.getInternalData().devices.map(function(i){var r=new t.impl.ManagedDeviceImpl(i);return r.getInfo().getDeviecId()==n._session.user.deviceId&&r.getInfo().forceCurrent(),r})})}))},n.prototype.performDeviceAction=function(n,i,r,u){var e,f=this,o=r||this._clientContext,s;switch(i){case t.DeviceManagementAction.Remove:e="remove";break;case t.DeviceManagementAction.Rename:e="name";break;default:return Promise.reject(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Invalid device action specified "+i))}return this._sdk.log(t.LogLevel.Debug,function(){return"devices: action "+e+" on "+n.getInfo().getDeviecId()}),this._sdk.log(t.LogLevel.Debug,function(){return"devices: Initiating collection"}),s=this._sdk.promiseCollectionResult(),t.util.wrapPromiseWithActivityIndicator(this._uiHandler,null,o,s.then(function(i){f._sdk.log(t.LogLevel.Debug,function(){return"devices: Collection done; setting up request"});var r=f._session.createDeviceActionRequest(i,f._token,n.getInfo().getDeviecId(),e,u);return f._sdk.log(t.LogLevel.Debug,function(){return"devices: Sending request"}),f._session.startControlFlow(r,null,o).then(function(n){return n.getInternalData()})}).catch(function(n){throw t.impl.AuthenticationErrorImpl.ensureAuthenticationError(n);}))},n.prototype.ensureValidDevice=function(n){var i=this._managedDevices.indexOf(n);if(i<0)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Attempt to perform a device action on a device not originally included in device management session.");return this._managedDevices[i]},n}();n.DeviceManagementSessionProcessor=r})((t=n.sdk||(n.sdk={})).core||(t.core={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var i=function(){function t(n){this._name=n;this._extensions=[];t._extensionPoints[n]=this}return t.prototype.extend=function(n){this._extensions.push(n)},t.prototype.forEach=function(n){this._extensions.forEach(n)},t.prototype.first=function(n){var t=null;return this._extensions.forEach(function(i){!t&&n(i)&&(t=i)}),t},t.prototype.firstNonNull=function(n){var t=null;return this._extensions.forEach(function(i){t||(t=n(i))}),t},t.byName=function(t){var i=this._extensionPoints[t];if(!i)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Invalid extension point requested: "+t);return i},t._extensionPoints={},t}();t.ExtensionPoint=i}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return i(r,n),r.createSuccessResponse=function(n){var i=new t.Fido2AuthenticatorSuccessResponse;return i.setFido2Response(n),i},r.createdFailedResponse=function(n){var i=new t.Fido2AuthenticationFailedResponse;return i.setFailureError(n),i},r}(n.InputResponseType);t.Fido2InputResponseInternal=r}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){var t=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.prototype.getFailureError=function(){return this._failureError},t.prototype.setFailureError=function(n){this._failureError=n},t}(n.Fido2InputResponseInternal);n.Fido2AuthenticationFailedResponse=t}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){var t=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.prototype.getFido2Response=function(){return this._fido2Response},t.prototype.setFido2Response=function(n){this._fido2Response=n},t}(n.Fido2InputResponseInternal);n.Fido2AuthenticatorSuccessResponse=t}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var f=function(n){function u(){return null!==n&&n.apply(this,arguments)||this}return i(u,n),u.prototype.createResumableProcess=function(n){return new r(n)},u=h([t.Serializable("InvokeAnonymousPolicyRequestExecuteControlFlowStageContinuation")],u)}(t.ExecuteControlFlowStageContinuation),r,e,u;t.InvokeAnonymousPolicyRequestExecuteControlFlowStageContinuation=f;r=function(r){function u(n,t,i,u){void 0===i&&(i=null);var f=r.call(this,n)||this;return f.opName="invokeAnonymousPolicy",t&&(f._usedSession=t,null===i||"string"==typeof i?(f._additionalParameters=u,f._policy=i):f._inlineControlFlowInitiationServerResponse=i),f}return i(u,r),u.prototype.generateControlFlowRequest=function(){var i=this;return this.sdk.promiseCollectionResult(this.sdk.enabledCollectorsAnonymous).then(function(r){i.sdk.log(n.LogLevel.Debug,function(){return"authenticate: Collection done; setting up request"});var u={collection_result:r.toJson(),push_token:i.sdkSessionManagementServices.lastReceivedPushToken};return i.policy&&(u.policy_request_id=i.policy),i.additionalParameters&&(u.params=i.additionalParameters),new t.SessionExchangeRequest("POST","auth/anonymous_invoke",u,[],i.getFlowId())})},u.prototype.createContinuation=function(){return new f(this.session,this.getFlowId())},u}(t.ExecuteControlFlowStage);t.InvokeAnonymousPolicyRequestExecuteControlFlowStage=r;e=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return i(r,n),r.prototype.createResumableProcess=function(n){return new u(n,this.flowId)},r=h([t.Serializable("InvokeAnonymousPolicyControlFlowRequestContinuation")],r)}(t.ResumableControlFlowRequestContinuation);u=function(n){function u(){return null!==n&&n.apply(this,arguments)||this}return i(u,n),u.prototype.createContinuation=function(){return new e(this,this.getFlowId())},u.prototype.run=function(n,i){var u,f=t.Session.createAnonymousSession(this.rtContext.sdk);return u="string"!=typeof n&&n?new r(this,f,n):new r(this,f,n,i),this.startWithStage(u)},u}(t.ResumableControlFlowRequest);t.InvokeAnonymousPolicyControlFlowRequest=u}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var e=function(n){function u(){return null!==n&&n.apply(this,arguments)||this}return i(u,n),u.prototype.createResumableProcess=function(n){return new r(n)},u=h([t.Serializable("InvokePolicyRequestExecuteControlFlowStageContinuation")],u)}(t.ExecuteControlFlowStageContinuation),r=function(r){function u(n,t,i,u){void 0===u&&(u=null);var f=r.call(this,n)||this;return f.opName="invokePolicy",t&&(f._usedSession=t,f._additionalParameters=i,f._policy=u),f}return i(u,r),u.prototype.generateControlFlowRequest=function(){var i=this;return this.sdk.promiseCollectionResult().then(function(r){return i.sdk.log(n.LogLevel.Debug,function(){return"invokePolicy: Collection done; setting up request"}),t.AuthenticateRequestExecuteControlFlowStage.generateLoginRequest(r,i)})},u.prototype.restoreParametersFromContinuation=function(t){if(!this.sdk.currentSession)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Attempt to resume invokePolicy without an existing session.");r.prototype.restoreParametersFromContinuation.call(this,t);var i=this._usedSession;this._usedSession=this.sdk.currentSession;this.sdk.currentSession.updateFromContinuedSession(i)},u.prototype.createContinuation=function(){return new e(this.session,this.getFlowId())},u}(t.ExecuteControlFlowStage),f,u;t.InvokePolicyRequestControlFlowStage=r;f=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return i(r,n),r.prototype.createResumableProcess=function(n){return new u(n,this.flowId)},r=h([t.Serializable("InvokePolicyControlFlowRequestContinuation")],r)}(t.ResumableControlFlowRequestContinuation);u=function(t){function u(){return null!==t&&t.apply(this,arguments)||this}return i(u,t),u.prototype.createContinuation=function(){return new f(this,this.getFlowId())},u.prototype.run=function(t,i){return this.rtContext.sdk.currentSession?this.startWithStage(new r(this,this.rtContext.sdk.currentSession,i,t)):Promise.reject(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Attempt to resume invokePolicy without an existing session."))},u}(t.ResumableControlFlowRequest);t.InvokePolicyControlFlowRequest=u}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){var i,r,t;t=n.sdk||(n.sdk={});i=t.core||(t.core={});r=function(){function n(){}return n.installOnSdk=function(t){t.setExternalLogger(new n)},n.prototype.log=function(n,i,r){var u="["+i+"] "+r;switch(n){case t.LogLevel.Debug:console.log(u);break;case t.LogLevel.Info:console.info(u);break;case t.LogLevel.Warning:console.warn(u);break;case t.LogLevel.Error:case t.LogLevel.Critical:console.error(u)}},n}();i.JsConsoleLogger=r}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){var t;(function(i){var e,r,u,f,o;!function(n){n.Registering="registering";n.Registered="registered";n.Unregistered="unregistered"}(e=i.LocalEnrollmentStatus||(i.LocalEnrollmentStatus={})),function(n){n.None="none";n.Validated="validated";n.Invalidated="invalidated"}(r=i.LocalEnrollmentValidationStatus||(i.LocalEnrollmentValidationStatus={}));u=function(){function n(n,t){this.pbkdf_iterations_count=n;this.pbkdf_key_size=t}return n.prototype.duplicate=function(){return new n(this.pbkdf_iterations_count,this.pbkdf_key_size)},n.prototype.toRecordFormat=function(){return{pbkdf_iterations_count:this.pbkdf_iterations_count,pbkdf_key_size:this.pbkdf_key_size}},n}();i.ClientCryptoSettingsRecordFormat=u;f=function(){function n(n,t,i,r,u,f,e){this.salt=n;this.status=t;this.version=i;this.authenticatorId=r;this.cryptoSettings=u;this.validationStatus=f;this.publicKeyHash=e}return n.prototype.duplicate=function(){var i=null,t;return this.cryptoSettings&&(i=this.cryptoSettings.duplicate()),t=new n(this.salt,this.status,this.version,this.authenticatorId,i,this.validationStatus,this.publicKeyHash),t.keyMeterial=this.keyMeterial,this.authenticatorConfig&&(t.authenticatorConfig=JSON.parse(JSON.stringify(this.authenticatorConfig))),t},n.prototype.toRecordFormat=function(){var n=null;return this.cryptoSettings&&(n=this.cryptoSettings.toRecordFormat()),{salt:this.salt,status:this.status,version:this.version,authenticatorId:this.authenticatorId,cryptoSettings:n,validationStatus:this.validationStatus,publicKeyHash:this.publicKeyHash,keyMeterial:this.keyMeterial,authenticatorConfig:this.authenticatorConfig}},n}();i.LocalEnrollmentRecordFormat=f;o=function(){function o(){}return Object.defineProperty(o.prototype,"salt",{get:function(){return this._record.salt},set:function(n){this._record.salt=n},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"status",{get:function(){return this._record.status||e.Unregistered},set:function(n){this._record.status=n},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"version",{get:function(){return this._record.version},set:function(n){this._record.version=n},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"authenticatorId",{get:function(){return this._record.authenticatorId},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"validationStatus",{get:function(){return this._record.validationStatus},set:function(n){this._record.validationStatus=n},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"publicKeyHash",{get:function(){return this._record.publicKeyHash},set:function(n){this._record.publicKeyHash=n},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"cryptoSettings",{get:function(){return this._record.cryptoSettings?t.ClientCryptoSettings.create(this._record.cryptoSettings.pbkdf_iterations_count):null},set:function(n){this._record.cryptoSettings=n?new u(n.getLocalEnrollmentKeyIterationCount(),n.getLocalEnrollmentKeySizeInBytes()):null},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"keyMaterial",{get:function(){return this._record.keyMeterial},set:function(n){this._record.keyMeterial=n},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"authenticatorConfig",{get:function(){return this._record.authenticatorConfig},set:function(n){this._record.authenticatorConfig=n},enumerable:!1,configurable:!0}),o.prototype.setFingerprintDbSnapshot=function(n){this._record.fingerprintDbSsnapshot=n},o.enrollmentWithRecord=function(n){var t=new o,i=null;return n.cryptoSettings&&(i=new u(n.cryptoSettings.pbkdf_iterations_count,n.cryptoSettings.pbkdf_key_size)),t._record=new f(n.salt,n.status,n.version,n.authenticatorId,i,n.validationStatus,n.publicKeyHash),t.authenticatorConfig=n.authenticatorConfig,t.keyMaterial=n.keyMeterial,t},o.migrateFPEnrollmentsToDeviceBiometricsIfNeeded=function(r,u,f){var o=f.host.queryHostInfo(n.sdkhost.HostInformationKey.DeviceBiometricsSupported),e;return o&&"false"!=o&&"true"==f.host.queryHostInfo(n.sdkhost.HostInformationKey.DeviceBiometricsFPContinuation)&&(e=r[i.authenticationdrivers.AuthenticationDriverDescriptorFingerprint.authenticatorName],e&&(f.log(t.LogLevel.Debug,function(){return"migrating Fingerprint enrollment to DeviceBiometrics for user "+u.displayName}),e.version="v0_"+e.version,e.authenticatorId=i.authenticationdrivers.AuthenticationDriverDescriptorDeviceBiometrics.authenticatorName,delete r[i.authenticationdrivers.AuthenticationDriverDescriptorFingerprint.authenticatorName],r[i.authenticationdrivers.AuthenticationDriverDescriptorDeviceBiometrics.authenticatorName]=e,f.host.writeStorageKey(this.storageKeyForEnrollmentsForUser(u.guid),r))),r},o.enrollmentsForUser=function(n,i){var f={},r=i.host.readStorageKey(this.storageKeyForEnrollmentsForUser(n.guid));for(var u in r=o.migrateFPEnrollmentsToDeviceBiometricsIfNeeded(r,n,i),i.log(t.LogLevel.Debug,function(){return"Got db "+JSON.stringify(r)}),r)i.log(t.LogLevel.Debug,function(){return"Got db wEnrollmentKey"+u}),f[u]=o.enrollmentWithRecord(r[u]);return f},o.deleteEnrollmentsForUser=function(n,t){t.host.deleteStorageKey(this.storageKeyForEnrollmentsForUser(n.guid))},o.createNew=function(n,t,i,u,s){var c=new f(i,e.Unregistered,t,n,null,r.None,s),h=new o;return h._record=c,h},o.prototype.duplicate=function(){var n=new o;return n._record=this._record.duplicate(),n},o.updateEnrollmentsForUser=function(n,t,i){var r={};for(var u in t)r[u]=t[u]._record.toRecordFormat();i.host.writeStorageKey(this.storageKeyForEnrollmentsForUser(n.guid),r)},o.invalidateLocalRegistrationStatusAndNotifyUIHandler=function(n,i){return new Promise(function(u){if(!n)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"No user interaction session provider!");n._sdk.log(t.LogLevel.Info,function(){return"Marking authenticator as invalidated and invoking UI Handler"});var f=n._session.user.localEnrollments[i.getAuthenticatorId()];f.validationStatus=r.Invalidated;n._session.user.updateEnrollmentRecord(f);n._uiHandler.localAuthenticatorInvalidated(i,n._clientContext).then(function(n){u(n)})})},o.storageKeyForEnrollmentsForUser=function(n){return new i.TarsusKeyPath("per_user",n.toString(),"local_enrollments")},o.listInvalidatedLocalEnrollments=function(n){var t,i=[];for(var u in n.user.localEnrollments)(t=n.user.localEnrollments[u]).validationStatus==r.Invalidated&&i.push(t);return i},o}();i.LocalEnrollment=o})((t=n.sdk||(n.sdk={})).core||(t.core={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(t){function i(n){return void 0!==n.ref}t.isRefType=i;t.unwrap=function(t){if(i(t))throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"style property "+t+" is not the right format");return t}}(t.Protocol||(t.Protocol={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){n.TARSUS_EXTENSION_POINT_NAME_MESSAGE_FILTERS="com.ts.mobile.sdk.core.messageFilters";n.TARSUS_EXTENSION_POINT_NAME_SESSION_OBSERVERS="com.ts.mobile.sdk.core.sessionObservers";n.TARSUS_EXTENSION_POINT_NAME_PLACEHOLDER_EXTENSION="com.ts.mobile.sdk.core.placeholderExtension";n.TARSUS_EXTENSION_POINT_NAME_FORMS_EXTENSION="com.ts.mobile.plugins.form.settings";n.TARSUS_EXTENSION_POINT_NAME_IDP_LOGIN_PROVIDER="com.ts.mobile.plugins.providers.idp";n.TARSUS_EXTENSION_POINT_NAME_KYC="com.ts.mobile.plugins.kyc";n.TARSUS_EXTENSION_POINT_NAME_SEED_BASED_TOTP_CALCULATOR="com.ts.mobile.plugins.totp.seedBasedTotpCalculator"}(n.tarsusplugin||(n.tarsusplugin={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){var i,r,t;t=n.sdk||(n.sdk={});i=t.core||(t.core={});r=function(){function n(n){this._sdk=n}return Object.defineProperty(n.prototype,"sdk",{get:function(){return this._sdk},enumerable:!1,configurable:!0}),n.prototype.createClientStringsRequest=function(n){return new i.PublicExchangeRequest("GET","resources/localization?locale="+n+"&v=1",{})},n.prototype.performRequest=function(n){var r=this;return this._sdk.log(t.LogLevel.Debug,function(){return"Preprocess request "+JSON.stringify(n)}),this.createTransportRequestForPublicExchangeRequest(n).then(function(n){return r.prepareTransportRequest(n).then(function(n){return r._sdk.log(t.LogLevel.Debug,function(){return"Will send request "+JSON.stringify(n)}),r._sdk.transportProvider.sendRequest(n).then(function(n){var u,f;r._sdk.log(t.LogLevel.Debug,function(){return"Got response "+JSON.stringify(n)});try{u=JSON.parse(n.getBodyJson())}catch(i){throw t.impl.AuthenticationErrorImpl.errorForTransportResponse(n);}if(f=u.data&&u.data.state==i.Protocol.AuthSessionState.Rejected,200==n.getStatus()&&!u.error_code||401==n.getStatus()&&f)return u;throw 200==n.getStatus()||u.error_code?t.impl.AuthenticationErrorImpl.errorForServerResponse(u):t.impl.AuthenticationErrorImpl.errorForTransportResponse(n);})})})},n.prototype.createTransportRequestForPublicExchangeRequest=function(n){var i=this;return new Promise(function(r){var o={headers:n.envelopeHeaders,data:n.body},u=new t.TransportRequest,f,e;u.setMethod(n.method);f=i._sdk.connectionSettings.getRealm()||"";e=f.length?"/"+f:"";u.setUrl(""+i._sdk.connectionSettings.getServerAddress()+e+"/api/v2/"+n.serverRelativeUrl);u.setBodyJson(JSON.stringify(o));r(u)})},n.prototype.prepareTransportRequest=function(n){var i={aid:this._sdk.connectionSettings.getAppId()},t;return n.setUrl(this.urlWithConcatenatedQuery(n.getUrl(),i)),t=n.getHeaders()||[],n.setHeaders(t),Promise.resolve(n)},n.prototype.urlWithConcatenatedQuery=function(n,t){var i="";return n.indexOf("?")<0?i="?":"&"!=n[n.length-1]&&(i="&"),n+i+Object.keys(t).map(function(n){return n+"="+encodeURIComponent(t[n])}).join("&")},n}();i.PublicNetworkRequest=r}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(){function n(){}return n.prototype.getUrl=function(){return this._url},n.prototype.setUrl=function(n){this._url=n},n.prototype.getMethod=function(){return this._method},n.prototype.setMethod=function(n){this._method=n},n.prototype.getHeaders=function(){return this._headers},n.prototype.setHeaders=function(n){this._headers=n},n.prototype.getBodyJson=function(){return this._bodyJson},n.prototype.setBodyJson=function(n){this._bodyJson=n},n.__tarsusInterfaceName="TransportRequest",n}();n.TransportRequest=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){var t;(function(r){var e=function(e){function o(n,t){var i=e.call(this,n,t)||this,r;return i._lockCount=0,i._invalidated=!1,i._persistUserData=n.currentPersistUserData,r=t&&(t.deviceBound||t.hasLoggedIn),i._deviceId=r&&t.deviceId||null,i}return i(o,e),Object.defineProperty(o.prototype,"anonymous",{get:function(){return this._anonymous},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"invalidated",{get:function(){return this._invalidated},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"persistUserData",{get:function(){return this._persistUserData},enumerable:!1,configurable:!0}),o.createAnonymousSession=function(n){var t=new o(n,r.User.createEphemeralUser(n));return t._anonymous=!0,t},o.prototype.createLogoutRequest=function(){return new r.SessionExchangeRequest("POST","auth/logout",{},[],this.getFlowId())},o.prototype.createApprovalsFetchRequest=function(n){var t={collection_result:n.toJson()};return new r.SessionExchangeRequest("POST","approvals/actions/fetch",t,[],this.getFlowId())},o.prototype.createApprovalReplyRequest=function(n,i,u){var f={collection_result:n.toJson(),status:u==t.MobileApprovalStatus.Approved?r.Protocol.ServerResponseDataApprovalsApprovalStatus.Approved:r.Protocol.ServerResponseDataApprovalsApprovalStatus.Denied};return new r.SessionExchangeRequest("POST","auth/approve?apid="+i,f,[],this.getFlowId())},o.prototype.createDevicesFetchRequest=function(n,t){var i={collection_result:n.toJson()};return t&&(i.token=t),new r.SessionExchangeRequest("POST","authenticate/physical/devices",i,[],this.getFlowId())},o.prototype.createDeviceActionRequest=function(n,t,i,u,f){var e={collection_result:n.toJson(),device_id:i};return t&&(e.token=t),f&&Object.keys(f).forEach(function(n){e[n]=f[n]}),new r.SessionExchangeRequest("POST","authenticate/physical/device/action?action="+u,e,[],this.getFlowId())},o.prototype.createConfigMenuFetchRequest=function(n,t){var i={collection_result:n.toJson()};return t&&(i.token=t),new r.SessionExchangeRequest("POST","auth/authenticator/config_menu",i,[],this.getFlowId())},o.prototype.createAuthRegistrationRequest=function(n,t,i,u){var f={collection_result:n.toJson(),type:t},e;return u&&(f.token=u),e=i?"register":"unregister",new r.SessionExchangeRequest("POST","auth/authenticator/"+e,f,[],this.getFlowId())},o.prototype.startControlFlow=function(n,t,i){var u=new r.ControlFlowProcessor(this.sdk,this,i,t);return this.runWithSessionControlFlow(u,function(t){return t.startControlFlow(n)})},o.prototype.continueControlFlow=function(n,t,i,u){var f=new r.ControlFlowProcessorRuntimeContext,e;return f.cflowRequestContext=i,f.clientContext=u,f.sdk=this.sdk,f.session=this,f.uiHandler=this.sdk.currentUiHandler,e=n.createResumableProcess(f),this.runWithSessionControlFlow(e,function(i){return i.resume(n,t)})},o.prototype.createCurrentControlFlowContinuation=function(){if(!this._currentControlFlow)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Attempt to create continuation for a session without an active control flow");return this._currentControlFlow.createContinuation()},o.prototype.runWithSessionControlFlow=function(n,i){var u=this;return new Promise(function(f,e){if(u._currentControlFlow)throw u.sdk.log(t.LogLevel.Error,function(){return"Attempt to start a control flow while an existing control flow ("+u._currentControlFlow.challenge+") is running."}),new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Attempt to start a control flow while an existing control flow ("+u._currentControlFlow.challenge+") is running.");u._currentControlFlow=n;u.sdk.log(t.LogLevel.Debug,function(){return"Start control flow"});r.authenticationdrivers.SimpleAuthenticationDriverDescriptor.refreshInvalidatedAuthenticatorsEnrollments(u).catch(function(n){u.sdk.log(t.LogLevel.Warning,function(){return"Could not refresh invalidated authenticators enrollments: "+n})}).then(function(){return i(n)}).finally(function(){u.sdk.log(t.LogLevel.Debug,function(){return"Done control flow "+n.challenge});u._currentControlFlow=null}).then(f,e)})},o.prototype.getCurrentUserInteractionSessionProvider=function(){return this._currentControlFlow},o.prototype.generateInvalidatedAuthenticatorsHeadersIfNeeded=function(){for(var e,o,n,u=[],i=0,f=r.LocalEnrollment.listInvalidatedLocalEnrollments(this);i<f.length;i++)(n=f[i],this._sdk.log(t.LogLevel.Debug,function(){return"Found invalidated authenticator: "+n.authenticatorId}),n.publicKeyHash)&&(e={type:"public_key_hash",hash:n.publicKeyHash},o={type:"registration_invalidated",method:n.authenticatorId,registration_id:e},u.push(o));return u},Object.defineProperty(o.prototype,"deviceSigningKeyPair",{get:function(){if(!this._deviceKeyPair&&!this._anonymous&&this._sdk.deviceSupportsCryptoBinding()&&(this._deviceKeyPair=this._sdk.host.getKeyPair(this._user.deviceSigningKeyTag,n.sdkhost.KeyClass.StdSigningKey,n.sdkhost.KeyBiometricProtectionMode.None),this.user.deviceBound&&!this._deviceKeyPair))throw this._sdk.log(t.LogLevel.Error,function(){return"Could not load device signing key pair for this device."}),new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.InvalidDeviceBinding,"Invalid device signature - could not load device signing key pair.");return this._deviceKeyPair},enumerable:!1,configurable:!0}),o.prototype.performSessionExchange=function(n){return this.performSessionExchangeInternal(n,!0,!0,!0).catch(function(n){throw t.impl.AuthenticationErrorImpl.ensureAuthenticationError(n);})},o.prototype.performSessionExchangeInternal=function(i,u,f,e){var o=this,s;return this._invalidated?(this._sdk.log(t.LogLevel.Error,function(){return"Attempt to execute a session exchange from invalidated session."}),Promise.reject(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.SessionRequired,"Session was invalidated by server."))):this.connectionSettings().getCryptoMode()==t.ConnectionCryptoMode.Full&&!this._currentCryptoSession&&e?(s=new r.SessionExchangeRequest("POST","auth/key_exchange",{r:"Hello Encrypted World"},[],this.getFlowId()),this.performSessionExchangeInternal(s,u,f).then(function(){return o.performSessionExchangeInternal(i,u)})):(this._sdk.log(t.LogLevel.Debug,function(){return"Preprocess request "+JSON.stringify(i)}),this.preprocessSessionExchangeRequest(i).then(function(e){return o.promisePossiblyEncryptedTransportRequest(e).then(function(e){return o.preprocessTransportRequest(e).then(function(e){return o._sdk.log(t.LogLevel.Debug,function(){return"Will send request "+JSON.stringify(e)}),o._sdk.transportProvider.sendRequest(e).then(function(e){var s,c,h;o._sdk.log(t.LogLevel.Debug,function(){return"Got response "+JSON.stringify(e)});try{s=JSON.parse(e.getBodyJson())}catch(n){throw t.impl.AuthenticationErrorImpl.errorForTransportResponse(e);}if(o.postprocessResponse(s),c=(s=o.possiblyDecryptResponse(s)).data&&s.data.state==r.Protocol.AuthSessionState.Rejected,200==e.getStatus()&&!s.error_code||401==e.getStatus()&&c)return s;if(200==e.getStatus()||s.error_code){if(s.error_code==r.Protocol.ServerResponseErrorCode.EncryptionStateError&&f)return o._currentCryptoSession=null,o.performSessionExchangeInternal(i,u,!1,!0);if(s.error_code==r.Protocol.ServerResponseErrorCode.DeviceKeyExpired){if(o._sdk.log(t.LogLevel.Debug,function(){return"DeviceKeyRoll: device key expired rejection received"}),u)return h=o._sdk.host.generateRandomHexString(24),o._sdk.host.generateKeyPair(o._user.getPendingDeviceSigningKeyTag(h),n.sdkhost.KeyClass.StdSigningKey,n.sdkhost.KeyBiometricProtectionMode.None,!0).then(function(n){var r=void 0;return o.verifyDevicePublicKey(s.data.key_id)||(o._sdk.log(t.LogLevel.Warning,function(){return"DeviceKeyRoll: server response device public key hash doesn't match."}),r="Device public key hash and server response public key hash do not match."),o._deviceKeyRollData={deviceKeyPair:n,salt:h,message:r},o.performSessionExchangeInternal(i,!1,!0,!0)});if(o._sdk.log(t.LogLevel.Warning,function(){return"DeviceKeyRoll: already attempted to roll device key and failed. Aborting second attempt."}),o._deviceKeyRollData)try{o._sdk.host.deleteKeyPair(o._user.getPendingDeviceSigningKeyTag(o._deviceKeyRollData.salt))}catch(n){o._sdk.log(t.LogLevel.Warning,function(){return"DeviceKeyRoll: Can't delete pending device signing key."})}}else s.error_code==r.Protocol.ServerResponseErrorCode.UserIdTokenExpired&&r.User.resetUserIdTokenForSession(o);throw t.impl.AuthenticationErrorImpl.errorForServerResponse(s);}throw t.impl.AuthenticationErrorImpl.errorForTransportResponse(e);})})})}))},o.prototype.processInlineResponse=function(n){return this.postprocessResponse(n),Promise.resolve(n)},o.prototype.cancelCurrentControlFlow=function(){this._currentControlFlow?this._currentControlFlow.cancelFlow():this._sdk.log(t.LogLevel.Error,function(){return"No current control flow."})},o.prototype.deviceId=function(){return this._deviceId},o.prototype.preprocessTransportRequest=function(n){var e=this,r={aid:this.connectionSettings().getAppId()},i,u,f;this._deviceId&&(r.did=this._deviceId);this._sessionId&&(r.sid=this._sessionId);this._sdk.uiAssetsData&&this._sdk.uiAssetsData.locale&&(r.locale=this._sdk.uiAssetsData.locale);n.setUrl(this.urlWithConcatenatedQuery(n.getUrl(),r));i=n.getHeaders()||[];u=new t.TransportHeader;u.setName("X-TS-Client-Version");u.setValue(this.clientVersionHeader);i.push(u);f=new t.TransportHeader;f.setName("Authorization");f.setValue("TSToken "+this.connectionSettings().getToken()+"; tid="+this.connectionSettings().getTokenName());i.push(f);try{if(this._deviceId&&this.deviceSigningKeyPair)return this.generateSignatureForRequest(n).then(function(r){var f=t.util.calcPublicKeyHexStringEncodedSha256Hash(e.deviceSigningKeyPair,e._sdk),u=new t.TransportHeader;return u.setName("Content-Signature"),u.setValue("data:"+r+";key-id:"+f+";scheme:4"),i.push(u),n.setHeaders(i),n})}catch(n){return Promise.reject(n)}return n.setHeaders(i),Promise.resolve(n)},o.prototype.postprocessResponse=function(n){var t=this;n.headers&&n.headers.forEach(function(n){o.headerProcessors[n.type].call(t,n)})},o.prototype.encryptEnvelopedMessageIfNeeded=function(n){var t=this.generateKeyExchangeHeaderIfNeeded();this._currentCryptoSession&&this._currentCryptoSession.isReady()&&this._currentCryptoSession.encryptRequest(n);t&&n.headers.push(t)},o.prototype.promisePossiblyEncryptedTransportRequest=function(n){var i=this;return new Promise(function(u){var s,c={headers:n.envelopeHeaders,data:n.body},f,h,l,e,o;i.encryptEnvelopedMessageIfNeeded(c);f=new t.TransportRequest;f.setHeaders([]);f.setMethod(n.method);h=i._sdk.connectionSettings.getRealm()||"";l=h.length?"/"+h:"";f.setUrl(""+i._sdk.connectionSettings.getServerAddress()+l+"/api/v2/"+n.serverRelativeUrl);f.setBodyJson(JSON.stringify(c));e=null===(s=n.envelopeHeaders.filter(function(n){return n.type===r.Protocol.flowIdHeaderName}))||void 0===s?void 0:s[0];i.connectionSettings().shouldSendFlowIdAsHttpHeader()&&e&&(o=new t.TransportHeader,o.setName(e.type),o.setValue(e[r.Protocol.flowIdHeaderName]),f.getHeaders().push(o));u(f)})},o.prototype.possiblyDecryptResponse=function(n){return this._currentCryptoSession&&this._currentCryptoSession.isReady()&&(n=this._currentCryptoSession.decryptResponse(n)),n},o.prototype.generateKeyExchangeHeaderIfNeeded=function(){return this.connectionSettings().getCryptoMode()==t.ConnectionCryptoMode.None||this._currentCryptoSession?null:(this._currentCryptoSession=new r.Scheme2CryptoSession(this._sdk),this._currentCryptoSession.getExchangeRequestHeader())},o.prototype.preprocessSessionExchangeRequest=function(n){var i=this;return new Promise(function(r,u){var a=i.generateUserIDHeaderIfNeeded(),h,e,c,v,l,s,y;if(a&&n.addEnvelopeHeader(a),h=i.generateInvalidatedAuthenticatorsHeadersIfNeeded(),h)for(e=0,c=h;e<c.length;e++)v=c[e],n.addEnvelopeHeader(v);l=i.generateDeviceKeyRollHeaderIfNeeded();l&&n.addEnvelopeHeader(l);s=Promise.resolve(!0);y=new f(n);o.messageFilteringExtensionPoint.forEach(function(n){s=s.then(function(){return n.filterMessage(i.createPluginSessionInfo(),y).catch(function(n){return i.sdk.log(t.LogLevel.Warning,function(){return"Error during message filtering: "+n}),!0})})});s.then(function(){return r(n)},u)})},o.prototype.getFlowId=function(){var n,t;if(null!==(t=null===(n=this._currentControlFlow)||void 0===n?void 0:n.requestContext)&&void 0!==t)return t.getFlowId()},o.prototype.generateDeviceKeyRollHeaderIfNeeded=function(){if(!this._deviceKeyRollData)return null;var n={type:"device_key_roll"};return n.device_key_roll=this._deviceKeyRollData.deviceKeyPair.publicKeyToJson(),this._deviceKeyRollData.message&&(n.message=this._deviceKeyRollData.message),n},o.prototype.generateUserIDHeaderIfNeeded=function(){if(this.connectionSettings().getCryptoMode()==t.ConnectionCryptoMode.Full&&!this._currentCryptoSession)return null;if(this._anonymous){if(this._user.ephemeralUserId)return{type:"uid",uid:this._user.ephemeralUserId}}else{if(this._user.userId)return{type:"uid",uid:this._user.userId};if(this._user.idToken)return{type:"uid_token",token:this._user.idToken}}return null},o.prototype.processKeyExchangeResponseHeader=function(n){this._currentCryptoSession&&this._currentCryptoSession.processExchangeResponseHeader(n)},o.prototype.generateSignatureForRequest=function(n){var i=n.getUrl(),r=i.indexOf("?"),f;r>0&&(f=n.getUrl().substring(r+1),i=n.getUrl().substring(0,r)+"?"+f.split("&").sort().join("&"));var u=/%%/g,e=i.substr(this.connectionSettings().getServerAddress().length).replace(u,"\\%")+"%%"+this.clientVersionHeader.replace(u,"\\%")+"%%"+n.getBodyJson().replace(u,"\\%"),o=t.util.asciiToHex(e);return this.deviceSigningKeyPair.signHex(o).then(function(n){return t.util.hexToBase64(n)})},o.prototype.connectionSettings=function(){return this._sdk.connectionSettings},o.prototype.processSessionIdHeader=function(n){this._sdk.log(t.LogLevel.Debug,function(){return"Processing session ID header "+n});this._sessionId=n.session_id},o.prototype.processDeviceIdHeader=function(n){var i=this;this._sdk.log(t.LogLevel.Debug,function(){return"Processing Device ID header "+n});this._deviceId?this._deviceId!=n.device_id&&this._sdk.log(t.LogLevel.Warning,function(){return"Received device ID "+n.device_id+" in a session with an existing device id "+i._deviceId}):(this._user.setProvisionalDeviceId(n.device_id),this._deviceId=n.device_id)},o.prototype.processSessionStateChangeHeader=function(n){switch(this._sdk.log(t.LogLevel.Debug,function(){return"Processing session state change header "+n+" to state "+n.state}),n.state){case r.Protocol.SessionStateChangeState.Closed:this._sdk.log(t.LogLevel.Debug,function(){return"Invalidating session."});this._invalidated=!0;break;default:throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Communication,"Invalid session state change encountered in header.");}},o.prototype.processSessionEphemeralUserHeader=function(n){this._sdk.log(t.LogLevel.Debug,function(){return"Processing ephemeral user Id header "+n});this._user.updateEphemeralUserId(n.uid)},o.prototype.noHeaderProcessing=function(){},o.prototype.processEncryptedSharedSecretHeader=function(){},o.prototype.processDisplayNameHeader=function(n){this._sdk.log(t.LogLevel.Debug,function(){return"Processing display name header '"+n.display_name+"'"});r.User.updateUserDisplayName(n.display_name,this._user,this._sdk)},o.prototype.processUidTokenHeader=function(n){this._sdk.log(t.LogLevel.Debug,function(){return"Processing uid_token header '"+n.token+"', uid hash '"+n.uid_hash+"'"});r.User.updateUserIdTokenForSession(n.token,this,n.uid_hash)},o.prototype.processDeviceKeyRollSuccess=function(n){if(this._sdk.log(t.LogLevel.Debug,function(){return"DeviceKeyRoll: Processing device_key_roll_success header. device_key_roll_success = '"+n.device_key_roll_success+"'."}),n.device_key_roll_success&&this._deviceKeyRollData){var i=this._user.deviceSigningKeyTag;this._user.updateDeviceKeyTagSaltAndSave(this._deviceKeyRollData.salt);this._deviceKeyPair=this._deviceKeyRollData.deviceKeyPair;this._deviceKeyRollData=null;try{this._sdk.host.deleteKeyPair(i)}catch(n){this._sdk.log(t.LogLevel.Warning,function(){return"DeviceKeyRoll: Can't delete old device signing key."})}}},o.prototype.verifyDevicePublicKey=function(n){var i=t.util.calcPublicKeyHexStringEncodedSha256Hash(this.deviceSigningKeyPair,this._sdk);return this._sdk.log(t.LogLevel.Debug,function(){return"DeviceKeyRoll: verify server key hash matches device key hash: "+(i===n)}),i===n},o.prototype.urlWithConcatenatedQuery=function(n,t){var i="";return n.indexOf("?")<0?i="?":"&"!=n[n.length-1]&&(i="&"),n+i+Object.keys(t).map(function(n){return n+"="+encodeURIComponent(t[n])}).join("&")},Object.defineProperty(o.prototype,"clientVersionHeader",{get:function(){if(!this._cachedClientVersionHeader){var n=this._sdk.getClientFeatureSet().join(",");this._cachedClientVersionHeader=this._sdk.getVersionInfo().getSdkVersion()+";["+n+"]"}return this._cachedClientVersionHeader},enumerable:!1,configurable:!0}),o.prototype.createPluginSessionInfo=function(){return new u(this)},o.prototype.lock=function(){var n=this;this._sdk.log(t.LogLevel.Debug,function(){return"Locking session "+n._sessionId});this._lockCount++},o.prototype.unlock=function(){var n=this;if(this._sdk.log(t.LogLevel.Debug,function(){return"Unlocking session "+n._sessionId}),this._lockCount--,this._lockCount<0)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Unbalanced session locking: Attempt to unlock an already unlocked sessoin.");},o.prototype.canTerminate=function(){return!this._lockCount},o.prototype.toJson=function(){var n={session_id:this._sessionId,user_guid:this._user.guid.toString(),device_id:this._deviceId,invalidated:this._invalidated,persistUserData:this._persistUserData,anonymous:this._anonymous};return this._persistUserData||(n.nonPersistentUser=r.User.toUserRecord(this._user)),this._currentCryptoSession&&this._currentCryptoSession.isReady()&&(n.c_session=this._currentCryptoSession.toJson()),n},o.fromJson=function(n,i){var u=i,f=u.persistUserData?r.User.findUserByGuid(n,r.UserGuid.createFromString(u.user_guid)):u.nonPersistentUser&&r.User.fromUserRecord(u.nonPersistentUser,n);if(!f)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Can't deserialize session -- user "+u.user_guid+" not found.");return this.fromJsonWithUser(n,i,f)},o.fromJsonWithUser=function(n,t,i){var u=t,f=new o(n,i);return f._sessionId=u.session_id,f._deviceId=u.device_id,f._invalidated=u.invalidated||!1,f._persistUserData=u.persistUserData||!0,f._anonymous=u.anonymous||!1,u.c_session&&(f._currentCryptoSession=r.Scheme2CryptoSession.fromJson(n,u.c_session)),f},o.prototype.updateFromContinuedSession=function(n){this.user.updateFromContinuedSessionUser(n.user)},o.notifySessionObserversOnMainSessionLogin=function(n){var t=n.createPluginSessionInfo();this.sessionObservationExtensionPoint.forEach(function(n){n.mainSessionStarted(t)})},o.notifySessionObserversOnMainSessionLogout=function(n){var t=n.createPluginSessionInfo();this.sessionObservationExtensionPoint.forEach(function(n){n.mainSessionEnded(t)})},o.headerProcessors={session_id:o.prototype.processSessionIdHeader,device_id:o.prototype.processDeviceIdHeader,encrypted_shared_secret:o.prototype.processEncryptedSharedSecretHeader,session_state:o.prototype.processSessionStateChangeHeader,ephemeral_uid:o.prototype.processSessionEphemeralUserHeader,key_exchange:o.prototype.processKeyExchangeResponseHeader,encryption:o.prototype.noHeaderProcessing,display_name:o.prototype.processDisplayNameHeader,uid_token:o.prototype.processUidTokenHeader,device_key_roll_success:o.prototype.processDeviceKeyRollSuccess},o.messageFilteringExtensionPoint=new r.ExtensionPoint(n.tarsusplugin.TARSUS_EXTENSION_POINT_NAME_MESSAGE_FILTERS),o.sessionObservationExtensionPoint=new r.ExtensionPoint(n.tarsusplugin.TARSUS_EXTENSION_POINT_NAME_SESSION_OBSERVERS),o}(r.BaseSession),u,f;r.Session=e;u=function(){function n(n){this._underlying=n}return n.prototype.getUsername=function(){return this._underlying.user.displayName},n}();f=function(){function n(n){this._underlying=n}return n.prototype.getMethod=function(){return this._underlying.method},n.prototype.getBody=function(){return this._underlying.body},n.prototype.getHeaders=function(){return this._underlying.envelopeHeaders},n.prototype.addHeader=function(n){this._underlying.addEnvelopeHeader(n)},n}()})((t=n.sdk||(n.sdk={})).core||(t.core={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(){function i(i,r,u,f,e){if(this.flowId=e,i instanceof t.SerializationContext)this.serializeFrom(i);else{if("string"!=typeof i||!r||!u)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Invalid arguments for constructing session message");this._requestMethod=i;this._requestServerRelativeUrl=r;this._requestBody=u;this._envelopeHeaders=f||[]}var o=this.createFlowIdSdkHeader();o&&this._envelopeHeaders.push(o)}return i.prototype.addEnvelopeHeader=function(n){this._envelopeHeaders.push(n)},Object.defineProperty(i.prototype,"method",{get:function(){return this._requestMethod},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"serverRelativeUrl",{get:function(){return this._requestServerRelativeUrl},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"body",{get:function(){return this._requestBody},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"envelopeHeaders",{get:function(){return this._envelopeHeaders},enumerable:!1,configurable:!0}),i.prototype.serializeTo=function(n){n.writePrimitive("envelopeHeaders",this._envelopeHeaders);n.writePrimitive("requestBody",this._requestBody);n.writePrimitive("requestMethod",this._requestMethod);n.writePrimitive("requestServerRelativeUrl",this._requestServerRelativeUrl)},i.prototype.serializeFrom=function(n){this._envelopeHeaders=n.readPrimitive("envelopeHeaders");this._requestBody=n.readPrimitive("requestBody");this._requestMethod=n.readPrimitive("requestMethod");this._requestServerRelativeUrl=n.readPrimitive("requestServerRelativeUrl")},i.prototype.getFlowId=function(){return this.flowId},i.prototype.createFlowIdSdkHeader=function(){var n;return this.flowId?((n={type:t.Protocol.flowIdHeaderName})[t.Protocol.flowIdHeaderName]=this.flowId,n):null},i=h([t.Serializable("ExchangeRequest"),k("design:paramtypes",[Object,String,Object,Array,String])],i)}(),u,f;t.BaseExchangeRequest=r;u=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return i(r,n),r=h([t.Serializable("SessionExchangeReqeust")],r)}(r);t.SessionExchangeRequest=u;f=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t}(r);t.PublicExchangeRequest=f}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){var t;(function(i){var r=function(){function n(n,t){this._sdk=n;this._hostedPluginName=t.getPluginInfo().getPluginName()}return n.prototype.extend=function(n,t){i.ExtensionPoint.byName(n).extend(t)},n.prototype.getSdk=function(){return this._sdk},n.prototype.generateRandomHexString=function(n){return this._sdk.host.generateRandomHexString(n)},n.prototype.suspendControlFlowToDefaultSuspensionContext=function(n){this._sdk.suspendControlFlowToDefaultSuspensionContext(n)},n.prototype.log=function(n,t){this._sdk.host.log(n,"TransmitSDK/Tarsus/Plugin/"+this._hostedPluginName,t)},n}(),u;i.TarsusPluginHostImpl=r;u=function(){function i(n){this._installedPluginsAndConfigs={};this._initializedPlugins=[];this._sdk=n}return i.prototype.getInitializedPlugins=function(){return this._initializedPlugins.concat([])},i.prototype.installPlugin=function(n,i){if(this._installedPluginsAndConfigs[n])throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Attempt to install plugin "+n+" twice.");this._installedPluginsAndConfigs[n]=i},i.prototype.initializePlugins=function(){var i=this,u;return this._sdk.log(t.LogLevel.Debug,function(){return"Starting plugin initialization..."}),u=Object.keys(this._installedPluginsAndConfigs).map(function(u){return i._sdk.log(t.LogLevel.Debug,function(){return"Loading plugin "+u+"..."}),i._sdk.host.loadPlugin(u).then(function(f){var s=f.getPluginInfo(),e=n.tarsusplugin.impl.PluginInfoImpl.toString(s),o;if(f.getPluginInfo().getPluginName()!=u)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Plugin "+u+": getPluginInfo() reported mismatched name -- "+e+".");return i._sdk.log(t.LogLevel.Info,function(){return"Initializing plugin "+e+"..."}),o=new r(i._sdk,f),f.initialize(o,i._installedPluginsAndConfigs[u]).then(function(){i._initializedPlugins.push(f)}).catch(function(n){i._sdk.log(t.LogLevel.Error,function(){return"Couldn't initialize plugin "+e+": "+n})})})}),Promise.all(u).then(function(){i._sdk.log(t.LogLevel.Debug,function(){return"Plugin initialization completed sucessfuly"})})},i}();i.TarsusPluginManager=u})((t=n.sdk||(n.sdk={})).core||(t.core={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){var t,r,i;i=n.sdk||(n.sdk={});t=i.core||(i.core={});r=function(){function n(n,i){this._locale=i;this._sdk=n;this._serverClientStrings=new t.ClientStrings({});this._cachedClientStrings=new t.ClientStrings({})}return Object.defineProperty(n.prototype,"locale",{get:function(){return this._locale},enumerable:!1,configurable:!0}),n.prototype.isServerClientStringsEmpty=function(){var n=this._serverClientStrings.strings;return null==n||0===Object.keys(n).length&&n.constructor===Object},n.prototype.setServerClientStrings=function(n){this._serverClientStrings=n;this._cachedClientStrings=new t.ClientStrings({})},n.prototype.applyGlobalStyleSheetJson=function(n){this._styleSheetJson||(this._styleSheetJson=JSON.parse(this._sdk.host.getUIStyles()));this._styleSheetJson=t.UIStyleSheets.merge(this._styleSheetJson,n);this._cachedBaseStylesheet=null},Object.defineProperty(n.prototype,"uiStylesheets",{get:function(){return this.getUiStylesheetsWithOverrides()},enumerable:!1,configurable:!0}),n.prototype.getUiStylesheetsWithOverrides=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return this._styleSheetJson||(this._styleSheetJson=JSON.parse(this._sdk.host.getUIStyles())),i.length?new(t.UIStyleSheets.bind.apply(t.UIStyleSheets,ut([void 0,this._styleSheetJson],i))):(this._cachedBaseStylesheet||(this._cachedBaseStylesheet=new t.UIStyleSheets(this._styleSheetJson)),this._cachedBaseStylesheet)},n.prototype.getString=function(n){var t=null;return(t=this._cachedClientStrings.getString(n))?t:(this._serverClientStrings&&(t=this._serverClientStrings.getString(n)),null==t&&(t=this._sdk.host.getString(n,this._locale)),t&&this.storeInLocalCache(n,t),t)},n.prototype.storeInLocalCache=function(n,t){t&&this._cachedClientStrings&&(this._cachedClientStrings.strings[n]=t)},n}();t.UIAssetsData=r}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){var t;(function(n){var i=function(){function n(){}return n.prototype.toString=function(){return this._guidStr},n.prototype.equalString=function(n){return this._guidStr==n},n.prototype.equalsUserGuid=function(n){return this.toString()==n.toString()},n.createWithLength=function(t,i){var r=new n;return r._guidStr=i.host.generateRandomHexString(t),r},n.createFromString=function(t){var i=new n;return i._guidStr=t,i},n}(),r;n.UserGuid=i;r=function(){function r(){}return Object.defineProperty(r.prototype,"guid",{get:function(){return this._guid},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"userId",{get:function(){return this._userId},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"displayName",{get:function(){return(this._ephemeral?"anonymous":this._displayName)||this._userId},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"idToken",{get:function(){return this._idToken},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uidHash",{get:function(){return this._uidHash},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"deviceId",{get:function(){return this._deviceId},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"phoneNumber",{get:function(){return this._phoneNumber},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"defaultAuthId",{get:function(){return this._defaultAuthId},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"deviceBound",{get:function(){return this._deviceBound},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hasLoggedIn",{get:function(){return this._hasLoggedIn},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"deviceEncryptionKeyTag",{get:function(){return new n.TarsusKeyPath("per_user",this._guid.toString(),"enc_enabled")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ephemeralUserId",{get:function(){return this._ephemeralUserId},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"userHandle",{get:function(){return this._userId||this._idToken},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"userHandleType",{get:function(){return this._userId?t.UserHandleType.UserId:t.UserHandleType.IdToken},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"deviceSigningKeyTag",{get:function(){return this._deviceSigningKeyTagSalt?new n.TarsusKeyPath("per_user",this._guid.toString(),"device_key",this._deviceSigningKeyTagSalt):new n.TarsusKeyPath("per_user",this._guid.toString(),"device_key")},enumerable:!1,configurable:!0}),r.prototype.getPendingDeviceSigningKeyTag=function(t){return new n.TarsusKeyPath("per_user",this._guid.toString(),"device_key",t)},r.prototype.updateDeviceKeyTagSaltAndSave=function(n){this._deviceSigningKeyTagSalt=n;r.save(this._sdk,this)},Object.defineProperty(r.prototype,"localEnrollments",{get:function(){return this._localEnrollments||(this._localEnrollments=n.LocalEnrollment.enrollmentsForUser(this,this._sdk)),this._localEnrollments},enumerable:!1,configurable:!0}),r.prototype.updateDefaultAuthId=function(n){this._defaultAuthId=n},r.prototype.updateEphemeralUserId=function(n){if(!this._ephemeral)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Invalid ephemeral user name update reaquest header, user is not ephemeral.");if(this._ephemeralUserId)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Attempt to set an ephemeral userId after it has already been updated once.");this._ephemeralUserId=n},r.updateUserDisplayName=function(n,t,i){t._displayName=n;i.currentSession&&i.currentSession.persistUserData&&r.save(i,t)},r.updateUserIdTokenForSession=function(n,t,i){var u=t.user;u._idToken=n;u._uidHash=i;delete u._userId;t.persistUserData&&r.save(t.sdk,u)},r.resetUserIdTokenForSession=function(n){var t=n.user;delete t._idToken;n.persistUserData&&r.save(n.sdk,t)},r.prototype.updateFromContinuedSessionUser=function(n){if(!this._guid.equalsUserGuid(n.guid))throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"GUID mismatch when updating user from continuation");this._defaultAuthId=n._defaultAuthId;this._deviceBound=n._deviceBound;this._hasLoggedIn=n._hasLoggedIn;this._deviceId=n._deviceId;this._phoneNumber=n._phoneNumber;this._userId=n._userId;this._idToken=n._idToken;this._displayName=n._displayName;this._uidHash=n._uidHash},r.prototype.setProvisionalDeviceId=function(n){if(this.deviceBound)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Attempt to record a provisional device ID for an already bound user record.",{});this._deviceId=n},r.prototype.bindDeviceToUser=function(n){if(this.deviceBound)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Attempt to record a device for an already bound user record.",{});if(this._deviceId!=n)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Attempt to bind user to a device ID different than provisional device ID.",{});this._deviceBound=!0},r.prototype.markLoggedIn=function(){this._hasLoggedIn=!0},r.iterateUsers=function(n,t){for(var f,e,o=n.host.readStorageKey(r.storageKey),i=n.currentSession&&n.currentSession.user,u=0;u<o.length;u++){if(f=r.fromUserRecord(o[u],n),e=t(f),null!=e)return e;i&&i.guid.equalsUserGuid(f.guid)&&(i=null)}return i?t(i):null},r.findUserByUidToken=function(n,i){return r.iterateUsers(n,function(r){return r.idToken&&r.idToken===i?(n.log(t.LogLevel.Debug,function(){return"Located user based on id token, guid: '"+r.guid+"'"}),r):null})},r.calculateUidHash=function(n,i){var r=i.toLowerCase(),u=t.util.hexToBase64(n.host.calcHexStringEncodedSha256Hash(t.util.asciiToHex(r)));return n.log(t.LogLevel.Debug,function(){return"Calculated uid hash, input: '"+r+", hash: '"+u+"'"}),u},r.findUserByUidHash=function(n,i){var u=this;return n.log(t.LogLevel.Debug,function(){return"Looking up user based on user id hash, hash: '"+i+"'"}),r.iterateUsers(n,function(r){return i==r._uidHash?(n.log(t.LogLevel.Debug,function(){return"Located user based on uid hash, guid: '"+r.guid+"'"}),r):r.userId&&u.calculateUidHash(n,r.userId)==i?(n.log(t.LogLevel.Debug,function(){return"Located user with user id based on uid hash, guid: '"+r.guid+"'"}),r):null})},r.findUserByUserId=function(n,i){var u=this.calculateUidHash(n,i);return n.log(t.LogLevel.Debug,function(){return"Looking up user based on user id, userId: '"+i+"'"}),r.iterateUsers(n,function(r){return r.userId&&r.userId.toLowerCase()===i.toLowerCase()?(n.log(t.LogLevel.Debug,function(){return"Located user based on user id, guid: '"+r.guid+"'"}),r):r.userId||u!=r._uidHash?null:(n.log(t.LogLevel.Debug,function(){return"Located user based on uid hash, guid: '"+r.guid+"'"}),r.idToken||(r._userId=i),r)})},r.findUserByGuid=function(n,i){return r.iterateUsers(n,function(r){return r.guid.equalsUserGuid(i)?(n.log(t.LogLevel.Debug,function(){return"Located user based on guid, guid: '"+r.guid+"'"}),r):null})},r.findUser=function(n,t){return 0==t.indexOf("uidt:")?this.findUserByUidToken(n,t):this.findUserByUserId(n,t)},r.findUserWithType=function(n,i,r){if(r){if(r===t.UserHandleType.IdToken)return this.findUserByUidToken(n,i);if(r===t.UserHandleType.UserId)return this.findUserByUserId(n,i);throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Unsupported user handle type",{user_handle_type:r});}return this.findUser(n,i)},r.createUserWithUserId=function(n,i){if(!i)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"userHandle must not be empty");var r=this.createBaseUser(n);return r._userId=i,r._uidHash=t.util.hexToBase64(n.host.calcHexStringEncodedSha256Hash(t.util.asciiToHex(i))),r},r.createUserWithIdToken=function(n,i,r){if(!i)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"userHandle must not be empty");var u=this.createBaseUser(n);return u._idToken=i,u._uidHash=r,u},r.createBaseUser=function(n){var t=new r;return t._guid=i.createWithLength(32,n),t._deviceBound=!1,t._hasLoggedIn=!1,t._phoneNumber="",t._sdk=n,t._ephemeral=!1,t._deviceSigningKeyTagSalt=n.host.generateRandomHexString(24),t},r.createEphemeralUser=function(n){var t=new r;return t._guid=i.createWithLength(32,n),t._deviceBound=!1,t._hasLoggedIn=!1,t._phoneNumber="",t._sdk=n,t._ephemeral=!0,t._ephemeralUserId=null,t},r.deleteUser=function(n,i){var u=i.host.readStorageKey(r.storageKey),f,e,o;for(i.log(t.LogLevel.Warning,function(){return"=== CURRENTL LEN    "+u.length}),f=0;f<u.length;f++)if(e=r.fromUserRecord(u[f],i),n.guid.equalsUserGuid(e.guid))break;if(f<u.length){for(;f<u.length-1;)u[f]=u[f+1],f++;o=u.length-1;delete u[u.length-1];u.length=o;i.host.writeStorageKey(r.storageKey,u)}else i.log(t.LogLevel.Warning,function(){return"Attempt to delete nonexisting user "+n.userHandle})},r.prototype.createEnrollmentRecord=function(t,i,r,u,f){var e=n.LocalEnrollment.createNew(t,i,r,this._sdk,f);return e.status=u,e},r.prototype.updateEnrollmentRecord=function(i){var r,u;if(this._ephemeral)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Attempt to update enrollment record for ephemeral user.",{});r={};for(u in this.localEnrollments)r[u]=this.localEnrollments[u];r[i.authenticatorId]=i;n.LocalEnrollment.updateEnrollmentsForUser(this,r,this._sdk);this._localEnrollments=r},r.toUserRecord=function(n){var t={default_auth_id:n._defaultAuthId,device_bound:n._deviceBound,has_logged_in:n._hasLoggedIn,device_id:n._deviceId,last_auth:"<null>",guid:n._guid.toString(),user_id:n.userId,display_name:n._displayName,id_token:n._idToken,uid_hash:n._uidHash,user_number:n._phoneNumber,schemeVersion:"v1",device_signing_key_tag_salt:n._deviceSigningKeyTagSalt};return n._ephemeralUserId&&(t.ephemeral_id=n._ephemeralUserId),t},r.save=function(n,i){var u,f;if(i._ephemeral)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Attempt to save ephemeral user record to persistent store.",{});for(u=n.host.readStorageKey(r.storageKey),u.length=u.length||0,f=0;f<u.length&&!r.fromUserRecord(u[f],n).guid.equalsUserGuid(i.guid);f++);u[f]=r.toUserRecord(i);u.length<f+1&&(u.length=f+1);n.host.writeStorageKey(r.storageKey,u)},r.fromUserRecord=function(n,t){var u=new r;return u._sdk=t,u._defaultAuthId=n.default_auth_id,u._deviceBound=n.device_bound,u._hasLoggedIn=n.has_logged_in,u._deviceId=n.device_id,u._phoneNumber=n.user_number,u._deviceSigningKeyTagSalt=n.device_signing_key_tag_salt,u._userId=n.user_id,u._idToken=n.id_token,u._uidHash=n.uid_hash,n.ephemeral_id&&(u._ephemeral=!0,u._ephemeralUserId=n.ephemeral_id),n.schemeVersion?(u._guid=i.createFromString(n.guid),u._displayName=n.display_name):(u._guid=i.createFromString(n.user_id),u._displayName=n.user_id),u},r.storageKey=new n.TarsusKeyPath("users"),r}();n.User=r})((t=n.sdk||(n.sdk={})).core||(t.core={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){n.InternalErrorWrongBiometric=1e3;n.InternalErrorBiometricInvalidated=1001;n.InternalErrorBiometricKeyStoreError=1002;n.InternalErrorBiometricNotConfigured=1003;n.InternalErrorBiometricOsLockTemporary=1004;n.InternalErrorBiometricOsLockPermanent=1005;n.InternalErrorBiometricFallbackPressed=1006;n.InternalErrorCouldNotGenerateSecureKey=1007;n.ErrorDataInternalError="internal_error";n.ErrorDataNumFailures="num_failures";n.ErrorDataServerErrorCode="server_error_code";n.ErrorDataServerErrorMessage="server_error_message";n.ErrorDataServerErrorData="server_error_data";n.ErrorDataRetriesLeft="retries";n.ErrorDataCommunicationError="communication_error";n.ErrorDataCommunicationSSL="ssl";n.FeatureCodeServerHeaders=1;n.FeatureCodeAuthFailover=2;n.FeatureCodeUnifiedRegFlow=3;n.FeatureCodePromotionAction=6;n.FeatureCodeSilentFingerprintRegistration=7;n.FeatureCodeMultiMethodRegistrationAction=8;n.FeatureCodeOtpCodeInvalidated=10;n.FeatureCodeEnvelopedClientRequest=11;n.FeatureCodeUnregistrationFlow=12;n.FeatureCodeFaceIdAuthentication=13;n.FeatureCodeDynamicPolicySupport=14;n.FeatureCodeAutoRequestForSignContent=19;n.FeatureDeviceBiometricsFPContinuation=27;n.FeatureCodeDebugBreakpointActionSupport=28;n.FeatureCodeFido2ClientEcKeyExtSupport=37;n.FeatureCodeMultiCredVaultFido2Support=38}(n.sdkhost||(n.sdkhost={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(t){!function(t){t.TARSUS_VERSION="6.2.0";t.API_LEVEL=11;t.STATIC_FEATURE_SET=[n.sdkhost.FeatureCodeServerHeaders,n.sdkhost.FeatureCodeAuthFailover,n.sdkhost.FeatureCodeUnifiedRegFlow,n.sdkhost.FeatureCodePromotionAction,n.sdkhost.FeatureCodeSilentFingerprintRegistration,n.sdkhost.FeatureCodeMultiMethodRegistrationAction,n.sdkhost.FeatureCodeOtpCodeInvalidated,n.sdkhost.FeatureCodeEnvelopedClientRequest,n.sdkhost.FeatureCodeUnregistrationFlow,n.sdkhost.FeatureCodeDynamicPolicySupport,n.sdkhost.FeatureCodeDebugBreakpointActionSupport]}(t.core||(t.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(t){var r=function(t){function r(i,r){var u=t.call(this,i,r)||this;return u._clientContext=u._controlFlowProcessor._clientContext,u._cancellationHolder=new n.util.CancelablePromiseHolder,u}return i(r,t),r.prototype.run=function(){var t=this;return this._cancellationHolder.resolveWith(function(n,i){t.doRunAction().then(n,i)}),this._cancellationHolder.cancellablePromise.catch(function(i){if(i==n.util.CancelablePromiseHolder.CancelRequest)return t._controlFlowProcessor.createExternalCancellationRejectionPromise();throw i;})},r.prototype.cancelRun=function(){this._cancellationHolder.cancel()},r}(t.ActionDriver);t.SimpleCancellationActionDriver=r}(t.actiondrivers||(t.actiondrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(r){!function(u){!function(u){var f=function(u){function f(n,t){return u.call(this,n,t)||this}return i(f,u),f.prototype.doRunAction=function(){var i=this,u;return this._sdk.log(r.LogLevel.Debug,function(){return"Executing Anonymous FIDO2 authentication."}),u=this._action,this._sdk.host.fido2CredentialsOp(this._uiHandler,this._controlFlowProcessor,this._policyAction,t.sdkhost.Fido2CredentialsOpType.Get,u.credentialRequestOptions).then(function(n){var t={assertion_credential:n};return i.sendAssertionRequest("authenticate",t)}).catch(function(t){var e=n.ts.mobile.sdk.impl.AuthenticationErrorImpl.ensureAuthenticationError(t),u,f;if(e.getErrorCode()===r.AuthenticationErrorCode.UserCanceled&&(i._sdk.log(r.LogLevel.Debug,function(){return"Received FIDO2 cancellation request."}),u=i._policyAction.getEscapeOptions().filter(function(t){return t.getPresentation()==n.ts.mobile.sdk.ActionEscapeOptionPresentation.Cancel})[0],u))return i._sdk.log(r.LogLevel.Debug,function(){return"Got cancel escape option; responding with that."}),f=new r.ActionEscapeRequest,f.setEscapeOption(u),i.processEscapeRequest(f);throw e;})},f}(u.SimpleCancellationActionDriver);u.ActionDriverAnonymousFido2Authenticate=f}(u.actiondrivers||(u.actiondrivers={}))}(r.core||(r.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(r){var f=function(n){function t(t,i,r,u,f,e,o,s){var h=n.call(this,o._controlFlowProcessor._session,t,i,r)||this;return h._assertionId=u,h._retriesLeft=f,h._actionDriver=o,h._fallback=e,h._registration=s,h}return i(t,n),Object.defineProperty(t.prototype,"authDriver",{get:function(){return this._authDriver||(this._authDriver=this.authenticationDriverDescriptor.createAuthenticationDriver(this._actionDriver,this._authenticatorMethodConfig,this)),this._authDriver},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"suggestedParameters",{get:function(){return this.getEnabled()?this.authenticationDriverDescriptor.suggestParameters(this._authenticatorMethodConfig,this):[]},enumerable:!1,configurable:!0}),t.prototype.getEnabled=function(){return(this._registration||this.getRegistered()&&!this.getLocked())&&this.getSupportedOnDevice()},Object.defineProperty(t.prototype,"fallback",{get:function(){return this._fallback},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"assertionId",{get:function(){return this._assertionId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"retriesLeft",{get:function(){return this._retriesLeft},enumerable:!1,configurable:!0}),t.prototype.updateWithAssertionResult=function(n){n.retries_left&&(this._retriesLeft=n.retries_left);n.locked&&(this._locked=n.locked)},t.fromUnregistrationAction=function(n,i){return new t(n.method,n,n,n.assertion_id,null,null,i,!1)},t.fromPromotionAction=function(n,i){return new t(n.method,n,n,n.assertion_id,n.retries_left,n.fallback||null,i,!0)},t.fromAuthenticationActionMenuOption=function(n,i){return new t(n.type,n,n,n.assertion_id,n.retries_left,n.fallback||null,i,!1)},t.fromRegistrationAction=function(n,i){return new t(n.method,n,n,n.assertion_id,null,null,i,!0)},t}(t.authenticationdrivers.AuthenticatorDescriptionImpl),u;r.AuthenticationMenuAuthenticator=f;u=function(t){function r(n,i){var r=t.call(this,n,i)||this;return r._externallyCancelled=!1,r}return i(r,t),r.prototype.doRunAction=function(){var n=this;return new Promise(function(t,i){n._completionFunction=t;n._rejectionFunction=i;n.runActionWithCompletionFunctions()})},Object.defineProperty(r.prototype,"availableAuthenticatorsForSwitching",{get:function(){return this.availableAuthenticators},enumerable:!1,configurable:!0}),r.prototype.sendPollingRequest=function(n,i){return t.prototype.sendPollingRequest.call(this,n,i)},r.prototype.sendAuthenticatorAssertionRequest=function(t,i,r,u){var f,e;if(this._sdk.log(n.LogLevel.Debug,function(){return"Sending authenticator asserion request for "+t.getAuthenticatorId()+": assert="+i}),f={assertion_id:t.assertionId,method:t.getAuthenticatorId()},u)for(e in u)f[e]=u[e];return this.sendAssertionRequest(i,r,f)},r.prototype.completeAuthenticationWithAssertionResult=function(n){this._completionFunction(n)},r.prototype.completeAuthenticationWithError=function(n){this._rejectionFunction(n)},r.prototype.completeWithEscapeRequest=function(n){var t=this;this.processEscapeRequest(n).then(function(n){t.completeAuthenticationWithAssertionResult(n)},function(n){t.completeAuthenticationWithError(n)})},r.prototype.prepareForRunningAuthenticationDriver=function(n){return this._externallyCancelled?(this.completeAuthenticationWithError(this._controlFlowProcessor.createExternalCancellationError()),!1):(this._runningAuthenticatorDriver=n,!0)},r.prototype.cancelRun=function(){this._externallyCancelled=!0;this._runningAuthenticatorDriver&&this._runningAuthenticatorDriver.onCancelRun();t.prototype.cancelRun.call(this)},r}(r.SimpleCancellationActionDriver);r.ActionDriverAuthenticatorOp=u}(t.actiondrivers||(t.actiondrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(r){var u=function(u){function f(n,t){return u.call(this,n,t)||this}return i(f,u),f.prototype.runActionWithCompletionFunctions=function(){var i=this._action;this._sdk.log(n.LogLevel.Debug,function(){return"Loading authenticator descriptions"});this.loadAuthenticatorDescriptionsFromAction(i);this._shouldUpdateDefaultAuth=i.options&&i.options.update_default;this._sdk.log(n.LogLevel.Debug,function(){return"Starting auth presentation"});this.runWithPresentationMode(i.options&&i.options.start_with||t.Protocol.AuthMenuPresentationMode.DefaultAuthenticator)},Object.defineProperty(f.prototype,"availableAuthenticators",{get:function(){return this.updateAvailableAuthenticatorsList(),this._availableAuthenticators.concat([])},enumerable:!1,configurable:!0}),f.prototype.runWithPresentationMode=function(i,r){var u=this,f,e;if(this.updateAvailableAuthenticatorsList(),f=i==t.Protocol.AuthMenuPresentationMode.AuthenticatorMenu&&this._uiHandler.shouldIncludeDisabledAuthenticatorsInMenu(this.policyAction(),this._clientContext)?this._allAuthenticators:this._availableAuthenticators,r&&(f=f.filter(function(n){return r.filter(function(t){return t.getAuthenticatorId()==n.getAuthenticatorId()}).length>0})),f.length)switch(i){case t.Protocol.AuthMenuPresentationMode.AuthenticatorMenu:e=f.map(function(t){return new n.impl.AuthenticationOptionImpl(t,t.suggestedParameters)});this._uiHandler.selectAuthenticator(e,this.policyAction(),this._clientContext).then(function(t){switch(t.getResultType()){case n.AuthenticatorSelectionResultType.Abort:u.completeAuthenticationWithError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.UserCanceled,"Cancel during authenticator selection."));break;case n.AuthenticatorSelectionResultType.SelectAuthenticator:if(!(e.filter(function(n){return n.getAuthenticator()==t.getSelectedAuthenticator()}).length>0)){u.completeAuthenticationWithError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"selectAuthenticator returned an authenticator not within options."));break}if(!t.getSelectedAuthenticator().getEnabled()){u.completeAuthenticationWithError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"selectAuthenticator returned a non-enabled authenticator."));break}u.runAuthenticator(t.getSelectedAuthenticator(),t.getSelectedAuthenticationParameters());break;case n.AuthenticatorSelectionResultType.Escape:u.completeWithEscapeRequest(t.getActionEscapeRequest())}});break;case t.Protocol.AuthMenuPresentationMode.DefaultAuthenticator:this._defaultAuthenticator&&this._availableAuthenticators.indexOf(this._defaultAuthenticator)>=0?this.runAuthenticator(this._defaultAuthenticator,[]):(this._sdk.log(n.LogLevel.Warning,function(){return"Default authenticator for user not found. Falling back to first authenticator in list."}),this.runAuthenticator(this._availableAuthenticators[0],[]));break;case t.Protocol.AuthMenuPresentationMode.FirstAuthenticator:this.runAuthenticator(this._availableAuthenticators[0],[])}else this._allAuthenticators.filter(function(n){return n.getLocked()}).length>0?this.completeAuthenticationWithError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AllAuthenticatorsLocked,"All authenticators locked.")):this.completeAuthenticationWithError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.NoRegisteredAuthenticator,"No registered authenticator available."))},f.prototype.loadAuthenticatorDescriptionsFromAction=function(n){var t=this;this._allAuthenticators=n.methods.map(function(n){return r.AuthenticationMenuAuthenticator.fromAuthenticationActionMenuOption(n,t)})},f.prototype.updateAvailableAuthenticatorsList=function(){var t=this;this._defaultAuthenticator=null;this._availableAuthenticators=[];this._allAuthenticators.forEach(function(n){n.getEnabled()&&t._availableAuthenticators.push(n);n.getDefaultAuthenticator()&&(t._defaultAuthenticator=n)});this._defaultAuthenticator||(this._defaultAuthenticator=this._availableAuthenticators[0]);this._sdk.log(n.LogLevel.Debug,function(){return"Updated available authenticators list; "+t._availableAuthenticators.length+" available authenticators"})},f.prototype.runAuthenticator=function(i,r){var u=this,f=i.authDriver;this.prepareForRunningAuthenticationDriver(f)&&f.runAuthentication(r).then(function(r){if(r instanceof t.authenticationdrivers.AuthenticationDriverSessionResultSwitchAuthenticator)r.requiredAuthenticator?u.runAuthenticator(r.requiredAuthenticator,[]):u.runWithPresentationMode(t.Protocol.AuthMenuPresentationMode.AuthenticatorMenu,r.allowedAuthenticators);else if(r instanceof t.authenticationdrivers.AuthenticationDriverSessionResultAuthenticationCompleted){if(u._shouldUpdateDefaultAuth&&(u._sdk.log(n.LogLevel.Info,function(){return"Updating user default authenticator."}),!u._controlFlowProcessor._session.anonymous)){var f=u._controlFlowProcessor._session.user;f.updateDefaultAuthId(i.getAuthenticatorId());u._controlFlowProcessor._session.persistUserData&&t.User.save(u._sdk,f)}u.completeAuthenticationWithAssertionResult(r.assertionResult)}else r instanceof t.authenticationdrivers.AuthenticationDriverSessionResultEscapeRequested?u.completeWithEscapeRequest(r.escapeRequest):u.completeAuthenticationWithError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Unknown authentication driver result type encountered."))},function(t){u._sdk.log(n.LogLevel.Debug,function(){return"Received authentication driver error "+t});u.completeAuthenticationWithError(t)})},f}(r.ActionDriverAuthenticatorOp);r.ActionDriverAuthentication=u}(t.actiondrivers||(t.actiondrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(t){var r=function(r){function u(n,t){return r.call(this,n,t)||this}return i(u,r),u.prototype.doRunAction=function(){var r=this,i;return this._sdk.log(n.LogLevel.Debug,function(){return"Executing confirmation action."}),i=this._action,this._uiHandler.getConfirmationInput(i.title,i.text,i.continue_button_text,i.cancel_button_text,this.policyAction(),this._clientContext).then(function(u){var o=u.getActionEscapeRequest(),e,f,s;return o?r.processEscapeRequest(o):(e={user_cancelled:1==u.getUserChoice()},f=Promise.resolve(e),i.require_sign_content&&(s={params:{title:i.title,text:i.text,continue_button_text:i.continue_button_text,cancel_button_text:i.cancel_button_text,parameters:i.parameters,image:i.image},user_input:e.user_cancelled?i.cancel_button_text:i.continue_button_text},f=f.then(function(n){return t.ActionDriverSignContent.augmentAssertionDataWithSignedContent(n,s,r._controlFlowProcessor._session.deviceSigningKeyPair,r._sdk)})),f.then(function(t){return r._sdk.log(n.LogLevel.Debug,function(){return"Asserting confirmation: "+t}),r.sendAssertionRequest(null,t).then(function(n){return n})}))})},u}(t.SimpleCancellationActionDriver);t.ActionDriverConfirmation=r}(t.actiondrivers||(t.actiondrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(r){var u=function(r){function u(n,t){return r.call(this,n,t)||this}return i(u,r),u.prototype.doRunAction=function(){var t=this;return this._sdk.log(n.LogLevel.Debug,function(){return"Executing debug break action."}),this._sdk.host.setDebugIndicatorVisible(!0),this.pollUntilDone().finally(function(){t._sdk.host.setDebugIndicatorVisible(!1)})},u.prototype.pollUntilDone=function(){var i=this,r={};return n.util.wrapPromiseWithActivityIndicator(this._uiHandler,this._policyAction,this._clientContext,this._sdk.host.createDelayedPromise(250)).then(function(){return i.sendAssertionRequest(null,r)}).then(function(n){return n.assertion_error_code==t.Protocol.AssertionErrorCode.NotFinished?i.pollUntilDone():n})},u}(r.SimpleCancellationActionDriver);r.ActionDriverDebugBreak=u}(t.actiondrivers||(t.actiondrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(r){var u=function(r){function u(n,t){return r.call(this,n,t)||this}return i(u,r),u.prototype.doRunAction=function(){var i=this,r,u;return this._sdk.log(n.LogLevel.Debug,function(){return"Executing disable TOTP action..."}),r=this._action,u=t.totp.TotpPropertiesProcessor.createWithUser(this._controlFlowProcessor._session.user,this._sdk,this._clientContext,this._controlFlowProcessor._session),this._sdk.log(n.LogLevel.Debug,function(){return"Obtained TOTP processor."}),r.config_ids.forEach(function(t){i._sdk.log(n.LogLevel.Debug,function(){return"Deleting TOTP processor "+t+"."});u.deleteProvisionForGenerator(t);i._sdk.log(n.LogLevel.Debug,function(){return"TOTP processor "+t+" deleted."})}),this.sendAssertionRequest()},u}(r.SimpleCancellationActionDriver);r.ActionDriverDisableTotp=u}(t.actiondrivers||(t.actiondrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(t){!function(r){!function(u){var f=function(u){function f(n,t){return u.call(this,n,t)||this}return i(f,u),f.prototype.doRunAction=function(){var n=this,i=this._action,r=f.formExtensionPoint.firstNonNull(function(n){return n.createFormSession(i.form_id,i.app_data)});return r?(this._sdk.log(t.LogLevel.Debug,function(){return'Using extension of type "com.ts.mobile.plugins.form.settings" for formId '+i.form_id}),this.session=r):this.session=this._uiHandler.createFormSession(i.form_id,i.app_data),this.session?new Promise(function(t,i){n.completionFunction=t;n.rejectionFunction=i;n.session.startSession(n._clientContext,n.policyAction());n.session.promiseFormInput().then(function(t){return n.processPromiseResult(t)},n.rejectionFunction)}):Promise.reject(t.impl.AuthenticationErrorImpl.appImplementationError("Invalid return from createFormSession."))},f.prototype.processPromiseResult=function(n){switch(n.getControlRequest()){case t.FormControlRequest.Submit:var i={input:n.getJsonData()};this.request(i);break;case t.FormControlRequest.Abort:this.terminateSession();this.rejectionFunction(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.UserCanceled,"User cancelled a form action."));break;case t.FormControlRequest.Escape:this.terminateSession();this.processEscapeRequest(n.getActionEscapeRequest()).then(this.completionFunction,this.rejectionFunction)}},f.prototype.terminateSession=function(){this.session&&(this.session.endSession(),delete this.session)},f.prototype.request=function(n){var t=this;this.sendAssertionRequest(null,null,n).then(function(n){var i=n.data;switch(n.assertion_error_code){case r.Protocol.AssertionErrorCode.NotFinished:t.session.onContinue(i);t.session.promiseFormInput().then(function(n){return t.processPromiseResult(n)},t.rejectionFunction);break;case r.Protocol.AssertionErrorCode.RepeatCurrentStep:t.session.onError(i);t.session.promiseFormInput().then(function(n){return t.processPromiseResult(n)},t.rejectionFunction);break;default:t.terminateSession();t.completionFunction(n)}}).catch(function(n){t.terminateSession();t.rejectionFunction(n)})},f.formExtensionPoint=new r.ExtensionPoint(n.tarsusplugin.TARSUS_EXTENSION_POINT_NAME_FORMS_EXTENSION),f}(u.SimpleCancellationActionDriver);u.ActionDriverForm=f}(r.actiondrivers||(r.actiondrivers={}))}(t.core||(t.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(t){var r=function(t){function r(n,i){return t.call(this,n,i)||this}return i(r,t),r.prototype.doRunAction=function(){var i=this,t;return this._sdk.log(n.LogLevel.Debug,function(){return"Executing information action."}),t=this._action,this._uiHandler.getInformationResponse(t.title,t.text,t.button_text,this.policyAction(),this._clientContext).then(function(t){if(t.getActionEscapeRequest())return i.processEscapeRequest(t.getActionEscapeRequest());if(i._sdk.log(n.LogLevel.Debug,function(){return"Asserting information"}),-1!=t.getUserChoice())throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"ConfirmationInput.getUserChoice must be set to -1.");return i.sendAssertionRequest()})},r}(t.SimpleCancellationActionDriver);t.ActionDriverInformation=r}(t.actiondrivers||(t.actiondrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(t){!function(r){!function(u){var f=function(n){function t(t,i){var u=n.call(this,t)||this;return t instanceof r.SerializationContext||(u._idpSessionContinuationData=i),u}return i(t,n),Object.defineProperty(t.prototype,"idpSessionContinuationData",{get:function(){return this._idpSessionContinuationData},enumerable:!1,configurable:!0}),t.prototype.createResumableProcess=function(n){return new e(n,this)},t.prototype.serializeTo=function(t){n.prototype.serializeTo.call(this,t);t.writePrimitive("idpSessionContinuation",this._idpSessionContinuationData)},t.prototype.serializeFrom=function(t){n.prototype.serializeFrom.call(this,t);this._idpSessionContinuationData=t.readPrimitive("idpSessionContinuation")},t=h([r.Serializable("ActionDriverInvokeIdpContinuation"),k("design:paramtypes",[Object,Object])],t)}(u.ResumableProcessActionContinuation),e;u.ActionDriverInvokeIdpContinuation=f;e=function(u){function e(){return null!==u&&u.apply(this,arguments)||this}return i(e,u),e.prototype.extensionPointForIdp=function(){var i=this,n=e.idpExtensionPoint.first(function(n){return n.canHandleIdp(i.idpName)});if(!n)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Could not locate IDP handler plugin for idp "+this.idpName+".");return n},e.prototype.resume=function(n,i){var r=this;if(!(n instanceof f))throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Invalid continuation type for ActionDriverInvokeIdp");return new Promise(function(t,u){r.extensionPointForIdp().resumeFromContinuation(n.idpSessionContinuationData,i).then(function(n){return r.processIdpResponse(n)}).then(t,u)})},e.prototype.createContinuation=function(){return new f(this._action,this._activeIdpAuthSession&&this._activeIdpAuthSession.serializeContinuationData())},e.prototype.run=function(){var n=this;return new Promise(function(t,i){var r=n.extensionPointForIdp().createIdpAuthSession(n.idpName);n._activeIdpAuthSession=r;r.startSession(n._controlFlowProcessor._session.user.userHandle,n._action,n.policyAction(),n._clientContext);n._activeIdpAuthSession.invokeIdp().finally(function(){r.endSession();n._activeIdpAuthSession=null}).then(function(t){return n.processIdpResponse(t)}).then(t,i)})},Object.defineProperty(e.prototype,"idpName",{get:function(){return this._action.idp_name},enumerable:!1,configurable:!0}),e.prototype.processIdpResponse=function(n){return this.sendAssertionRequest(null,{idp_response:n.getResultPayload()})},e.idpExtensionPoint=new r.ExtensionPoint(n.tarsusplugin.TARSUS_EXTENSION_POINT_NAME_IDP_LOGIN_PROVIDER),e}(u.ResumableProcessActionDriver);u.ActionDriverInvokeIdp=e}(r.actiondrivers||(r.actiondrivers={}))}(t.core||(t.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(t){var r=function(t){function r(n,i){return t.call(this,n,i)||this}return i(r,t),r.prototype.run=function(){var t=this;return this._sdk.log(n.LogLevel.Debug,function(){return"Executing JSON data action."}),this.sendAssertionRequest().then(function(i){return t._sdk.log(n.LogLevel.Debug,function(){return"Executing JSON data action: "+i}),r.handleJsonDataByUiHandler(t._uiHandler,i,i.data.json_data,t._policyAction,t._clientContext)})},r.handleJsonDataByUiHandler=function(t,i,r,u,f){return t.processJsonData(r,u,f).then(function(t){if(t.getContinueProcessing())return i;throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.UserCanceled,"User cancelled a JSON action.");})},r}(t.ActionDriver);t.ActionDriverJsonData=r}(t.actiondrivers||(t.actiondrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={}));t.ts.mobile.tarsusplugin.KycDataCollectionResult;t.ts.mobile.sdk.InputOrControlResponse;!function(n){!function(n){!function(n){!function(t){!function(r){!function(u){var f=function(u){function f(n,t){return u.call(this,n,t)||this}return i(f,u),f.prototype.doRunAction=function(){return w(this,void 0,void 0,function(){var u,t,n,f,i,e;return b(this,function(o){switch(o.label){case 0:u=this.extensionPointForKyc();(t=u.createSession(this.action.vendor_name,this.action.payload)).startSession(this._controlFlowProcessor._clientContext,this.policyAction());o.label=1;case 1:o.trys.push([1,8,9,10]);n=null;o.label=2;case 2:return n&&n.assertion_error_code!=r.Protocol.AssertionErrorCode.NotFinished?[3,7]:(f=n?n.data.payload:this.action.payload,[4,t.collectKycData(f)]);case 3:return(i=o.sent()).isControlRequest()?[2,this.handleControlRequest(i.getControlRequest())]:[3,4];case 4:return[4,this.handleUserResponse(i.getResponse())];case 5:n=o.sent();o.label=6;case 6:return[3,2];case 7:return[2,n];case 8:return e=o.sent(),[2,Promise.reject(e)];case 9:return t.endSession(),[7];case 10:return[2]}})})},f.prototype.handleControlRequest=function(n){switch(this.logDebug(function(){return"Processing control request "+n.getRequestType()}),n.getRequestType()){case t.ControlRequestType.AbortAuthentication:return this.rejectedPromise(t.AuthenticationErrorCode.UserCanceled,"Scan qr code action canceled by user.");default:return this.rejectedPromise(t.AuthenticationErrorCode.AppImplementation,"Unsupported control request: "+n.getRequestType()+" for kyc action.")}},f.prototype.handleUserResponse=function(n){return w(this,void 0,void 0,function(){var i,u,t;return b(this,function(e){switch(e.label){case 0:return this.logDebug(function(){return"Processing kyc data"}),i=n.getPayload(),u={payload:i},[4,this.sendAssertionRequest(f.AssertActionSendData,u)];case 1:t=e.sent();this.logDebug(function(){return"Server result: "+t.assertion_error_code});e.label=2;case 2:return t.assertion_error_code!=r.Protocol.AssertionErrorCode.ExternalProcessPending?[3,5]:[4,this.delay(3e3)];case 3:return e.sent(),[4,this.sendAssertionRequest(f.AssertActionPoll,{})];case 4:return t=e.sent(),this.logDebug(function(){return"Server result: "+t.assertion_error_code}),[3,2];case 5:return[2,t]}})})},f.prototype.extensionPointForKyc=function(){var i=this,n=f.kycExtensionPoint.firstNonNull(function(n){return n.canHandleProvider(i.action.vendor_name)?n:null});if(!n)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Could not locate KYC handler plugin for kyc provider "+this.action.vendor_name+".");return n},Object.defineProperty(f.prototype,"action",{get:function(){return this._action},enumerable:!1,configurable:!0}),f.prototype.rejectedPromise=function(n,i){return Promise.reject(new t.impl.AuthenticationErrorImpl(n,i))},f.prototype.logDebug=function(n){this._sdk.log(t.LogLevel.Debug,n)},f.prototype.delay=function(n){return this._sdk.host.createDelayedPromise(n)},f.AssertActionPoll="poll",f.AssertActionSendData="data",f.kycExtensionPoint=new r.ExtensionPoint(n.tarsusplugin.TARSUS_EXTENSION_POINT_NAME_KYC),f}(u.SimpleCancellationActionDriver);u.ActionDriverKyc=f}(r.actiondrivers||(r.actiondrivers={}))}(t.core||(t.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(r){var u=function(u){function f(n,t){var i=u.call(this,n,t)||this;return i.isAssertionContainerNotComplete=!1,i}return i(f,u),f.prototype.strategyStatePerUserStorageKey=function(){var n=this._controlFlowProcessor._session.user.guid;return new t.TarsusKeyPath("per_user",n.toString(),"promotion_strategy_state")},f.prototype.runActionWithCompletionFunctions=function(){var t=this,i;if(this._sdk.log(n.LogLevel.Debug,function(){return"ActionDriverPromotion#runActionWithCompletionFunctions() started"}),this._action=this._action,this._action.assertions.length<1)return this._sdk.log(n.LogLevel.Info,function(){return"runActionWithCompletionFunctions() Promotion has no assertions, finishing action."}),void this.completeWithDeclineAssertion();if(!this.shouldDisplayPromotion())return this._sdk.log(n.LogLevel.Info,function(){return"runActionWithCompletionFunctions() Promotion stragety stop, finishing action."}),void this.completeWithDeclineAssertion();(this._session=this._uiHandler.createRegistrationPromotionSession(this._controlFlowProcessor._session.user.displayName,this._policyAction),this._session)?(this._session.startSession(this._clientContext,this.policyAction()),i=this._action.options,this._session.promptIntroduction(i.title,i.text,i.ok_button,i.decline_button).then(function(n){var u;if(t.handlePromotionInputControlOrEscapeRequest(n)){for(var f=t._action.assertions,e=[],i=0;i<f.length;i++)u=r.AuthenticationMenuAuthenticator.fromPromotionAction(f[i],t),u.getSupportedOnDevice()&&e.push(u);t._authenticatorList=e;t.suggestAuthenticators()}})):this._rejectionFunction(n.impl.AuthenticationErrorImpl.appImplementationError("Invalid return from createRegistrationPromotionSession."))},f.prototype.sendAssertionRequest=function(n,i,r){var f=this;return this.isAssertionContainerNotComplete=!1,u.prototype.sendAssertionRequest.call(this,n,i,r).then(function(n){return n.assertion_error_code==t.Protocol.AssertionErrorCode.AssertionContainerNotComplete&&(n.assertion_error_code=void 0,f.isAssertionContainerNotComplete=!0),n})},f.prototype.suggestAuthenticators=function(i){var r=this,u;(void 0===i&&(i=this._authenticatorList),this._currentAuthentictorSelected)&&(u=i.indexOf(this._currentAuthentictorSelected),u>-1&&i.splice(u,1));this._session.setPromotedAuthenticators(i).then(function(i){var u,f;r.handlePromotionInputControlOrEscapeRequest(i)?(u=i.getSelectedAuthenticator(),r._currentAuthentictorSelected=u,f=u.authDriver,r.prepareForRunningAuthenticationDriver(f)&&u.authDriver.runRegistration().then(function(i){if(i instanceof t.authenticationdrivers.AuthenticationDriverSessionResultAuthenticationCompleted)r.isAssertionContainerNotComplete?(r._sdk.log(n.LogLevel.Debug,function(){return"suggestAuthenticators() callback result: promotion not completed. showing list again."}),r.suggestAuthenticators()):(r._sdk.log(n.LogLevel.Debug,function(){return"suggestAuthenticators() callback result: promotion completed. finishing"}),r.completeAuthenticationWithAssertionResult(i.assertionResult));else if(i instanceof t.authenticationdrivers.AuthenticationDriverSessionResultSwitchAuthenticator)if(i.allowedAuthenticators){r._sdk.log(n.LogLevel.Debug,function(){return"suggestAuthenticators() callback result: switch authentciator with allowed authenticators called"});var u=i.allowedAuthenticators;r._currentAuthentictorSelected=null;r.suggestAuthenticators(u)}else r._sdk.log(n.LogLevel.Debug,function(){return"suggestAuthenticators() callback result: switch authentciator called"}),r._currentAuthentictorSelected=null,r.suggestAuthenticators();else i instanceof t.authenticationdrivers.AuthenticationDriverSessionResultEscapeRequested?r.completeWithEscapeRequest(i.escapeRequest):(r._sdk.log(n.LogLevel.Error,function(){return"suggestAuthenticators() unexpected callback result: stopping with error.'"}),r.completeAuthenticationWithError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Unknown authentication driver result type encountered during registration.")))},function(t){r._sdk.log(n.LogLevel.Error,function(){return"suggestAuthenticators() error callback result: stopping with error. error: '"+t._data+"'"});r.completeAuthenticationWithError(t)})):r._sdk.log(n.LogLevel.Debug,function(){return"suggestAuthenticators() stopped by ControlRequest of type "+i.getControlRequest()})})},f.prototype.handlePromotionInputControlOrEscapeRequest=function(t){if(t.getActionEscapeRequest())return this.completeWithEscapeRequest(t.getActionEscapeRequest()),!1;if(!t.isControlRequest())return!0;switch(t.getControlRequest()){case n.PromotionControlRequest.Continue:return!0;case n.PromotionControlRequest.Skip:return this.completeWithDeclineAssertion(),!1;case n.PromotionControlRequest.Abort:return this.completeAuthenticationWithError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.UserCanceled,"User aborted/canceled")),!1;default:return this._sdk.log(n.LogLevel.Warning,function(){return"handlePromotionInputControlRequest() received invalid PromotionInput, unsupported ControlRequest"}),!1}},f.prototype.sendDeclineAssertion=function(){return this.sendAssertionRequest(f.ASSERT_DECLINE)},f.prototype.completeWithDeclineAssertion=function(){var n=this;this.sendDeclineAssertion().then(function(t){n.completeAuthenticationWithAssertionResult(t)}).catch(function(t){n.completeAuthenticationWithError(t)})},f.prototype.completeAuthenticationWithAssertionResult=function(n){this.terminateSession();u.prototype.completeAuthenticationWithAssertionResult.call(this,n)},f.prototype.completeAuthenticationWithError=function(n){this.terminateSession();u.prototype.completeAuthenticationWithError.call(this,n)},f.prototype.terminateSession=function(){this._session&&(this._session.endSession(),delete this._session)},Object.defineProperty(f.prototype,"availableAuthenticatorsForSwitching",{get:function(){return this.availableAuthenticators},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"availableAuthenticators",{get:function(){return this._authenticatorList.concat([])},enumerable:!1,configurable:!0}),f.prototype.shouldDisplayPromotion=function(){var t=this.readStrategyState();if(null==t||null==t.lastPromotionDate||null==t.loginsCounter)return this._sdk.log(n.LogLevel.Debug,function(){return"shouldDisplayPromotion() first promotion. Stored data was empty."}),t={loginsCounter:1,lastPromotionDate:0},this.updateStrategyState(t),!0;for(var e=this._action.options.strategies,r=!0,o=function(i){if(0==u.checkStrategy(i,t))return u._sdk.log(n.LogLevel.Debug,function(){return"shouldDisplayPromotion() strategy stopped promotion. strategy type: "+i.type}),r=!1,"break"},u=this,i=0,f=e;i<f.length;i++)if("break"===o(f[i]))break;return t.loginsCounter+=1,this.updateStrategyState(t),r},f.prototype.updateStrategyState=function(n){this._sdk.host.writeStorageKey(this.strategyStatePerUserStorageKey(),n)},f.prototype.readStrategyState=function(){var t=this._sdk.host.readStorageKey(this.strategyStatePerUserStorageKey());return null!=t.lastPromotionDate&&null!=t.loginsCounter?(this._sdk.log(n.LogLevel.Debug,function(){return"Stored state found, "+JSON.stringify(t)}),t):(this._sdk.log(n.LogLevel.Debug,function(){return"No stored state, trying to read legacy format"}),this.readLegacyStrategyStateFormat())},f.prototype.readLegacyStrategyStateFormat=function(){var i=this._sdk.host.readStorageKey(new t.TarsusKeyPath("stragety"));return null!=i.days&&null!=i.logins?(this._sdk.log(n.LogLevel.Debug,function(){return"Reading from legacy format, "+JSON.stringify(i)}),{loginsCounter:i.logins,lastPromotionDate:i.days}):null},f.prototype.checkStrategy=function(n,i){var r,u,f;return n.type==t.Protocol.PromotionStrategyFrequency.LOGINS?i.loginsCounter%n.value==0:n.type==t.Protocol.PromotionStrategyFrequency.DAYS?(r=new Date,u=new Date,u.setTime(i.lastPromotionDate),f=new Date,f.setDate(u.getDate()+n.value),f.getTime()<=r.getTime()&&(i.lastPromotionDate=r.getTime(),!0)):!1},f.ASSERT_DECLINE="decline",f.ACTION_REGISTRATION="registration",f.ACTION_PROMOTION="registration_promotion",f}(r.ActionDriverAuthenticatorOp);r.ActionDriverPromotion=u}(t.actiondrivers||(t.actiondrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(t){!function(r){!function(u){var f=function(u){function f(n,t){return u.call(this,n,t)||this}return i(f,u),f.prototype.doRunAction=function(){var u=this,i,f;return this._sdk.log(t.LogLevel.Debug,function(){return"Executing provision TOTP action."}),this._cfmAction=this._action,i=r.totp.TotpPropertiesProcessor.createWithUser(this._controlFlowProcessor._session.user,this._sdk,this._clientContext,this._controlFlowProcessor._session),f=i.createTotpDriver(this._cfmAction.generator,this._cfmAction.otp_type),f?(i.deleteProvisionForGenerator(this._cfmAction.generator),f.promiseProvisionOutput(this._cfmAction,this.policyAction(),this._clientContext,this._uiHandler).then(function(r){if(r instanceof n.tarsusplugin.TotpProvisionOutput)return u.sendAssertionRequest(null,r.getAssertionData()).then(function(n){return r.finalize(n),i.updateWithProvisionedGenerator(u._cfmAction,r),n});if(r instanceof n.tarsusplugin.TotpProvisionEscapeRequest)return u.processEscapeRequest(r.getEscapeRequest());throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Invalid TOTP provision output response");})):(this._sdk.log(t.LogLevel.Error,function(){return"failed to create TOTP driver"}),Promise.reject(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"failed to create TOTP driver")))},f}(u.SimpleCancellationActionDriver);u.ActionDriverProvisionTotp=f}(r.actiondrivers||(r.actiondrivers={}))}(t.core||(t.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(r){var u=function(r){function u(n,t){return r.call(this,n,t)||this}return i(u,r),u.prototype.toValidVaultPath=function(i){var r=t.TarsusKeyPath.fromString(i);if(!n.UserVault.isValidKeyPathForUserVault(r))throw this._sdk.log(n.LogLevel.Error,function(){return"Invalid user vault path "+r}),new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Invalid user vault path "+r);return r},u.prototype.doRunAction=function(){var i=this,r;return this._sdk.log(n.LogLevel.Debug,function(){return"Executing provision TOTP action."}),this._vaultAction=this._action,r=Promise.resolve(),this._vaultAction.new_vaults.forEach(function(u){r=r.then(function(){var e=i.toValidVaultPath(u.vault.vault_id),r,f;return i._sdk.log(n.LogLevel.Debug,function(){return"Will provision vault "+e}),r=u.vault.vault_type,f=t.vault.VaultTypes[r],f?f.createNew(i._controlFlowProcessor._session.user,e,i,i._sdk,i._controlFlowProcessor._uiHandler,!1,u).then(function(){}):(i._sdk.log(n.LogLevel.Error,function(){return"failed to find vault driver for type "+r}),Promise.reject(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"failed to create TOTP driver for type "+r)))})}),(r=r.then(function(){i._vaultAction.deleted_vaults.forEach(function(r){var u=i.toValidVaultPath(r);i._sdk.log(n.LogLevel.Debug,function(){return"Will delete vault "+u});t.vault.Vault.deleteVaultForUserWithId(i._controlFlowProcessor._session.user,u,i._sdk)})})).then(function(){return i.sendAssertionRequest()})},u.prototype.getValidCancelOptions=function(){return[n.ControlRequestType.SelectMethod,n.ControlRequestType.ChangeMethod,n.ControlRequestType.RetryAuthenticator,n.ControlRequestType.CancelAuthenticator]},u.prototype.getValidErrorRecoveryOptions=function(){return[n.AuthenticationErrorRecovery.RetryAuthenticator,n.AuthenticationErrorRecovery.ChangeAuthenticator,n.AuthenticationErrorRecovery.SelectAuthenticator,n.AuthenticationErrorRecovery.Fail]},u}(r.SimpleCancellationActionDriver);r.ActionDriverProvisionUserVault=u}(t.actiondrivers||(t.actiondrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(r){var u=function(u){function f(n,t){return u.call(this,n,t)||this}return i(f,u),f.prototype.runActionWithCompletionFunctions=function(){var i=this,f=this._action,u,e,o;for(this._sdk.log(n.LogLevel.Debug,function(){return"Loading and validating authenticator description"}),u=0;u<f.assertions.length;u++)if(e=r.AuthenticationMenuAuthenticator.fromRegistrationAction(f.assertions[u],this),e.getSupportedOnDevice()){this._registeredAuthenticator=e;this._silentRegistration=!!f.assertions[u].silent;break}this._registeredAuthenticator?(o=this._registeredAuthenticator.authDriver,this.prepareForRunningAuthenticationDriver(o)&&(this._sdk.log(n.LogLevel.Debug,function(){return"Starting auth registeration"}),o.runRegistration().then(function(r){r instanceof t.authenticationdrivers.AuthenticationDriverSessionResultAuthenticationCompleted?i.completeAuthenticationWithAssertionResult(r.assertionResult):r instanceof t.authenticationdrivers.AuthenticationDriverSessionResultEscapeRequested?i.completeWithEscapeRequest(r.escapeRequest):i.completeAuthenticationWithError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Unknown authentication driver result type encountered during registration."))},function(t){i._sdk.log(n.LogLevel.Debug,function(){return"Received authentication driver error "+t});i.completeAuthenticationWithError(t)}))):this.completeAuthenticationWithError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"No supported authenticator listed in registeration request."))},Object.defineProperty(f.prototype,"availableAuthenticatorsForSwitching",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"availableAuthenticators",{get:function(){return[this._registeredAuthenticator]},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"isSilentRegistration",{get:function(){return this._silentRegistration},enumerable:!1,configurable:!0}),f}(r.ActionDriverAuthenticatorOp);r.ActionDriverRegistration=u}(t.actiondrivers||(t.actiondrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(t){var r=function(t){function r(n,i){return t.call(this,n,i)||this}return i(r,t),r.prototype.run=function(){var t=this;return this._sdk.log(n.LogLevel.Debug,function(){return"Executing scan qr action."}),new Promise(function(i,r){var u=t._action,f=n.QrCodeFormat.Alphanumeric;if(u.qr_code_format_type&&(f=n.QrCodeFormatImpl.fromAssertionFormat(u.qr_code_format_type)),t._session=t._uiHandler.createScanQrSession(t._policyAction,t._clientContext),!t._session)throw n.impl.AuthenticationErrorImpl.appImplementationError("Invalid return from createScanQrSession.");t._session.startSession(t._clientContext,t.policyAction());t._session.getScanQrResponse(u.instructions,f).then(function(i){if(i.isControlRequest())return t.processControlRequest(i.getControlRequest());if(null!=i.getActionEscapeRequest())return t.processEscapeRequest(i.getActionEscapeRequest());var r={qr_content:i.getResponse().getQrCodeResult().getQrCode()};return t._sdk.log(n.LogLevel.Debug,function(){return"Asserting scan qr: "+r.qr_content}),t.sendAssertionRequest(null,r).catch(function(i){throw t._sdk.log(n.LogLevel.Error,function(){return"Scan qr sendAssertionRequest error: "+i}),i;})}).catch(function(i){throw t._sdk.log(n.LogLevel.Error,function(){return"Scan qr action error: "+i}),i;}).finally(function(){t._session.endSession();delete t._session}).then(i,r)})},r.prototype.processControlRequest=function(t){var i=this;return new Promise(function(r,u){switch(i._sdk.log(n.LogLevel.Debug,function(){return"Processing control request "+t.getRequestType()}),t.getRequestType()){case n.ControlRequestType.CancelAuthenticator:u(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.UserCanceled,"Scan qr code action canceled by user."));break;default:throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Unsupported control request: "+t.getRequestType()+" for scan qr action.");}})},r}(t.ActionDriver);t.ActionDriverScanQr=r}(t.actiondrivers||(t.actiondrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){var u,f,r,t;t=n.sdk||(n.sdk={});r=t.core||(t.core={});u=r.actiondrivers||(r.actiondrivers={});f=function(n){function u(t,i){return n.call(this,t,i)||this}return i(u,n),u.augmentAssertionDataWithSignedContent=function(n,i,r,u){var f=JSON.stringify(i),e;return u.log(t.LogLevel.Debug,function(){return"Signing consent payload: "+f}),e=t.util.asciiToHex(f),r.signHex(e).then(function(i){var r=t.util.hexToBase64(i),u={payload:f,signed_payload:r};return n.sign_content_data=u,n})},u.prototype.run=function(){var e=this,i,f,n;return this._sdk.log(t.LogLevel.Debug,function(){return"Executing consent action."}),i=this._controlFlowProcessor.initiatingRequest&&this._controlFlowProcessor.initiatingRequest.body,f={params:i&&i.params||{}},this._controlFlowProcessor.requestContext&&this._controlFlowProcessor.requestContext instanceof r.ApprovalControlFlowExecutionContext&&(n=this._controlFlowProcessor.requestContext.approval,f.approval={approval_id:n.getApprovalId(),message:{title:n.getTitle(),details:n.getDetails()}}),u.augmentAssertionDataWithSignedContent({},f,this._controlFlowProcessor._session.deviceSigningKeyPair,this._sdk).then(function(n){return e.sendAssertionRequest(null,n)})},u}(u.ActionDriver);u.ActionDriverSignContent=f}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(r){var u=function(r){function u(n,t){return r.call(this,n,t)||this}return i(u,r),u.prototype.doRunAction=function(){var t=this;return this._sdk.log(n.LogLevel.Debug,function(){return"Executing ticket wait action."}),new Promise(function(i,r){var u=t._action;if(t._session=t._uiHandler.createTicketWaitSession(t._policyAction,t._clientContext),!t._session)throw n.impl.AuthenticationErrorImpl.appImplementationError("Invalid return from createTicketWaitSession.");t._session.setWaitingTicket(new n.impl.TicketWaitingInformationImpl(u));t._session.startSession(t.policyAction(),t._clientContext);t.pollServer().then(function(n){i(n)}).finally(function(){t._session.endSession();delete t._session}).catch(function(i){t._sdk.log(n.LogLevel.Error,function(){return"Wait for ticket action error: "+i});r(i)})})},u.prototype.pollServer=function(){var i=this,r={};return this._sdk.log(n.LogLevel.Debug,function(){return"Asserting ticket wait poll"}),new Promise(function(n,u){var f,e=3;!function o(){0===e?u(f):i.sendAssertionRequest(null,r).then(function(r){r.assertion_error_code==t.Protocol.AssertionErrorCode.ExternalProcessPending?n(i.inputLoop()):n(r)}).catch(function(n){e--;f=n;i._sdk.host.createDelayedPromise(10).then(function(){o()})})}()})},u.prototype.longPoll=function(n){var t=this,i={type:"ticket",ticket_id:this._action.raw_ticket_id};return this.sendPollingRequest(i,n).then(function(n){return n.change_detected?t.pollServer():t.inputLoop()})},u.prototype.inputLoop=function(){var t=this;return this._session.promiseInput().then(function(i){var r,u;if(i.isControlRequest())return t.processControlRequest(i.getControlRequest());if(null!=i.getActionEscapeRequest())return t.processEscapeRequest(i.getActionEscapeRequest());if(r=i.getResponse(),r instanceof n.TicketWaitInputPollRequest)return u=r.getPollingTimeout(),u?t.longPoll(u):t.pollServer();throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Expected polling request input response but got: "+r);})},u.prototype.processControlRequest=function(t){var i=this;return new Promise(function(r,u){switch(i._sdk.log(n.LogLevel.Debug,function(){return"Processing control request "+t.getRequestType()}),t.getRequestType()){case n.ControlRequestType.CancelAuthenticator:case n.ControlRequestType.AbortAuthentication:u(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.UserCanceled,"Wait for ticket action canceled by user."));break;default:throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Unsupported control request: "+t.getRequestType()+" for ticket wait action.");}})},u}(r.SimpleCancellationActionDriver);r.ActionDriverTicketWait=u}(t.actiondrivers||(t.actiondrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(t){var r=function(r){function u(n,t){return r.call(this,n,t)||this}return i(u,r),u.prototype.runActionWithCompletionFunctions=function(){this._action=this._action;this._sdk.log(n.LogLevel.Debug,function(){return"Started unregister action!"});t.AuthenticationMenuAuthenticator.fromUnregistrationAction(this._action,this).authDriver.runUnregistration().then(this._completionFunction,this._rejectionFunction)},Object.defineProperty(u.prototype,"availableAuthenticators",{get:function(){return this._availableAuthenticators.concat([])},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"isSilentRegistration",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"isPlaceholder",{get:function(){return 0==this._action.method.indexOf("placeholder")},enumerable:!1,configurable:!0}),u.prototype.sendUnregisterAssertion=function(){return this.sendAssertionRequest()},u}(t.ActionDriverAuthenticatorOp);t.ActionDriverUnregistration=r}(t.actiondrivers||(t.actiondrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(t){!function(r){!function(r){var u,f;u=r.dyadic||(r.dyadic={});f=function(r){function u(){return null!==r&&r.apply(this,arguments)||this}return i(u,r),u.prototype.run=function(){var i=this;return Promise.resolve().then(function(){return"false"==i._sdk.host.queryHostInfo(n.sdkhost.HostInformationKey.DyadicPresent)?Promise.reject(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Dyadic capability is not present (is Dyadic SDK integrated?)")):i.issueDyadicRequest().then(function(n){return i.sendAssertionRequest(null,i.buildAssertionData(n)).then(function(r){var u=i.dyadicServerResponseFromAssertionResponse(r);return u?n.finalize(u).then(function(){return r}):Promise.reject(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Dyadic data missing from server response"))})})}).catch(function(n){var r=t.impl.AuthenticationErrorImpl.ensureAuthenticationError(n),u={msg:r.getMessage(),code:r.getErrorCode(),data:r.getData()};return i.sendErrorReportAssertionRequest(u).finally(function(){throw n;})})},u.prototype.dyadicServerResponseFromAssertionResponse=function(n){var t=n.data&&n.data.dyadic;return t&&t.server_response},u.prototype.buildAssertionData=function(n){var r={requestData:"request_data",requestPayload:"request_payload",proxyPayload:"proxy_payload"},t=n.getServerRequest(),i;return Object.keys(r).forEach(function(n){var u=r[n],i;t[u]=t[n];delete t[n];i=t[u];i&&(i.original_data=i.originalData,delete i.originalData)}),i={dyadic:t},i.dyadic.token_uid=n.getTokenId()||this._controlFlowProcessor._session.deviceId(),i},u}(r.ActionDriver);u.ActionDriverDyadic=f}(r.actiondrivers||(r.actiondrivers={}))}(t.core||(t.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){!function(n){!function(n){var t=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.prototype.issueDyadicRequest=function(){var n=this._action,t=this._controlFlowProcessor._session.user.guid.toString();return this._sdk.host.dyadicEnroll(t,n.server_info)},t}(n.ActionDriverDyadic);n.ActionDriverDyadicEnroll=t}(n.dyadic||(n.dyadic={}))}(n.actiondrivers||(n.actiondrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(t){!function(t){var r=function(){function n(){}return n.prototype.getServerRequest=function(){return this._serverRequest},n.prototype.getTokenId=function(){return this._signHandle.getTokenId()},n.prototype.finalize=function(n){var r=this,t=n,i=this._signHandle.finalize(t.server_response);return t.otp_token_refresh&&Object.keys(t.otp_token_refresh).forEach(function(n){i=i.then(function(){return r._refreshTokenHandles[n].finalize(t.otp_token_refresh[n])})}),i},n.create=function(t,i,r){var u=new n;return u._refreshTokenHandles=t,u._signHandle=i,u._serverRequest=r,u},n}(),u=function(t){function u(){return null!==t&&t.apply(this,arguments)||this}return i(u,t),u.prototype.issueDyadicRequest=function(){var i=this,t=this._action,u=n.util.asciiToHex(t.assertion_id+this._controlFlowProcessor.challenge),f=this._controlFlowProcessor._session.user.guid.toString();return this._sdk.host.dyadicSign(f,u).then(function(n){var e={},u=n.getServerRequest(),f=Promise.resolve(!0);return t.otp_token_uids&&0<t.otp_token_uids.length&&(u.otp_token_refresh={},t.otp_token_uids.forEach(function(n){f=f.then(function(){return i._sdk.host.dyadicRefreshToken(n).then(function(t){return e[n]=t,u.otp_token_refresh[n]=t.getServerRequest(),!0})})})),f.then(function(){return r.create(e,n,u)})})},u.prototype.dyadicServerResponseFromAssertionResponse=function(n){return n.data&&n.data.dyadic},u}(t.ActionDriverDyadic);t.ActionDriverDyadicSign=u}(t.dyadic||(t.dyadic={}))}(t.actiondrivers||(t.actiondrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){!function(n){!function(n){var t=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.prototype.issueDyadicRequest=function(){var n=this._controlFlowProcessor._session.user.guid.toString();return this._sdk.host.dyadicDelete(n)},t}(n.ActionDriverDyadic);n.ActionDriverDyadicDelete=t}(n.dyadic||(n.dyadic={}))}(n.actiondrivers||(n.actiondrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){!function(n){n.ActionDrivers={confirmation:n.ActionDriverConfirmation,information:n.ActionDriverInformation,json_data:n.ActionDriverJsonData,authentication:n.ActionDriverAuthentication,registration:n.ActionDriverRegistration,unregistration:n.ActionDriverUnregistration,provision_totp:n.ActionDriverProvisionTotp,disable_totp:n.ActionDriverDisableTotp,sign_content:n.ActionDriverSignContent,form:n.ActionDriverForm,registration_promotion:n.ActionDriverPromotion,scan_qr:n.ActionDriverScanQr,wait_for_ticket:n.ActionDriverTicketWait,dyadic_enroll:n.dyadic.ActionDriverDyadicEnroll,dyadic_sign:n.dyadic.ActionDriverDyadicSign,dyadic_un_enroll:n.dyadic.ActionDriverDyadicDelete,debug_break:n.ActionDriverDebugBreak,invoke_idp:n.ActionDriverInvokeIdp,provision_user_vault:n.ActionDriverProvisionUserVault,kyc:n.ActionDriverKyc,fido2_anonymous_auth:n.ActionDriverAnonymousFido2Authenticate}}(n.actiondrivers||(n.actiondrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(i){var r=function(){function r(n,t,i){this._externalCancelled=!1;this._actionDriver=n;this._authenticatorConfig=t;this._authenticatorDescription=i;this._sdk=n._sdk;this._uiHandler=n._uiHandler;this._clientContext=n._clientContext}return r.prototype.runAuthentication=function(t){return this._authenticationParameters=t,this.runMode(n.AuthenticatorSessionMode.Authentication)},r.prototype.runRegistration=function(){if(this._actionDriver.isSilentRegistration){var t=this;return i.instanceOfAuthenticationDriverSilentRegistrationSupport(this)?(t._sdk.log(n.LogLevel.Debug,function(){return"Invoking silent registration for "+t._authenticatorDescription.getAuthenticatorId()}),this.runSilentRegistration()):Promise.reject(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AuthenticatorError,"Silent registration not supported for this authenticator"))}return this.runMode(n.AuthenticatorSessionMode.Registration)},r.prototype.runUnregistration=function(){var i=this,t=this._actionDriver;return this._sdk.currentUiHandler.handleAuthenticatorUnregistration(this._authenticatorDescription,t.isPlaceholder,t.policyAction(),this._clientContext).then(function(r){if(i._sdk.log(n.LogLevel.Debug,function(){return"handleAuthenticatorUnregistration() result: "+r}),0==r.getUserChoice())return t.sendUnregisterAssertion().then(function(n){return i.handleUnregistrationAssertionResult(n),n});var u=new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Unregistration failed due to app implementation rejecting unregistertion.");return Promise.reject(u)})},r.prototype.onCancelRun=function(){this._externalCancelled=!0},Object.defineProperty(r.prototype,"user",{get:function(){return this._actionDriver._controlFlowProcessor._session.user},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"operationMode",{get:function(){return this._operationMode},enumerable:!1,configurable:!0}),r.prototype.terminateSession=function(){this._inputSession&&(this._inputSession.endSession(),delete this._inputSession)},r.prototype.completeAuthenticatorSessionWithResult=function(n){this.terminateSession();this._completionFunction(n)},r.prototype.completeAuthenticatorSessionWithError=function(t){try{this.terminateSession()}catch(t){this._sdk.log(n.LogLevel.Warning,function(){return"Can't dismiss authenticator session during error reporting."})}this._rejectionFunction(t)},r.prototype.handleInputOrControlResponse=function(t){try{t.isControlRequest()?this.processControlRequest(t.getControlRequest()):null!=t.getActionEscapeRequest()?this.completeAuthenticatorSessionWithResult(new i.AuthenticationDriverSessionResultEscapeRequested(t.getActionEscapeRequest())):this._operationMode==n.AuthenticatorSessionMode.Authentication?this.handleAuthenticationInputResponse(t.getResponse()):this.handleRegistrationInputResponse(t.getResponse())}catch(t){this.performErrorRecoveryForError(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}},r.prototype.processRegisterAssertion=function(t,r){var u=this;this._actionDriver.sendAuthenticatorAssertionRequest(this._authenticatorDescription,"register",t,r).then(function(t){u.handleRegisterAssertionResult(t)||(u._sdk.log(n.LogLevel.Info,function(){return"Registration session done."}),u.completeAuthenticatorSessionWithResult(new i.AuthenticationDriverSessionResultAuthenticationCompleted(t)))}).catch(function(t){u._sdk.log(n.LogLevel.Error,function(){return"Perform error recovery with server error "+t});u.performErrorRecoveryForError(t)})},r.prototype.processAuthenticateAssertion=function(t,r){var u=this;this._actionDriver.sendAuthenticatorAssertionRequest(this._authenticatorDescription,"authenticate",t,r).then(function(f){u.handleAuthenticateAssertionResult(f,u._authenticatorDescription,"authenticate",t,r)||(u._sdk.log(n.LogLevel.Info,function(){return"Authenticator session done."}),u.completeAuthenticatorSessionWithResult(new i.AuthenticationDriverSessionResultAuthenticationCompleted(f)))}).catch(function(t){u._sdk.log(n.LogLevel.Error,function(){return"Perform error recovery with server error "+t});u.performErrorRecoveryForError(t)})},r.prototype.runMode=function(t){var i=this;return new Promise(function(r,u){if(i._completionFunction=r,i._rejectionFunction=u,i._operationMode=t,i._inputSession=i.createAuthenticatorSession(),!i._inputSession)throw n.impl.AuthenticationErrorImpl.appImplementationError("Invalid return from authenticator session creation call.");i._inputSession.startSession(i._authenticatorDescription,i._operationMode,i._actionDriver.policyAction(),i._clientContext);i.authOrRegInStartedSession(!1)}).catch(function(t){throw n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t);})},r.prototype.handleGeneralAssertionResult=function(r){return this._sdk.log(n.LogLevel.Debug,function(){return"Authenticator assertion response "+JSON.stringify(r)}),r.data&&(this._sdk.log(n.LogLevel.Debug,function(){return"Processing authenticator assertion response: updating assertion authenticator description"}),this._authenticatorDescription.updateWithAssertionResult(r.data)),r.state!=t.Protocol.AuthSessionState.Pending&&(this._sdk.log(n.LogLevel.Info,function(){return"Authenticator session complete; status "+r.state}),this.completeAuthenticatorSessionWithResult(new i.AuthenticationDriverSessionResultAuthenticationCompleted(r)),!0)},r.prototype.handleUnregistrationAssertionResult=function(){},r.prototype.handleRegisterAssertionResult=function(t){return!!this.handleGeneralAssertionResult(t)||!!t.assertion_error_code&&(this._sdk.log(n.LogLevel.Error,function(){return"handleRegisterAssertionResult() Assertion error encoutered. Starting error recovery."}),this.performErrorRecoveryForError(n.impl.AuthenticationErrorImpl.errorForAssertionResponse(t)),!0)},r.prototype.handleAuthenticateAssertionResult=function(i){if(this.handleGeneralAssertionResult(i))return!0;if(i.assertion_error_code)switch(i.assertion_error_code){case t.Protocol.AssertionErrorCode.MustRegister:return this._sdk.log(n.LogLevel.Debug,function(){return"handleAuthenticateAssertionResult() Authenticator expired; must register"}),this.handleRegistrationDueToExpiration(),!0;case t.Protocol.AssertionErrorCode.FailOver:return this._sdk.log(n.LogLevel.Debug,function(){return"handleAuthenticateAssertionResult() Failover signalled"}),this.handleFallback(),!0;default:return this._sdk.log(n.LogLevel.Error,function(){return"handleAuthenticateAssertionResult() Assertion error encoutered. Starting error recovery. 2"}),this.performErrorRecoveryForError(n.impl.AuthenticationErrorImpl.errorForAssertionResponse(i)),!0}else if(this._authenticatorDescription.getExpired())return this._sdk.log(n.LogLevel.Info,function(){return"Authenticator expired; must register"}),this.handleRegistrationDueToExpiration(),!0;return!1},r.prototype.processAuthFailureAssertionAndHandleError=function(i,r){var u=this,f={num_of_failures:r};this._actionDriver.sendAuthenticatorAssertionRequest(this._authenticatorDescription,"auth_failure",f).then(function(r){if(!u.handleGeneralAssertionResult(r)){if(r.assertion_error_code)switch(r.assertion_error_code){case t.Protocol.AssertionErrorCode.FailOver:return u._sdk.log(n.LogLevel.Info,function(){return"Failover signalled during local failure report"}),u.handleFallback(),!0}i=n.impl.AuthenticationErrorImpl.augmentErrorData(i,r.data);u.performErrorRecoveryForError(i)}},function(t){var i=n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t);u._sdk.log(n.LogLevel.Error,function(){return"Error ${authError} signalled during local failure report"});u.performErrorRecoveryForError(i,!0)})},r.prototype.handleRegistrationDueToExpiration=function(){this._inputSession.changeSessionModeToRegistrationAfterExpiration();this._operationMode=n.AuthenticatorSessionMode.Registration;this.registerInStartedSession(!1)},r.prototype.authOrRegInStartedSession=function(t){this._operationMode==n.AuthenticatorSessionMode.Authentication?this.authenticateInStartedSession(t):this.registerInStartedSession(t)},r.prototype.processControlRequest=function(t){switch(this._sdk.log(n.LogLevel.Debug,function(){return"Processing control request "+t.getRequestType()}),t.getRequestType()){case n.ControlRequestType.AbortAuthentication:this.completeAuthenticatorSessionWithError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.UserCanceled,"Authentication cancelled due to abort control request."));break;case n.ControlRequestType.ChangeMethod:this.completeAuthenticatorSessionWithResult(new i.AuthenticationDriverSessionResultSwitchAuthenticator(null,this.getAuthenticationActionOtherAuthenticators()));break;case n.ControlRequestType.SelectMethod:this.completeAuthenticatorSessionWithResult(new i.AuthenticationDriverSessionResultSwitchAuthenticator);break;case n.ControlRequestType.CancelAuthenticator:this.invokeUiHandlerCancellation();break;case n.ControlRequestType.RetryAuthenticator:this.authOrRegInStartedSession(!0);break;default:this.completeAuthenticatorSessionWithError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Invalid ControlRequestType value during authentication session."))}},r.prototype.invokeUiHandlerCancellation=function(){var i=this,t;this._externalCancelled?this.processControlRequest(n.ControlRequest.create(n.ControlRequestType.AbortAuthentication)):(t=[n.ControlRequestType.RetryAuthenticator,n.ControlRequestType.AbortAuthentication],this.getAuthenticationActionOtherAuthenticators().length>0&&t.push(n.ControlRequestType.ChangeMethod),this._actionDriver.availableAuthenticatorsForSwitching.length>0&&t.push(n.ControlRequestType.SelectMethod),this._uiHandler.controlOptionForCancellationRequestInSession(t,this._inputSession).then(function(r){r.getRequestType()!=n.ControlRequestType.CancelAuthenticator?t.indexOf(r.getRequestType())<0?i.completeAuthenticatorSessionWithError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"controlOptionForCancellationRequestInSession returned an invalid option.")):i.processControlRequest(r):i.completeAuthenticatorSessionWithError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"controlOptionForCancellationRequestInSession returned CancelAuthenticator which is an invalid option."))}))},r.prototype.getAuthenticationActionOtherAuthenticators=function(){var n=this;return this._actionDriver.availableAuthenticatorsForSwitching.filter(function(t){return t!=n._authenticatorDescription})},r.prototype.handleFallback=function(){var t=this;if(this._authenticatorDescription.fallback){var r=[n.AuthenticatorFallbackAction.Retry,n.AuthenticatorFallbackAction.Cancel],u=null,f=this._authenticatorDescription.fallback.method;f?(u=this._actionDriver.availableAuthenticators.filter(function(n){return n.getAuthenticatorId()==f})[0])&&r.push(n.AuthenticatorFallbackAction.Fallback):this.getAuthenticationActionOtherAuthenticators().length>0&&r.push(n.AuthenticatorFallbackAction.AuthMenu);this._uiHandler.selectAuthenticatorFallbackAction(r,u,this._inputSession,this._actionDriver.policyAction(),this._clientContext).then(function(f){switch(t._sdk.log(n.LogLevel.Debug,function(){return"Fallback action selected "+f}),r.indexOf(f)<0&&(t._sdk.log(n.LogLevel.Error,function(){return"Invalid fallback action selected: "+f+" not in "+r}),t.completeAuthenticatorSessionWithError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Invalid fallback action selected by callback."))),f){case n.AuthenticatorFallbackAction.Fallback:case n.AuthenticatorFallbackAction.AuthMenu:t.completeAuthenticatorSessionWithResult(new i.AuthenticationDriverSessionResultSwitchAuthenticator(u));break;case n.AuthenticatorFallbackAction.Retry:t.authOrRegInStartedSession(!0);break;case n.AuthenticatorFallbackAction.Cancel:t.completeAuthenticatorSessionWithError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.UserCanceled,"User cancel in response to fallback action."))}})}else this.completeAuthenticatorSessionWithError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Cannot handle a fallback error without fallback specification in action."))},r.prototype.recoveryOptionsForError=function(t,i){var r=[n.AuthenticationErrorRecovery.Fail];return[n.AuthenticationErrorCode.AllAuthenticatorsLocked,n.AuthenticationErrorCode.AppImplementation,n.AuthenticationErrorCode.ControlFlowExpired,n.AuthenticationErrorCode.SessionRequired,n.AuthenticationErrorCode.InvalidDeviceBinding,n.AuthenticationErrorCode.UserCanceled].indexOf(t.getErrorCode())>=0?r:(i||!this._authenticatorDescription.getEnabled()||this._operationMode==n.AuthenticatorSessionMode.Authentication&&t.getErrorCode()==n.AuthenticationErrorCode.AuthenticatorExternalConfigError||r.push(n.AuthenticationErrorRecovery.RetryAuthenticator),this.getAuthenticationActionOtherAuthenticators().length>0&&r.push(n.AuthenticationErrorRecovery.ChangeAuthenticator),this._actionDriver.availableAuthenticatorsForSwitching.length>0&&r.push(n.AuthenticationErrorRecovery.SelectAuthenticator),r)},r.prototype.performErrorRecoveryForError=function(t,i){var r=this,u=this.recoveryOptionsForError(t,i),f=this.defaultRecoveryForError(t);u.indexOf(f)<0&&(f=u.indexOf(n.AuthenticationErrorRecovery.SelectAuthenticator)>=0?n.AuthenticationErrorRecovery.SelectAuthenticator:n.AuthenticationErrorRecovery.Fail);this._inputSession.promiseRecoveryForError(t,u,f).then(function(i){r._sdk.log(n.LogLevel.Debug,function(){return"Error recovery selected "+i});r._sdk.log(n.LogLevel.Debug,function(){return"recover from error: "+t.getErrorCode()});u.indexOf(i)<0&&(r._sdk.log(n.LogLevel.Error,function(){return"Invalid error recovery option from callback: "+i+" not in "+u}),r.completeAuthenticatorSessionWithError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Invalid error recovery action selected by callback.")));r.handleErrorRecoveryAction(i,t)})},r.prototype.handleErrorRecoveryAction=function(t,r){switch(t){case n.AuthenticationErrorRecovery.RetryAuthenticator:this.authOrRegInStartedSession(!0);break;case n.AuthenticationErrorRecovery.ChangeAuthenticator:this.completeAuthenticatorSessionWithResult(new i.AuthenticationDriverSessionResultSwitchAuthenticator(null,this.getAuthenticationActionOtherAuthenticators()));break;case n.AuthenticationErrorRecovery.SelectAuthenticator:this.completeAuthenticatorSessionWithResult(new i.AuthenticationDriverSessionResultSwitchAuthenticator);break;case n.AuthenticationErrorRecovery.Fail:default:this.completeAuthenticatorSessionWithError(r)}},r.prototype.defaultRecoveryForError=function(t){return this._operationMode==n.AuthenticatorSessionMode.Authentication?!this._authenticatorDescription.getLocked()&&this._authenticatorDescription.getRegistered()&&this._authenticatorDescription.getEnabled()&&t.getErrorCode()!=n.AuthenticationErrorCode.AuthenticatorLocked&&t.getErrorCode()!=n.AuthenticationErrorCode.AllAuthenticatorsLocked?n.AuthenticationErrorRecovery.RetryAuthenticator:t.getErrorCode()!=n.AuthenticationErrorCode.AllAuthenticatorsLocked?n.AuthenticationErrorRecovery.ChangeAuthenticator:n.AuthenticationErrorRecovery.Fail:n.AuthenticationErrorRecovery.RetryAuthenticator},r}();i.AuthenticationDriver=r}(t.authenticationdrivers||(t.authenticationdrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(t){var r=function(t){function r(n,i,r){return t.call(this,n,i,r)||this}return i(r,t),r.prototype.authenticateInStartedSession=function(){var t=this;this._inputSession.promiseInput().then(function(n){return t.handleInputOrControlResponse(n)},function(i){return t.completeAuthenticatorSessionWithError(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(i))})},r.prototype.registerInStartedSession=function(){var t=this;this._inputSession.promiseInput().then(function(n){return t.handleInputOrControlResponse(n)},function(i){return t.completeAuthenticatorSessionWithError(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(i))})},r.prototype.handleAuthenticationInputResponse=function(t){var i;try{i=this.generateAssertionDataForInputResponse(t)}catch(t){return void this.performErrorRecoveryForError(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}this.processAuthenticateAssertion(i)},r.prototype.handleRegistrationInputResponse=function(t){try{var i=this.generateAssertionDataForInputResponse(t)}catch(t){return void this.performErrorRecoveryForError(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}this.processRegisterAssertion(i)},r.prototype.generateAssertionDataForInputResponse=function(n){return{secret:this.generateSecretToSignForInputResponse(n)}},r}(t.AuthenticationDriver);t.AuthenticationDriverCentralizedSecretInputBased=r}(t.authenticationdrivers||(t.authenticationdrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(t){var i=function(){function i(n){this._authenticationDriverCtor=n}return i.prototype.createAuthenticationDriver=function(n,t,i){return new this._authenticationDriverCtor(n,t,i)},i.prototype.evaluateLocalRegistrationStatus=function(){return n.AuthenticatorRegistrationStatus.Registered},i.prototype.isSupportedOnDevice=function(){return!0},i.prototype.suggestParameters=function(){return[]},i.refreshInvalidatedAuthenticatorsEnrollments=function(n){return new Promise(function(i,r){var u,f=[],e,o;for(e in n.user.localEnrollments)u=n.user.localEnrollments[e],o=t.AuthenticatorDrivers[u.authenticatorId],f.push(o.checkAuthenticatorInvalidatedAndNotifyUIHandler(n));Promise.all(f).then(function(n){i(n)}).catch(function(n){r(n)})})},i.prototype.checkAuthenticatorInvalidatedAndNotifyUIHandler=function(){return Promise.resolve(!0)},i}();t.SimpleAuthenticationDriverDescriptor=i}(t.authenticationdrivers||(t.authenticationdrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(r){var u=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return i(r,n),r.prototype.getEnabled=function(){return this.getSupportedOnDevice()},r.getDescription=function(n,i){return new r(n,i,{},{status:t.Protocol.AuthenticationMethodStatus.Unregistered})},r}(r.AuthenticatorDescriptionImpl),f=function(f){function e(n,t){var i=f.call(this,n)||this;return i._authenticatorType=t,i}return i(e,f),e.prototype.evaluateLocalRegistrationStatus=function(i){var r=i.user.localEnrollments[this._authenticatorType];return r?r.validationStatus==t.LocalEnrollmentValidationStatus.Invalidated?n.AuthenticatorRegistrationStatus.LocallyInvalid:n.AuthenticatorRegistrationStatus.Registered:n.AuthenticatorRegistrationStatus.LocallyInvalid},e.prototype.checkAuthenticatorInvalidatedAndNotifyUIHandler=function(i){var f=this;return new Promise(function(e,o){var s,h;i.sdk.log(n.LogLevel.Info,function(){return"Checking if authenticator "+f._authenticatorType+" has become invalidated."});s=i.user.localEnrollments[f._authenticatorType];s.status==t.LocalEnrollmentStatus.Registered&&s.validationStatus!=t.LocalEnrollmentValidationStatus.Invalidated?r.AuthenticatorDrivers[f._authenticatorType].evaluateLocalRegistrationStatus(i)==n.AuthenticatorRegistrationStatus.LocallyInvalid?(i.sdk.log(n.LogLevel.Info,function(){return"Authenticator "+f._authenticatorType+" already became invalidated. Invalidating enrollment record and notifying ui handler."}),h=u.getDescription(i,s.authenticatorId),t.LocalEnrollment.invalidateLocalRegistrationStatusAndNotifyUIHandler(i.getCurrentUserInteractionSessionProvider(),h).then(function(n){e(n)}).catch(function(n){o(n)})):e(!1):e(!1)})},e}(r.SimpleAuthenticationDriverDescriptor);r.AuthenticationDriverDescriptorLocal=f}(t.authenticationdrivers||(t.authenticationdrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(t){!function(r){!function(r){var u=function(u){function f(){return u.call(this,r.AuthenticationDriverDeviceBiometrics,f.authenticatorName)||this}return i(f,u),f.prototype.evaluateLocalRegistrationStatus=function(i){var e=u.prototype.evaluateLocalRegistrationStatus.call(this,i);if(e!=t.AuthenticatorRegistrationStatus.Registered)return e;var o=i.user.localEnrollments[f.authenticatorName],h=r.AuthenticationDriverDeviceBiometrics.authenticatorKeyTagForUser(i.user,o.version,o.salt),s=i.sdk.host.getKeyPair(h,n.sdkhost.KeyClass.HardwareProtectedSignAndEncryptKey,n.sdkhost.KeyBiometricProtectionMode.BindToEnrollmentDb);return s?(s.closeKeyPair(),t.AuthenticatorRegistrationStatus.Registered):t.AuthenticatorRegistrationStatus.LocallyInvalid},f.prototype.isSupportedOnDevice=function(t){var i=t.sdk.host.queryHostInfo(n.sdkhost.HostInformationKey.DeviceBiometricsSupported);return!!i&&"false"!=i},f.authenticatorName="device_biometrics",f}(r.AuthenticationDriverDescriptorLocal);r.AuthenticationDriverDescriptorDeviceBiometrics=u}(r.authenticationdrivers||(r.authenticationdrivers={}))}(t.core||(t.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(t){!function(t){!function(t){var r=function(r){function u(){return r.call(this,t.AuthenticationDriverFace)||this}return i(u,r),u.prototype.isSupportedOnDevice=function(t){return"true"==t.sdk.host.queryHostInfo(n.sdkhost.HostInformationKey.ImageAcquitisionSupported)},u}(t.SimpleAuthenticationDriverDescriptor);t.AuthenticationDriverDescriptorFace=r}(t.authenticationdrivers||(t.authenticationdrivers={}))}(t.core||(t.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(t){var r=function(r){function u(n){var i=r.call(this,t.AuthenticationDriverFido)||this;return i._fidoPolicy=n,i}return i(u,r),u.prototype.isSupportedOnDevice=function(i){var u=this,r;return i.sdk.log(n.LogLevel.Debug,function(){return"Check FIDO authenticator support for "+JSON.stringify(u._fidoPolicy)}),r=t.AuthenticationDriverFido.hasEligibleClientProvidersForPolicy(i.sdk,this._fidoPolicy),r||i.sdk.log(n.LogLevel.Info,function(){return"Encountered non-supported FIDO request."}),r},u.prototype.evaluateLocalRegistrationStatus=function(){return n.AuthenticatorRegistrationStatus.Registered},u}(t.SimpleAuthenticationDriverDescriptor);t.AuthenticationDriverDescriptorFido=r}(t.authenticationdrivers||(t.authenticationdrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(t){!function(t){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.prototype.isSupportedOnDevice=function(t){return"true"===t.sdk.host.queryHostInfo(n.sdkhost.HostInformationKey.Fido2ClientPresent)},r}(t.SimpleAuthenticationDriverDescriptor);t.AuthenticationDriverDescriptorFido2=r}(t.authenticationdrivers||(t.authenticationdrivers={}))}(t.core||(t.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(t){!function(r){!function(r){var u=function(u){function f(){return u.call(this,r.AuthenticationDriverFingerprint,f.authenticatorName)||this}return i(f,u),f.prototype.evaluateLocalRegistrationStatus=function(i){var e=u.prototype.evaluateLocalRegistrationStatus.call(this,i);if(e!=t.AuthenticatorRegistrationStatus.Registered)return e;var o=i.user.localEnrollments[f.authenticatorName],h=r.AuthenticationDriverFingerprint.authenticatorKeyTagForUser(i.user,o.version,o.salt),s=i.sdk.host.getKeyPair(h,n.sdkhost.KeyClass.StdSigningKey,n.sdkhost.KeyBiometricProtectionMode.BindToEnrollmentDb);return s?(s.closeKeyPair(),t.AuthenticatorRegistrationStatus.Registered):t.AuthenticatorRegistrationStatus.LocallyInvalid},f.prototype.isSupportedOnDevice=function(t){return"true"==t.sdk.host.queryHostInfo(n.sdkhost.HostInformationKey.FingerprintSupported)},f.authenticatorName="fingerprint",f}(r.AuthenticationDriverDescriptorLocal);r.AuthenticationDriverDescriptorFingerprint=u}(r.authenticationdrivers||(r.authenticationdrivers={}))}(t.core||(t.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(t){var i=function(){function n(n,t){this._targetIdentifier=n;this._description=t.describe();this._deviceDetails=t}return n.prototype.getDescription=function(){return this._description},n.prototype.getDeviceIdentifier=function(){return this._targetIdentifier},n.prototype.getDeviceDetails=function(){return this._deviceDetails},n.__tarsusInterfaceName="MobileApproveTarget",n}(),r;t.MobileApproveTargetImpl=i;r=function(){function r(){}return r.prototype.evaluateLocalRegistrationStatus=function(){return n.AuthenticatorRegistrationStatus.Registered},r.prototype.isSupportedOnDevice=function(){return!0},r.prototype.suggestParameters=function(t){return r.createTargetsFromConfig(t).map(function(t){return n.AuthenticationActionParameterTargetSelection.create(t)})},r.prototype.createAuthenticationDriver=function(n,i,r){return new t.AuthenticationDriverMobileApprove(n,i,r)},r.createTargetsFromConfig=function(t){return t.selectable_devices.map(function(t){var r=n.TargetDeviceDetailsImpl.fromServerFormat(t);return new i(t.device_id,r)})},r.prototype.checkAuthenticatorInvalidatedAndNotifyUIHandler=function(){return Promise.resolve(!0)},r}();t.AuthenticationDriverDescriptorMobileApprove=r}(t.authenticationdrivers||(t.authenticationdrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(t){!function(r){!function(r){var u=function(u){function f(){return u.call(this,r.AuthenticationDriverNativeFace,f.authenticatorName)||this}return i(f,u),f.prototype.evaluateLocalRegistrationStatus=function(i){var e=u.prototype.evaluateLocalRegistrationStatus.call(this,i);if(e!=t.AuthenticatorRegistrationStatus.Registered)return e;var o=i.user.localEnrollments[f.authenticatorName],h=r.AuthenticationDriverNativeFace.authenticatorKeyTagForUser(i.user,o.version,o.salt),s=i.sdk.host.getKeyPair(h,n.sdkhost.KeyClass.StdSigningKey,n.sdkhost.KeyBiometricProtectionMode.BindToEnrollmentDb);return s?(s.closeKeyPair(),t.AuthenticatorRegistrationStatus.Registered):t.AuthenticatorRegistrationStatus.LocallyInvalid},f.prototype.isSupportedOnDevice=function(t){return"true"==t.sdk.host.queryHostInfo(n.sdkhost.HostInformationKey.FaceIdKeyBioProtectionSupported)},f.authenticatorName="face_id",f}(r.AuthenticationDriverDescriptorLocal);r.AuthenticationDriverDescriptorNativeFace=u}(r.authenticationdrivers||(r.authenticationdrivers={}))}(t.core||(t.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(i){var r=function(){function n(n,t,i,r,u,f){this._channelIndex=n;this._channelAssertionId=t;this._targetIdentifier=i;this._description=r;this._channel=u;this._deviceDetails=f}return n.prototype.getDescription=function(){return this._description},n.prototype.getChannel=function(){return this._channel},n.prototype.getTargetIdentifier=function(){return this._targetIdentifier},n.prototype.getChannelAssertionId=function(){return this._channelAssertionId},n.prototype.getChannelIndex=function(){return this._channelIndex},n.prototype.getDeviceDetails=function(){return this._deviceDetails},n.__tarsusInterfaceName="OtpTarget",n}(),u;i.OtpTargetImpl=r;u=function(){function u(){}return u.prototype.evaluateLocalRegistrationStatus=function(){return n.AuthenticatorRegistrationStatus.Registered},u.prototype.isSupportedOnDevice=function(){return!0},u.prototype.suggestParameters=function(t){return this.createTargetsFromConfig(t).map(function(t){return n.AuthenticationActionParameterTargetSelection.create(t)})},u.prototype.createAuthenticationDriver=function(n,t,r){var u=this.createTargetsFromConfig(t);return new i.AuthenticationDriverOtp(n,t,u,r)},u.prototype.createTargetsFromConfig=function(i){return i.channels.map(function(i){var u;switch(i.type){case t.Protocol.AuthenticationMethodOtpChannelType.Email:u=n.OtpChannel.Email;break;case t.Protocol.AuthenticationMethodOtpChannelType.Sms:u=n.OtpChannel.Sms;break;case t.Protocol.AuthenticationMethodOtpChannelType.Voice:u=n.OtpChannel.VoiceCall;break;case t.Protocol.AuthenticationMethodOtpChannelType.Push:u=n.OtpChannel.PushNotification;break;default:u=n.OtpChannel.Unknown}return!i.targets&&i.target&&(i.targets={},i.targets[0]=i.target),i.targets||(i.targets={}),Object.keys(i.targets).map(function(t,f){var o=i.targets[t],s,e,h;switch(u){case n.OtpChannel.PushNotification:return s=o,e=n.TargetDeviceDetailsImpl.fromServerFormat(s),new r(f,i.assertion_id,t,e.describe(),u,e);default:return h=o,new r(f,i.assertion_id,t,h,u,null)}})}).reduce(function(n,t){return n.concat(t)},[])},u.prototype.checkAuthenticatorInvalidatedAndNotifyUIHandler=function(){return Promise.resolve(!0)},u}();i.AuthenticationDriverDescriptorOtp=u}(t.authenticationdrivers||(t.authenticationdrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(t){var i=function(){function n(n,t){this._targetIdentifier=n;this._description=t.describe();this._deviceDetails=t}return n.prototype.getDescription=function(){return this._description},n.prototype.getDeviceIdentifier=function(){return this._targetIdentifier},n.prototype.getDeviceDetails=function(){return this._deviceDetails},n.__tarsusInterfaceName="TotpTarget",n}(),r;t.TotpTargetImpl=i;r=function(){function r(){}return r.prototype.evaluateLocalRegistrationStatus=function(){return n.AuthenticatorRegistrationStatus.Registered},r.prototype.isSupportedOnDevice=function(){return!0},r.prototype.suggestParameters=function(t){return r.createTargetsFromConfig(t).map(function(t){return n.AuthenticationActionParameterTargetSelection.create(t)})},r.prototype.createAuthenticationDriver=function(n,i,r){return new t.AuthenticationDriverTotp(n,i,r)},r.createTargetsFromConfig=function(t){var r=t;return r.selectable_devices?r.selectable_devices.map(function(t){var r=n.TargetDeviceDetailsImpl.fromServerFormat(t);return new i(t.device_id,r)}):[]},r.prototype.checkAuthenticatorInvalidatedAndNotifyUIHandler=function(){return Promise.resolve(!0)},r}();t.AuthenticationDriverDescriptorTotp=r}(t.authenticationdrivers||(t.authenticationdrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(t){!function(t){!function(t){var r=function(r){function u(){return r.call(this,t.AuthenticationDriverVoice)||this}return i(u,r),u.prototype.isSupportedOnDevice=function(t){return"true"==t.sdk.host.queryHostInfo(n.sdkhost.HostInformationKey.AudioAcquitisionSupported)},u}(t.SimpleAuthenticationDriverDescriptor);t.AuthenticationDriverDescriptorVoice=r}(t.authenticationdrivers||(t.authenticationdrivers={}))}(t.core||(t.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(r){var u=function(u){function f(n,t,i){return u.call(this,n,t,i)||this}return i(f,u),Object.defineProperty(f.prototype,"lastObtainedKeyPair",{get:function(){return this._lastObtainedKeyPair},set:function(n){this._lastObtainedKeyPair&&this._lastObtainedKeyPair!=n&&this._lastObtainedKeyPair.closeKeyPair();this._lastObtainedKeyPair=n},enumerable:!1,configurable:!0}),f.prototype.completeAuthenticatorSessionWithResult=function(i){this.operationMode===n.AuthenticatorSessionMode.Registration&&i instanceof r.AuthenticationDriverSessionResultAuthenticationCompleted&&(!i.assertionResult.assertion_error_code||i.assertionResult.assertion_error_code===t.Protocol.AssertionErrorCode.AssertionContainerNotComplete)&&(this._enrollmentRecordToCommit?(this._sdk.log(n.LogLevel.Debug,function(){return"Updating local enrollment record on registration"}),this.user.updateEnrollmentRecord(this._enrollmentRecordToCommit)):this._sdk.log(n.LogLevel.Warning,function(){return"No enrollment record to update."}));this._enrollmentRecordToCommit=null;this.lastObtainedKeyPair=null;u.prototype.completeAuthenticatorSessionWithResult.call(this,i)},f.prototype.completeAuthenticatorSessionWithError=function(n){this.lastObtainedKeyPair=null;u.prototype.completeAuthenticatorSessionWithError.call(this,n)},f.prototype.registerInStartedSession=function(){this._enrollmentRecordToCommit=null},f.prototype.calculateAssertionFieldsWithAuthenticatorKey=function(t){var i=this;return new Promise(function(r,u){var f=n.util.asciiToHex(i.localAuthenticatorChallenge());t.signHex(f).then(function(t){return{fch:n.util.hexToBase64(t)}}).then(r,u)})},f.prototype.handleAuthenticationInputResponse=function(i){var r=this,u=this.user.localEnrollments[this.authenticatorType];u||this.performErrorRecoveryForError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.NoRegisteredAuthenticator,"Missing key for "+this.authenticatorType+" authenticator"));this.getKeyForEnrollmentDataAndInput(u,i).then(function(f){return r._sdk.log(n.LogLevel.Debug,function(){return"Local authenticator key obtained; signing challenge"}),r.addRolloverDataIfNeeded(f,u,i).then(function(i){return r._externalCancelled?Promise.reject(r._actionDriver._controlFlowProcessor.createExternalCancellationError()):(r.lastObtainedKeyPair=i.key,r.calculateAssertionFieldsWithAuthenticatorKey(i.key).then(function(f){var o={},e;i.rolloverKeyData&&(r._sdk.log(n.LogLevel.Info,function(){return"Local authenticator rollover requested"}),e={},i.rolloverKeyData.key&&(e.key=i.rolloverKeyData.key.publicKeyToJson(),e.version=i.rolloverKeyData.schemeVersion),i.rolloverReason&&(e.reason=i.rolloverReason),i.rolloverOldKeyHash&&(e.expired_key={hash:i.rolloverOldKeyHash}),o.rollover=e,r._enrollmentRecordToCommit=u.duplicate(),r._enrollmentRecordToCommit.status=t.LocalEnrollmentStatus.Registered,r._enrollmentRecordToCommit.validationStatus=t.LocalEnrollmentValidationStatus.Validated,r._enrollmentRecordToCommit.salt=i.rolloverKeyData.salt,r._enrollmentRecordToCommit.version=i.rolloverKeyData.schemeVersion,r._enrollmentRecordToCommit.keyMaterial=i.rolloverKeyData.keyMeterial,r._enrollmentRecordToCommit.cryptoSettings=r._sdk.cryptoSettings,r._enrollmentRecordToCommit.authenticatorConfig=i.rolloverKeyData.authenticatorConfig,r._enrollmentRecordToCommit.publicKeyHash=n.util.calcPublicKeyHexStringEncodedSha256Hash(i.rolloverKeyData.key,r._sdk));r.processAuthenticateAssertion(o,f)},function(n){return Promise.reject(n)}))}).catch(function(t){r.processLocalAuthenticatorError(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))})}).catch(function(t){r.processLocalAuthenticatorError(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))})},f.prototype.addRolloverDataIfNeeded=function(t,i,r){var f=this,u;return this.rolloverNeeded(i)?(u=this.getRolloverReason(i),this._sdk.log(n.LogLevel.Debug,function(){return"AuthenticatorKeyRoll: "+u}),this.generatePendingEnrollment(r,!0).then(function(r){return t.rolloverKeyData=r,t.rolloverReason=u,t.rolloverOldKeyHash=i.publicKeyHash?i.publicKeyHash:n.util.calcPublicKeyHexStringEncodedSha256Hash(t.key,f._sdk),Promise.resolve(t)})):Promise.resolve(t)},f.prototype.getNewOrUpdatedEnrollmentRecord=function(i){var f=this,r,u;return this._sdk.log(n.LogLevel.Debug,function(){return"Register "+f.authenticatorType+": fetching local enrollment record"}),r=this.user.localEnrollments[this.authenticatorType],u=n.util.calcPublicKeyHexStringEncodedSha256Hash(i.key,this._sdk),r||(this._sdk.log(n.LogLevel.Debug,function(){return"Register "+f.authenticatorType+": Generating new local enrollment record"}),r=this.user.createEnrollmentRecord(this.authenticatorType,i.schemeVersion,i.salt,t.LocalEnrollmentStatus.Unregistered,u)),r.status=t.LocalEnrollmentStatus.Registered,r.validationStatus=t.LocalEnrollmentValidationStatus.Validated,r.salt=i.salt,r.version=i.schemeVersion,r.cryptoSettings=this._sdk.cryptoSettings,r.publicKeyHash=u,r.keyMaterial=i.keyMeterial,r.authenticatorConfig=i.authenticatorConfig,r},f.prototype.handleRegistrationInputResponse=function(t){var i=this;this._sdk.log(n.LogLevel.Debug,function(){return"Register "+i.authenticatorType+": Generating pending enrollment data"});this.generatePendingEnrollment(t).then(function(n){return i.handleRegisterAssertion(n)}).catch(function(t){i.processLocalAuthenticatorError(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))})},f.prototype.handleRegisterAssertion=function(t){var i=this;return this._sdk.log(n.LogLevel.Debug,function(){return"Register "+i.authenticatorType+": Signing registration assertion"}),this.calculateAssertionFieldsWithAuthenticatorKey(t.key).then(function(r){var u,f;if(i._sdk.log(n.LogLevel.Debug,function(){return"Register "+i.authenticatorType+": Preparing registration assertion"}),u=i.getNewOrUpdatedEnrollmentRecord(t),i._enrollmentRecordToCommit=u,i._externalCancelled)return Promise.reject(i._actionDriver._controlFlowProcessor.createExternalCancellationError());i.lastObtainedKeyPair=t.key;f=v({public_key:t.key.publicKeyToJson(),version:t.schemeVersion},r);i.processRegisterAssertion(null,f)},function(n){return Promise.reject(n)})},f.prototype.handleRegisterAssertionResult=function(n){return n.data&&n.data.update_vaults&&t.vault.MultiCredsVault.updateVaultsProtectingCreds(this.user,n.data.update_vaults,this._uiHandler,this._sdk),u.prototype.handleRegisterAssertionResult.call(this,n)},f.prototype.handleUnregistrationAssertionResult=function(i){var f=this,r=this.user.localEnrollments[this.authenticatorType];r?(r.status=t.LocalEnrollmentStatus.Unregistered,this.user.updateEnrollmentRecord(r),this.unregisterEnrollmentAssets(r)):this._sdk.log(n.LogLevel.Warning,function(){return"Failed to find enrollment record for "+f.authenticatorType});i.data&&i.data.update_vaults&&t.vault.MultiCredsVault.updateVaultsProtectingCreds(this.user,i.data.update_vaults,this._uiHandler,this._sdk);u.prototype.handleUnregistrationAssertionResult.call(this,i)},f.prototype.handleAuthenticateAssertionResult=function(i,r,f,e,o){if(this._enrollmentRecordToCommit)if(i.assertion_error_code){if(i.assertion_error_code==t.Protocol.AssertionErrorCode.AckRequired)return this.user.updateEnrollmentRecord(this._enrollmentRecordToCommit),i.data&&i.data.update_vaults&&t.vault.MultiCredsVault.updateVaultsProtectingCreds(this.user,i.data.update_vaults,this._uiHandler,this._sdk),this.processRolloverAckAssertionRequest(this._enrollmentRecordToCommit.publicKeyHash,o),this._enrollmentRecordToCommit=null,!0}else this._sdk.log(n.LogLevel.Debug,function(){return"Pending commit for enrollment; checking rollover status."}),i.data&&i.data.rollover&&0==i.data.rollover.code?(this._sdk.log(n.LogLevel.Info,function(){return"Updating local enrollment record on authentication result"}),this.user.updateEnrollmentRecord(this._enrollmentRecordToCommit)):this._sdk.log(n.LogLevel.Error,function(){return"Received a rollover failure response from the server; aboting rollover."});return this._enrollmentRecordToCommit=null,u.prototype.handleAuthenticateAssertionResult.call(this,i,r,f,e,o)},f.prototype.processRolloverAckAssertionRequest=function(t,i){var r,u;this._sdk.log(n.LogLevel.Info,function(){return"AuthenticatorKeyRollover: Processing ack assertion request..."});r={};i&&i.fch?(r={fch:i.fch},u={rollover_ack:{hash:t}},this.processAuthenticateAssertion(u,r)):this.completeAuthenticatorSessionWithError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Invalid assertion fields - missing fch"))},f.prototype.processLocalAuthenticatorError=function(n){this.performErrorRecoveryForError(n)},f.prototype.localAuthenticatorChallenge=function(){return this._actionDriver._controlFlowProcessor.challenge+this._authenticatorDescription.assertionId},f.prototype.getAuthenticatorEnrollmentConfig=function(){return null},f.prototype.onCancelRun=function(){u.prototype.onCancelRun.call(this);this.lastObtainedKeyPair&&(this.lastObtainedKeyPair=null)},f.prototype.shouldAllowBiometricFallbackButton=function(i){var o=this,e,u,f,r;if(!i||(e=this._actionDriver.availableAuthenticatorsForSwitching.filter(function(n){return n!=o._authenticatorDescription}),this._actionDriver instanceof t.actiondrivers.ActionDriverRegistration||this._actionDriver instanceof t.actiondrivers.ActionDriverAuthentication&&0==e.length)||(u=i,f=u.getFallbackButtonTitle(),!(f&&f.length>0)))return!1;r=u.getFallbackControlRequestType();switch(null==r&&(r=n.ControlRequestType.SelectMethod),r){case n.ControlRequestType.ChangeMethod:case n.ControlRequestType.SelectMethod:return this._actionDriver.availableAuthenticators.length>1;default:return!0}},f.prototype.publicKeyExpired=function(t){var r=this,i;return this._authenticatorConfig.public_key_expired?(i=t===this._authenticatorConfig.public_key_expired.hash,this._sdk.log(n.LogLevel.Debug,function(){return"AuthenticatorKeyRoll: authenticator "+r.authenticatorType+" \n                                                key hash matching expired key hash received from server: "+i}),i):!1},f.prototype.getRolloverReason=function(n){return this.publicKeyExpired(n.publicKeyHash)?"Rollover of "+this.authenticatorType+" authenticator public key due to expiration":"Upgrading "+this.authenticatorType+" authenticator scheme from "+n.version+" to "+this.currentScheme},f.prototype.rolloverNeeded=function(n){return this.publicKeyExpired(n.publicKeyHash)||this.schemeVersionRequiresRollover(n.version)},f}(r.AuthenticationDriver);r.AuthenticationDriverLocal=u}(t.authenticationdrivers||(t.authenticationdrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){!function(n){n.instanceOfAuthenticationDriverSilentRegistrationSupport=function(n){return n.runSilentRegistration}}(n.authenticationdrivers||(n.authenticationdrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){!function(r){!function(r){var u=function(u){function f(){return null!==u&&u.apply(this,arguments)||this}return i(f,u),f.prototype.unregisterEnrollmentAssets=function(n){var t=this.authenticatorKeyTagForScheme(n.version,n.salt);this._sdk.host.deleteKeyPair(t)},f.prototype.invokeCancellationUiOrEscape=function(){var u=this._actionDriver._policyAction.getEscapeOptions().filter(function(t){return t.getPresentation()==n.ts.mobile.sdk.ActionEscapeOptionPresentation.Cancel})[0],i;u?(this._sdk.log(t.LogLevel.Debug,function(){return"Got cancel escape option; responding with that."}),i=new t.ActionEscapeRequest,i._escapeOption=u,i._escapeParameters=null,this.completeAuthenticatorSessionWithResult(new r.AuthenticationDriverSessionResultEscapeRequested(i))):(this._sdk.log(t.LogLevel.Debug,function(){return"Invoking UI cancellation handler."}),this.invokeUiHandlerCancellation())},f}(r.AuthenticationDriverLocal);r.AuthenticationDriverLocalPersistentKeyPairBased=u}(r.authenticationdrivers||(r.authenticationdrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(t){!function(t){!function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.prototype.schemeVersionRequiresRollover=function(t){return"v0"==t||"v1"==t||"v2"==t&&"true"!=this._sdk.host.queryHostInfo(n.sdkhost.HostInformationKey.StdSigningKeyIsHardwareProtectedSignAndEncryptKey)},r}(t.AuthenticationDriverLocalPersistentKeyPairBased);t.AuthenticationDriverLocalPersistentKeyPairBasedPostV2Scheme=r}(t.authenticationdrivers||(t.authenticationdrivers={}))}(t.core||(t.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(t){!function(t){var i=function(){function t(){}return t.deviceBiometricInput=function(n,i){var r=t.newBiometricPromptInfo();return r.setLocalizedTitle(n.getTitle()),r.setLocalizedSubtitle(n.getSubtitle()),r.setLocalizedPrompt(n.getPrompt()),r.setCancelButtonTitle(n.getCancelButtonTitle()),i&&void 0!==i.require_confirmation?r.setRequireConfirmation(i.require_confirmation):r.setRequireConfirmation(!0),r},t.fingerprintInput=function(n){var i=t.newBiometricPromptInfo(),r,u;return i.setLocalizedPrompt(n.getPrompt()),r=n.getCancelButtonTitle(),r&&0<r.length&&i.setCancelButtonTitle(r),u=n.getFallbackButtonTitle(),u&&0<u.length&&i.setFallbackButtonTitle(u),i},t.nativeFaceInput=function(n){var i=t.newBiometricPromptInfo(),r,u;return i.setLocalizedPrompt(n.getPrompt()),r=n.getCancelButtonTitle(),r&&0<r.length&&i.setCancelButtonTitle(r),u=n.getFallbackButtonTitle(),u&&0<u.length&&i.setFallbackButtonTitle(u),i},t.newBiometricPromptInfo=function(){var t=new n.sdkhost.BiometricPromptInfo;return t.setCancelButtonTitle(null),t.setFallbackButtonTitle(null),t.setLocalizedPrompt(null),t.setLocalizedSubtitle(null),t.setLocalizedTitle(null),t},t}();t.BiometricPromptInfoFrom=i}(t.util||(t.util={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(t){!function(r){!function(u){var f=function(f){function e(n,t,i){return f.call(this,n,t,i)||this}return i(e,f),e.authenticatorKeySchemeForMigratedEnrollment=function(n){if(0===n.indexOf("v0")){var t=n.split("_");return 1<t.length?t[1]:"v3"}return null},e.authenticatorKeyTagForUserForMigratedEnrollment=function(n,t,i){var r=e.authenticatorKeySchemeForMigratedEnrollment(t);return r?u.AuthenticationDriverFingerprint.authenticatorKeyTagForUser(n,r,i):null},e.authenticatorKeyTagForUser=function(n,t,i){return e.authenticatorKeyTagForUserForMigratedEnrollment(n,t,i)||new r.TarsusKeyPath("per_user",n.guid.toString(),"local_auth_keys",u.AuthenticationDriverDescriptorDeviceBiometrics.authenticatorName,t,i)},e.prototype.schemeVersionRequiresRollover=function(n){var t=e.authenticatorKeySchemeForMigratedEnrollment(n);return!(!t||!f.prototype.schemeVersionRequiresRollover.call(this,t))},Object.defineProperty(e.prototype,"signChallengeMode",{get:function(){var t=this._sdk.host.queryHostInfo(n.sdkhost.HostInformationKey.DeviceBiometricsUsesSign);return!!t&&"true"==t},enumerable:!1,configurable:!0}),e.prototype.runSilentRegistration=function(){var n=this;return this.generateAuthenticatorKey().then(function(i){var r=n.getNewOrUpdatedEnrollmentRecord(i),f={public_key:i.key.publicKeyToJson(),encrypted_challenge_mode:!n.signChallengeMode,version:i.schemeVersion};return n._actionDriver.sendAuthenticatorAssertionRequest(n._authenticatorDescription,"register",null,f).then(function(i){if(i.assertion_error_code)throw t.impl.AuthenticationErrorImpl.errorForAssertionResponse(i);return n.user.updateEnrollmentRecord(r),new u.AuthenticationDriverSessionResultAuthenticationCompleted(i)})})},e.prototype.createAuthenticatorSession=function(){return this._sdk.log(t.LogLevel.Debug,function(){return"Create DSA session."}),this._uiHandler.createDeviceBiometricsAuthSession(u.AuthenticationDriverDescriptorDeviceBiometrics.authenticatorName,this.user.displayName)},e.prototype.authenticateInStartedSession=function(){var n=this;this._inputSession.promiseInput().then(function(t){return n.handleInputOrControlResponse(t)},function(i){return n.completeAuthenticatorSessionWithError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(i))})},e.prototype.registerInStartedSession=function(n){var i=this;this._sdk.log(t.LogLevel.Debug,function(){return"Register DSA in started session."});f.prototype.registerInStartedSession.call(this,n);this._inputSession.promiseInput().then(function(n){return i.handleInputOrControlResponse(n)},function(n){return i.completeAuthenticatorSessionWithError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(n))})},e.prototype.handleRegistrationInputResponse=function(n){var i=this;this._sdk.log(t.LogLevel.Debug,function(){return"Register "+i.authenticatorType+": Generating pending enrollment data"});this.getNewPendingEnrollmentOrReuse(n).then(function(n){return i._pendingEnrollmentData=n,i.handleRegisterAssertion(n)}).catch(function(n){i.processLocalAuthenticatorError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(n))})},Object.defineProperty(e.prototype,"authenticatorType",{get:function(){return u.AuthenticationDriverDescriptorDeviceBiometrics.authenticatorName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentScheme",{get:function(){return"v1"},enumerable:!1,configurable:!0}),e.prototype.processLocalAuthenticatorError=function(i){var f=this,u=i,o=0,s=Promise.resolve(),e;u.getErrorCode()==t.AuthenticationErrorCode.Internal&&u.getData()&&(e=u.getData(),o=e[n.sdkhost.ErrorDataNumFailures]||0,u=t.impl.AuthenticationErrorImpl.errorForHostInternalBiometricErrorData(e,"Biometrics")||u,(e[n.sdkhost.ErrorDataInternalError]==n.sdkhost.InternalErrorBiometricInvalidated||e[n.sdkhost.ErrorDataInternalError]==n.sdkhost.InternalErrorBiometricNotConfigured&&this._authenticatorDescription.getRegistered())&&(this._sdk.log(t.LogLevel.Debug,function(){return"Biometric invalidated "+e[n.sdkhost.ErrorDataInternalError]}),s=r.LocalEnrollment.invalidateLocalRegistrationStatusAndNotifyUIHandler(this._actionDriver._controlFlowProcessor,this._authenticatorDescription)));s.catch(function(n){f._sdk.log(t.LogLevel.Error,n)});s.finally(function(){if(u.getErrorCode()==t.AuthenticationErrorCode.UserCanceled)return f._sdk.log(t.LogLevel.Debug,function(){return"Device biometrics captured user cancel error code."}),void f.invokeCancellationUiOrEscape();o&&f._operationMode==t.AuthenticatorSessionMode.Authentication?f.processAuthFailureAssertionAndHandleError(u,o):f.performErrorRecoveryForError(u)})},e.prototype.performErrorRecoveryForError=function(n,i){this.recoveryOptionsForError(n,i).indexOf(t.AuthenticationErrorRecovery.RetryAuthenticator)<0&&(this.lastObtainedKeyPair=null);f.prototype.performErrorRecoveryForError.call(this,n,i)},e.prototype.getKeyForEnrollmentDataAndInput=function(i,r){var u=this;return new Promise(function(f){var e,h=r,s=u.authenticatorKeyTagForScheme(i.version,i.salt),o;if(!(e=u.lastObtainedKeyPair&&u.lastObtainedKeyPair.getTag()===s.toString()?u.lastObtainedKeyPair:u._sdk.host.getKeyPair(s,n.sdkhost.KeyClass.StdSigningKey,n.sdkhost.KeyBiometricProtectionMode.BindToEnrollmentDb))){o={};throw o[n.sdkhost.ErrorDataInternalError]=n.sdkhost.InternalErrorBiometricInvalidated,new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Attempt to authenticate with invalidated  biometrics.",o);}e.setBiometricPromptInfo(t.util.BiometricPromptInfoFrom.deviceBiometricInput(h,u._authenticatorConfig),null,null);f({key:e})})},e.prototype.getNewPendingEnrollmentOrReuse=function(n,t){return this._pendingEnrollmentData?Promise.resolve(this._pendingEnrollmentData):this.generatePendingEnrollment(n,t)},e.prototype.generatePendingEnrollment=function(n,i){var r=this;return this.generateAuthenticatorKey().then(function(u){if(!i){var f=n;u.key.setBiometricPromptInfo(t.util.BiometricPromptInfoFrom.deviceBiometricInput(f,r._authenticatorConfig),null,null)}return u})},e.prototype.generateAuthenticatorKey=function(){var i,u=this,r;return i=this._sdk.host.generateRandomHexString(24),r=this.authenticatorKeyTagForScheme(this.currentScheme,i),t.util.wrapPromiseWithActivityIndicator(this._uiHandler,this._actionDriver.policyAction(),this._clientContext,this._sdk.host.generateKeyPair(r,n.sdkhost.KeyClass.HardwareProtectedSignAndEncryptKey,n.sdkhost.KeyBiometricProtectionMode.BindToEnrollmentDb,!0).then(function(n){return{key:n,salt:i,schemeVersion:u.currentScheme}},function(n){if(n.getErrorCode()==t.AuthenticationErrorCode.Internal&&n.getData()){var r=n.getData(),i=t.impl.AuthenticationErrorImpl.errorForHostInternalBiometricErrorData(r,"Biometrics");if(i)throw i;}throw n;}))},e.prototype.calculateAssertionFieldsWithAuthenticatorKey=function(n){var r=this._authenticatorConfig,i;return this.signChallengeMode?f.prototype.calculateAssertionFieldsWithAuthenticatorKey.call(this,n):this.operationMode==t.AuthenticatorSessionMode.Registration?n.decrypt("").then(function(){return{data:{encrypted_challenge_mode:!0}}}):(i=r&&r.encrypted_challenge,i?new Promise(function(r,u){var f=t.util.base64ToHex(i);n.decrypt(f).then(function(n){return{fch:t.util.hexToBase64(n)}}).then(r,u)}):Promise.reject(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Invalid server response for decrypt-mode authenticator. Missing encrypted challenge.")))},e.prototype.authenticatorKeyTagForScheme=function(n,t){return e.authenticatorKeyTagForUser(this.user,n,t)},e.prototype.completeAuthenticatorSessionWithResult=function(n){this._pendingEnrollmentData=null;f.prototype.completeAuthenticatorSessionWithResult.call(this,n)},e.prototype.completeAuthenticatorSessionWithError=function(n){this._pendingEnrollmentData=null;f.prototype.completeAuthenticatorSessionWithError.call(this,n)},e}(u.AuthenticationDriverLocalPersistentKeyPairBasedPostV2Scheme);u.AuthenticationDriverDeviceBiometrics=f}(r.authenticationdrivers||(r.authenticationdrivers={}))}(t.core||(t.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(r){var u=function(r){function u(n,t,i){return r.call(this,n,t,i)||this}return i(u,r),u.prototype.getMaxStep=function(){return-1},u.prototype.authenticateInStartedSession=function(n){n||this.initializeFirstStep();this.pumpStep()},u.prototype.registerInStartedSession=function(n){n||this.initializeFirstStep();this.pumpStep()},u.prototype.pumpStep=function(){var t=this,i=this._inputSession;i.setInputStep(this._currentStepIndex,this.getMaxStep(),this._currentStep);i.promiseInput().then(function(n){return t.handleInputOrControlResponse(n)},function(i){return t.completeAuthenticatorSessionWithError(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(i))})},u.prototype.handleAuthenticateAssertionResult=function(n,t,i,u,f){return!!this.handleStepManagementAssertionResult(n)||r.prototype.handleAuthenticateAssertionResult.call(this,n,t,i,u,f)},u.prototype.handleRegisterAssertionResult=function(n){return!!this.handleStepManagementAssertionResult(n)||r.prototype.handleRegisterAssertionResult.call(this,n)},u.prototype.handleStepManagementAssertionResult=function(n){if(n.assertion_error_code==t.Protocol.AssertionErrorCode.NotFinished){var i=this.prepareNextAuthenticationStep(n);return i!=this._currentStep&&(this._currentStep=i,this._currentStepIndex++),this.pumpStep(),!0}return n.assertion_error_code==t.Protocol.AssertionErrorCode.RepeatCurrentStep&&(this._currentStep=this.updateCurrentAuthenticationStep(n,this._currentStep),this.pumpStep(),!0)},u.prototype.initializeFirstStep=function(){this._currentStep=this.createInitialInputStep();this._currentStepIndex=0},u}(r.AuthenticationDriver);r.AuthenticationDriverMultiStep=u}(t.authenticationdrivers||(t.authenticationdrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(t){var r=function(t){function r(n,i,r){return t.call(this,n,i,r)||this}return i(r,t),r.prototype.createAuthenticatorSession=function(){return this._uiHandler.createFaceAuthSession("face",this.user.displayName)},r.prototype.createInitialInputStep=function(){var t=this._authenticatorConfig;return new n.impl.CameraAcquisitionStepDescriptionImpl(t.acquisition_challenges)},r.prototype.prepareNextAuthenticationStep=function(){return this.createInitialInputStep()},r.prototype.updateCurrentAuthenticationStep=function(n,t){return t},r.prototype.handleAuthenticationInputResponse=function(n){var t=n;this.processAuthenticateAssertion(t.getAcquisitionResponse())},r.prototype.handleRegistrationInputResponse=function(n){var t=n;this.processRegisterAssertion(t.getAcquisitionResponse())},r}(t.AuthenticationDriverMultiStep);t.AuthenticationDriverFace=r}(t.authenticationdrivers||(t.authenticationdrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){var r,t;t=n.sdk||(n.sdk={}),function(u){var f=function(){function n(n,t,i,r,u,f){this._uiHandler=i;this._clientContext=r;this._actionContext=u;this._fidoRequest=f;this._user=t;this._sdk=n}return n.prototype.startSession=function(n){this._authDescription=n},n.prototype.changeSessionModeToRegistrationAfterExpiration=function(){throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Can't change FIDO asession mode from authentication to registration.");},n.prototype.promiseRecoveryForError=function(){return Promise.resolve(t.AuthenticationErrorRecovery.Fail)},n.prototype.promiseInput=function(){var n=this;return this.fidoClientXact().then(function(n){return t.InputOrControlResponse.createInputResponse(t.FidoInputResponse.createSuccessResponse(n))},function(i){var r=t.impl.AuthenticationErrorImpl.ensureAuthenticationError(i);return n._sdk.log(t.LogLevel.Debug,function(){return"Received FIDO error response from client: "+r}),r.getErrorCode()==t.AuthenticationErrorCode.UserCanceled?t.InputOrControlResponse.createControlResponse(t.impl.ControlRequestImpl.create(t.ControlRequestType.CancelAuthenticator)):t.InputOrControlResponse.createInputResponse(t.FidoInputResponse.createdFailedResponse(n._authDescription,r))})},n.prototype.completeSuccessfulAuthenticatorSession=function(){return this.fidoClientSendCompletion({},1200)},n.prototype.endSession=function(){},n}(),o=function(n){function t(t,i,r,u,f,e){return n.call(this,t,i,r,u,f,e)||this}return i(t,n),t.prototype.fidoClientXact=function(){return this._sdk.host.fidoClientXact(this._uiHandler,this._clientContext,this._actionContext,this._fidoRequest)},t.prototype.fidoClientSendCompletion=function(n,t){var i={__completion:{responseCode:t,message:n}};return this._sdk.host.fidoClientXact(this._uiHandler,this._clientContext,this._actionContext,i).then(function(){return!0})},t}(f),s=function(){function i(){}return i.prototype.createSession=function(n,t,i,r,u,f){return new o(n,t,i,r,u,f)},i.prototype.canHandlePolicy=function(n,t){return!r.fidoclient.TarsusFidoClient.isPolicyTransmitFidoClientExclusive(t)&&!!this.checkPlatformClientIsPresent(n)},i.prototype.getAvailableAuthenticatorsIds=function(n){var i=this;return new Promise(function(r,u){var f,e;if(!i.checkPlatformClientIsPresent(n))return n.log(t.LogLevel.Debug,function(){return"No platform FIDO client, therefore no available platform FIDO authenticators"}),r();f=null;n.currentSession&&(e=n.currentSession.getCurrentUserInteractionSessionProvider(),e&&(f=e._clientContext));i.requestFidoClientDiscovery(n,n.currentUiHandler,f,t.impl.PolicyActionImpl.createPseudoAction(n,"fido_client_discovery")).then(function(n){for(var f,e=n.availableAuthenticators,i=[],t=0,u=e;t<u.length;t++)f=u[t],i.push(f.aaid);r(i)},function(i){n.log(t.LogLevel.Debug,function(){return"Received FIDO discovery error response from client: "+i});u(i)})})},i.prototype.checkPlatformClientIsPresent=function(i){return null==this._hasPlatformClient&&(this._hasPlatformClient="true"===i.host.queryHostInfo(n.sdkhost.HostInformationKey.FidoClientPresent),this._hasPlatformClient||i.log(t.LogLevel.Info,function(){return"No platform FIDO client."})),this._hasPlatformClient},i.prototype.requestFidoClientDiscovery=function(n,t,i,r){return n.host.fidoClientXact(t,i,r,{discovery:!0})},i}(),h=function(n){function t(t,i,r,u,f,e){return n.call(this,t,i,r,u,f,e)||this}return i(t,n),t.prototype.fidoClientXact=function(){return this._sdk.fidoClient.fidoClientXact(this._authDescription,this._uiHandler,this._user,this._clientContext,this._actionContext,this._fidoRequest)},t.prototype.fidoClientSendCompletion=function(){return Promise.resolve(!0)},t}(f),c=function(){function n(){}return n.prototype.createSession=function(n,t,i,r,u,f){return new h(n,t,i,r,u,f)},n.prototype.canHandlePolicy=function(n,t){return n.fidoClient.canHandlePolicy(t)},n.prototype.getAvailableAuthenticatorsIds=function(){return new Promise(function(n){var t=[];Object.keys(r.fidoclient.FidoAuthenticators).forEach(function(n){t.push(n)});n(t)})},n}(),e;u._fidoClientProviders=[new c,new s];e=function(n){function f(t,i,r){return n.call(this,t,i,r)||this}return i(f,n),f.getEligibleClientProvidersForPolicy=function(n,t){return u._fidoClientProviders.filter(function(i){return i.canHandlePolicy(n,t)})},f.hasEligibleClientProvidersForPolicy=function(n,t){return this.getEligibleClientProvidersForPolicy(n,t).length>0},f.prototype.runUnregistration=function(){var i=this;return n.prototype.runUnregistration.call(this).finally(function(){var n=i._authenticatorConfig;new Promise(function(r,u){var e=n.fido_policy,c,s,h,o;if(e.rejected||!e.accepted||1!=e.accepted.length)throw"Invalid fido policy (class 1)";if(1!=e.accepted[0].length||1!=Object.keys(e.accepted[0][0]).length||!e.accepted[0][0].aaid||1!=e.accepted[0][0].aaid.length)throw"Invalid fido policy (class 2)";c=e.accepted[0][0].aaid[0];i._sdk.log(t.LogLevel.Debug,function(){return"Will unregister AAID "+c+"."});s=f.getEligibleClientProvidersForPolicy(i._sdk,n.fido_policy);0==s.length?(i._sdk.log(t.LogLevel.Warning,function(){return"Can't find FIDO client for unregister op: "+JSON.stringify(n.fido_policy)+"."}),r()):(h=n.fido_request,h.header.appID=n.fido_appid,o=s[0].createSession(i._sdk,i.user,i._uiHandler,i._clientContext,i._actionDriver.policyAction(),h),o.startSession(i._authenticatorDescription,t.AuthenticatorSessionMode.Registration,i._actionDriver.policyAction(),i._clientContext),o.promiseInput().then(function(n){if(n.isControlRequest())throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AuthenticatorError,"Unexpected control response from FIDO client during unregistration.");var i=n.getResponse();if(i instanceof t.FidoAuthFailureResponse)throw i.getFailureError();return n}).finally(function(){o.endSession()}).then(r,u))}).then(function(){i._sdk.log(t.LogLevel.Info,function(){return"FIDO authenticator unregistered: "+JSON.stringify(n.fido_policy)+"."})},function(n){var r=t.impl.AuthenticationErrorImpl.ensureAuthenticationError(n);i._sdk.log(t.LogLevel.Error,function(){return"Error during FIDO unregistration: "+r+"."})})})},f.prototype.completeAuthenticatorSessionWithResult=function(i){var r=this;i instanceof u.AuthenticationDriverSessionResultAuthenticationCompleted?this._inputSession.completeSuccessfulAuthenticatorSession().then(function(){n.prototype.completeAuthenticatorSessionWithResult.call(r,i)},function(i){n.prototype.completeAuthenticatorSessionWithError.call(r,t.impl.AuthenticationErrorImpl.ensureAuthenticationError(i))}):n.prototype.completeAuthenticatorSessionWithResult.call(this,i)},f.prototype.createAuthenticatorSession=function(){var n=this._authenticatorConfig,i=f.getEligibleClientProvidersForPolicy(this._sdk,n.fido_policy);if(n.fido_request.header.appID=n.fido_appid,i.length>0)return i[0].createSession(this._sdk,this.user,this._uiHandler,this._clientContext,this._actionDriver.policyAction(),n.fido_request);throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AuthenticatorExternalConfigError,"Can't find FIDO client to handle FIDO request.",{fidoRequest:n.fido_request});},f.prototype.authenticateInStartedSession=function(){var n=this;this._inputSession.promiseInput().then(function(t){return n.handleInputOrControlResponse(t)},function(i){return n.completeAuthenticatorSessionWithError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(i))})},f.prototype.registerInStartedSession=function(){var n=this;this._inputSession.promiseInput().then(function(t){return n.handleInputOrControlResponse(t)},function(i){return n.completeAuthenticatorSessionWithError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(i))})},f.prototype.handleAuthenticationInputResponse=function(n){n instanceof t.FidoAuthSuccessResponse?this.handleFidoSuccessAuthResponse(n):this.handleFidoError(n)},f.prototype.handleFidoSuccessAuthResponse=function(n){this.processAuthenticateAssertion({fido_response:n.getFidoResponse()})},f.prototype.handleFidoError=function(n){n instanceof t.FidoAuthFailureResponse?(this._sdk.log(t.LogLevel.Debug,function(){return"FIDO session received FidoAuthFailureResponse."}),this.handleFidoFailureResponse(n)):(this._sdk.log(t.LogLevel.Error,function(){return"FIDO session received unknkown response type."}),this.performErrorRecoveryForError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"FIDO session received unknkown response type.")))},f.prototype.handleFidoFailureResponse=function(n){var i={status:n.getRegistrationStatus()==t.AuthenticatorRegistrationStatus.Registered?r.Protocol.AuthenticationMethodStatus.Registered:r.Protocol.AuthenticationMethodStatus.Unregistered,expired:n.getExpired(),locked:n.getLocked(),last_used:0};this._authenticatorDescription.updateWithAuthenticatorState(i);this.performErrorRecoveryForError(n.getFailureError())},f.prototype.handleFidoSuccessRegResponse=function(n){this.processRegisterAssertion({fido_response:n.getFidoResponse()})},f.prototype.handleRegistrationInputResponse=function(n){n instanceof t.FidoAuthSuccessResponse?this.handleFidoSuccessRegResponse(n):this.handleFidoError(n)},f.prototype.defaultRecoveryForError=function(){return this._operationMode==t.AuthenticatorSessionMode.Authentication?t.AuthenticationErrorRecovery.ChangeAuthenticator:t.AuthenticationErrorRecovery.Fail},f}(u.AuthenticationDriver);u.AuthenticationDriverFido=e}((r=t.core||(t.core={})).authenticationdrivers||(r.authenticationdrivers={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){var u,r;r=t.sdk||(t.sdk={}),function(f){var e=function(){function i(n,t,i,r,u,f){this.cancellationDOMErrorNames=["NotAllowedError","AbortError"];this.sdk=n;this.username=t;this.uiHandler=i;this.clientContext=r;this.actionContext=u;this.config=f;this.config.require_display_name_from_user&&(this.hostUiAuthenticatorSession=this.uiHandler.createFido2AuthSession("fido2",t))}return i.prototype.startSession=function(n,t,i,u){this.description=n;this.mode=t;this.actionContext=i;this.clientContext=u;this.hostUiAuthenticatorSession&&(this.mode==r.AuthenticatorSessionMode.Registration?this.hostUiAuthenticatorSession.startSession(n,t,i,u):(this.hostUiAuthenticatorSession.endSession(),delete this.hostUiAuthenticatorSession))},i.prototype.changeSessionModeToRegistrationAfterExpiration=function(){this.mode=n.ts.mobile.sdk.AuthenticatorSessionMode.Registration;this.hostUiAuthenticatorSession&&this.hostUiAuthenticatorSession.changeSessionModeToRegistrationAfterExpiration()},i.prototype.promiseRecoveryForError=function(n,t,i){return this.hostUiAuthenticatorSession?this.hostUiAuthenticatorSession.promiseRecoveryForError(n,t,i):Promise.resolve(r.AuthenticationErrorRecovery.Fail)},i.prototype.promiseInput=function(){return this.hostUiAuthenticatorSession?this.hostUiAuthenticatorSession.promiseInput():this.performFido2CredentialsOp()},i.prototype.endSession=function(){this.hostUiAuthenticatorSession&&(this.hostUiAuthenticatorSession.endSession(),delete this.hostUiAuthenticatorSession)},i.prototype.performFido2CredentialsOp=function(i){var f,o,e=this;return this.mode===n.ts.mobile.sdk.AuthenticatorSessionMode.Authentication?(f=this.config.credentialRequestOptions,o=t.sdkhost.Fido2CredentialsOpType.Get):(f=this.config.credentialCreationOptions,i&&(f=this.enrichOptionsWithDisplayName(f,i)),o=t.sdkhost.Fido2CredentialsOpType.Create),this.sdk.host.fido2CredentialsOp(this.uiHandler,this.clientContext,this.actionContext,o,f).then(function(n){return r.InputOrControlResponse.createInputResponse(u.Fido2InputResponseInternal.createSuccessResponse(n))}).catch(function(t){var i=n.ts.mobile.sdk.impl.AuthenticationErrorImpl.ensureAuthenticationError(t),f;return i.getErrorCode()===r.AuthenticationErrorCode.UserCanceled?(e.sdk.log(r.LogLevel.Debug,function(){return"Received FIDO2 cancellation request."}),f=e.actionContext.getEscapeOptions().filter(function(t){return t.getPresentation()==n.ts.mobile.sdk.ActionEscapeOptionPresentation.Cancel})[0],f?(e.sdk.log(r.LogLevel.Debug,function(){return"Got cancel escape option; responding with that."}),r.InputOrControlResponse.createEscapeResponse(f,null)):(e.sdk.log(r.LogLevel.Debug,function(){return"Responding with auth cancel control request."}),r.InputOrControlResponse.createControlResponse(r.ControlRequest.create(r.ControlRequestType.CancelAuthenticator)))):(e.sdk.log(r.LogLevel.Debug,function(){return"Received FIDO2 error response from client: "+i}),r.InputOrControlResponse.createInputResponse(u.Fido2InputResponseInternal.createdFailedResponse(i)))})},i.prototype.enrichOptionsWithDisplayName=function(n,t){return n.publicKey.user.displayName=t,n},i}(),o;f.Fido2AuthenticatorSessionInternal=e;o=function(n){function f(){return null!==n&&n.apply(this,arguments)||this}return i(f,n),f.prototype.createAuthenticatorSession=function(){if("true"===this._sdk.host.queryHostInfo(t.sdkhost.HostInformationKey.Fido2ClientPresent))return new e(this._sdk,this.user.displayName,this._uiHandler,this._clientContext,this._actionDriver.policyAction(),this._authenticatorConfig);throw new r.impl.AuthenticationErrorImpl(r.AuthenticationErrorCode.AuthenticatorExternalConfigError,"Can't find FIDO2 client to handle FIDO2 authentication.");},f.prototype.authenticateInStartedSession=function(){var n=this;this._inputSession.promiseInput().then(function(t){return n.handleInputOrControlResponse(t)},function(t){return n.completeAuthenticatorSessionWithError(r.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))})},f.prototype.handleAuthenticationInputResponse=function(n){if(n instanceof u.Fido2AuthenticatorSuccessResponse){this._sdk.log(r.LogLevel.Debug,function(){return"Fido2 received Fido2AuthenticatorSuccessResponse."});var t=n.getFido2Response();this.processAuthenticateAssertion({assertion_credential:{id:t.id,response:{authenticatorData:t.response.authenticatorData,clientDataJSON:t.response.clientDataJSON,signature:t.response.signature,userHandle:t.response.userHandle},type:t.type,clientExtensionResults:t.clientExtensionResults}})}else n instanceof u.Fido2AuthenticationFailedResponse?(this._sdk.log(r.LogLevel.Debug,function(){return"Fido2 received Fido2AuthenticationFailedResponse."}),this.handleFido2FailureResponse(n)):(this._sdk.log(r.LogLevel.Error,function(){return"Fido2 received unknkown response type."}),this.performErrorRecoveryForError(new r.impl.AuthenticationErrorImpl(r.AuthenticationErrorCode.AppImplementation,"Fido2 received unknkown response type.")))},f.prototype.registerInStartedSession=function(){var n=this;this._inputSession.promiseInput().then(function(t){return n.handleInputOrControlResponse(t)},function(t){return n.completeAuthenticatorSessionWithError(r.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))})},f.prototype.handleRegistrationInputResponse=function(n){var f=this,i,t;n instanceof r.Fido2InputResponse?(i=n.getDisplayName(),this._sdk.log(r.LogLevel.Debug,function(){return"Fido2 received authenticator display name: "+i}),this.validateDisplayNameFormat(i)?(this._displayName=i,this._inputSession.performFido2CredentialsOp(i).then(function(n){return f.handleInputOrControlResponse(n)},function(n){return f.completeAuthenticatorSessionWithError(r.impl.AuthenticationErrorImpl.ensureAuthenticationError(n))})):this.performErrorRecoveryForError(new r.impl.AuthenticationErrorImpl(r.AuthenticationErrorCode.InvalidInput,"Display name can't be empty"))):n instanceof u.Fido2AuthenticatorSuccessResponse?(this._sdk.log(r.LogLevel.Debug,function(){return"Fido2 received Fido2AuthenticatorSuccessResponse."}),t=n.getFido2Response(),(!this._displayName||this._displayName.length<=0)&&(this._displayName=this._authenticatorConfig.credentialCreationOptions.publicKey.user.displayName),this.processRegisterAssertion({attestation_credential:{id:t.id,response:{attestationObject:t.response.attestationObject,clientDataJSON:t.response.clientDataJSON,transports:t.response.transports},type:t.type,clientExtensionResults:t.clientExtensionResults},display_name:this._displayName})):n instanceof u.Fido2AuthenticationFailedResponse?(this._sdk.log(r.LogLevel.Debug,function(){return"Fido2 received Fido2AuthenticationFailedResponse."}),this.handleFido2FailureResponse(n)):(this._sdk.log(r.LogLevel.Error,function(){return"Fido2 received unknkown response type."}),this.performErrorRecoveryForError(new r.impl.AuthenticationErrorImpl(r.AuthenticationErrorCode.AppImplementation,"Fido2 received unknkown response type.")))},f.prototype.handleFido2FailureResponse=function(n){this._actionDriver.sendAuthenticatorAssertionRequest(this._authenticatorDescription,"auth_failure",{num_of_failures:1});this.performErrorRecoveryForError(n.getFailureError())},f.prototype.handleAuthenticateAssertionResult=function(t,i,f,e,o){if(t.assertion_error_code&&t.assertion_error_code==u.Protocol.AssertionErrorCode.FailedAssertion&&t.data)switch(t.data.reason){case u.Protocol.ServerResponseDataErrorReasonReasons.ErrorReasonAttestationReverificationFailed:this._sdk.log(r.LogLevel.Debug,function(){return"handleAuthenticateAssertionResult() for FIDO2 that failed attestation reverification"});var s=new r.impl.AuthenticationErrorImpl(r.AuthenticationErrorCode.AuthenticatorError,t.assertion_error_message||"FIDO2 credential failed attestation reverification");return s.setPublicProperty(r.AuthenticationErrorProperty.AuthenticationErrorReason,r.AuthenticationErrorPropertySymbol.AuthenticationErrorReasonAttestationReverificationFailed),this.performErrorRecoveryForError(s),!0;case u.Protocol.ServerResponseDataErrorReasonReasons.ErrorReasonCredentialFiltered:return this._sdk.log(r.LogLevel.Debug,function(){return"handleAuthenticateAssertionResult() for FIDO2 with filtered credential"}),this.handleCredentialFiltered(t)}return n.prototype.handleAuthenticateAssertionResult.call(this,t,i,f,e,o)},f.prototype.handleRegisterAssertionResult=function(t){if(t.assertion_error_code&&t.assertion_error_code==u.Protocol.AssertionErrorCode.Internal&&t.data)switch(t.data.reason){case u.Protocol.ServerResponseDataErrorReasonReasons.ErrorReasonCredentialFiltered:return this._sdk.log(r.LogLevel.Debug,function(){return"handleRegisterAssertionResult() for FIDO2 with filtered credential"}),this.handleCredentialFiltered(t)}return n.prototype.handleRegisterAssertionResult.call(this,t)},f.prototype.handleCredentialFiltered=function(n){var t=new r.impl.AuthenticationErrorImpl(r.AuthenticationErrorCode.AuthenticatorError,n.assertion_error_message||"FIDO2 with filtered credential");return t.setPublicProperty(r.AuthenticationErrorProperty.AuthenticationErrorReason,r.AuthenticationErrorPropertySymbol.AuthenticationErrorReasonCredentialFiltered),this.performErrorRecoveryForError(t),!0},f.prototype.validateDisplayNameFormat=function(n){return!(!n||n.length<=0)},f}(f.AuthenticationDriver);f.AuthenticationDriverFido2=o}((u=r.core||(r.core={})).authenticationdrivers||(u.authenticationdrivers={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(t){!function(r){!function(u){u.AUTHENTICATION_DRIVER_FINGERPRINT_CURRENT_SCHEME="v3";var f=function(f){function e(n,t,i){return f.call(this,n,t,i)||this}return i(e,f),e.prototype.getBiometricPromptFallbackControlType=function(){return null!=this._biometricPromptFallbackControlType?this._biometricPromptFallbackControlType:t.ControlRequestType.SelectMethod},e.authenticatorKeyTagForUser=function(n,t,i){return new r.TarsusKeyPath("per_user",n.guid.toString(),"local_auth_keys",u.AuthenticationDriverDescriptorFingerprint.authenticatorName,t,i)},e.prototype.shouldAllowBiometricFallbackButton=function(n){var e=this,o,u,f,i;if(!n||(o=this._actionDriver.availableAuthenticatorsForSwitching.filter(function(n){return n!=e._authenticatorDescription}),this._actionDriver instanceof r.actiondrivers.ActionDriverRegistration||this._actionDriver instanceof r.actiondrivers.ActionDriverAuthentication&&0==o.length)||(u=n,f=u.getFallbackButtonTitle(),!(f&&f.length>0)))return!1;i=u.getFallbackControlRequestType();switch(null==i&&(i=t.ControlRequestType.SelectMethod),i){case t.ControlRequestType.ChangeMethod:return this._actionDriver.availableAuthenticatorsForSwitching.filter(function(n){return n!=e._authenticatorDescription}).length>0;case t.ControlRequestType.SelectMethod:return this._actionDriver.availableAuthenticatorsForSwitching.length>0;default:return!0}},e.prototype.runSilentRegistration=function(){var n=this;return this.generateAuthenticatorKey().then(function(i){var r=n.getNewOrUpdatedEnrollmentRecord(i),f={public_key:i.key.publicKeyToJson(),version:i.schemeVersion};return n._actionDriver.sendAuthenticatorAssertionRequest(n._authenticatorDescription,"register",null,f).then(function(i){if(i.assertion_error_code)throw t.impl.AuthenticationErrorImpl.errorForAssertionResponse(i);return n.user.updateEnrollmentRecord(r),new u.AuthenticationDriverSessionResultAuthenticationCompleted(i)})})},e.prototype.createAuthenticatorSession=function(){return this._uiHandler.createFingerprintAuthSession(u.AuthenticationDriverDescriptorFingerprint.authenticatorName,this.user.displayName)},e.prototype.authenticateInStartedSession=function(){var n=this;this._inputSession.promiseInput().then(function(t){return n.handleInputOrControlResponse(t)},function(i){return n.completeAuthenticatorSessionWithError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(i))})},e.prototype.registerInStartedSession=function(n){var i=this;f.prototype.registerInStartedSession.call(this,n);this._inputSession.promiseInput().then(function(n){return i.handleInputOrControlResponse(n)},function(n){return i.completeAuthenticatorSessionWithError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(n))})},Object.defineProperty(e.prototype,"authenticatorType",{get:function(){return u.AuthenticationDriverDescriptorFingerprint.authenticatorName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentScheme",{get:function(){return u.AUTHENTICATION_DRIVER_FINGERPRINT_CURRENT_SCHEME},enumerable:!1,configurable:!0}),e.prototype.processLocalAuthenticatorError=function(i){var u=this,f=i,o=0,s=Promise.resolve(),e;f.getErrorCode()==t.AuthenticationErrorCode.Internal&&f.getData()&&(e=f.getData(),o=e[n.sdkhost.ErrorDataNumFailures]||o,f=t.impl.AuthenticationErrorImpl.errorForHostInternalBiometricErrorData(e,"Fingerprint")||f,(e[n.sdkhost.ErrorDataInternalError]==n.sdkhost.InternalErrorBiometricNotConfigured&&this._authenticatorDescription.getRegistered()||e[n.sdkhost.ErrorDataInternalError]==n.sdkhost.InternalErrorBiometricInvalidated)&&(s=r.LocalEnrollment.invalidateLocalRegistrationStatusAndNotifyUIHandler(this._actionDriver._controlFlowProcessor,this._authenticatorDescription)));s.catch(function(n){u._sdk.log(t.LogLevel.Error,n)});s.finally(function(){var i=f.getData();if(!o||u._operationMode!=t.AuthenticatorSessionMode.Authentication)return i[n.sdkhost.ErrorDataInternalError]==n.sdkhost.InternalErrorBiometricFallbackPressed?(u._sdk.log(t.LogLevel.Debug,function(){return"Biometric prompt fallback button pressed"}),void u.processControlRequest(t.ControlRequest.create(u.getBiometricPromptFallbackControlType()))):f.getErrorCode()==t.AuthenticationErrorCode.UserCanceled?(u._sdk.log(t.LogLevel.Debug,function(){return"Fingerprint authenticator captured user cancel error code."}),void u.invokeCancellationUiOrEscape()):void u.performErrorRecoveryForError(f);u.processAuthFailureAssertionAndHandleError(f,o)})},e.prototype.getKeyForEnrollmentDataAndInput=function(i,r){var u=this;return new Promise(function(f){var o=r,h,e,s;if(u.shouldAllowBiometricFallbackButton(o)&&(u._biometricPromptFallbackControlType=o.getFallbackControlRequestType()),h=u.authenticatorKeyTagForScheme(i.version,i.salt),e=u._sdk.host.getKeyPair(h,n.sdkhost.KeyClass.StdSigningKey,n.sdkhost.KeyBiometricProtectionMode.BindToEnrollmentDb),!e){s={};throw s[n.sdkhost.ErrorDataInternalError]=n.sdkhost.InternalErrorBiometricInvalidated,new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Attempt to authenticate with invalidated Fingerprint.",s);}e.setBiometricPromptInfo(t.util.BiometricPromptInfoFrom.fingerprintInput(o),u._uiHandler,u._inputSession);f({key:e})})},e.prototype.generatePendingEnrollment=function(n,i){var r=this;return this.generateAuthenticatorKey().then(function(u){if(!i){var f=n;r.shouldAllowBiometricFallbackButton(f)&&(r._biometricPromptFallbackControlType=f.getFallbackControlRequestType());u.key.setBiometricPromptInfo(t.util.BiometricPromptInfoFrom.fingerprintInput(f),r._uiHandler,r._inputSession)}return u})},e.prototype.generateAuthenticatorKey=function(){var i,u=this,r;return i=this._sdk.host.generateRandomHexString(24),n.sdkhost.KeyClass.HardwareProtectedSignAndEncryptKey,r=this.authenticatorKeyTagForScheme(this.currentScheme,i),t.util.wrapPromiseWithActivityIndicator(this._uiHandler,this._actionDriver.policyAction(),this._clientContext,this._sdk.host.generateKeyPair(r,n.sdkhost.KeyClass.HardwareProtectedSignAndEncryptKey,n.sdkhost.KeyBiometricProtectionMode.BindToEnrollmentDb,!0).then(function(n){return{key:n,salt:i,schemeVersion:u.currentScheme}},function(n){if(n.getErrorCode()==t.AuthenticationErrorCode.Internal&&n.getData()){var r=n.getData(),i=t.impl.AuthenticationErrorImpl.errorForHostInternalBiometricErrorData(r,"Fingerprint");if(i)throw i;}throw n;}))},e.prototype.authenticatorKeyTagForScheme=function(n,t){return e.authenticatorKeyTagForUser(this.user,n,t)},e}(u.AuthenticationDriverLocalPersistentKeyPairBasedPostV2Scheme);u.AuthenticationDriverFingerprint=f}(r.authenticationdrivers||(r.authenticationdrivers={}))}(t.core||(t.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){var t;(function(n){function t(n){for(var t,i=[],r=0;r<n.length;r++)t=n.charCodeAt(r),t<128?i.push(t):t<2048?i.push(192|t>>6,128|63&t):t<55296||t>=57344?i.push(224|t>>12,128|t>>6&63,128|63&t):(r++,t=65536+((1023&t)<<10|1023&n.charCodeAt(r)),i.push(240|t>>18,128|t>>12&63,128|t>>6&63,128|63&t));return i}function i(n){for(var r="",i,u,t=0;t<n.length;t++)i=n[t],i<128?r+=String.fromCharCode(i):i>191&&i<224?(r+=String.fromCharCode((31&i)<<6|63&n[t+1]),t+=1):i>223&&i<240?(r+=String.fromCharCode((15&i)<<12|(63&n[t+1])<<6|63&n[t+2]),t+=2):(u=((7&i)<<18|(63&n[t+1])<<12|(63&n[t+2])<<6|63&n[t+3])-65536,r+=String.fromCharCode(u>>10|55296,1023&u|56320),t+=3);return r}function r(n){for(var t,r="",i=0;i<n.length;i++)t=n.charCodeAt(i).toString(16),t.length<2&&(t="0"+t),r+=t;return r}n.numberToHex=function(n,t){var i=n.toString(16);if(i.length>t/4)throw"Number out of range for bitcount.";for(;i.length<t/4;)i="0"+i;return i};n.toUTF8Array=t;n.fromUTF8Array=i;n.hexToAscii=function(n){for(var r=[],t=0;t<n.length;t+=2)r.push(parseInt(n.substr(t,2),16));return i(r)};n.asciiToHex=function(n){return t(n).map(function(n){var t=n.toString(16);return t.length<2&&(t="0"+t),t}).join("")};n.base64ToHex=function(n){return r(atob(n))};n.bytesToHex=r;n.hexToBytes=function(n){for(var i=[],t=0;t<n.length;t+=2)i.push(parseInt(n.substr(t,2),16));return i};n.hexToBase64=function(n){for(var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,i=0,r="",u=0;u<n.length;u++)t=(t<<4)+parseInt(n[u],16),(i+=4)>=6&&(r+=f[t>>i-6],t&=255>>8-(i-=6));for(i&&(r+=f[t<<6-i]);r.length%4;)r+="=";return r};n.isHexString=function(n){return new RegExp("^([0-9A-Fa-f]{2})+$").test(n)};n.stringToBytes=function(n){for(var i=[],t=0;t<n.length;t++)i.push(n.charCodeAt(t));return i};n.calcPublicKeyHexStringEncodedSha256Hash=function(t){var i=t.publicKeyToJson().key;return sha256(n.stringToBytes(atob(i)))};n.nameof=function(n){return n};n.checkedCast=function(n,t){if(t instanceof n)return t;throw Error("Checked cast failed. Expected "+n);};n.wrapPromiseWithActivityIndicator=function(n,t,i,r){return n.startActivityIndicator(t,i),r.then(function(r){return n.endActivityIndicator(t,i),r},function(r){return n.endActivityIndicator(t,i),Promise.reject(r)})};var u=function(){function n(){var t=this;this._cancelPromise=new Promise(function(i,r){t._cancelFn=function(){r(n.CancelRequest)};t._cancelled&&r(n.CancelRequest)})}return Object.defineProperty(n.prototype,"cancellablePromise",{get:function(){return this._cancellablePromise},enumerable:!1,configurable:!0}),n.prototype.resolveWith=function(n){this._cancelled?this._cancellablePromise=this._cancelPromise:(this._underlyingPromise=new Promise(n),this._cancellablePromise=Promise.race([this._cancelPromise,this._underlyingPromise]))},n.prototype.cancel=function(){this._cancelled=!0;this._cancelFn&&this._cancelFn()},n.CancelRequest={},n}();n.CancelablePromiseHolder=u;n.LANGUAGES={"zh-HK":"zh-HK","zh-CN":"zh-Hans","zh-TW":"zh-Hant",zh:"zh-Hans",da:"da-DK",nl:"nl-NL","en-AU":"en-AU","en-GB":"en-GB",en:"en-US","en-IN":"en-IN",fi:"fi-FI",fr:"fr-FR","fr-CA":"fr-CA",de:"de-DE",it:"it-IT",is:"is-IS",ja:"ja-JP",ko:"ko-KR",nb:"nb-NO",pl:"pl-PL","pt-BR":"pt-BR",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU","es-MX":"es-MX",es:"es-ES",ca:"ca-ES","es-US":"es-US",sv:"sv-SE",tr:"tr-TR",vi:"vi-VN",el:"el-GR",id:"id-ID",hu:"hu-HU",th:"th-TH",hi:"hi-IN",cs:"cs-CZ",sk:"sk-SK",uk:"uk-UA",hr:"hr-CS",he:"he-IL",iw:"he-IL",ar:"ar-SA"}})((t=n.sdk||(n.sdk={})).util||(t.util={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(t){!function(r){!function(u){var f=function(u){function f(n,t,i){return u.call(this,n,t,i)||this}return i(f,u),f.prototype.unregisterEnrollmentAssets=function(){},Object.defineProperty(f.prototype,"currentScheme",{get:function(){return"v2"},enumerable:!1,configurable:!0}),f.prototype.processLocalAuthenticatorError=function(n){var i=n;n.getErrorCode()==t.AuthenticationErrorCode.InvalidInput&&this._operationMode==t.AuthenticatorSessionMode.Authentication?this.processAuthFailureAssertionAndHandleError(i,1):this.performErrorRecoveryForError(i)},f.prototype.getKeyForEnrollmentDataAndInput=function(n,i){var r=this;return new Promise(function(t,u){"v2"==n.version?r.getKeyForEnrollmentDataAndInputV2(n,i).then(t,u):r.getKeyForEnrollmentDataAndInputPreV2(n,i).then(t,u)}).then(function(n){if(!n)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.InvalidInput,"Invalid input provided to authenticator.");return{key:n}})},f.prototype.generatePendingEnrollment=function(i){var u=this;return new Promise(function(f,e){var o=u._sdk.host.generateRandomHexString(32),s=u._sdk.host.generateRandomHexString(64),h=u.extractPbkdfInputFromInputResponse(i);return t.util.wrapPromiseWithActivityIndicator(u._uiHandler,u._actionDriver.policyAction(),u._clientContext,u._sdk.host.generateHexSeededKeyPairExternalRepresentation(n.sdkhost.KeyClass.FidoECCSigningKey,s).then(function(t){return r.vault.pbkdfStretchHexSecretIntoAESKey(o,h,u._sdk.cryptoSettings.getLocalEnrollmentKeySizeInBytes(),u._sdk.cryptoSettings.getLocalEnrollmentKeyIterationCount(),!0,u._sdk).then(function(i){return i.encrypt(s).then(function(i){return{key:u._sdk.host.importVolatileKeyPair(n.sdkhost.KeyClass.FidoECCSigningKey,t),salt:o,schemeVersion:"v2",keyMeterial:i}})})})).then(f,e)})},f.prototype.getKeyForEnrollmentDataAndInputV2=function(t,i){var u=this,f=this.extractPbkdfInputFromInputResponse(i);return r.vault.pbkdfStretchHexSecretIntoAESKey(t.salt,f,t.cryptoSettings.getLocalEnrollmentKeySizeInBytes(),t.cryptoSettings.getLocalEnrollmentKeyIterationCount(),!0,this._sdk).then(function(i){return i.decrypt(t.keyMaterial,null).then(function(t){return u._sdk.host.generateHexSeededKeyPairExternalRepresentation(n.sdkhost.KeyClass.FidoECCSigningKey,t).then(function(t){return u._sdk.host.importVolatileKeyPair(n.sdkhost.KeyClass.FidoECCSigningKey,t)})})})},f.prototype.getKeyForEnrollmentDataAndInputPreV2=function(t,i){var r=this;return this.authenticatorKeyTagForScheme(t.version,t.salt,t.cryptoSettings,i).then(function(t){return r._sdk.host.getKeyPair(t,n.sdkhost.KeyClass.StdSigningKey,n.sdkhost.KeyBiometricProtectionMode.None)})},f.prototype.schemeVersionRequiresRollover=function(n){return"v0"==n||"v1"==n},f.prototype.authenticatorKeyTagForScheme=function(n,i,u,f){var e=this;return new Promise(function(o,s){var h=e.extractPbkdfInputFromInputResponse(f);if("v0"==n&&(e._sdk.log(t.LogLevel.Debug,function(){return"Using SDK CryptoSettings for migrated enrollment."}),u=e._sdk.cryptoSettings),!u)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Missing crypt settings for local enrollment.");e._sdk.host.generatePbkdf2HmacSha1HexString(i,h,u.getLocalEnrollmentKeySizeInBytes(),u.getLocalEnrollmentKeyIterationCount()).then(function(i){var u=t.util.hexToBase64(i);return new r.TarsusKeyPath("per_user",e.user.guid.toString(),"local_auth_keys",e.authenticatorType,n,u)}).then(o,s)})},f}(u.AuthenticationDriverLocal);u.AuthenticationDriverLocalSecretInputBased=f}(r.authenticationdrivers||(r.authenticationdrivers={}))}(t.core||(t.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(t){var r=function(t){function r(n,i,r){return t.call(this,n,i,r)||this}return i(r,t),Object.defineProperty(r.prototype,"authenticatorType",{get:function(){return r.authenticatorName},enumerable:!1,configurable:!0}),r.prototype.handleAuthenticationInputResponse=function(i){var r=i;n.impl.PatternInputImpl.validateFormat(r)?t.prototype.handleAuthenticationInputResponse.call(this,i):this.processLocalAuthenticatorError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Invalid pattern description format."))},r.prototype.handleRegistrationInputResponse=function(i){var r=this._authenticatorConfig,u=i;n.impl.PatternInputImpl.validateFormat(u)?r.min_length&&n.impl.PatternInputImpl.getPatternLength(u)<r.min_length?this.processLocalAuthenticatorError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Invalid pattern length.")):t.prototype.handleRegistrationInputResponse.call(this,i):this.processLocalAuthenticatorError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Invalid pattern description format."))},r.prototype.extractPbkdfInputFromInputResponse=function(t){var i=t;return n.util.asciiToHex(i.getPatternDescription())},r.prototype.createAuthenticatorSession=function(){return this._uiHandler.createPatternAuthSession(r.authenticatorName,this.user.displayName,3,4)},r.prototype.authenticateInStartedSession=function(){var t=this;this._inputSession.promiseInput().then(function(n){return t.handleInputOrControlResponse(n)},function(i){return t.completeAuthenticatorSessionWithError(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(i))})},r.prototype.registerInStartedSession=function(){var t=this;this._inputSession.promiseInput().then(function(n){return t.handleInputOrControlResponse(n)},function(i){return t.completeAuthenticatorSessionWithError(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(i))})},r.authenticatorName="pattern",r}(t.AuthenticationDriverLocalSecretInputBased);t.AuthenticationDriverLocalPattern=r}(t.authenticationdrivers||(t.authenticationdrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(t){var r=function(t){function r(n,i,r){return t.call(this,n,i,r)||this}return i(r,t),Object.defineProperty(r.prototype,"authenticatorType",{get:function(){return r.authenticatorName},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pinLength",{get:function(){return this._authenticatorConfig.length},enumerable:!1,configurable:!0}),r.prototype.handleRegistrationInputResponse=function(i){i.getPin().length!=this.pinLength?this.processLocalAuthenticatorError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.InvalidInput,"Expecting an entry of length "+this.pinLength+".")):t.prototype.handleRegistrationInputResponse.call(this,i)},r.prototype.generatePendingEnrollment=function(n){var i=this;return t.prototype.generatePendingEnrollment.call(this,n).then(function(n){var t={length:i.pinLength};return n.authenticatorConfig=t,n})},r.prototype.extractPbkdfInputFromInputResponse=function(t){var i=t;return n.util.asciiToHex(i.getPin())},r.prototype.createAuthenticatorSession=function(){return this._uiHandler.createPinAuthSession(r.authenticatorName,this.user.displayName,this.pinLength)},r.prototype.authenticateInStartedSession=function(){var t=this;this._inputSession.promiseInput().then(function(n){return t.handleInputOrControlResponse(n)},function(i){return t.completeAuthenticatorSessionWithError(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(i))})},r.prototype.registerInStartedSession=function(){var t=this;this._inputSession.promiseInput().then(function(n){return t.handleInputOrControlResponse(n)},function(i){return t.completeAuthenticatorSessionWithError(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(i))})},r.authenticatorName="pin",r}(t.AuthenticationDriverLocalSecretInputBased);t.AuthenticationDriverLocalPinCode=r}(t.authenticationdrivers||(t.authenticationdrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(t){var r=function(r){function u(n,t,i){return r.call(this,n,t,i)||this}return i(u,r),u.prototype.poll=function(){var i=this;this._actionDriver.sendAuthenticatorAssertionRequest(this._authenticatorDescription,"authenticate",this.pollingAssertionData(),{}).then(function(r){i.filterAssertionResult(r)&&i.shouldContinuePolling(r)?i.pumpInput():i.handleAuthenticateAssertionResult(r,i._authenticatorDescription,"authenticate",i.pollingAssertionData)||(i._sdk.log(n.LogLevel.Info,function(){return"Authenticator session done."}),i.completeAuthenticatorSessionWithResult(new t.AuthenticationDriverSessionResultAuthenticationCompleted(r)))}).catch(function(t){i.performErrorRecoveryForError(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))})},u.prototype.longPoll=function(t,i){var r=this;this._actionDriver.sendPollingRequest(t,i).then(function(n){n.change_detected?r.poll():r.pumpInput()}).catch(function(t){r.performErrorRecoveryForError(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))})},u}(t.AuthenticationDriver);t.AuthenticationDriverPolling=r}(t.authenticationdrivers||(t.authenticationdrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){!function(r){!function(u){var f=function(f){function e(n,t,i){var r=f.call(this,n,t,i)||this;return r.methodName="mobileApprove",r.setupDataModel(t,i),r}return i(e,f),e.prototype.createAuthenticatorSession=function(){var o=this,i=this._uiHandler.createMobileApproveAuthSession("mobile_approve",this.user.displayName,this._instructions),u,f,e;if(!i)throw t.impl.AuthenticationErrorImpl.appImplementationError("Invalid return from createMobileApproveAuthSession");return(i.setAvailableTargets(this._selectableDevices),this._state==r.Protocol.AuthenticationMethodMobileApproveState.WaitForAuthenticate)&&(this._selectedDevices=this._selectableDevices.map(function(n){return n}),u=null,this._otp&&(u=n.ts.mobile.sdk.impl.MobileApproveOtpImpl.createFromServerFormat(this._otp)),i.setCreatedApprovalInfo(this._selectedDevices,u)),this._authenticationParameters&&(f=this._authenticationParameters.filter(function(){t.AuthenticationActionParameterTargetSelection}),0!=f.length&&(this._sdk.log(t.LogLevel.Debug,function(){return"Target based driver found target selection parameters."}),e=this._selectableDevices.reduce(function(n,t){return n[t.getDeviceIdentifier()]=t,n},{}),this._pendingTargetSelection=f.map(function(n){var r=n.getTarget(),i=e[r.getDeviceIdentifier()];if(!i)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Authentication parameter tried to select a device not presented as a selectable target");return i},{}),this._sdk.log(t.LogLevel.Debug,function(){return"Target based driver will select targets "+o._pendingTargetSelection+" based on selection parameter."}))),i},e.prototype.authenticateInStartedSession=function(){this._autoExecuted?this._autoExecuted=!1:this.reset();this.pumpInput()},e.prototype.pumpInput=function(){if(this._state===r.Protocol.AuthenticationMethodMobileApproveState.WaitForApproval)this.createApproval();else{if(this._state!==r.Protocol.AuthenticationMethodMobileApproveState.WaitForAuthenticate)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Illegal authenticator state encountered: "+this._state);this.requestInputAndHandle()}},e.prototype.registerInStartedSession=function(){throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Cannot register Mobile Approve authenticator.");},e.prototype.createApproval=function(){var i=this,n;(this._approvalId=null,this._pendingTargetSelection&&Object.keys(this._pendingTargetSelection).length)?(this._sdk.log(t.LogLevel.Debug,function(){return"Performing pending target selection "+i._pendingTargetSelection}),n=t.TargetBasedAuthenticatorInput.createTargetsSelectionRequest(this._pendingTargetSelection),this._pendingTargetSelection=null,this.handleAuthenticationInputResponse(n)):this._strategy.user_selection&&this._selectableDevices&&this._selectableDevices.length?this.requestInputAndHandle():this.handleAuthenticationInputResponse(t.TargetBasedAuthenticatorInput.createTargetsSelectionRequest([]))},e.prototype.requestInputAndHandle=function(){var n=this;this._inputSession.promiseInput().then(function(t){n.handleInputOrControlResponse(t)})},e.prototype.handleAuthenticationInputResponse=function(n){var i,u,f,e;switch(this._state){case r.Protocol.AuthenticationMethodMobileApproveState.WaitForApproval:if(i=n.getSelectedTargets(),i){this.handleTargetSelectionInput(i);break}throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Expected target selection input response but got: "+n);case r.Protocol.AuthenticationMethodMobileApproveState.WaitForAuthenticate:if(u=n.getAuthenticatorInput(),u instanceof t.MobileApproveInputRequestPolling){f=u.getPollingTimeout();f?(e={type:"approval",approval_id:this._approvalId||""},this.longPoll(e,f)):this.poll();break}throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Expected polling request input response but got: "+n);default:throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Illegal state for authenticator: "+this._state);}},e.prototype.handleTargetSelectionInput=function(n){var i=this;this._selectedDevices=n.map(function(n){var r=n;if(i._selectableDevices.indexOf(r)<0)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Attempt to select a Mobile Approve target not originally listed in the session.");return r});this.createForSelectedTargets()},e.prototype.createForSelectedTargets=function(){var r,i=this;r=this._selectedDevices&&this._selectedDevices.length?{device_ids:this._selectedDevices.map(function(n){return n.getDeviceIdentifier()})}:{};this._actionDriver.sendAuthenticatorAssertionRequest(this._authenticatorDescription,"approval",r,{}).then(function(r){if(!i.handleGeneralAssertionResult(r))if(r.assertion_error_code)i._sdk.log(t.LogLevel.Error,function(){return"Assertion error encoutered. Starting error recovery."}),i.performErrorRecoveryForError(t.impl.AuthenticationErrorImpl.errorForAssertionResponse(r));else{var f=null,u=r.data;u.otp&&(f=n.ts.mobile.sdk.impl.MobileApproveOtpImpl.createFromServerFormat(u.otp));i._approvalId=u.approval_id||null;i._state=u.state;i._inputSession.setCreatedApprovalInfo(i._selectedDevices,f);i._sdk.log(t.LogLevel.Debug,function(){return"Restarting auth or reg."});i.pumpInput()}}).catch(function(n){i.completeAuthenticatorSessionWithError(n)})},e.prototype.handleRegistrationInputResponse=function(){throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Cannot register Mobile Approve authenticator.");},e.prototype.processControlRequest=function(n){n.getRequestType()===t.ControlRequestType.RetryAuthenticator&&this.reset();f.prototype.processControlRequest.call(this,n)},e.prototype.filterAssertionResult=function(n){if(5==n.assertion_error_code)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.ApprovalDenied,"Approval was denied");if(21==n.assertion_error_code)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.ApprovalExpired,"Approval has expired");return!0},e.prototype.shouldContinuePolling=function(n){return n.assertion_error_code==r.Protocol.AssertionErrorCode.ExternalProcessPending},e.prototype.pollingAssertionData=function(){return{approval_id:this._approvalId}},e.prototype.reset=function(){this._state=r.Protocol.AuthenticationMethodMobileApproveState.WaitForApproval;this._approvalId=null;this._selectedDevices=null;this._inputSession.setCreatedApprovalInfo(null,null)},e.prototype.setupDataModel=function(n){this._state=n.state;this._otp=n.otp||null;this._strategy=n.strategy;this._selectableDevices=u.AuthenticationDriverDescriptorMobileApprove.createTargetsFromConfig(n);this._instructions=n.instructions;this._approvalId=n.approval_id||null;this._approvalId&&(this._autoExecuted=!0)},e}(u.AuthenticationDriverPolling);u.AuthenticationDriverMobileApprove=f}(r.authenticationdrivers||(r.authenticationdrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(t){!function(r){!function(u){var f=function(f){function e(n,t,i){return f.call(this,n,t,i)||this}return i(e,f),e.prototype.getBiometricPromptFallbackControlType=function(){return null!=this._biometricPromptFallbackControlType?this._biometricPromptFallbackControlType:t.ControlRequestType.SelectMethod},e.authenticatorKeyTagForUser=function(n,t,i){return new r.TarsusKeyPath("per_user",n.guid.toString(),"local_auth_keys","native_face",t,i)},e.prototype.shouldAllowBiometricFallbackButton=function(n){var e=this,o,u,f,i;if(!n||(o=this._actionDriver.availableAuthenticatorsForSwitching.filter(function(n){return n!=e._authenticatorDescription}),this._actionDriver instanceof r.actiondrivers.ActionDriverRegistration||this._actionDriver instanceof r.actiondrivers.ActionDriverAuthentication&&0==o.length)||(u=n,f=u.getFallbackButtonTitle(),!(f&&f.length>0)))return!1;i=u.getFallbackControlRequestType();switch(null==i&&(i=t.ControlRequestType.SelectMethod),i){case t.ControlRequestType.ChangeMethod:return this._actionDriver.availableAuthenticatorsForSwitching.filter(function(n){return n!=e._authenticatorDescription}).length>0;case t.ControlRequestType.SelectMethod:return this._actionDriver.availableAuthenticatorsForSwitching.length>0;default:return!0}},e.prototype.runSilentRegistration=function(){var n=this;return this.generateFaceNativeKeyForScheme(this.currentScheme).then(function(i){var r=n.getNewOrUpdatedEnrollmentRecord(i),f={public_key:i.key.publicKeyToJson(),version:i.schemeVersion};return n._actionDriver.sendAuthenticatorAssertionRequest(n._authenticatorDescription,"register",null,f).then(function(i){if(i.assertion_error_code)throw t.impl.AuthenticationErrorImpl.errorForAssertionResponse(i);return n.user.updateEnrollmentRecord(r),new u.AuthenticationDriverSessionResultAuthenticationCompleted(i)})})},e.prototype.createAuthenticatorSession=function(){return this._uiHandler.createNativeFaceAuthSession(u.AuthenticationDriverDescriptorNativeFace.authenticatorName,this.user.displayName)},e.prototype.authenticateInStartedSession=function(){var n=this;this._inputSession.promiseInput().then(function(t){return n.handleInputOrControlResponse(t)},function(i){return n.completeAuthenticatorSessionWithError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(i))})},e.prototype.registerInStartedSession=function(n){var i=this;f.prototype.registerInStartedSession.call(this,n);this._inputSession.promiseInput().then(function(n){return i.handleInputOrControlResponse(n)},function(n){return i.completeAuthenticatorSessionWithError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(n))})},Object.defineProperty(e.prototype,"authenticatorType",{get:function(){return u.AuthenticationDriverDescriptorNativeFace.authenticatorName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentScheme",{get:function(){return"v2"},enumerable:!1,configurable:!0}),e.prototype.processLocalAuthenticatorError=function(i){var u=this,f=i,o=0,s=Promise.resolve(),e;f.getErrorCode()==t.AuthenticationErrorCode.Internal&&f.getData()&&(e=f.getData(),o=e[n.sdkhost.ErrorDataNumFailures]||o,f=t.impl.AuthenticationErrorImpl.errorForHostInternalBiometricErrorData(e,"Native Face")||f,(e[n.sdkhost.ErrorDataInternalError]==n.sdkhost.InternalErrorBiometricNotConfigured&&this._authenticatorDescription.getRegistered()||e[n.sdkhost.ErrorDataInternalError]==n.sdkhost.InternalErrorBiometricInvalidated)&&(s=r.LocalEnrollment.invalidateLocalRegistrationStatusAndNotifyUIHandler(this._actionDriver._controlFlowProcessor,this._authenticatorDescription)));s.catch(function(n){u._sdk.log(t.LogLevel.Error,n)});s.finally(function(){var i=f.getData();if(!o||u._operationMode!=t.AuthenticatorSessionMode.Authentication)return i[n.sdkhost.ErrorDataInternalError]==n.sdkhost.InternalErrorBiometricFallbackPressed?(u._sdk.log(t.LogLevel.Debug,function(){return"Biometric prompt fallback button pressed"}),void u.processControlRequest(t.ControlRequest.create(u.getBiometricPromptFallbackControlType()))):f.getErrorCode()==t.AuthenticationErrorCode.UserCanceled?(u._sdk.log(t.LogLevel.Debug,function(){return"Native face authenticator captured user cancel error code."}),void u.invokeCancellationUiOrEscape()):void u.performErrorRecoveryForError(f);u.processAuthFailureAssertionAndHandleError(f,o)})},e.prototype.getKeyForEnrollmentDataAndInput=function(i,r){var u=this;return new Promise(function(f){var o=r,h,e,s;if(u.shouldAllowBiometricFallbackButton(o)&&(u._biometricPromptFallbackControlType=o.getFallbackControlRequestType()),h=u.authenticatorKeyTagForScheme(i.version,i.salt),e=u._sdk.host.getKeyPair(h,n.sdkhost.KeyClass.StdSigningKey,n.sdkhost.KeyBiometricProtectionMode.BindToEnrollmentDb),!e){s={};throw s[n.sdkhost.ErrorDataInternalError]=n.sdkhost.InternalErrorBiometricInvalidated,new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Attempt to authenticate with invalidated FaceID.",s);}e.setBiometricPromptInfo(t.util.BiometricPromptInfoFrom.nativeFaceInput(o),null,null);f({key:e})})},e.prototype.generatePendingEnrollment=function(n,i){if(!i){var r=n;this.shouldAllowBiometricFallbackButton(r)&&(this._biometricPromptFallbackControlType=r.getFallbackControlRequestType())}return this.generateKeyForScheme(n,this.currentScheme).then(function(n){return i||n.key.setBiometricPromptInfo(t.util.BiometricPromptInfoFrom.nativeFaceInput(r),null,null),n})},e.prototype.generateKeyForScheme=function(n,t){return this.generateFaceNativeKeyForScheme(t)},e.prototype.schemeVersionRequiresRollover=function(n){return"v0"==n||"v1"==n},e.prototype.generateFaceNativeKeyForScheme=function(i){var r,u;return r="v1"==i||"v2"==i?this._sdk.host.generateRandomHexString(24):"",u=this.authenticatorKeyTagForScheme(i,r),t.util.wrapPromiseWithActivityIndicator(this._uiHandler,this._actionDriver.policyAction(),this._clientContext,this._sdk.host.generateKeyPair(u,n.sdkhost.KeyClass.StdSigningKey,n.sdkhost.KeyBiometricProtectionMode.BindToEnrollmentDb,!0).then(function(n){return{key:n,salt:r,schemeVersion:i}},function(n){if(n.getErrorCode()==t.AuthenticationErrorCode.Internal&&n.getData()){var r=n.getData(),i=t.impl.AuthenticationErrorImpl.errorForHostInternalBiometricErrorData(r,"Native Face");if(i)throw i;}throw n;}))},e.prototype.authenticatorKeyTagForScheme=function(n,t){return e.authenticatorKeyTagForUser(this.user,n,t)},e}(u.AuthenticationDriverLocalPersistentKeyPairBased);u.AuthenticationDriverNativeFace=f}(r.authenticationdrivers||(r.authenticationdrivers={}))}(t.core||(t.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(r){var u=function(r){function u(n,t,i,u){var f=r.call(this,n,t,u)||this;return f._possibleTargets=i,f.setupDataModel(t),f}return i(u,r),u.prototype.getPossibleTargets=function(){return this._possibleTargets},u.prototype.createAuthenticatorSession=function(){var u,f=this,i,r,t;if(0!=(u=this._authenticationParameters?this._authenticationParameters.filter(function(t){return t instanceof n.AuthenticationActionParameterTargetSelection}):[]).length&&(this._sdk.log(n.LogLevel.Debug,function(){return"Target based driver found target selection parameters."}),i=u[0].getTarget().getChannelAssertionId(),r=this._possibleTargets.filter(function(n){return n.getChannelAssertionId()==i}),r.length?(this._pendingTargetSelection=r[0],this._sdk.log(n.LogLevel.Debug,function(){return"Target based driver will select target "+f._pendingTargetSelection+" based on selection parameter."}),this._lastSelectedTarget=this._pendingTargetSelection):this._sdk.log(n.LogLevel.Warning,function(){return"Target selection parameter for target based auth driver specified invalid target assertiong id "+i+"."})),t=this._uiHandler.createOtpAuthSession("otp",this.user.displayName,this._possibleTargets,this._autoExecTarget),!t)throw n.impl.AuthenticationErrorImpl.appImplementationError("Invalid return from createOtpAuthSession");return t.setAvailableTargets(this._possibleTargets),t},u.prototype.authenticateInStartedSession=function(){var t=this,i;if(0==this._possibleTargets.length)return this._sdk.log(n.LogLevel.Warning,function(){return"No authentication target available for OTP. Doing error recovery."}),void this.performErrorRecoveryForError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AuthenticatorExternalConfigError,"No targets available for OTP."),!0);(this._sdk.log(n.LogLevel.Debug,function(){return"Notifying current session of generated OTP format and target"}),this._inputSession.setGeneratedOtp(this._format,this._lastSelectedTarget),this._pendingTargetSelection)?(this._sdk.log(n.LogLevel.Debug,function(){return"Performing pending target selection "+t._pendingTargetSelection}),i=n.TargetBasedAuthenticatorInput.createTargetsSelectionRequest([this._pendingTargetSelection]),this._pendingTargetSelection=null,this.handleInputOrControlResponse(n.InputOrControlResponse.createInputResponse(i))):this._inputSession.promiseInput().then(function(n){t.handleInputOrControlResponse(n)}).catch(function(i){t.completeAuthenticatorSessionWithError(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(i))})},u.prototype.registerInStartedSession=function(){throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Cannot register OTP authenticator.");},u.prototype.handleTargetBasedAuthenticatorConcreteInput=function(t){if(t instanceof n.OtpInputOtpSubmission)this.processAuthenticateAssertion({otp:t.getOtp()},{assertion_id:this._possibleTargets[0].getChannelAssertionId()});else{if(!(t instanceof n.OtpInputRequestResend))throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Unknown OTP response type received from application callback.");this.triggerForSelectedTarget()}},u.prototype.handleAuthenticateAssertionResult=function(t,i,u,f,e){return t.data&&t.data.additional_error_code&&1==t.data.additional_error_code&&(this._sdk.log(n.LogLevel.Debug,function(){return"Reached max number of attempts - invalidating current target."}),this._lastSelectedTarget=null,this._format=null),r.prototype.handleAuthenticateAssertionResult.call(this,t,i,u,f,e)},u.prototype.handleAuthenticationInputResponse=function(t){var i,r;if(t.getAuthenticatorInput())this.handleTargetBasedAuthenticatorConcreteInput(t.getAuthenticatorInput());else{if(!t.getSelectedTargets()[0])throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Invalid target-based authetnicator response type received from application callback. Target-based authenticator inputs must be created by calling TargetBasedAuthenticatorInput.createAuthenticatorInput.");if(i=t.getSelectedTargets(),i.length>1)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Attempt to select multiple OTP targets while OTP supports only a single target.");if(r=i[0],this._possibleTargets.indexOf(r)<0)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Attempt to select an OTP target not originally listed in the session.");this._lastSelectedTarget=r;this.triggerForSelectedTarget()}},u.prototype.triggerForSelectedTarget=function(){var i=this,u,r;if(!this._lastSelectedTarget)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Attempt to trigger OTP generation without a selected target.");u={target_id:this._lastSelectedTarget.getTargetIdentifier(),channel_index:this._lastSelectedTarget.getChannelIndex()};r={assertion_id:this._lastSelectedTarget.getChannelAssertionId()};this._actionDriver.sendAuthenticatorAssertionRequest(this._authenticatorDescription,"otp",u,r).then(function(u){u.assertion_error_code&&u.assertion_error_code!=t.Protocol.AssertionErrorCode.FailOver&&(i._sdk.log(n.LogLevel.Error,function(){return"Assertion error encoutered. Clearing last selected target."}),i._lastSelectedTarget=null);i.handleAuthenticateAssertionResult(u,i._authenticatorDescription,"otp",r,r)||(u.data&&u.data.otp_format&&(i._sdk.log(n.LogLevel.Debug,function(){return"Received updated OTP and format."}),i._format=n.OtpFormatImpl.fromAssertionFormat(u.data.otp_format)),i._sdk.log(n.LogLevel.Debug,function(){return"Restarting auth or reg."}),i.authOrRegInStartedSession(!0))}).catch(function(n){i.completeAuthenticatorSessionWithError(n)})},u.prototype.handleRegistrationInputResponse=function(){throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Cannot register OTP authenticator.");},u.prototype.setupDataModel=function(i){this._otpInitialState=i.state;this._otpInitialState==t.Protocol.AuthenticationMethodOtpState.Validate&&(this._lastSelectedTarget=this._possibleTargets[0],this._autoExecTarget=this._lastSelectedTarget);var r=i.format||i.otp_format;this._format=r&&n.OtpFormatImpl.fromAssertionFormat(r)||null},u}(r.AuthenticationDriver);r.AuthenticationDriverOtp=u}(t.authenticationdrivers||(t.authenticationdrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(t){var r=function(t){function r(n,i,r){return t.call(this,n,i,r)||this}return i(r,t),r.prototype.createAuthenticatorSession=function(){return this._uiHandler.createPasswordAuthSession("password",this.user.displayName)},r.prototype.authenticateInStartedSession=function(){var t=this;this._inputSession.promiseInput().then(function(n){return t.handleInputOrControlResponse(n)},function(i){return t.completeAuthenticatorSessionWithError(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(i))})},r.prototype.registerInStartedSession=function(){var t=this;this._inputSession.promiseInput().then(function(n){return t.handleInputOrControlResponse(n)},function(i){return t.completeAuthenticatorSessionWithError(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(i))})},r.prototype.handleAuthenticationInputResponse=function(t){var i=t.getPassword();i&&i.length>0?this.processAuthenticateAssertion({password:i}):this.performErrorRecoveryForError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.InvalidInput,"Password can't be empty"))},r.prototype.handleRegistrationInputResponse=function(t){var i=t.getPassword();i&&i.length>0?this.processRegisterAssertion({password:i}):this.performErrorRecoveryForError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.InvalidInput,"Password can't be empty"))},r}(t.AuthenticationDriver);t.AuthenticationDriverPassword=r}(t.authenticationdrivers||(t.authenticationdrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(t){var r=function(t){function r(n,i,r){return t.call(this,n,i,r)||this}return i(r,t),r.prototype.createAuthenticatorSession=function(){return this._uiHandler.createPatternAuthSession("pattern_centralized",this.user.displayName,3,4)},r.prototype.handleAuthenticationInputResponse=function(i){var r=i;n.impl.PatternInputImpl.validateFormat(r)?t.prototype.handleAuthenticationInputResponse.call(this,i):this.performErrorRecoveryForError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Invalid pattern description format."))},r.prototype.handleRegistrationInputResponse=function(i){var r=i,u=this._authenticatorConfig;n.impl.PatternInputImpl.validateFormat(r)?u.min_length&&n.impl.PatternInputImpl.getPatternLength(r)<u.min_length?this.performErrorRecoveryForError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Invalid pattern length.")):t.prototype.handleRegistrationInputResponse.call(this,i):this.performErrorRecoveryForError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Invalid pattern description format."))},r.prototype.generateSecretToSignForInputResponse=function(n){return n.getPatternDescription()},r}(t.AuthenticationDriverCentralizedSecretInputBased);t.AuthenticationDriverPattern=r}(t.authenticationdrivers||(t.authenticationdrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(t){var r=function(t){function r(n,i,r){return t.call(this,n,i,r)||this}return i(r,t),Object.defineProperty(r.prototype,"pinLength",{get:function(){return this._authenticatorConfig.length},enumerable:!1,configurable:!0}),r.prototype.createAuthenticatorSession=function(){return this._uiHandler.createPinAuthSession("pin_centralized",this.user.displayName,this.pinLength)},r.prototype.handleRegistrationInputResponse=function(i){i.getPin().length==this.pinLength?t.prototype.handleRegistrationInputResponse.call(this,i):this.performErrorRecoveryForError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.InvalidInput,"Invalid PIN length provided.",{expected_length:this.pinLength}))},r.prototype.generateSecretToSignForInputResponse=function(n){return n.getPin()},r}(t.AuthenticationDriverCentralizedSecretInputBased);t.AuthenticationDriverPinCode=r}(t.authenticationdrivers||(t.authenticationdrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(t){!function(r){!function(u){var f=function(u){function f(n,t,i){return u.call(this,n,t,i)||this}return i(f,u),f.prototype.createAuthenticatorSession=function(){var n=this,t=this.generatePlaceholderServerTokenGenerationPayload(),i=f.placeholderExtensionPoint.firstNonNull(function(i){return i.createPlaceholderAuthSession(n._authenticatorDescription.getPlaceholderId(),n._authenticatorConfig.placeholder_type||"",n._authenticatorDescription.getName()||"",n.user.displayName,n._authenticatorConfig.data||"",t)});return i||this._uiHandler.createPlaceholderAuthSession(this._authenticatorDescription.getPlaceholderId(),this._authenticatorConfig.placeholder_type||"",this._authenticatorDescription.getName()||"",this.user.displayName,this._authenticatorConfig.data||"",t)},f.prototype.authenticateOrRegisterInStratedSession=function(){var n=this;this._inputSession.promiseInput().then(function(t){return n.handleInputOrControlResponse(t)},function(i){return n.completeAuthenticatorSessionWithError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(i))})},f.prototype.authenticateInStartedSession=function(n){this.authenticateOrRegisterInStratedSession(n)},f.prototype.registerInStartedSession=function(n){this.authenticateOrRegisterInStratedSession(n)},f.prototype.handleAuthenticationInputResponse=function(n){this.handleAuthenticationOrRegistrationInputResponse(n)},f.prototype.handleRegistrationInputResponse=function(n){this.handleAuthenticationOrRegistrationInputResponse(n)},f.prototype.handleAuthenticationOrRegistrationInputResponse=function(n){n instanceof t.PlaceholderAuthSuccessResponse?(this._sdk.log(t.LogLevel.Debug,function(){return"Placeholder received PlaceholderAuthSuccessResponse."}),this.handlePlaceholderSuccessResponse(n)):n instanceof t.PlaceholderAuthFailureResponse?(this._sdk.log(t.LogLevel.Debug,function(){return"Placeholder received PlaceholderAuthFailureResponse."}),this.handlePlaceholderFailureResponse(n)):n instanceof t.PlaceholderAuthFailureWithServerProvidedStatusResponse?(this._sdk.log(t.LogLevel.Debug,function(){return"Placehoder received PlaceholderAuthFailureWithServerProvidedStatusResponse"}),this.processAuthFailureAssertionAndHandleError(n.getFailureError(),1)):(this._sdk.log(t.LogLevel.Error,function(){return"Placeholder received unknkown response type."}),this.performErrorRecoveryForError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Placeholder received unknkown response type.")))},f.prototype.handlePlaceholderSuccessResponse=function(n){var i={token:n.getPlaceholderToken()};this._operationMode==t.AuthenticatorSessionMode.Authentication?this.processAuthenticateAssertion(i):this.processRegisterAssertion(i)},f.prototype.handlePlaceholderFailureResponse=function(n){this._actionDriver.sendAuthenticatorAssertionRequest(this._authenticatorDescription,"auth_failure",{num_of_failures:1});var i={status:n.getRegistrationStatus()==t.AuthenticatorRegistrationStatus.Registered?r.Protocol.AuthenticationMethodStatus.Registered:r.Protocol.AuthenticationMethodStatus.Unregistered,expired:n.getExpired(),locked:n.getLocked(),last_used:0};this._authenticatorDescription.updateWithAuthenticatorState(i);this.performErrorRecoveryForError(n.getFailureError())},f.prototype.generatePlaceholderServerTokenGenerationPayload=function(){var n=this.user.deviceId||this._actionDriver._controlFlowProcessor._session.deviceId(),t={assertion_id:this._authenticatorDescription.assertionId,challenge:this._actionDriver._controlFlowProcessor.challenge,device_id:n,auth_type:this._authenticatorDescription.getAuthenticatorId()};return btoa(JSON.stringify(t))},f.placeholderExtensionPoint=new r.ExtensionPoint(n.tarsusplugin.TARSUS_EXTENSION_POINT_NAME_PLACEHOLDER_EXTENSION),f}(u.AuthenticationDriver);u.AuthenticationDriverPlaceholder=f}(r.authenticationdrivers||(r.authenticationdrivers={}))}(t.core||(t.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(t){var r=function(t){function r(n,i,r){var u=t.call(this,n,i,r)||this;return u._pendingRestartRequest=!1,u}return i(r,t),Object.defineProperty(r.prototype,"currentQuestionsStep",{get:function(){return this._currentStep},enumerable:!1,configurable:!0}),r.prototype.createAuthenticatorSession=function(){return this._pendingRestartRequest=!1,this._uiHandler.createSecurityQuestionAuthSession("question",this.user.displayName)},r.prototype.authenticateInStartedSession=function(i){var r=this,u=Promise.resolve(null);this._pendingRestartRequest&&(this._pendingRestartRequest=!1,u=this._actionDriver.sendAuthenticatorAssertionRequest(this._authenticatorDescription,"restart",{}).then(function(t){t.data&&t.data.question?r._currentStep=r.loadStepFromQuestionDict(t.data.question):r.completeAuthenticatorSessionWithError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Unexpected response to question restart request."))}));u.then(function(){t.prototype.authenticateInStartedSession.call(r,i)})},r.prototype.loadStepFromQuestionDict=function(t){var i=Object.keys(t);if(1!=i.length)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Expecting a single authentication question.");return n.impl.SecurityQuestionStepDescriptionImpl.createForAuthQuestion(new n.impl.SecurityQuestionImpl(i[0],t[i[0]],!0))},r.prototype.createInitialInputStep=function(){var t=this._authenticatorConfig,i,r;switch(this._operationMode){case n.AuthenticatorSessionMode.Authentication:if(!t.question)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Expecting authentication question dictionary.");return this.loadStepFromQuestionDict(t.question);case n.AuthenticatorSessionMode.Registration:if(!t.questions)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Expecting registration question dictionary.");if(!t.reg_min_questions)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Expecting minimum registered questions field");if(t.max_answer_length||(t.max_answer_length=-1),!t.min_answer_length)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Expecting minimum answer length");return i=t.questions,r=Object.keys(i).map(function(t){return new n.impl.SecurityQuestionImpl(t,i[t].text,i[t].registered)}),n.impl.SecurityQuestionStepDescriptionImpl.createForRegistrationQuestions(r,t.reg_min_questions,t.max_answer_length,t.min_answer_length)}},r.prototype.prepareNextAuthenticationStep=function(n){return this.loadStepFromQuestionDict(n.data.question)},r.prototype.updateCurrentAuthenticationStep=function(n,t){return t},r.prototype.handleAuthenticationInputResponse=function(t){var i=t,r;if(this.sortValidAnswers(i),1!=i.getAnswers().length)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Expecting exactly one answer on secuirty question authentication.");r=this.securityQuestionAnswersResposneToAnswerMap(i);this.processAuthenticateAssertion({answer:r})},r.prototype.handleRegistrationInputResponse=function(t){var f=t,e=this.currentSecurityQuestionsStep().getMinAnswersNeeded(),r,i,u;if(0==e)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"No answers were provided");if(this.sortValidAnswers(f).length,r=0,this.currentQuestionsStep.getSecurityQuestions().forEach(function(n){n.getAnswered()&&r++}),i=this.securityQuestionAnswersResposneToJson(f),u=i.answers.length+r-i.deleted_answers.length,this._sdk.log(n.LogLevel.Debug,function(){return"handleRegistrationInputResponse: alreadyAnswered:"+r+" with sent list of "+i.answers.length+" and deleted of "+i.deleted_answers.length}),e>u)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Only "+u+" answers were provided to security questions registration process. "+u+" answers out of required minimum of "+e+".");this.processRegisterAssertion(this.securityQuestionAnswersResposneToJson(f))},r.prototype.handleErrorRecoveryAction=function(i,r){r.getErrorCode()==n.AuthenticationErrorCode.InvalidInput&&(this._pendingRestartRequest=!0);t.prototype.handleErrorRecoveryAction.call(this,i,r)},r.prototype.sortValidAnswers=function(t){for(var i,u=Array(),r=0,f=t.getAnswers();r<f.length;r++)if(i=f[r],!i.getIsRemoved()){if(!i.getAnswer()||!i.getAnswer().getAnswerText()||i.getAnswer().getAnswerText().length<this.currentQuestionsStep.getMinAnswerLength())throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Answer too short. Answer must be at least "+this.currentQuestionsStep.getMinAnswerLength()+" characters.");if(this.currentQuestionsStep.getMaxAnswerLength()>0&&i.getAnswer().getAnswerText().length>this.currentQuestionsStep.getMaxAnswerLength())throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Answer too long. Answer must be maximum "+this.currentQuestionsStep.getMaxAnswerLength()+" characters.");u.push(i)}return u},r.prototype.securityQuestionAnswersResposneToJson=function(t){var u=this,i={},r=Array();return t.getAnswers().forEach(function(t){if(u.currentSecurityQuestionsStep().getSecurityQuestions().indexOf(t.getQuestion())<0)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Answer provided to a question not included in this step.");if(t.getIsRemoved())r.push(t.getQuestion().getSecurityQuestionId());else{var f=t.getAnswer().getAnswerText().toLocaleLowerCase();i[t.getQuestion().getSecurityQuestionId()]=f}}),{answers:i,deleted_answers:r}},r.prototype.securityQuestionAnswersResposneToAnswerMap=function(t){var r=this,i={};return t.getAnswers().forEach(function(t){if(r.currentSecurityQuestionsStep().getSecurityQuestions().indexOf(t.getQuestion())<0)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Answer provided to a question not included in this step.");var u=t.getAnswer().getAnswerText().toLocaleLowerCase();i[t.getQuestion().getSecurityQuestionId()]=u}),i},r.prototype.currentSecurityQuestionsStep=function(){return this._currentStep},r}(t.AuthenticationDriverMultiStep);t.AuthenticationDriverSecurityQuestions=r}(t.authenticationdrivers||(t.authenticationdrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){!function(n){var t=function(){},r,u,f;n.AuthenticationDriverSessionResult=t;r=function(n){function t(t,i){var r=n.call(this)||this;return r.requiredAuthenticator=t||null,r.allowedAuthenticators=i||null,r}return i(t,n),t}(t);n.AuthenticationDriverSessionResultSwitchAuthenticator=r;u=function(n){function t(t){var i=n.call(this)||this;return i.assertionResult=t,i}return i(t,n),t}(t);n.AuthenticationDriverSessionResultAuthenticationCompleted=u;f=function(n){function t(t){var i=n.call(this)||this;return i.escapeRequest=t,i}return i(t,n),t}(t);n.AuthenticationDriverSessionResultEscapeRequested=f}(n.authenticationdrivers||(n.authenticationdrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(r){var u=function(u){function f(n,t,i){var r=u.call(this,n,t,i)||this;return r._previousSelectedDevices=[],r.methodName="totp",r.setupDataModel(t,i),r}return i(f,u),f.prototype.setupDataModel=function(n){this._state=n.state;this._requiresChallengeGeneration=n.state!=t.Protocol.AuthenticationMethodTotpState.Validate;this._selectedDevices=null;this._state==t.Protocol.AuthenticationMethodTotpState.Validate&&n.challenge&&(this._challenge=this.createTotpChallenge(n.challenge));this._selectableDevices=n.selectable_devices?r.AuthenticationDriverDescriptorTotp.createTargetsFromConfig(n):null},f.prototype.createAuthenticatorSession=function(){var u=this,i,r,t;if(this._authenticationParameters&&(i=this._authenticationParameters.filter(function(){n.AuthenticationActionParameterTargetSelection}),this._selectableDevices&&0!=i.length&&(this._sdk.log(n.LogLevel.Debug,function(){return"Target based driver found target selection parameters."}),r=this._selectableDevices.reduce(function(n,t){return n[t.getDeviceIdentifier()]=t,n},{}),this._pendingTargetSelection=i.map(function(t){var u=t.getTarget(),i=r[u.getDeviceIdentifier()];if(!i)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Authentication parameter tried to select a device not presented as a selectable target");return i},{}),this._sdk.log(n.LogLevel.Debug,function(){return"Target based driver will select targets "+u._pendingTargetSelection+" based on selection parameter."}))),t=this._uiHandler.createTotpAuthSession("totp",this.user.displayName),!t)throw n.impl.AuthenticationErrorImpl.appImplementationError("Invalid return from createTotpAuthSession");return t.setAvailableTargets(this._selectableDevices),t},f.prototype.handleRegistrationInputResponse=function(){throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Cannot register TOTP authenticator.");},f.prototype.registerInStartedSession=function(){throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Cannot register TOTP authenticator.");},f.prototype.authenticateInStartedSession=function(){var t=this;!this._selectedDevices&&this._pendingTargetSelection&&this._pendingTargetSelection.length&&(this._sdk.log(n.LogLevel.Debug,function(){return"TOTP authentication driver has "+t._pendingTargetSelection.length+" pending targets."}),this._selectedDevices=this._pendingTargetSelection);this.requestInput()},f.prototype.requestInput=function(){var t=this;this._inputSession.setTargetDevices(this._selectedDevices);this._inputSession.setChallenge(this._challenge);this.pendingChallengeGeneration()?this.sendGenerateTotpAssertion():this._inputSession.promiseInput().then(function(n){t.handleInputOrControlResponse(n)}).catch(function(i){t.performErrorRecoveryForError(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(i))})},f.prototype.handleAuthenticationInputResponse=function(t){var r=t.getAuthenticatorInput(),u=t.getSelectedTargets(),i,f;if(r)this._sdk.log(n.LogLevel.Debug,function(){return"Handling OTP code Input."}),i={totp:r.getCode()},this._selectedDevices&&(i.device_ids=this._selectedDevices.map(function(n){return n.getDeviceIdentifier()})),this.processAuthenticateAssertion(i);else{if(!u||!this._selectableDevices)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Invalid target-based authenticator response type received from application callback. Target-based authenticator inputs must be created by calling TargetBasedAuthenticatorInput.createAuthenticatorInput.");if(f=this._selectableDevices,this._sdk.log(n.LogLevel.Debug,function(){return"Handling target selection Input."}),this._selectedDevices=u.map(function(t){var i=t;if(f.indexOf(i)<0)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Attempt to select a Totp target not originally listed in the session.");return i}),0===this._selectedDevices.length)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.InvalidInput,"No targets selected for TOTP.");this.requestInput()}},f.prototype.sendGenerateTotpAssertion=function(){var i=this,r={};this._selectedDevices&&(r.device_ids=this._selectedDevices.map(function(n){return n.getDeviceIdentifier()}));this._sdk.log(n.LogLevel.Debug,function(){return"Requesting TOTP generation"});this._actionDriver.sendAuthenticatorAssertionRequest(this._authenticatorDescription,"generate",r,{}).then(function(u){i._previousSelectedDevices=i._selectedDevices||[];u.assertion_error_code&&u.assertion_error_code!=t.Protocol.AssertionErrorCode.FailOver&&(i._sdk.log(n.LogLevel.Error,function(){return"Assertion error encountered."}),i._selectedDevices=null);!i.handleAuthenticateAssertionResult(u,i._authenticatorDescription,"generate",r)&&u.data&&(i._state=u.data.state,u.data.challenge&&(i._challenge=i.createTotpChallenge(u.data.challenge)),i.requestInput())}).catch(function(t){i.performErrorRecoveryForError(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))})},f.prototype.pendingChallengeGeneration=function(){var n=this._selectedDevices&&(this._previousSelectedDevices.length!==this._selectedDevices.length||this._previousSelectedDevices.some(function(n,t){return n!==this._selectedDevices[t]},this)),i=!this._selectableDevices;return this._requiresChallengeGeneration&&(n||i&&this._state==t.Protocol.AuthenticationMethodTotpState.Generate)},f.prototype.createTotpChallenge=function(t){var i=new n.TotpChallenge;return i.setValue(t.value),i.setFormat(n.TotpChallengeFormatImpl.fromAssertionFormat(t.format)),i},f.prototype.handleAuthenticateAssertionResult=function(i,r,f,e,o){if(i.assertion_error_code&&i.assertion_error_code==t.Protocol.AssertionErrorCode.RepeatCurrentStep&&i.data&&"check_digit"==i.data.reason){this._sdk.log(n.LogLevel.Debug,function(){return"handleAuthenticateAssertionResult() for Totp code with incorrect check digit"});var s=new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.InvalidInput,i.assertion_error_message||"Totp code with incorrect check digit");return s.setPublicProperty(n.AuthenticationErrorProperty.AuthenticatorInvalidInputErrorDescription,n.AuthenticationErrorPropertySymbol.AuthenticatorInvalidInputErrorDescriptionTotpIncorrectCheckDigit),this.performErrorRecoveryForError(s),!0}return u.prototype.handleAuthenticateAssertionResult.call(this,i,r,f,e,o)},f}(r.AuthenticationDriver);r.AuthenticationDriverTotp=u}(t.authenticationdrivers||(t.authenticationdrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(t){var r,u;!function(n){n.LONG="tooLong";n.SHORT="tooShort";n.LOUD="tooLoud";n.SOFT="tooSoft";n.NOISY="tooNoisy";n.WRONG_PASSPHRASE="wrongPassphrase";n.VALID_PASSPHRASE="000"}(r||(r={}));u=function(t){function u(n,i,r){return t.call(this,n,i,r)||this}return i(u,t),u.prototype.createAuthenticatorSession=function(){return this._uiHandler.createVoiceAuthSession("voice",this.user.displayName)},u.prototype.updatePassphraseFromAssertionResultIfNeeded=function(t){var r=t.data,i;r&&(i=r.passphrase_text,i&&(this._sdk.log(n.LogLevel.Debug,function(){return"handleAuthenticateAssertionResult() received updated passphrase"}),this._authenticatorConfig.passphrase_text=i))},u.prototype.handleRegisterAssertionResult=function(n){return this.updatePassphraseFromAssertionResultIfNeeded(n),t.prototype.handleRegisterAssertionResult.call(this,n)},u.prototype.handleAuthenticateAssertionResult=function(n,i,r,u,f){return this.updatePassphraseFromAssertionResultIfNeeded(n),t.prototype.handleAuthenticateAssertionResult.call(this,n,i,r,u,f)},u.prototype.createInitialInputStep=function(){var t=this._authenticatorConfig;return new n.impl.AudioAcquisitionStepDescriptionImpl(this.createStepTag(),t.passphrase_text)},u.prototype.prepareNextAuthenticationStep=function(t){var i=this._authenticatorConfig;return new n.impl.AudioAcquisitionStepDescriptionImpl(this.createStepTag(t.data&&t.data.additional_error_code),i.passphrase_text)},u.prototype.updateCurrentAuthenticationStep=function(n){return this.prepareNextAuthenticationStep(n)},u.prototype.handleAuthenticationInputResponse=function(n){var t=n;this.processAuthenticateAssertion(t.getAcquisitionResponse())},u.prototype.handleRegistrationInputResponse=function(n){var t=n;this.processRegisterAssertion(t.getAcquisitionResponse())},u.prototype.createStepTag=function(n){return"voice_"+(n?this.mapHintToVoiceError(n):r.VALID_PASSPHRASE)},u.prototype.mapHintToVoiceError=function(t){switch(t){case 101:return r.LONG;case 102:return r.SHORT;case 103:return r.LOUD;case 104:return r.SOFT;case 105:return r.NOISY;case 106:return r.WRONG_PASSPHRASE;default:throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Voice error code "+t+" is unknown/unhandled");}},u}(t.AuthenticationDriverMultiStep);t.AuthenticationDriverVoice=u}(t.authenticationdrivers||(t.authenticationdrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){!function(n){n.AuthenticatorDrivers={password:new n.SimpleAuthenticationDriverDescriptor(n.AuthenticationDriverPassword),pin_centralized:new n.SimpleAuthenticationDriverDescriptor(n.AuthenticationDriverPinCode),pin:new n.AuthenticationDriverDescriptorLocal(n.AuthenticationDriverLocalPinCode,n.AuthenticationDriverLocalPinCode.authenticatorName),pattern:new n.AuthenticationDriverDescriptorLocal(n.AuthenticationDriverLocalPattern,n.AuthenticationDriverLocalPattern.authenticatorName),pattern_centralized:new n.SimpleAuthenticationDriverDescriptor(n.AuthenticationDriverPattern),fingerprint:new n.AuthenticationDriverDescriptorFingerprint,face_id:new n.AuthenticationDriverDescriptorNativeFace,otp:new n.AuthenticationDriverDescriptorOtp,face_server:new n.AuthenticationDriverDescriptorFace,voice_server:new n.AuthenticationDriverDescriptorVoice,mobile_approve:new n.AuthenticationDriverDescriptorMobileApprove,totp:new n.AuthenticationDriverDescriptorTotp,question:new n.SimpleAuthenticationDriverDescriptor(n.AuthenticationDriverSecurityQuestions),fido2:new n.AuthenticationDriverDescriptorFido2(n.AuthenticationDriverFido2),device_biometrics:new n.AuthenticationDriverDescriptorDeviceBiometrics,__placeholder:new n.SimpleAuthenticationDriverDescriptor(n.AuthenticationDriverPlaceholder)}}(n.authenticationdrivers||(n.authenticationdrivers={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){var r,u,t,i;i=n.sdk||(n.sdk={});t=i.core||(i.core={});r=t.collectors||(t.collectors={});u=function(){function n(n){this.enabledCollectors=n}return n.prototype.isEnabled=function(){var n=this.getAssociatedCollectorType();return null==n||-1!=this.enabledCollectors.indexOf(n)},n}();r.Collector=u}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){var r,f,u,t;t=n.sdk||(n.sdk={});u=t.core||(t.core={});r=u.collectors||(u.collectors={});f=function(n){function r(t,i){var r=n.call(this,t)||this;return r.cacheValidityPeriod=i,r}return i(r,n),r.prototype.provide=function(n){var t=this;return new Promise(function(i,r){var u=t.getCachedData(n);u?i(u):t.provideNewData(n).then(function(r){t.saveCollectionResultToLocalStorage(n,r);i(r)},r)})},r.prototype.saveCollectionResultToLocalStorage=function(n,t){var r=n.host,u=this.getSchemeVersionTarsusKeyPath(),i={};i.timeStamp=Date.now();i.collectionResult=t;r.writeStorageKey(u,i)},r.prototype.getCachedData=function(n){var u=n.host,f=this.getSchemeVersionTarsusKeyPath(),i=u.readStorageKey(f),r;return!i.collectionResult||!i.timeStamp?(n.log(t.LogLevel.Debug,function(){return"No collected data found in cache."}),null):(r=i.timeStamp,Date.now()-r>this.cacheValidityPeriod?(n.log(t.LogLevel.Debug,function(){return"Cached collected data invalidated."}),null):(n.log(t.LogLevel.Debug,function(){return"Loaded cached collector data: "+JSON.stringify(i.collectionResult)}),i.collectionResult))},r}(r.Collector);r.CacheableCollector=f}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){var r,f,u,t;t=n.sdk||(n.sdk={});u=t.core||(t.core={});r=u.collectors||(u.collectors={});f=function(r){function u(){return null!==r&&r.apply(this,arguments)||this}return i(u,r),u.prototype.provide=function(t){return w(this,void 0,void 0,function(){var i,r;return b(this,function(u){switch(u.label){case 0:return i={},r=i,[4,t.host.queryAsyncHostInfo(n.sdkhost.AsyncHostInformationKey.Fido2UserVerifyingPlatformAuthenticatorAvailable)];case 1:return r.fido2_user_verifying_platform_authenticator_available="true"==u.sent(),i.audio_acquisition_supported="true"==t.host.queryHostInfo(n.sdkhost.HostInformationKey.AudioAcquitisionSupported),i.finger_print_supported="true"==t.host.queryHostInfo(n.sdkhost.HostInformationKey.FingerprintSupported),i.image_acquisition_supported="true"==t.host.queryHostInfo(n.sdkhost.HostInformationKey.ImageAcquitisionSupported),i.persistent_keys_supported="true"==t.host.queryHostInfo(n.sdkhost.HostInformationKey.PersistentKeysSupported),i.face_id_key_bio_protection_supported="true"==t.host.queryHostInfo(n.sdkhost.HostInformationKey.FaceIdKeyBioProtectionSupported),i.fido_client_present="true"==t.host.queryHostInfo(n.sdkhost.HostInformationKey.FidoClientPresent),i.fido2_client_present="true"==t.host.queryHostInfo(n.sdkhost.HostInformationKey.Fido2ClientPresent),i.dyadic_present="true"==t.host.queryHostInfo(n.sdkhost.HostInformationKey.DyadicPresent),i.installed_plugins=t.pluginManager.getInitializedPlugins().map(function(t){return{plugin_name:t.getPluginInfo().getPluginName(),plugin_version:n.tarsusplugin.impl.PluginInfoImpl.versionToString(t.getPluginInfo())}}),""!=t.host.queryHostInfo(n.sdkhost.HostInformationKey.HostProvidedFeatures)&&(i.host_provided_features=t.host.queryHostInfo(n.sdkhost.HostInformationKey.HostProvidedFeatures)),[2,i]}})})},u.prototype.getAssociatedCollectorType=function(){return t.CollectorType.Capabilities},u}(r.Collector);r.CapabilitiesCollector=f}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){var r,u,f,t;t=n.sdk||(n.sdk={});r=t.core||(t.core={});u=r.collectors||(r.collectors={});f=function(n){function u(){return null!==n&&n.apply(this,arguments)||this}return i(u,n),u.prototype.provide=function(){var u={},o,n,f,e,i;for(o in t.CollectorType)u[o]=r.Protocol.CollectorState.Disabled;for(n=0,f=this.enabledCollectors;n<f.length;n++)u[f[n]]=r.Protocol.CollectorState.Active;e={};for(i in t.CollectorType)this.isNumeric(i)&&(e[t.CollectorType[i].toLowerCase()]=u[i]);return Promise.resolve(e)},u.prototype.getAssociatedCollectorType=function(){return null},u.prototype.isNumeric=function(n){return parseInt(n,10)>=0},u}(u.Collector);u.CollectorsStateCollector=f}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){var u,f,t,r;r=n.sdk||(n.sdk={});t=r.core||(r.core={});u=t.collectors||(t.collectors={});f=function(u){function f(){return null!==u&&u.apply(this,arguments)||this}return i(f,u),f.prototype.provide=function(i){var f=i.host,r={},u;return r.logged_users=0,t.User.iterateUsers(i,function(n){n.deviceBound&&++r.logged_users}),u=f.queryHostInfo(n.sdkhost.HostInformationKey.DevicePersistenceMode),"string"==typeof u&&(r.persistence_mode=u),Promise.resolve(r)},f.prototype.getAssociatedCollectorType=function(){return r.CollectorType.DeviceDetails},f}(u.Collector);u.DeviceDetailsCollector=f}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){var u,f,r,t;t=n.sdk||(n.sdk={});r=t.core||(t.core={});u=r.collectors||(r.collectors={});f=function(n){function u(t){return n.call(this,t,u.cacheValidityPeriod)||this}return i(u,n),u.prototype.provideNewData=function(n){var i=this;return new Promise(function(u){var f,h;if(!n.currentSession)throw"No valid session.";f={};n.log(t.LogLevel.Debug,function(){return"Refreshing fido authenticators data"});for(var o=[],e=0,s=r.authenticationdrivers._fidoClientProviders;e<s.length;e++)h=s[e],o.push(h.getAvailableAuthenticatorsIds(n));Promise.all(o.map(function(n){return n.catch(function(n){return new Error(n)})})).then(function(t){var r=i.getCollectedAaids(t,n);f.fido=r;u(f)}).catch(function(i){n.log(t.LogLevel.Error,function(){return"Error parsing fido authenticators collection results"+i});u({})})})},u.prototype.getAssociatedCollectorType=function(){return t.CollectorType.FidoAuthenticators},u.prototype.getSchemeVersionTarsusKeyPath=function(){return new r.TarsusKeyPath("fido_collection_result")},u.prototype.getCollectedAaids=function(n,i){for(var u=[],e=function(n){var r,f,e,o;if(n instanceof Error)i.log(t.LogLevel.Error,function(){return"Error collecting fido authenticators details "+n});else if(n&&n.length>0)for(r=0,f=n;r<f.length;r++)e=f[r],e&&(o={},o.aaid=e,u.push(o))},r=0,f=n;r<f.length;r++)e(f[r]);return u},u.cacheValidityPeriod=6048e5,u}(u.CacheableCollector);u.FidoAuthenticatorsCollector=f}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){var u,f,t,r;r=n.sdk||(n.sdk={});t=r.core||(r.core={});u=t.collectors||(t.collectors={});f=function(n){function u(){return null!==n&&n.apply(this,arguments)||this}return i(u,n),u.prototype.provide=function(n){for(var i,r,f={},t=0,e=u.authenticatorDriversLocal;t<e.length;t++)i=e[t],r=this.provideLocalEnrollmentData(n,i),r&&(f[i]=r);return Promise.resolve(f)},u.prototype.getAssociatedCollectorType=function(){return r.CollectorType.LocalEnrollments},u.prototype.provideLocalEnrollmentData=function(n,t){var r=null,i;return n.currentSession&&(i=n.currentSession.user.localEnrollments[t],i&&((r={}).registration_status=i.status,r.validation_status=i.validationStatus)),r},u.authenticatorDriversLocal=[t.authenticationdrivers.AuthenticationDriverLocalPinCode.authenticatorName,t.authenticationdrivers.AuthenticationDriverLocalPattern.authenticatorName,t.authenticationdrivers.AuthenticationDriverDescriptorFingerprint.authenticatorName,t.authenticationdrivers.AuthenticationDriverDescriptorNativeFace.authenticatorName],u}(u.Collector);u.LocalEnrollmentsCollector=f}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){!function(n){n.TarsusCollectors={capabilities:{createCollector:n.CapabilitiesCollector},collector_state:{createCollector:n.CollectorsStateCollector},device_details:{createCollector:n.DeviceDetailsCollector},hw_authenticators:{createCollector:n.FidoAuthenticatorsCollector},local_enrollments:{createCollector:n.LocalEnrollmentsCollector}}}(n.collectors||(n.collectors={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){!function(n){var i=function(){},t;n.PKCredentialException=i;t=function(){function n(n,t){this._credentialId=n;this._userInteractionSessionProvider=t}return Object.defineProperty(n.prototype,"credentialId",{get:function(){return this._credentialId},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"user",{get:function(){return this._userInteractionSessionProvider._session.user},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sdk",{get:function(){return this._userInteractionSessionProvider._sdk},enumerable:!1,configurable:!0}),n.prototype.getClientContext=function(){return this._userInteractionSessionProvider._clientContext},n}();n.PKCredential=t}(n.credential||(n.credential={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(r){var u=function(r){function u(n,t,i){var u=r.call(this,n,i)||this;return u._host=t,u._externalCancelled=!1,u}return i(u,r),Object.defineProperty(u.prototype,"uiHandler",{get:function(){return this._userInteractionSessionProvider._uiHandler},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"authenticatorDescription",{get:function(){return this._authenticatorDescription},enumerable:!1,configurable:!0}),u.prototype.onCancelRun=function(){this._externalCancelled=!0;this.lastObtainedKeyPair&&(this.lastObtainedKeyPair=null)},u.prototype.startCredentialSession=function(t){if(this._authenticatorConfig=this._host.getAuthenticatorConfig(this),this._inputSession=this.createAuthenticatorSession(),!this._inputSession)throw n.impl.AuthenticationErrorImpl.appImplementationError("Invalid return from authenticator session creation call.");this._authenticatorDescription=this._host.getAuthenticatorDescription(this);this._inputSession.startSession(this._authenticatorDescription,n.AuthenticatorSessionMode.Authentication,this._host.getPolicyAction(this),t)},u.prototype.endCredentialSession=function(){this.lastObtainedKeyPair&&(this.lastObtainedKeyPair=null);this._inputSession&&(this._inputSession.endSession(),delete this._inputSession)},u.prototype.signHex=function(n){var t=this;return this.doSafeCredentialOperation(function(){return t.lastObtainedKeyPair.signHex(n)})},u.prototype.unwrapAsymmetricKeyPairFromPrivateHex=function(n,t){var i=this;return this.doSafeCredentialOperation(function(){return i.lastObtainedKeyPair.unwrapAsymmetricKeyPairFromPrivateKeyHex(n,t)})},u.prototype.doSafeCredentialOperation=function(t){var i=this;return new Promise(function(r,u){i._rejectionFunction||i._completionFunction?u(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Illegal credential state")):(i._rejectionFunction=u,i._completionFunction=function(f){i.lastObtainedKeyPair=f;try{t().then(r,function(t){return i.processLocalAuthenticatorError(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))})}catch(t){u(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}},i.authenticateInStartedSession(!1))}).finally(function(){i._rejectionFunction=null;i._completionFunction=null})},u.prototype.promiseRecoveryForError=function(t,i,r){var u=this;return i.indexOf(r)<0&&(r=i.indexOf(n.AuthenticationErrorRecovery.SelectAuthenticator)>=0?n.AuthenticationErrorRecovery.SelectAuthenticator:n.AuthenticationErrorRecovery.Fail),this._inputSession.promiseRecoveryForError(t,i,r).then(function(r){return u.sdk.log(n.LogLevel.Debug,function(){return"Error recovery selected "+r}),u.sdk.log(n.LogLevel.Debug,function(){return"recover from error: "+t.getErrorCode()}),i.indexOf(r)<0?(u.sdk.log(n.LogLevel.Error,function(){return"Invalid error recovery option from callback: "+r+" not in "+i}),Promise.reject(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Invalid error recovery action selected by callback."))):Promise.resolve(r)})},u.prototype.evaluateLocalRegistrationStatus=function(){var i=this.user.localEnrollments[this.credentialId];return i?i.validationStatus==t.LocalEnrollmentValidationStatus.Invalidated?n.AuthenticatorRegistrationStatus.LocallyInvalid:i.status!=t.LocalEnrollmentStatus.Registered?n.AuthenticatorRegistrationStatus.Unregistered:n.AuthenticatorRegistrationStatus.Registered:n.AuthenticatorRegistrationStatus.LocallyInvalid},Object.defineProperty(u.prototype,"lastObtainedKeyPair",{get:function(){return this._lastObtainedKeyPair},set:function(n){this._lastObtainedKeyPair&&this._lastObtainedKeyPair!=n&&(n&&this._lastObtainedKeyPair.getTag()===n.getTag()||this._lastObtainedKeyPair.closeKeyPair());this._lastObtainedKeyPair=n},enumerable:!1,configurable:!0}),u.prototype.authenticateInStartedSession=function(){var t=this;this._inputSession.promiseInput().then(function(n){return t.handleInputOrControlResponse(n)},function(i){return t.completeCredentialOperationWithError(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(i))})},u.prototype.handleAuthenticationInputResponse=function(t){var i=this,r=this.user.localEnrollments[this.credentialId];r?this.getKeyForEnrollmentDataAndInput(r,t).then(function(t){i.sdk.log(n.LogLevel.Debug,function(){return"Local authenticator key obtained; signing challenge"});i.completeCredentialOperationWithResult(t)}).catch(function(t){i.processLocalAuthenticatorError(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}):this.completeCredentialOperationWithError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.NoRegisteredAuthenticator,"Missing key for fingerprint authenticator"))},u.prototype.processLocalAuthenticatorError=function(t){var r=this,i=this._host.getCredentialValidErrorRecoveryOptions(this,t),u=i.indexOf(n.AuthenticationErrorRecovery.RetryAuthenticator)>=0?n.AuthenticationErrorRecovery.RetryAuthenticator:n.AuthenticationErrorRecovery.Fail;this.promiseRecoveryForError(t,i,u).then(function(n){r.handleErrorRecoveryAction(n,t)})},u.prototype.completeCredentialOperationWithResult=function(n){this._completionFunction(n)},u.prototype.completeCredentialOperationWithError=function(n){this._rejectionFunction(n)},u.prototype.handleInputOrControlResponse=function(t){try{t.isControlRequest()&&(t.getControlRequest().getRequestType()==n.ControlRequestType.CancelAuthenticator?this.invokeUiHandlerCancellation():this.signalControlRequest(t.getControlRequest()));t.getActionEscapeRequest()?this.signalEscapeRequest(t.getActionEscapeRequest()):this.handleAuthenticationInputResponse(t.getResponse())}catch(t){this.completeCredentialOperationWithError(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}},u.prototype.signalControlRequest=function(t){this._externalCancelled&&t.getRequestType()==n.ControlRequestType.CancelAuthenticator&&(t=n.ControlRequest.create(n.ControlRequestType.AbortAuthentication));this._rejectionFunction(t)},u.prototype.signalEscapeRequest=function(n){this._rejectionFunction(n)},u.prototype.invokeUiHandlerCancellation=function(){var t=this,i=this._host.getCredentialAvailableCancellationOptions(this);this.uiHandler.controlOptionForCancellationRequestInSession(i,this._inputSession).then(function(r){r.getRequestType()==n.ControlRequestType.CancelAuthenticator&&t.completeCredentialOperationWithError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"controlOptionForCancellationRequestInSession returned CancelAuthenticator which is an invalid option."));i.indexOf(r.getRequestType())<0&&t.completeCredentialOperationWithError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"controlOptionForCancellationRequestInSession returned an invalid option."));t.signalControlRequest(r)})},u.prototype.handleErrorRecoveryAction=function(t,i){switch(t){case n.AuthenticationErrorRecovery.RetryAuthenticator:this.signalControlRequest(n.ControlRequest.create(n.ControlRequestType.RetryAuthenticator));break;case n.AuthenticationErrorRecovery.ChangeAuthenticator:this.signalControlRequest(n.ControlRequest.create(n.ControlRequestType.ChangeMethod));break;case n.AuthenticationErrorRecovery.SelectAuthenticator:this.signalControlRequest(n.ControlRequest.create(n.ControlRequestType.SelectMethod));break;case n.AuthenticationErrorRecovery.Fail:default:this.completeCredentialOperationWithError(i)}},u}(r.PKCredential);r.PKCredentialAuthLocal=u}(t.credential||(t.credential={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(t){!function(r){!function(u){var f=function(u){function f(n,t,i){return u.call(this,n,t,i)||this}return i(f,u),f.prototype.getKeyForEnrollmentDataAndInput=function(n,i){var r=this;return new Promise(function(t,u){"v2"==n.version?r.getKeyForEnrollmentDataAndInputV2(n,i).then(t,u):r.getKeyForEnrollmentDataAndInputPreV2(n,i).then(t,u)}).then(function(n){if(!n)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.InvalidInput,"Invalid input provided to credential.");return n})},f.prototype.getKeyForEnrollmentDataAndInputV2=function(t,i){var u=this,f=this.extractPbkdfInputFromInputResponse(i);return r.vault.pbkdfStretchHexSecretIntoAESKey(t.salt,f,t.cryptoSettings.getLocalEnrollmentKeySizeInBytes(),t.cryptoSettings.getLocalEnrollmentKeyIterationCount(),!0,this.sdk).then(function(i){return i.decrypt(t.keyMaterial,null).then(function(t){return u.sdk.host.generateHexSeededKeyPairExternalRepresentation(n.sdkhost.KeyClass.FidoECCSigningKey,t).then(function(t){return u.sdk.host.importVolatileKeyPair(n.sdkhost.KeyClass.FidoECCSigningKey,t)})})})},f.prototype.getKeyForEnrollmentDataAndInputPreV2=function(t,i){var r=this;return this.authenticatorKeyTagForScheme(t.version,t.salt,t.cryptoSettings,i).then(function(t){return r.sdk.host.getKeyPair(t,n.sdkhost.KeyClass.StdSigningKey,n.sdkhost.KeyBiometricProtectionMode.None)})},f.prototype.authenticatorKeyTagForScheme=function(n,i,u,f){var e=this;return new Promise(function(o,s){var h=e.extractPbkdfInputFromInputResponse(f);if("v0"==n&&(e.sdk.log(t.LogLevel.Debug,function(){return"Using SDK CryptoSettings for migrated enrollment."}),u=e.sdk.cryptoSettings),!u)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Missing crypto settings for local enrollment.");e.sdk.host.generatePbkdf2HmacSha1HexString(i,h,u.getLocalEnrollmentKeySizeInBytes(),u.getLocalEnrollmentKeyIterationCount()).then(function(i){var u=t.util.hexToBase64(i);return new r.TarsusKeyPath("per_user",e.user.guid.toString(),"local_auth_keys",e.credentialId,n,u)}).then(o,s)})},f}(u.PKCredentialAuthLocal);u.PKCredentialLocalSecretInputBased=f}(r.credential||(r.credential={}))}(t.core||(t.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(t){var u=function(){},r;t.CredentialAuthPinCodeConfig=u;r=function(t){function r(n,i,r){return t.call(this,n,i,r)||this}return i(r,t),Object.defineProperty(r.prototype,"pinLength",{get:function(){return this._authenticatorConfig.length},enumerable:!1,configurable:!0}),r.prototype.extractPbkdfInputFromInputResponse=function(t){var i=t;return n.util.asciiToHex(i.getPin())},r.prototype.createAuthenticatorSession=function(){return this.uiHandler.createPinAuthSession(this.credentialId,this.user.displayName,this.pinLength)},r.create=function(n,t,i){return new r(n,t,i)},r}(t.PKCredentialLocalSecretInputBased);t.PKCredentialLocalPinCode=r}(t.credential||(t.credential={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(t){var r=function(t){function r(n,i,r){return t.call(this,n,i,r)||this}return i(r,t),r.prototype.handleAuthenticationInputResponse=function(i){var r=i;n.impl.PatternInputImpl.validateFormat(r)?t.prototype.handleAuthenticationInputResponse.call(this,i):this.processLocalAuthenticatorError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Invalid pattern description format."))},r.prototype.extractPbkdfInputFromInputResponse=function(t){var i=t;return n.util.asciiToHex(i.getPatternDescription())},r.prototype.createAuthenticatorSession=function(){return this.uiHandler.createPatternAuthSession(this.credentialId,this.user.displayName,3,4)},r.create=function(n,t,i){return new r(n,t,i)},r}(t.PKCredentialLocalSecretInputBased);t.PKCredentialLocalPattern=r}(t.credential||(t.credential={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(t){!function(r){!function(u){var f=function(u){function f(){return null!==u&&u.apply(this,arguments)||this}return i(f,u),f.prototype.authenticatorKeyTagForScheme=function(n,t){return new r.TarsusKeyPath("per_user",this.user.guid.toString(),"local_auth_keys",this.credentialId,n,t)},f.prototype.getKeyForEnrollmentDataAndInput=function(i,r){var u=this;return new Promise(function(f){var s=u.authenticatorKeyTagForScheme(i.version,i.salt),e=u.sdk.host.getKeyPair(s,n.sdkhost.KeyClass.HardwareProtectedSignAndEncryptKey,n.sdkhost.KeyBiometricProtectionMode.BindToEnrollmentDb),o;if(!e){o={};throw o[n.sdkhost.ErrorDataInternalError]=n.sdkhost.InternalErrorBiometricInvalidated,new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Attempt to authenticate with invalidated biometric authenticator.",o);}u.updateKeyPairWithAuthenticationInput(e,u._inputSession,r);f(e)})},f.prototype.processLocalAuthenticatorError=function(i){var f=this,u=i,o=Promise.resolve(),e;u.getErrorCode()==t.AuthenticationErrorCode.Internal&&u.getData()&&(e=u.getData(),u=t.impl.AuthenticationErrorImpl.errorForHostInternalBiometricErrorData(e,this.credentialId)||u,(e[n.sdkhost.ErrorDataInternalError]==n.sdkhost.InternalErrorBiometricNotConfigured&&this._authenticatorDescription.getRegistered()||e[n.sdkhost.ErrorDataInternalError]==n.sdkhost.InternalErrorBiometricInvalidated)&&(o=r.LocalEnrollment.invalidateLocalRegistrationStatusAndNotifyUIHandler(this._userInteractionSessionProvider,this._authenticatorDescription)));o.catch(function(n){f.sdk.log(t.LogLevel.Error,n)});o.finally(function(){if(u.getErrorCode()==t.AuthenticationErrorCode.UserCanceled)return f.sdk.log(t.LogLevel.Debug,function(){return"${this.credentialId} authenticator captured user cancel error code."}),void f.invokeUiHandlerCancellation();f.completeCredentialOperationWithError(u)})},f.prototype.evaluateLocalRegistrationStatus=function(){var i=u.prototype.evaluateLocalRegistrationStatus.call(this);if(i!=t.AuthenticatorRegistrationStatus.Registered)return i;var r=this.user.localEnrollments[this.credentialId],e=this.authenticatorKeyTagForScheme(r.version,r.salt),f=this.sdk.host.getKeyPair(e,n.sdkhost.KeyClass.HardwareProtectedSignAndEncryptKey,n.sdkhost.KeyBiometricProtectionMode.BindToEnrollmentDb);return f?(f.closeKeyPair(),t.AuthenticatorRegistrationStatus.Registered):t.AuthenticatorRegistrationStatus.LocallyInvalid},f}(u.PKCredentialAuthLocal);u.PKCredentialBiometric=f}(r.credential||(r.credential={}))}(t.core||(t.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(r){var u=function(r){function u(n,t,i){return r.call(this,n,t,i)||this}return i(u,r),u.prototype.updateKeyPairWithAuthenticationInput=function(t,i,r){t.setBiometricPromptInfo(n.util.BiometricPromptInfoFrom.fingerprintInput(r),this.uiHandler,i)},u.prototype.authenticatorKeyTagForScheme=function(n,i){return t.authenticationdrivers.AuthenticationDriverFingerprint.authenticatorKeyTagForUser(this.user,n,i)},u.prototype.createAuthenticatorSession=function(){return this.uiHandler.createFingerprintAuthSession(this.credentialId,this.user.displayName)},u.prototype.shouldAllowBiometricFallbackButton=function(n){if(!n)return!1;var t=n.getFallbackButtonTitle();return!!(t&&t.length>0)},u.create=function(n,t,i){return new u(n,t,i)},u}(r.PKCredentialBiometric);r.PKCredentialFingerprint=u}(t.credential||(t.credential={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(r){var u=function(r){function u(n,t,i){return r.call(this,n,t,i)||this}return i(u,r),u.prototype.updateKeyPairWithAuthenticationInput=function(t,i,r){t.setBiometricPromptInfo(n.util.BiometricPromptInfoFrom.nativeFaceInput(r),null,null)},u.prototype.authenticatorKeyTagForScheme=function(n,i){return t.authenticationdrivers.AuthenticationDriverNativeFace.authenticatorKeyTagForUser(this.user,n,i)},u.prototype.createAuthenticatorSession=function(){return this.uiHandler.createNativeFaceAuthSession(this.credentialId,this.user.displayName)},u.prototype.shouldAllowBiometricFallbackButton=function(n){if(!n)return!1;var t=n.getFallbackButtonTitle();return!!(t&&t.length>0)},u.create=function(n,t,i){return new u(n,t,i)},u}(r.PKCredentialBiometric);r.PKCredentialNativeFace=u}(t.credential||(t.credential={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){!function(r){var u=function(r){function u(n,t,i){return r.call(this,n,t,i)||this}return i(u,r),u.prototype.updateKeyPairWithAuthenticationInput=function(t,i,r){t.setBiometricPromptInfo(n.util.BiometricPromptInfoFrom.deviceBiometricInput(r,this._authenticatorConfig),null,null)},u.prototype.authenticatorKeyTagForScheme=function(n,i){return t.authenticationdrivers.AuthenticationDriverDeviceBiometrics.authenticatorKeyTagForUserForMigratedEnrollment(this.user,n,i)||r.prototype.authenticatorKeyTagForScheme.call(this,n,i)},u.prototype.createAuthenticatorSession=function(){return this.uiHandler.createDeviceBiometricsAuthSession(this.credentialId,this.user.displayName)},u.create=function(n,t,i){return new u(n,t,i)},u}(r.PKCredentialBiometric);r.PKCredentialDeviceBiometrics=u}(t.credential||(t.credential={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){!function(n){n.CredentialTypes={pin:n.PKCredentialLocalPinCode,pattern:n.PKCredentialLocalPattern,fingerprint:n.PKCredentialFingerprint,face_id:n.PKCredentialNativeFace,device_biometrics:n.PKCredentialDeviceBiometrics}}(n.credential||(n.credential={}))}(n.core||(n.core={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(){function n(){}return n.prototype.getEscapeOption=function(){return this._escapeOption},n.prototype.setEscapeOption=function(n){this._escapeOption=n},n.prototype.getEscapeParameters=function(){return this._escapeParameters},n.prototype.setEscapeParameters=function(n){this._escapeParameters=n},n.__tarsusInterfaceName="ActionEscapeRequest",n}();n.ActionEscapeRequest=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.__tarsusInterfaceName="AnonymousPolicyInvocationOptions",t}(n.JourneyInvocationOptions);n.AnonymousPolicyInvocationOptions=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.__tarsusInterfaceName="ApprovalPolicyInvocationOptions",t}(n.JourneyInvocationOptions);n.ApprovalPolicyInvocationOptions=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.prototype.getAcquisitionResponse=function(){return this._acquisitionResponse},t.prototype.setAcquisitionResponse=function(n){this._acquisitionResponse=n},t.__tarsusInterfaceName="AudioInputResponse",t}(n.InputResponseType);n.AudioInputResponse=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.__tarsusInterfaceName="AuthenticateInvocationOptions",t}(n.JourneyInvocationOptions);n.AuthenticateInvocationOptions=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.Internal=0]="Internal";n[n.InvalidInput=1]="InvalidInput";n[n.AuthenticatorLocked=2]="AuthenticatorLocked";n[n.AllAuthenticatorsLocked=3]="AllAuthenticatorsLocked";n[n.NoRegisteredAuthenticator=4]="NoRegisteredAuthenticator";n[n.RegisteredSecretAlreadyInHistory=5]="RegisteredSecretAlreadyInHistory";n[n.Communication=6]="Communication";n[n.UserCanceled=7]="UserCanceled";n[n.AppImplementation=8]="AppImplementation";n[n.PolicyRejection=9]="PolicyRejection";n[n.AuthenticatorInvalidated=10]="AuthenticatorInvalidated";n[n.ControlFlowExpired=11]="ControlFlowExpired";n[n.SessionRequired=12]="SessionRequired";n[n.AuthenticatorError=13]="AuthenticatorError";n[n.ApprovalWrongState=14]="ApprovalWrongState";n[n.TotpNotProvisioned=15]="TotpNotProvisioned";n[n.AuthenticatorExternalConfigError=16]="AuthenticatorExternalConfigError";n[n.InvalidDeviceBinding=17]="InvalidDeviceBinding";n[n.InvalidIdToken=18]="InvalidIdToken";n[n.DeviceNotFound=19]="DeviceNotFound";n[n.ApprovalDenied=20]="ApprovalDenied";n[n.ApprovalExpired=21]="ApprovalExpired";n[n.ApplicationGeneratedRecoverableError=22]="ApplicationGeneratedRecoverableError";n[n.UserNotFound=23]="UserNotFound"}(n.AuthenticationErrorCode||(n.AuthenticationErrorCode={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.AuthenticatorExternalConfigErrorReason=0]="AuthenticatorExternalConfigErrorReason";n[n.AuthenticatorInvalidInputErrorDescription=1]="AuthenticatorInvalidInputErrorDescription";n[n.InvalidIdTokenErrorReason=2]="InvalidIdTokenErrorReason";n[n.UserRecordDeleted=3]="UserRecordDeleted";n[n.AuthenticationErrorFailingActionType=4]="AuthenticationErrorFailingActionType";n[n.AuthenticationErrorReason=5]="AuthenticationErrorReason"}(n.AuthenticationErrorProperty||(n.AuthenticationErrorProperty={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.AuthenticatorExternalConfigErrorReasonBiometricsNotEnrolled=0]="AuthenticatorExternalConfigErrorReasonBiometricsNotEnrolled";n[n.AuthenticatorExternalConfigErrorReasonBiometricsOsLockTemporary=1]="AuthenticatorExternalConfigErrorReasonBiometricsOsLockTemporary";n[n.AuthenticatorExternalConfigErrorReasonBiometricsOsLockPermanent=2]="AuthenticatorExternalConfigErrorReasonBiometricsOsLockPermanent";n[n.AuthenticatorInvalidInputErrorDescriptionTotpIncorrectCheckDigit=3]="AuthenticatorInvalidInputErrorDescriptionTotpIncorrectCheckDigit";n[n.InvalidIdTokenErrorReasonExpiredToken=4]="InvalidIdTokenErrorReasonExpiredToken";n[n.InvalidIdTokenErrorReasonBadToken=5]="InvalidIdTokenErrorReasonBadToken";n[n.AuthenticationErrorReasonAttestationReverificationFailed=6]="AuthenticationErrorReasonAttestationReverificationFailed";n[n.AuthenticationErrorReasonCredentialFiltered=7]="AuthenticationErrorReasonCredentialFiltered";n[n.AuthenticatorExternalConfigErrorReasonGeneratedKeyIsNotSecure=8]="AuthenticatorExternalConfigErrorReasonGeneratedKeyIsNotSecure"}(n.AuthenticationErrorPropertySymbol||(n.AuthenticationErrorPropertySymbol={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.RetryAuthenticator=0]="RetryAuthenticator";n[n.ChangeAuthenticator=1]="ChangeAuthenticator";n[n.SelectAuthenticator=2]="SelectAuthenticator";n[n.Fail=3]="Fail"}(n.AuthenticationErrorRecovery||(n.AuthenticationErrorRecovery={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.Register=0]="Register";n[n.Unregister=1]="Unregister";n[n.Reregister=2]="Reregister"}(n.AuthenticatorConfigurationAction||(n.AuthenticatorConfigurationAction={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.Fallback=0]="Fallback";n[n.AuthMenu=1]="AuthMenu";n[n.Retry=2]="Retry";n[n.Cancel=3]="Cancel"}(n.AuthenticatorFallbackAction||(n.AuthenticatorFallbackAction={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.Registered=0]="Registered";n[n.Unregistered=1]="Unregistered";n[n.LocallyInvalid=2]="LocallyInvalid"}(n.AuthenticatorRegistrationStatus||(n.AuthenticatorRegistrationStatus={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.SelectAuthenticator=0]="SelectAuthenticator";n[n.Abort=1]="Abort";n[n.Escape=2]="Escape"}(n.AuthenticatorSelectionResultType||(n.AuthenticatorSelectionResultType={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.Authentication=0]="Authentication";n[n.Registration=1]="Registration"}(n.AuthenticatorSessionMode||(n.AuthenticatorSessionMode={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.__tarsusInterfaceName="BindInvocationOptions",t}(n.JourneyInvocationOptions);n.BindInvocationOptions=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.prototype.getAcquisitionResponse=function(){return this._acquisitionResponse},t.prototype.setAcquisitionResponse=function(n){this._acquisitionResponse=n},t.__tarsusInterfaceName="CameraInputResponse",t}(n.InputResponseType);n.CameraInputResponse=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.Accounts=0]="Accounts";n[n.DeviceDetails=1]="DeviceDetails";n[n.Contacts=2]="Contacts";n[n.Owner=3]="Owner";n[n.Software=4]="Software";n[n.Location=5]="Location";n[n.LocationCountry=6]="LocationCountry";n[n.Bluetooth=7]="Bluetooth";n[n.ExternalSDKDetails=8]="ExternalSDKDetails";n[n.HWAuthenticators=9]="HWAuthenticators";n[n.Capabilities=10]="Capabilities";n[n.FidoAuthenticators=11]="FidoAuthenticators";n[n.LargeData=12]="LargeData";n[n.LocalEnrollments=13]="LocalEnrollments";n[n.DeviceFingerprint=14]="DeviceFingerprint";n[n.AppPermissions=15]="AppPermissions"}(n.CollectorType||(n.CollectorType={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.None=0]="None";n[n.Credentials=1]="Credentials";n[n.Full=2]="Full"}(n.ConnectionCryptoMode||(n.ConnectionCryptoMode={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.CancelAuthenticator=0]="CancelAuthenticator";n[n.RetryAuthenticator=1]="RetryAuthenticator";n[n.ChangeMethod=2]="ChangeMethod";n[n.SelectMethod=3]="SelectMethod";n[n.AbortAuthentication=4]="AbortAuthentication"}(n.ControlRequestType||(n.ControlRequestType={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.Remove=0]="Remove";n[n.Rename=1]="Rename"}(n.DeviceManagementAction||(n.DeviceManagementAction={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.RecentlyUsed=0]="RecentlyUsed";n[n.NoRecentActivity=1]="NoRecentActivity";n[n.LongInactivity=2]="LongInactivity";n[n.Disabled=3]="Disabled";n[n.Removed=4]="Removed"}(n.DeviceStatus||(n.DeviceStatus={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.prototype.getFailureError=function(){return this._failureError},t.prototype.setFailureError=function(n){this._failureError=n},t.prototype.getExpired=function(){return this._expired},t.prototype.setExpired=function(n){this._expired=n},t.prototype.getRegistered=function(){return this._registered},t.prototype.setRegistered=function(n){this._registered=n},t.prototype.getRegistrationStatus=function(){return this._registrationStatus},t.prototype.setRegistrationStatus=function(n){this._registrationStatus=n},t.prototype.getLocked=function(){return this._locked},t.prototype.setLocked=function(n){this._locked=n},t.__tarsusInterfaceName="FidoAuthFailureResponse",t}(n.FidoInputResponse);n.FidoAuthFailureResponse=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.prototype.getFidoResponse=function(){return this._fidoResponse},t.prototype.setFidoResponse=function(n){this._fidoResponse=n},t.__tarsusInterfaceName="FidoAuthSuccessResponse",t}(n.FidoInputResponse);n.FidoAuthSuccessResponse=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.Submit=0]="Submit";n[n.Abort=1]="Abort";n[n.Escape=2]="Escape"}(n.FormControlRequest||(n.FormControlRequest={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.Disable=0]="Disable";n[n.RecoverDeviceAndBindingOnAuthenticate=1]="RecoverDeviceAndBindingOnAuthenticate"}(n.InvalidUserRecordRecoveryMode||(n.InvalidUserRecordRecoveryMode={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.Off=0]="Off";n[n.Critical=1]="Critical";n[n.Error=2]="Error";n[n.Warning=3]="Warning";n[n.Info=4]="Info";n[n.Debug=5]="Debug"}(n.LogLevel||(n.LogLevel={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.Approve=0]="Approve";n[n.Deny=1]="Deny"}(n.MobileApprovalAction||(n.MobileApprovalAction={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.Pending=0]="Pending";n[n.Approved=1]="Approved";n[n.Denied=2]="Denied";n[n.Expired=3]="Expired"}(n.MobileApprovalStatus||(n.MobileApprovalStatus={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.Unknown=0]="Unknown";n[n.Sms=1]="Sms";n[n.Email=2]="Email";n[n.PushNotification=3]="PushNotification";n[n.VoiceCall=4]="VoiceCall"}(n.OtpChannel||(n.OtpChannel={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.prototype.getFailureError=function(){return this._failureError},t.prototype.setFailureError=function(n){this._failureError=n},t.prototype.getExpired=function(){return this._expired},t.prototype.setExpired=function(n){this._expired=n},t.prototype.getRegistered=function(){return this._registered},t.prototype.setRegistered=function(n){this._registered=n},t.prototype.getRegistrationStatus=function(){return this._registrationStatus},t.prototype.setRegistrationStatus=function(n){this._registrationStatus=n},t.prototype.getLocked=function(){return this._locked},t.prototype.setLocked=function(n){this._locked=n},t.__tarsusInterfaceName="PlaceholderAuthFailureResponse",t}(n.PlaceholderInputResponse);n.PlaceholderAuthFailureResponse=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.prototype.getFailureError=function(){return this._failureError},t.prototype.setFailureError=function(n){this._failureError=n},t.__tarsusInterfaceName="PlaceholderAuthFailureWithServerProvidedStatusResponse",t}(n.PlaceholderInputResponse);n.PlaceholderAuthFailureWithServerProvidedStatusResponse=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.prototype.getPlaceholderToken=function(){return this._placeholderToken},t.prototype.setPlaceholderToken=function(n){this._placeholderToken=n},t.__tarsusInterfaceName="PlaceholderAuthSuccessResponse",t}(n.PlaceholderInputResponse);n.PlaceholderAuthSuccessResponse=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.__tarsusInterfaceName="PolicyInvocationOptions",t}(n.JourneyInvocationOptions);n.PolicyInvocationOptions=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.Skip=0]="Skip";n[n.Abort=1]="Abort";n[n.Continue=2]="Continue"}(n.PromotionControlRequest||(n.PromotionControlRequest={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.Numeric=0]="Numeric";n[n.Alphanumeric=1]="Alphanumeric";n[n.Binary=2]="Binary"}(n.QrCodeFormat||(n.QrCodeFormat={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.RedirectToPolicy=0]="RedirectToPolicy";n[n.CancelRedirect=1]="CancelRedirect"}(n.RedirectResponseType||(n.RedirectResponseType={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.prototype.getAnswers=function(){return this._answers},t.__tarsusInterfaceName="SecurityQuestionAnswersInputResponse",t}(n.SecurityQuestionInputResponse);n.SecurityQuestionAnswersInputResponse=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(){function n(){}return n.__tarsusInterfaceName="SuspensionContext",n}();n.SuspensionContext=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(){function n(){}return n.prototype.getValue=function(){return this._value},n.prototype.setValue=function(n){this._value=n},n.prototype.getFormat=function(){return this._format},n.prototype.setFormat=function(n){this._format=n},n.__tarsusInterfaceName="TotpChallenge",n}();n.TotpChallenge=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(){function n(){}return n.prototype.getName=function(){return this._name},n.prototype.setName=function(n){this._name=n},n.prototype.getValue=function(){return this._value},n.prototype.setValue=function(n){this._value=n},n.__tarsusInterfaceName="TransportHeader",n}();n.TransportHeader=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(){function n(){}return n.prototype.getStatus=function(){return this._status},n.prototype.setStatus=function(n){this._status=n},n.prototype.getMethod=function(){return this._method},n.prototype.setMethod=function(n){this._method=n},n.prototype.getHeaders=function(){return this._headers},n.prototype.setHeaders=function(n){this._headers=n},n.prototype.getBodyJson=function(){return this._bodyJson},n.prototype.setBodyJson=function(n){this._bodyJson=n},n.__tarsusInterfaceName="TransportResponse",n}();n.TransportResponse=t}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.Disable=0]="Disable";n[n.DownloadOnInit=1]="DownloadOnInit"}(n.UIAssetsDownloadMode||(n.UIAssetsDownloadMode={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.UserId=0]="UserId";n[n.IdToken=1]="IdToken"}(n.UserHandleType||(n.UserHandleType={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.Fido2UserVerifyingPlatformAuthenticatorAvailable=0]="Fido2UserVerifyingPlatformAuthenticatorAvailable"}(n.AsyncHostInformationKey||(n.AsyncHostInformationKey={}))}(n.sdkhost||(n.sdkhost={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(){function n(){}return n.prototype.getLocalizedTitle=function(){return this._localizedTitle},n.prototype.setLocalizedTitle=function(n){this._localizedTitle=n},n.prototype.getLocalizedSubtitle=function(){return this._localizedSubtitle},n.prototype.setLocalizedSubtitle=function(n){this._localizedSubtitle=n},n.prototype.getLocalizedPrompt=function(){return this._localizedPrompt},n.prototype.setLocalizedPrompt=function(n){this._localizedPrompt=n},n.prototype.getFallbackButtonTitle=function(){return this._fallbackButtonTitle},n.prototype.setFallbackButtonTitle=function(n){this._fallbackButtonTitle=n},n.prototype.getCancelButtonTitle=function(){return this._cancelButtonTitle},n.prototype.setCancelButtonTitle=function(n){this._cancelButtonTitle=n},n.prototype.getRequireConfirmation=function(){return this._requireConfirmation},n.prototype.setRequireConfirmation=function(n){this._requireConfirmation=n},n.__tarsusInterfaceName="BiometricPromptInfo",n}();n.BiometricPromptInfo=t}(n.sdkhost||(n.sdkhost={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.Create=0]="Create";n[n.Get=1]="Get"}(n.Fido2CredentialsOpType||(n.Fido2CredentialsOpType={}))}(n.sdkhost||(n.sdkhost={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.Version=0]="Version";n[n.Platform=1]="Platform";n[n.FingerprintSupported=2]="FingerprintSupported";n[n.HostProvidedFeatures=3]="HostProvidedFeatures";n[n.FaceIdKeyBioProtectionSupported=4]="FaceIdKeyBioProtectionSupported";n[n.ImageAcquitisionSupported=5]="ImageAcquitisionSupported";n[n.AudioAcquitisionSupported=6]="AudioAcquitisionSupported";n[n.PersistentKeysSupported=7]="PersistentKeysSupported";n[n.FidoClientPresent=8]="FidoClientPresent";n[n.DyadicPresent=9]="DyadicPresent";n[n.StdSigningKeyIsHardwareProtectedSignAndEncryptKey=10]="StdSigningKeyIsHardwareProtectedSignAndEncryptKey";n[n.Fido2ClientPresent=11]="Fido2ClientPresent";n[n.DeviceBiometricsSupported=12]="DeviceBiometricsSupported";n[n.DeviceBiometricsFPContinuation=13]="DeviceBiometricsFPContinuation";n[n.DeviceBiometricsUsesSign=14]="DeviceBiometricsUsesSign";n[n.DevicePersistenceMode=15]="DevicePersistenceMode";n[n.Fido2RelyingParty=16]="Fido2RelyingParty"}(n.HostInformationKey||(n.HostInformationKey={}))}(n.sdkhost||(n.sdkhost={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.None=0]="None";n[n.NormalProtection=1]="NormalProtection";n[n.BindToEnrollmentDb=2]="BindToEnrollmentDb"}(n.KeyBiometricProtectionMode||(n.KeyBiometricProtectionMode={}))}(n.sdkhost||(n.sdkhost={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){n[n.StdSigningKey=0]="StdSigningKey";n[n.StdEncryptionKey=1]="StdEncryptionKey";n[n.GeneralPurposeAES=2]="GeneralPurposeAES";n[n.NoIntegrityAES=3]="NoIntegrityAES";n[n.FidoECCSigningKey=4]="FidoECCSigningKey";n[n.HardwareProtectedSignAndEncryptKey=5]="HardwareProtectedSignAndEncryptKey"}(n.KeyClass||(n.KeyClass={}))}(n.sdkhost||(n.sdkhost={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var i=function(){function t(){}return t.prototype.getResultPayload=function(){return this._resultPayload},t.create=function(t){return n.ts.mobile.tarsusplugin.impl.IdpInvocationResultImpl.create(t)},t.__tarsusInterfaceName="IdpInvocationResult",t}();t.IdpInvocationResult=i}(t.tarsusplugin||(t.tarsusplugin={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(r){var u=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return i(r,t),r.prototype.getPayload=function(){return this._payload},r.create=function(t){return n.ts.mobile.tarsusplugin.impl.KycDataCollectionResultImpl.create(t)},r.__tarsusInterfaceName="KycDataCollectionResult",r}(t.sdk.InputResponseType);r.KycDataCollectionResult=u}(t.tarsusplugin||(t.tarsusplugin={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var i=function(){function t(){}return t.prototype.getPluginName=function(){return this._pluginName},t.prototype.setPluginName=function(n){this._pluginName=n},t.prototype.getVersionMajor=function(){return this._versionMajor},t.prototype.setVersionMajor=function(n){this._versionMajor=n},t.prototype.getVersionMinor=function(){return this._versionMinor},t.prototype.setVersionMinor=function(n){this._versionMinor=n},t.prototype.getVersionPatch=function(){return this._versionPatch},t.prototype.setVersionPatch=function(n){this._versionPatch=n},t.prototype.getRequiredPluginApiLevel=function(){return this._requiredPluginApiLevel},t.prototype.setRequiredPluginApiLevel=function(n){this._requiredPluginApiLevel=n},t.create=function(){return n.ts.mobile.tarsusplugin.impl.PluginInfoImpl.create()},t.__tarsusInterfaceName="PluginInfo",t}();t.PluginInfo=i}(t.tarsusplugin||(t.tarsusplugin={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var i=function(){function t(){}return t.prototype.getCode=function(){return this._code},t.prototype.getTimeStepSeconds=function(){return this._timeStepSeconds},t.prototype.getExpiresInSeconds=function(){return this._expiresInSeconds},t.prototype.getSecondsTillNextInvocation=function(){return this._secondsTillNextInvocation},t.prototype.getShouldUpdateSpecificProperties=function(){return this._shouldUpdateSpecificProperties},t.prototype.getGeneratorSpecificDataToStore=function(){return this._generatorSpecificDataToStore},t.prototype.getMessage=function(){return this._message},t.create=function(t,i,r,u,f,e,o){return n.ts.mobile.tarsusplugin.impl.TotpCodeGenerationOutputImpl.create(t,i,r,u,f,e,o)},t.__tarsusInterfaceName="TotpCodeGenerationOutput",t}();t.TotpCodeGenerationOutput=i}(t.tarsusplugin||(t.tarsusplugin={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){var t=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.prototype.getEscapeRequest=function(){return this._escapeRequest},t.prototype.setEscapeRequest=function(n){this._escapeRequest=n},t.__tarsusInterfaceName="TotpProvisionEscapeRequest",t}(n.TotpProvisionResult);n.TotpProvisionEscapeRequest=t}(n.tarsusplugin||(n.tarsusplugin={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){var i=function(){function t(){}return t.prototype.getUnprotectedProvisionOutput=function(){return this._unprotectedProvisionOutput},t.prototype.getSecretToLock=function(){return this._secretToLock},t.create=function(t,i){return n.ts.mobile.tarsusplugin.impl.VaultBasedTotpProvisionOutputImpl.create(t,i)},t.__tarsusInterfaceName="VaultBasedTotpProvisionOutput",t}();t.VaultBasedTotpProvisionOutput=i}(t.tarsusplugin||(t.tarsusplugin={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.prototype.getResultPayload=function(){return this._resultPayload},t.create=function(n){var i=new t;return i._resultPayload=n,i},t.__tarsusInterfaceName="IdpInvocationResult",t}(n.IdpInvocationResult);t.IdpInvocationResultImpl=r}(n.impl||(n.impl={}))}(n.tarsusplugin||(n.tarsusplugin={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.prototype.getPayload=function(){return this._payload},t.create=function(n){var i=new t;return i._payload=n,i},t.__tarsusInterfaceName="KycDataCollectionResult",t}(n.KycDataCollectionResult);t.KycDataCollectionResultImpl=r}(n.impl||(n.impl={}))}(n.tarsusplugin||(n.tarsusplugin={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(t){!function(t){!function(t){!function(r){var u=function(t){function r(){var n=t.call(this)||this;return n._versionMajor=0,n._versionMinor=0,n._versionPatch=0,n}return i(r,t),r.create=function(){return new n.ts.mobile.tarsusplugin.impl.PluginInfoImpl},r.versionToString=function(n){return n.getVersionMajor()+"."+n.getVersionMinor()+"."+n.getVersionPatch()},r.toString=function(n){return n.getPluginName()+" v"+this.versionToString(n)},r}(t.PluginInfo);r.PluginInfoImpl=u}(t.impl||(t.impl={}))}(t.tarsusplugin||(t.tarsusplugin={}))}(t.mobile||(t.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.create=function(n,i,r,u,f,e,o){var s=new t;return s._code=n,i&&(s._message=i),s._timeStepSeconds=r,s._expiresInSeconds=u,s._secondsTillNextInvocation=f,s._shouldUpdateSpecificProperties=e,o&&(s._generatorSpecificDataToStore=o),s},t}(n.TotpCodeGenerationOutput);t.TotpCodeGenerationOutputImpl=r}(n.impl||(n.impl={}))}(n.tarsusplugin||(n.tarsusplugin={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(t){var r=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return i(t,n),t.create=function(n,i){var r=new t;return r._secretToLock=n,r._unprotectedProvisionOutput=i,r},t}(n.VaultBasedTotpProvisionOutput);t.VaultBasedTotpProvisionOutputImpl=r}(n.impl||(n.impl={}))}(n.tarsusplugin||(n.tarsusplugin={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={})),function(n){!function(n){!function(n){!function(n){!function(n){function t(n){return!!n.tlvSerializable}function i(i,r){var u=[];return Object.keys(r).forEach(function(f){var o=i[f],e;if(!o)throw"TLV encoding error: Unknown tag "+f;e=r[f];e instanceof Array||(e=[e]);e.forEach(function(r){var s=r.__type||o.tagType||t(r)&&n.TlvTypes.Serializable,e;if(!s)throw"Unknown type for tag "+f;r.__type&&(r=r.__value);e=s(r,i);u.push(n.TlvTypes.UInt16(o.id));u.push(n.TlvTypes.UInt16(e.length/2));u.push(e)})}),u.join("")}n.instanceOfTlvSerializable=t;n.TlvTypes={UInt8:function(t){return n.numberToHex(t,8)},UInt16:function(t){return n.numberToHex(t>>8&255|(255&t)<<8,16)},UInt32:function(t){return n.numberToHex((255&t)<<24|(t>>8&255)<<16|(t>>16&255)<<8|t>>24&255,32)},Object:function(n,t){return i(t,n)},Serializable:function(n,t){return n.tlvSerialize(t)},String:function(t){return n.asciiToHex(t)},HexBinary:function(n){return n},Struct:function(n){return function(t,i){var r=[];return Object.keys(n).forEach(function(u){if(u in t){var f=t[u],e=n[u];r.push(e(f,i))}}),r.join("")}}};n.tlvEncodeHex=i}(n.util||(n.util={}))}(n.sdk||(n.sdk={}))}(n.mobile||(n.mobile={}))}(n.ts||(n.ts={}))}(t||(t={}));p=com.ts.mobile.sdk.createSdk();lt=new vi;p.setTarsusHost(lt);p.setTransportProvider(new ti(lt));p.setEnabledCollectors([com.ts.mobile.sdk.CollectorType.DeviceDetails,com.ts.mobile.sdk.CollectorType.LargeData,com.ts.mobile.sdk.CollectorType.Capabilities]);p.setEnabledCollectorsForAnonymousJourneys([com.ts.mobile.sdk.CollectorType.DeviceDetails,com.ts.mobile.sdk.CollectorType.Capabilities]);p.setLogLevel(com.ts.mobile.sdk.LogLevel.Error);window.xmui&&p.setUiHandler(new window.xmui.XmUIHandler);n.XmSdk=function(){return p};Object.defineProperty(n,"__esModule",{value:!0})});!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((n=n||self).xmui={})}(this,function(n){"use strict";function vr(n){return(vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function bu(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function f(n,t,i){return t&&bu(n.prototype,t),i&&bu(n,i),n}function c(n,t,i){return t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}function o(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}});t&&ku(n,t)}function u(n){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function ku(n,t){return(ku=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}function y(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function s(n,t){return!t||"object"!=typeof t&&"function"!=typeof t?y(n):t}function du(n,t){for(;!Object.prototype.hasOwnProperty.call(n,t)&&null!==(n=u(n)););return n}function k(n,t,i){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(n,t,i){var u=du(n,t),r;if(u)return r=Object.getOwnPropertyDescriptor(u,t),r.get?r.get.call(i):r.value})(n,t,i||n)}function gu(n,t,i,r){return(gu="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(n,t,i,r){var u,f=du(n,t);if(f){if((u=Object.getOwnPropertyDescriptor(f,t)).set)return u.set.call(r,i),!0;if(!u.writable)return!1}if(u=Object.getOwnPropertyDescriptor(r,t)){if(!u.writable)return!1;u.value=i;Object.defineProperty(r,t,u)}else c(r,t,i);return!0})(n,t,i,r)}function wt(n,t,i,r,u){if(!gu(n,t,i,r||n)&&u)throw new Error("failed to set property");return i}function yr(n){return function(n){if(Array.isArray(n)){for(var t=0,i=new Array(n.length);t<n.length;t++)i[t]=n[t];return i}}(n)||function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance");}()}function pr(n){var t,i;return n instanceof nf?n.elements:n instanceof Array?n:n instanceof HTMLElement?[n]:fo.test(n)?(t=n,(i=document.createElement("div")).innerHTML=t,tf(i.childNodes)):rf(document,n)}function tf(n){var t=[];return[].forEach.call(n,function(n){n instanceof HTMLElement&&t.push(n)}),t}function rf(n,t){return tf(n.querySelectorAll(t))}function uf(n,t){return!!n.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function it(n){return nf.createTSQueryElement(n)}function bi(n,t,i){var r;return function(){var u=this,f=arguments,e=function(){r=null;i||n.apply(u,f)},o=i&&!r;clearTimeout(r);r=setTimeout(e,t);o&&n.apply(u,f)}}function yt(){}function ie(n){return n instanceof NodeList||n instanceof HTMLCollection?Array.prototype.slice.call(n):[n]}function ci(n,t){if("string"==typeof t)return window.getComputedStyle(n)[t];Object.keys(t).forEach(function(i){var r=t[i];n.style[i]=r})}function ui(n,t){var i=t.split(" ");i.length>1?i.forEach(function(t){return ui(n,t)}):n.classList?n.classList.add(t):n.className+=" ".concat(t)}function ki(n,t){var i=t.split(" ");i.length>1?i.forEach(function(t){return ki(n,t)}):n.classList?n.classList.remove(t):n.className=n.className.replace(new RegExp("(^|\\b)".concat(t.split(" ").join("|"),"(\\b|$)"),"gi")," ")}function re(n){ie(n).forEach(function(n){n.parentNode.removeChild(n)})}function ue(n,t,i,r){var u=t-n,f=r-i;return{length:Math.ceil(Math.sqrt(u*u+f*f)),angle:Math.round(180*Math.atan2(f,u)/Math.PI)}}function tl(n){return null===n.offsetParent||"hidden"===getComputedStyle(n).visibility}function pe(n){for(var t,r=n.querySelectorAll(nl.join(",")),u=[],i=0;i<r.length;i++)t=r[i],il(t)>-1&&!t.disabled&&!tl(t)&&u.push(t);return u}function il(n){var t=parseInt(n.getAttribute("tabindex"),10);return isNaN(t)?function(n){return"true"===n.contentEditable}(n)?0:n.tabIndex:t}var gt,rr,ft,fo=/^\s*<[\S\s]*$/,nf=function(){function n(){r(this,n);this._elements=[]}return f(n,[{key:"append",value:function(n){var t=pr(n);return this._elements.forEach(function(n,i){t.forEach(function(t){var r=0!==i?t.cloneNode():t;n.appendChild(r)})}),this}},{key:"remove",value:function(){this._elements.forEach(function(n){n.parentNode.removeChild(n)})}},{key:"prepend",value:function(n){var t=pr(n);return this._elements.forEach(function(n,i){var r=n.firstChild;t.forEach(function(t){var u=0!==i?t.cloneNode():t;n.insertBefore(u,r)})}),this}},{key:"content",value:function(n){return this.empty().append(n)}},{key:"disable",value:function(){return this.disabled(!0)}},{key:"enable",value:function(){return this.disabled(!1)}},{key:"attr",value:function(n){return this._elements.forEach(function(t){!function(n,t){Object.keys(t).forEach(function(i){t.hasOwnProperty(i)&&n.setAttribute(i,t[i])})}(t,n)}),this}},{key:"focus",value:function(){return this._elements.forEach(function(n){n.focus()}),this}},{key:"addClass",value:function(n){return this._elements.forEach(function(t){!function(n,t){uf(n,t)||(n.className+=" "+t,n.className=n.className.replace(/  +/g," "))}(t,n)}),this}},{key:"removeClass",value:function(n){return this._elements.forEach(function(t){!function(n,t){if(uf(n,t)){var i=new RegExp("(\\s|^)"+t+"(\\s|$)");n.className=n.className.replace(i," ").replace(/  +/g," ")}}(t,n)}),this}},{key:"setClass",value:function(n){return this._elements.forEach(function(t){t.className=n}),this}},{key:"find",value:function(t){var i=new n;return this._elements.forEach(function(n){rf(n,t).forEach(function(n){i.push(n)})}),i}},{key:"hide",value:function(){return this._elements.forEach(function(n){n.style.display="none"}),this}},{key:"show",value:function(){return this._elements.forEach(function(n){n.style.display=""}),this}},{key:"empty",value:function(){return this._elements.forEach(function(n){n.innerHTML=""}),this}},{key:"text",value:function(n){return this._elements.forEach(function(t){t.textContent=n}),this}},{key:"on",value:function(n,t){var i=this;return n.trim().split(" ").forEach(function(n){i._elements.forEach(function(i){i.addEventListener(n,t)})}),this}},{key:"hover",value:function(n,t){return this._elements.forEach(function(i){i.addEventListener("mouseover",n);i.addEventListener("mouseout",t)}),this}},{key:"first",value:function(){var t=new n;return this._elements.length?t.push(this._elements[0]):t}},{key:"get",value:function(n){return this._elements[n]}},{key:"disabled",value:function(n){return this._elements.forEach(function(t){t.disabled!=n&&(t.disabled=n)}),this}},{key:"blockInteraction",value:function(){var n=this;return this._elements.forEach(function(t){t.style.pointerEvents="none";t.addEventListener("keydown",n.keydownBlockEventHandler)}),this}},{key:"unblockInteraction",value:function(){var n=this;return this._elements.forEach(function(t){t.style.pointerEvents="auto";t.removeEventListener("keydown",n.keydownBlockEventHandler)}),this}},{key:"push",value:function(){var n;return(n=this._elements).push.apply(n,arguments),this}},{key:"keydownBlockEventHandler",value:function(n){n.preventDefault()}},{key:"length",get:function(){return this._elements.length}},{key:"elements",get:function(){return yr(this._elements)}}],[{key:"createTSQueryElement",value:function(t){var r=pr(t),i=new n;return i.push.apply(i,yr(r)),i}}]),n}(),d,cf,ne,te,ir,ge;!function(n){n.Mousedown="mousedown";n.Mouseup="mouseup";n.Mouseenter="mouseenter";n.Mouseleave="mouseleave";n.Click="click"}(gt||(gt={})),function(n){n.Keydown="keydown";n.Keypress="keypress"}(rr||(rr={})),function(n){n.Selected="xmui--selected";n.Disabled="xmui--disabled";n.Active="xmui--active";n.Error="xmui--error"}(ft||(ft={}));var l,ai=function(){function n(){r(this,n);this._active=!1;this._selected=!1;this._disabled=!1;this._error=!1;this._key="";this.element=this.buildElement()}return f(n,[{key:"appendInto",value:function(n){n.append(this.element)}},{key:"prependInto",value:function(n){n.prepend(this.element)}},{key:"remove",value:function(){this.element.remove()}},{key:"onClick",value:function(n){this.onMouseEvent(gt.Click,n)}},{key:"onMousedown",value:function(n){this.onMouseEvent(gt.Mousedown,n)}},{key:"onMouseup",value:function(n){this.onMouseEvent(gt.Mouseup,n)}},{key:"onMouseenter",value:function(n){this.onMouseEvent(gt.Mouseenter,n)}},{key:"onMouseleave",value:function(n){this.onMouseEvent(gt.Mouseleave,n)}},{key:"onMouseEvent",value:function(n,t){var i=this;this.element.on(n,function(n){t(i,n)})}},{key:"onKeydown",value:function(n){this.onKeyboardEvent(rr.Keydown,n)}},{key:"onKeypress",value:function(n){this.onKeyboardEvent(rr.Keypress,n)}},{key:"onKeyboardEvent",value:function(n,t){var i=this;this.element.on(n,function(n){t(i,n)})}},{key:"onPaste",value:function(n){this.element.on("paste",n)}},{key:"onCut",value:function(n){this.element.on("cut",n)}},{key:"onBlur",value:function(n){this.element.on("blur",n)}},{key:"onFocus",value:function(n){this.element.on("focus",n)}},{key:"onFocusIn",value:function(n){this.element.on("focusin",n)}},{key:"onFocusOut",value:function(n){this.element.on("focusout",n)}},{key:"onHover",value:function(n,t){this.element.hover(n,t)}},{key:"addClass",value:function(n){this.element.addClass(n)}},{key:"removeClass",value:function(n){this.element.removeClass(n)}},{key:"focus",value:function(){var n=this;setTimeout(function(){n.element.focus()})}},{key:"scrollIntoView",value:function(){var n=this;setTimeout(function(){n.htmlElement.scrollIntoView()})}},{key:"show",set:function(n){n?this.element.show():this.element.hide()}},{key:"id",set:function(n){this.htmlElement.id=n},get:function(){return this.htmlElement.id}},{key:"value",set:function(n){this._value=n},get:function(){return this._value}},{key:"className",set:function(n){this.element.setClass(n)}},{key:"ariaRole",set:function(n){this.attr={"aria-role":n}}},{key:"role",set:function(n){this.attr={role:n}}},{key:"ariaLabel",set:function(n){this.attr={"aria-label":n}}},{key:"ariaLabeledBy",set:function(n){this.attr={"aria-labelledby":n}}},{key:"ariaDescribedBy",set:function(n){this.attr={"aria-describedby":n}}},{key:"ariaMultiselectable",set:function(n){this.attr={"aria-multiselectable":n.toString()}}},{key:"ariaActiveDescendant",set:function(n){this.attr={"aria-activedescendant":n}}},{key:"ariaLive",set:function(n){this.attr={"aria-live":n}}},{key:"ariaSelected",set:function(n){this.attr={"aria-selected":n.toString()}}},{key:"ariaDisabled",set:function(n){this.attr={"aria-disabled":n.toString()}}},{key:"automationId",set:function(n){this.attr={"tsc-name":n}}},{key:"tabindex",set:function(n){this.attr={tabindex:n.toString()}}},{key:"spellcheck",set:function(n){this.attr={spellcheck:n?"true":"false"}}},{key:"attr",set:function(n){this.element.attr(n)}},{key:"htmlElement",get:function(){return this.element.get(0)}},{key:"active",set:function(n){n!==this._active&&n?this.addClass(ft.Active):this.removeClass(ft.Active);this._active=n},get:function(){return this._active}},{key:"selected",set:function(n){n!==this._selected&&n?this.addClass(ft.Selected):this.removeClass(ft.Selected);this._selected=n;this.ariaSelected=n},get:function(){return this._selected}},{key:"disabled",set:function(n){n!==this._disabled&&n?this.addClass(ft.Disabled):this.removeClass(ft.Disabled);this._disabled=n;this.ariaDisabled=n},get:function(){return this._disabled}},{key:"key",get:function(){return this._key},set:function(n){this._key=n}},{key:"error",set:function(n){this._error=n;n?this.addClass(ft.Error):this.removeClass(ft.Error)},get:function(){return this._error}}]),n}(),v=function(n){function t(){var n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r(this,t),(n=s(this,u(t).call(this))).setText(i),n}return o(t,n),f(t,[{key:"buildElement",value:function(){return it("<span><\/span>")}},{key:"setText",value:function(n){this.element.text(null==n?"":n)}}]),t}(ai),wr=function(n){function t(){var n;return r(this,t),(n=s(this,u(t).apply(this,arguments))).children=[],n}return o(t,n),f(t,[{key:"prependChild",value:function(n){n.prependInto(this.element);this.children.push(n)}},{key:"prependChildren",value:function(){for(var r=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];i.forEach(function(n){r.prependChild(n)})}},{key:"appendChild",value:function(n){n.appendInto(this.element);this.children.push(n)}},{key:"appendChildren",value:function(){for(var r=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];i.forEach(function(n){r.appendChild(n)})}},{key:"removeChild",value:function(n){this.children=this.children.filter(function(t){return t!==n});n.remove()}},{key:"setContent",value:function(n){this.empty();this.appendChild(n)}},{key:"empty",value:function(){this.element.empty();this.children=[]}},{key:"getNextChild",value:function(n){var t=this.getChildren().length,i=(this.getChildIndex(n)+1)%t;return this.getChildByIndex(i)}},{key:"getPrevChild",value:function(n){var t=this.getChildren().length,i=(this.getChildIndex(n)+t-1)%t;return this.getChildByIndex(i)}},{key:"getChildByIndex",value:function(n){return this.children[n]}},{key:"getChildren",value:function(){return this.children}},{key:"getChildIndex",value:function(n){return this.children.indexOf(n)}}]),t}(ai),e=function(n){function t(){return r(this,t),s(this,u(t).apply(this,arguments))}return o(t,n),f(t,[{key:"buildElement",value:function(){return it("<div><\/div>")}}]),t}(wr),ur="xmui-info-panel",eo="xmui-info-panel-title",oo="xmui-info-panel-instructions",so=function(n){function t(){var n,i;return r(this,t),(n=s(this,u(t).call(this))).className=ur,n.titleComponent=new v,n.titleComponent.className="".concat(ur,"_title"),n.titleComponent.automationId=eo,n.instructionsComponent=new v,n.instructionsComponent.className="".concat(ur,"_instructions"),n.instructionsComponent.automationId=oo,n.instructionsComponent.show=!1,i=new e,i.className="".concat(ur,"_container"),i.appendChildren(n.titleComponent,n.instructionsComponent),n.appendChild(i),n}return o(t,n),f(t,[{key:"setTitle",value:function(n){this.titleComponent.setText(n)}},{key:"setInstructions",value:function(n){var t=n?n.trim():"";this.instructionsComponent.setText(t);this.instructionsComponent.show=!!t}}]),t}(e),vi="xmui-header-panel",ff=function(n){function t(){var n,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return r(this,t),(n=s(this,u(t).call(this))).className=vi,n.addClass("".concat(vi,i?"--short":"--normal")),n.iconComp=new e,n.iconComp.className="".concat(vi,"_icon"),n.iconComp.show=!1,n.textComp=new v,n.textComp.className="".concat(vi,"_text"),n.appendChildren(n.iconComp,n.textComp),n}return o(t,n),f(t,[{key:"setText",value:function(n){this.textComp.setText(n)}},{key:"setIcon",value:function(n){this.iconComp.className="".concat(vi,"_icon ").concat(n);this.iconComp.show=!0}}]),t}(e),fr="xmui-action-panel",ef=function(n){function t(){var n,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return r(this,t),(n=s(this,u(t).call(this))).className=fr,n.addClass("".concat(fr,i?"--short":"--normal")),n.leftButtonsContainer=new e,n.leftButtonsContainer.className="".concat(fr,"_left"),n.rightButtonsContainer=new e,n.rightButtonsContainer.className="".concat(fr,"_right"),n.appendChildren(n.leftButtonsContainer,n.rightButtonsContainer),n}return o(t,n),f(t,[{key:"addLeftButton",value:function(n){this.leftButtonsContainer.appendChild(n)}},{key:"addRightButton",value:function(n){this.rightButtonsContainer.appendChildren(n)}}]),t}(e),of="xmui-busy-indicator",ho=function(n){function t(){var n,i;return r(this,t),(n=s(this,u(t).call(this))).className=of,i=new e,i.className="".concat(of,"_animation"),n.appendChild(i),n}return o(t,n),t}(e);!function(n){n.User="xmui-icon-user";n.Remove="xmui-icon-remove";n.Rename="xmui-icon-rename";n.More="xmui-icon-more";n.CircledMore="xmui-icon-circled-more";n.PasswordVisible="xmui-icon-password-input-visible";n.PasswordHidden="xmui-icon-password-input-hidden";n.Device="xmui-icon-device";n.Registered="xmui-icon-registered";n.WebBrowser="xmui-icon-web-browser";n.Expand="xmui-icon-expand";n.LockedState="xmui-icon-locked-state";n.MobileApproveWaiting="xmui-icon-mobile-approve-waiting";n.WaitForTicket="xmui-icon-wait-for-ticket";n.Checked="xmui-icon-checked";n.Unchecked="xmui-icon-unchecked";n.Checkmark="xmui-icon-checkmark";n.Cancellation="xmui-icon-cancellation";n.Expiration="xmui-icon-expired";n.Information="xmui-icon-information";n.Confirmation="xmui-icon-confirmation";n.Rejection="xmui-icon-rejection";n.AuthLocked="xmui-icon-locked";n.Error="xmui-icon-error";n.Unregister="xmui-icon-unregister";n.Fallback="xmui-icon-fallback";n.Promotion="xmui-icon-promotion";n.PasswordAuth="xmui-icon-password-auth";n.PincodeAuth="xmui-icon-pincode-auth";n.PatternAuth="xmui-icon-pattern-auth";n.OtpAuth="xmui-icon-otp-auth";n.VoiceAuth="xmui-icon-voice-auth";n.QuestionsAuth="xmui-icon-questions-auth";n.TotpAuth="xmui-icon-totp-auth";n.MobileApproveAuth="xmui-icon-mobile-approve-auth";n.GenericAuth="xmui-icon-generic-auth";n.SmsChannel="xmui-icon-sms-channel";n.EmailChannel="xmui-icon-email-channel";n.PushChannel="xmui-icon-push-channel";n.VoiceChannel="xmui-icon-voice-channel"}(l||(l={}));var sf="xmui-page",oi=function(n){function t(n,i){var f,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return r(this,t),(f=s(this,u(t).call(this))).forceShowHeader=o,f.className=sf,f.role="dialog",f.headerPanel=new ff,f.headerPanel.show=f.forceShowHeader||!1,f.infoPanel=new so,f.infoPanel.show=!1,f.contentContainer=new e,f.contentContainer.className="".concat(sf,"_content"),f.busyIndicator=new ho,f.contentContainer.appendChild(f.busyIndicator),f.busy=!1,f.actionPanel=new ef,f.appendChildren(f.headerPanel,f.infoPanel,f.contentContainer,f.actionPanel),f.automationId=n,f.addClass(i),f}return o(t,n),f(t,[{key:"setInstructions",value:function(n){this.infoPanel.setInstructions(n);this.infoPanel.show=!0}},{key:"setUserName",value:function(n){n?(this.headerPanel.setText(n),this.headerPanel.setIcon(l.User),this.headerPanel.show=!0):this.headerPanel.show=this.forceShowHeader||!1}},{key:"blockInteraction",value:function(){this.element.blockInteraction()}},{key:"unblockInteraction",value:function(){this.element.unblockInteraction()}},{key:"setContent",value:function(n){this.contentContainer.appendChild(n)}},{key:"setTitle",value:function(n){this.infoPanel.setTitle(n);this.infoPanel.show=!0}},{key:"addLeftButton",value:function(n){this.actionPanel.addLeftButton(n)}},{key:"addRightButton",value:function(n){this.actionPanel.addRightButton(n)}},{key:"busy",set:function(n){this.busyIndicator.show=n}},{key:"error",set:function(n){this.infoPanel.error=n}}]),t}(e),i=function n(){r(this,n)};i.button_cancel="xmui-button-cancel";i.button_back="xmui-button-back";i.button_abort="xmui-button-abort";i.button_retry="xmui-button-retry";i.button_continue="xmui-button-continue";i.button_reset="xmui-button-reset";i.button_change_method="xmui-button-change-method";i.button_select_method="xmui-button-select-method";i.button_send_to_all="xmui-button-send-to-all";i.button_actions_list="xmui-button-actions-list";i.button_skip="xmui-button-skip";i.button_rename="xmui-button-rename";i.button_identify="xmui-button-identify";i.button_remove="xmui-button-remove";i.button_escape="xmui-button-escape";i.button_recovery="xmui-button-recovery";i.button_dynamic="xmui-button-dynamic";i.button_add_question="xmui-button-add-question";i.list_actions="xmui-list-actions";i.list_item_text_state="xmui-list-item-text-state";i.list_item_icon_state="xmui-list-item-icon-state";i.dialog_recovery="xmui-dialog-recovery";i.dialog_cancellation="xmui-dialog-cancellation";i.dialog_confirm="xmui-dialog-confirm";i.dialog_information="xmui-dialog-information";i.dialog_title="xmui-dialog-title";i.dialog_message="xmui-dialog-message";i.dialog_fallback="xmui-dialog-fallback";i.dialog_registration_promotion_intro="xmui-dialog-registration-promotion-intro";i.popup_dialog_confirm="xmui-popup-dialog-confirm";i.popup_dialog_input="xmui-popup-dialog-input";i.input_password="xmui-input-password";i.input_repeat_password="xmui-input-repeat-password";i.input_fido2="xmui-input-fido2";i.input_repeat_fido2="xmui-input-repeat-fido2";i.input_pin_code="xmui-input-pin-code";i.input_pattern_lock="xmui-input-pattern-lock";i.input_otp_code="xmui-input-otp-code";i.input_totp_code="xmui-input-totp-code";i.input_text="xmui-input-text";i.input_email="xmui-input-email";i.input_security_question="xmui-input-security-question";i.input_mobile_phone_number="xmui-input-mobile-phone-number";i.input_mobile_phone_coutry_code="xmui-input-mobile-phone-country-code";i.page_password_auth="xmui-page-password-auth";i.page_password_reg="xmui-page-password-reg";i.page_fido2_auth="xmui-page-fido2-auth";i.page_fido2_reg="xmui-page-fido2-reg";i.page_pin_auth="xmui-page-pin-auth";i.page_pin_reg="xmui-page-pin-reg";i.page_pattern_auth="xmui-page-pattern-auth";i.page_pattern_reg="xmui-page-pattern-reg";i.page_otp_auth="xmui-page-otp-auth";i.page_totp_auth="xmui-page-totp-auth";i.page_ticket_wait="xmui-page-ticket-wait";i.page_mobile_approve="xmui-page-mobile-approve";i.page_select_device="xmui-page-select-device";i.page_otp_select_channel="xmui-page_otp_select_channel";i.page_configure_authenticators="xmui-page-configure-authenticators";i.page_manage_devices="xmui-page-manage-devices";i.page_select_device_to_manage="xmui-page-select-managed-device";i.page_select_authenticator="xmui-page-select-authenticator";i.page_manage_user_details="xmui-page-manage-user-details";i.page_dynamic_form="xmui-page-dynamic-form";i.page_security_questions_auth="xmui-page-security-questions-auth";i.page_security_questions_reg="xmui-page-security-questions-reg";var rt,ni="xmui-dialog-content",hf=function(n){function t(){var n;return r(this,t),(n=s(this,u(t).call(this))).className=ni,n.ariaRole="dialog",n.ariaLabeledBy="".concat(ni,"_title"),n.ariaDescribedBy="".concat(ni,"_message"),n.createContent(),n}return o(t,n),f(t,[{key:"setDialogTitle",value:function(n){this.titleComp.setText(n)}},{key:"setDialogMessage",value:function(n){this.messageComp.setText(n)}},{key:"setDialogIconClass",value:function(n){this.iconComp.className="".concat(ni,"_icon ").concat(n)}},{key:"createContent",value:function(){this.iconComp=new e;this.iconComp.className="".concat(ni,"_icon");this.titleComp=new v;this.titleComp.className="".concat(ni,"_title");this.titleComp.automationId=i.dialog_title;this.messageComp=new v;this.messageComp.className="".concat(ni,"_message");this.messageComp.automationId=i.dialog_message;this.appendChildren(this.iconComp,this.titleComp,this.messageComp)}}]),t}(e),er=function(n){function t(n,i){var f;return r(this,t),(f=s(this,u(t).call(this,n,i))).handleClick=f.handleClick.bind(y(f)),f.dialogContent=new hf,f.setContent(f.dialogContent),f}return o(t,n),f(t,[{key:"addLeftButton",value:function(n){n.onClick(this.handleClick);k(u(t.prototype),"addLeftButton",this).call(this,n)}},{key:"addRightButton",value:function(n){n.onClick(this.handleClick);k(u(t.prototype),"addRightButton",this).call(this,n)}},{key:"setDialogTitle",value:function(n){this.dialogContent.setDialogTitle(n)}},{key:"setDialogMessage",value:function(n){this.dialogContent.setDialogMessage(n)}},{key:"setDialogIconClass",value:function(n){this.dialogContent.setDialogIconClass(n)}},{key:"onSelect",value:function(n){this.onSelectCB=n}},{key:"handleClick",value:function(n){this.onSelectCB(n.value)}}]),t}(oi),t={ts_gen_back:"ts_gen_back",ts_gen_skip:"ts_gen_skip",ts_gen_continue:"ts_gen_continue",ts_gen_cancel:"ts_gen_cancel",ts_gen_close:"ts_gen_close",ts_gen_ok:"ts_gen_ok",ts_gen_default:"ts_gen_default",ts_gen_restart:"ts_gen_restart",ts_gen_expired:"ts_gen_expired",ts_gen_cancel_authentication:"ts_gen_cancel_authentication",ts_gen_change_authenticator:"ts_gen_change_authenticator",ts_gen_select_authenticator:"ts_gen_select_authenticator",ts_gen_retry_authenticator:"ts_gen_retry_authenticator",ts_gen_dismiss:"ts_gen_dismiss",ts_authenticator_device_biometrics:"ts_authenticator_device_biometrics",ts_authenticator_password:"ts_authenticator_password",ts_authenticator_pin:"ts_authenticator_pin",ts_authenticator_pattern:"ts_authenticator_pattern",ts_authenticator_otp:"ts_authenticator_otp",ts_authenticator_fingerprint:"ts_authenticator_fingerprint",ts_authenticator_question:"ts_authenticator_question",ts_authenticator_face_id:"ts_authenticator_face_id",ts_authenticator_touch_id:"ts_authenticator_touch_id",ts_authenticator_totp:"ts_authenticator_totp",ts_authenticator_pattern_centralized:"ts_authenticator_pattern_centralized",ts_authenticator_pin_centralized:"ts_authenticator_pin_centralized",ts_authenticator_voice_server:"ts_authenticator_voice_server",ts_authenticator_fido2:"ts_authenticator_fido2",ts_authenticator_mobile_approve:"ts_authenticator_mobile_approve",ts_authenticator_face_server:"ts_authenticator_face_server",ts_authenticator_fido_fidopin:"ts_authenticator_fido_fidopin",ts_authenticator_fido_fidoface:"ts_authenticator_fido_fidoface",ts_authenticator_fido_fidofp:"ts_authenticator_fido_fidofp",ts_authenticator_device_biometrics_description:"ts_authenticator_device_biometrics_description",ts_authenticator_password_description:"ts_authenticator_password_description",ts_authenticator_pin_description:"ts_authenticator_pin_description",ts_authenticator_pin_centralized_description:"ts_authenticator_pin_centralized_description",ts_authenticator_pattern_description:"ts_authenticator_pattern_description",ts_authenticator_pattern_centralized_description:"ts_authenticator_pattern_centralized_description",ts_authenticator_otp_description:"ts_authenticator_otp_description",ts_authenticator_voice_description:"ts_authenticator_voice_description",ts_authenticator_voice_server_description:"ts_authenticator_voice_server_description",ts_authenticator_questions_description:"ts_authenticator_questions_description",ts_authenticator_face_description:"ts_authenticator_face_description",ts_authenticator_fingerprint_description:"ts_authenticator_fingerprint_description",ts_authenticator_face_id_description:"ts_authenticator_face_id_description",ts_authenticator_touch_id_description:"ts_authenticator_touch_id_description",ts_authenticator_totp_description:"ts_authenticator_totp_description",ts_authenticator_mobile_approve_description:"ts_authenticator_mobile_approve_description",ts_authenticator_fido2_description:"ts_authenticator_fido2_description",ts_authenticator_password_title_auth:"ts_authenticator_password_title_auth",ts_authenticator_password_title_reg:"ts_authenticator_password_title_reg",ts_authenticator_password_intro_auth:"ts_authenticator_password_intro_auth",ts_authenticator_password_intro_reg:"ts_authenticator_password_intro_reg",ts_authenticator_password_field_hint:"ts_authenticator_password_field_hint",ts_authenticator_password_reg_field_hint:"ts_authenticator_password_reg_field_hint",ts_authenticator_password_cta_positive:"ts_authenticator_password_cta_positive",ts_authenticator_password_error_too_short:"ts_authenticator_password_error_too_short",ts_authenticator_password_error_reg_no_match:"ts_authenticator_password_error_reg_no_match",ts_authenticator_password_error_reg_strength_validation_failed:"ts_authenticator_password_error_reg_strength_validation_failed",ts_authenticator_pin_title_auth:"ts_authenticator_pin_title_auth",ts_authenticator_pin_title_reg:"ts_authenticator_pin_title_reg",ts_authenticator_pin_intro_auth:"ts_authenticator_pin_intro_auth",ts_authenticator_pin_intro_reg:"ts_authenticator_pin_intro_reg",ts_authenticator_pin_intro_repeat:"ts_authenticator_pin_intro_repeat",ts_authenticator_pin_error_reg_no_match:"ts_authenticator_pin_error_reg_no_match",ts_authenticator_pin_code_length:"ts_authenticator_pin_code_length",ts_authenticator_otp_title_auth:"ts_authenticator_otp_title_auth",ts_authenticator_otp_qr_title:"ts_authenticator_otp_qr_title",ts_authenticator_otp_targets_intro:"ts_authenticator_otp_targets_intro",ts_authenticator_otp_sms_title:"ts_authenticator_otp_sms_title",ts_authenticator_otp_email_title:"ts_authenticator_otp_email_title",ts_authenticator_otp_voice_title:"ts_authenticator_otp_voice_title",ts_authenticator_otp_push_title:"ts_authenticator_otp_push_title",ts_authenticator_otp_unknown_title:"ts_authenticator_otp_unknown_title",ts_authenticator_otp_sms_sent:"ts_authenticator_otp_sms_sent",ts_authenticator_otp_email_sent:"ts_authenticator_otp_email_sent",ts_authenticator_otp_push_sent:"ts_authenticator_otp_push_sent",ts_authenticator_otp_voice_sent:"ts_authenticator_otp_voice_sent",ts_authenticator_otp_qr_sent:"ts_authenticator_otp_qr_sent",ts_authenticator_otp_external_numeric_sent:"ts_authenticator_otp_external_numeric_sent",ts_authenticator_otp_external_qr_sent:"ts_authenticator_otp_external_qr_sent",ts_authenticator_otp_resend:"ts_authenticator_otp_resend",ts_authenticator_otp_resend_message:"ts_authenticator_otp_resend_message",ts_authenticator_otp_resend_intro:"ts_authenticator_otp_resend_intro",ts_authenticator_otp_error_qr_permission:"ts_authenticator_otp_error_qr_permission",ts_authenticator_otp_error_code_expired:"ts_authenticator_otp_error_code_expired",ts_authenticator_otp_code_length:"ts_authenticator_otp_code_length",ts_authenticator_pattern_title_auth:"ts_authenticator_pattern_title_auth",ts_authenticator_pattern_title_reg:"ts_authenticator_pattern_title_reg",ts_authenticator_pattern_intro_auth:"ts_authenticator_pattern_intro_auth",ts_authenticator_pattern_intro_reg:"ts_authenticator_pattern_intro_reg",ts_authenticator_pattern_mismatch:"ts_authenticator_pattern_mismatch",ts_authenticator_pattern_error_min_points:"ts_authenticator_pattern_error_min_points",ts_authenticator_pattern_intro_repeat:"ts_authenticator_pattern_intro_repeat",ts_authenticator_pattern_cta_reset:"ts_authenticator_pattern_cta_reset",ts_authenticator_fingerprint_title_auth:"ts_authenticator_fingerprint_title_auth",ts_authenticator_fingerprint_title_reg:"ts_authenticator_fingerprint_title_reg",ts_authenticator_fingerprint_status_hint:"ts_authenticator_fingerprint_status_hint",ts_authenticator_faceid_title_auth:"ts_authenticator_faceid_title_auth",ts_authenticator_faceid_title_reg:"ts_authenticator_faceid_title_reg",ts_authenticator_touchid_title_reg:"ts_authenticator_touchid_title_reg",ts_authenticator_touchid_title_auth:"ts_authenticator_touchid_title_auth",ts_authenticator_device_biometrics_title_auth:"ts_authenticator_device_biometrics_title_auth",ts_authenticator_device_biometrics_title_reg:"ts_authenticator_device_biometrics_title_reg",ts_authenticator_device_biometrics_intro_auth:"ts_authenticator_device_biometrics_intro_auth",ts_authenticator_device_biometrics_intro_reg:"ts_authenticator_device_biometrics_intro_reg",ts_authenticator_device_biometrics_prompt:"ts_authenticator_device_biometrics_prompt",ts_authenticator_device_biometrics_cancel_cta:"ts_authenticator_device_biometrics_cancel_cta",ts_authenticator_questions_title_auth:"ts_authenticator_questions_title_auth",ts_authenticator_questions_title_reg:"ts_authenticator_questions_title_reg",ts_authenticator_questions_intro_auth:"ts_authenticator_questions_intro_auth",ts_authenticator_questions_intro_reg:"ts_authenticator_questions_intro_reg",ts_authenticator_questions_error_answer_range:"ts_authenticator_questions_error_answer_range",ts_authenticator_questions_left:"ts_authenticator_questions_left",ts_authenticator_questions_error_answer_empty:"ts_authenticator_questions_error_answer_empty",ts_authenticator_questions_remove_this_question_cta:"ts_authenticator_questions_remove_this_question_cta",ts_authenticator_questions_add_question_cta:"ts_authenticator_questions_add_question_cta",ts_authenticator_questions_reg_select_question:"ts_authenticator_questions_reg_select_question",ts_authenticator_questions_reg_select_question_cta:"ts_authenticator_questions_reg_select_question_cta",ts_authenticator_questions_reg_default_answer_placeholder:"ts_authenticator_questions_reg_default_answer_placeholder",ts_authenticator_voice_title_auth:"ts_authenticator_voice_title_auth",ts_authenticator_voice_title_reg:"ts_authenticator_voice_title_reg",ts_authenticator_voice_intro_auth:"ts_authenticator_voice_intro_auth",ts_authenticator_voice_intro_reg:"ts_authenticator_voice_intro_reg",ts_authenticator_voice_passphrase:"ts_authenticator_voice_passphrase",ts_authenticator_voice_passphrase_subtitle:"ts_authenticator_voice_passphrase_subtitle",ts_authenticator_voice_instructions:"ts_authenticator_voice_instructions",ts_authenticator_voice_record_start:"ts_authenticator_voice_record_start",ts_authenticator_voice_record_stop:"ts_authenticator_voice_record_stop",ts_authenticator_voice_request_audio_permission:"ts_authenticator_voice_request_audio_permission",ts_authenticator_voice_error_too_long:"ts_authenticator_voice_error_too_long",ts_authenticator_voice_error_too_short:"ts_authenticator_voice_error_too_short",ts_authenticator_voice_error_too_loud:"ts_authenticator_voice_error_too_loud",ts_authenticator_voice_error_too_weak:"ts_authenticator_voice_error_too_weak",ts_authenticator_voice_error_too_noisy:"ts_authenticator_voice_error_too_noisy",ts_authenticator_voice_error_invalid:"ts_authenticator_voice_error_invalid",ts_authenticator_face_title_auth:"ts_authenticator_face_title_auth",ts_authenticator_face_title_reg:"ts_authenticator_face_title_reg",ts_authenticator_face_intro_auth:"ts_authenticator_face_intro_auth",ts_authenticator_face_intro_reg:"ts_authenticator_face_intro_reg",ts_authenticator_face_error_invalid:"ts_authenticator_face_error_invalid",ts_authenticator_totp_title:"ts_authenticator_totp_title",ts_authenticator_totp_targets_intro:"ts_authenticator_totp_targets_intro",ts_authenticator_totp_input_intro:"ts_authenticator_totp_input_intro",ts_authenticator_totp_input_with_challenge_intro:"ts_authenticator_totp_input_with_challenge_intro",ts_authenticator_totp_input_with_qr_challenge_intro:"ts_authenticator_totp_input_with_qr_challenge_intro",ts_authenticator_totp_qrcode_challenge_step1_message:"ts_authenticator_totp_qrcode_challenge_step1_message",ts_authenticator_totp_qrcode_challenge_step2_message:"ts_authenticator_totp_qrcode_challenge_step2_message",ts_authenticator_totp_code_challenge_step1_message:"ts_authenticator_totp_code_challenge_step1_message",ts_authenticator_totp_code_challenge_step2_message:"ts_authenticator_totp_code_challenge_step2_message",ts_authenticator_totp_input_hint:"ts_authenticator_totp_input_hint",ts_authenticator_totp_targets_recently_used:"ts_authenticator_totp_targets_recently_used",ts_authenticator_totp_targets_current_device:"ts_authenticator_totp_targets_current_device",ts_authenticator_mobile_approve_title:"ts_authenticator_mobile_approve_title",ts_authenticator_mobile_approve_fetching_data:"ts_authenticator_mobile_approve_fetching_data",ts_authenticator_mobile_approve_send:"ts_authenticator_mobile_approve_send",ts_authenticator_mobile_approve_send_to_all:"ts_authenticator_mobile_approve_send_to_all",ts_authenticator_mobile_approve_targets_intro:"ts_authenticator_mobile_approve_targets_intro",ts_authenticator_mobile_approve_targets_recently_used:"ts_authenticator_mobile_approve_targets_recently_used",ts_authenticator_mobile_approve_targets_current_device:"ts_authenticator_mobile_approve_targets_current_device",ts_authenticator_mobile_approve_resend_message:"ts_authenticator_mobile_approve_resend_message",ts_authenticator_mobile_approve_resend_cta:"ts_authenticator_mobile_approve_resend_cta",ts_session_config_title:"ts_session_config_title",ts_session_config_intro:"ts_session_config_intro",ts_session_config_item_action_register:"ts_session_config_item_action_register",ts_session_config_item_action_unregister:"ts_session_config_item_action_unregister",ts_session_config_item_action_reregister:"ts_session_config_item_action_reregister",ts_session_config_item_action_set_as_default:"ts_session_config_item_action_set_as_default",ts_session_config_item_register_result:"ts_session_config_item_register_result",ts_session_config_item_reregister_result:"ts_session_config_item_reregister_result",ts_session_config_item_unregister_result:"ts_session_config_item_unregister_result",ts_session_config_item_default_result:"ts_session_config_item_default_result",ts_session_config_item_register_failed:"ts_session_config_item_register_failed",ts_session_config_item_reregister_failed:"ts_session_config_item_reregister_failed",ts_session_config_item_unregister_failed:"ts_session_config_item_unregister_failed",ts_session_config_item_default_failed:"ts_session_config_item_default_failed",ts_session_config_item_unregister_dialog_title:"ts_session_config_item_unregister_dialog_title",ts_session_config_item_unregister_dialog_message:"ts_session_config_item_unregister_dialog_message",ts_session_config_item_unregister_dialog_cta:"ts_session_config_item_unregister_dialog_cta",ts_session_config_error_dialog_title:"ts_session_config_error_dialog_title",ts_session_totp_title:"ts_session_totp_title",ts_session_totp_content:"ts_session_totp_content",ts_session_totp_unbound_title:"ts_session_totp_unbound_title",ts_session_totp_unbound_content:"ts_session_totp_unbound_content",ts_session_totp_unbound_code:"ts_session_totp_unbound_code",ts_session_totp_nottl_content:"ts_session_totp_nottl_content",ts_session_totp_provision_sa_title:"ts_session_totp_provision_sa_title",ts_session_totp_provision_password_title:"ts_session_totp_provision_password_title",ts_session_totp_provision_pattern_title:"ts_session_totp_provision_pattern_title",ts_session_totp_provision_pin_title:"ts_session_totp_provision_pin_title",ts_session_totp_generation_sa_title:"ts_session_totp_generation_sa_title",ts_session_totp_generation_password_title:"ts_session_totp_generation_password_title",ts_session_totp_generation_pattern_title:"ts_session_totp_generation_pattern_title",ts_session_totp_generation_pin_title:"ts_session_totp_generation_pin_title",ts_session_totp_generation_fingerprint_title:"ts_session_totp_generation_fingerprint_title",ts_session_totp_generation_device_biometrics_title:"ts_session_totp_generation_device_biometrics_title",ts_session_totp_challenge_title_list:"ts_session_totp_challenge_title_list",ts_session_totp_challenge_intro_list:"ts_session_totp_challenge_intro_list",ts_session_totp_challenge_title_textual:"ts_session_totp_challenge_title_textual",ts_session_totp_challenge_intro_textual:"ts_session_totp_challenge_intro_textual",ts_session_totp_challenge_title_qr:"ts_session_totp_challenge_title_qr",ts_session_totp_challenge_intro_qr:"ts_session_totp_challenge_intro_qr",ts_session_approval_approve:"ts_session_approval_approve",ts_session_approval_deny:"ts_session_approval_deny",ts_session_approval_completed_title:"ts_session_approval_completed_title",ts_session_approval_completed_subtitle:"ts_session_approval_completed_subtitle",ts_session_approval_completed_denied_subtitle:"ts_session_approval_completed_denied_subtitle",ts_session_approval_dialog_title:"ts_session_approval_dialog_title",ts_session_approval_dialog_message:"ts_session_approval_dialog_message",ts_session_approval_dialog_cta:"ts_session_approval_dialog_cta",ts_session_approval_approve_failed:"ts_session_approval_approve_failed",ts_session_approval_deny_failed:"ts_session_approval_deny_failed",ts_session_approval_approve_failed_title:"ts_session_approval_approve_failed_title",ts_session_approval_deny_failed_title:"ts_session_approval_deny_failed_title",ts_session_approval_approve_failed_cta:"ts_session_approval_approve_failed_cta",ts_session_approval_deny_failed_cta:"ts_session_approval_deny_failed_cta",ts_session_approval_username:"ts_session_approval_username",ts_session_approval_service:"ts_session_approval_service",ts_session_approval_description:"ts_session_approval_description",ts_session_approval_requested_device:"ts_session_approval_requested_device",ts_session_approval_expiry:"ts_session_approval_expiry",ts_session_approval_requested_location:"ts_session_approval_requested_location",ts_session_approval_request_expires_time:"ts_session_approval_request_expires_time",ts_session_approval_request_has_expired:"ts_session_approval_request_has_expired",ts_session_dm_title:"ts_session_dm_title",ts_session_dm_intro:"ts_session_dm_intro",ts_session_dm_section_current:"ts_session_dm_section_current",ts_session_dm_section_others:"ts_session_dm_section_others",ts_session_dm_last_used_date:"ts_session_dm_last_used_date",ts_session_dm_last_used_location:"ts_session_dm_last_used_location",ts_session_dm_details_title:"ts_session_dm_details_title",ts_session_dm_details_subtitle:"ts_session_dm_details_subtitle",ts_session_dm_details_current_device:"ts_session_dm_details_current_device",ts_session_dm_details_rename_action:"ts_session_dm_details_rename_action",ts_session_dm_details_remove_subtitle:"ts_session_dm_details_remove_subtitle",ts_session_dm_details_remove_action:"ts_session_dm_details_remove_action",ts_session_dm_details_no_other_devices_available:"ts_session_dm_details_no_other_devices_available",ts_session_dm_item_action_dialog_remove_title:"ts_session_dm_item_action_dialog_remove_title",ts_session_dm_item_action_dialog_remove_message:"ts_session_dm_item_action_dialog_remove_message",ts_session_dm_item_action_dialog_remove_cta:"ts_session_dm_item_action_dialog_remove_cta",ts_session_dm_item_action_dialog_rename_title:"ts_session_dm_item_action_dialog_rename_title",ts_session_dm_item_action_dialog_rename_cta:"ts_session_dm_item_action_dialog_rename_cta",ts_session_dm_details_rename_input_hint:"ts_session_dm_details_rename_input_hint",ts_session_dm_item_action_rename_result_positive:"ts_session_dm_item_action_rename_result_positive",ts_session_dm_item_action_rename_result_negative:"ts_session_dm_item_action_rename_result_negative",ts_session_dm_item_action_remove_result_positive:"ts_session_dm_item_action_remove_result_positive",ts_session_dm_item_action_remove_result_negative:"ts_session_dm_item_action_remove_result_negative",ts_session_dm_error_dialog_title:"ts_session_dm_error_dialog_title",ts_session_promotion_title:"ts_session_promotion_title",ts_session_promotion_intro:"ts_session_promotion_intro",ts_session_promotion_skip:"ts_session_promotion_skip",ts_session_promotion_abort:"ts_session_promotion_abort",ts_promise_sa_title:"ts_promise_sa_title",ts_promise_sa_content:"ts_promise_sa_content",ts_promise_co_title_auth:"ts_promise_co_title_auth",ts_promise_co_title_reg:"ts_promise_co_title_reg",ts_promise_fallback_title:"ts_promise_fallback_title",ts_promise_fallback_content:"ts_promise_fallback_content",ts_promise_fallback_action_fallback:"ts_promise_fallback_action_fallback",ts_promise_fallback_action_menu:"ts_promise_fallback_action_menu",ts_promise_fallback_action_retry:"ts_promise_fallback_action_retry",ts_promise_fallback_action_cancel:"ts_promise_fallback_action_cancel",ts_promise_co_content:"ts_promise_co_content",ts_promise_co_abort:"ts_promise_co_abort",ts_promise_co_select:"ts_promise_co_select",ts_promise_co_change:"ts_promise_co_change",ts_promise_co_retry:"ts_promise_co_retry",ts_promise_error_default_title_auth:"ts_promise_error_default_title_auth",ts_promise_error_default_title_reg:"ts_promise_error_default_title_reg",ts_promise_error_default_content_auth:"ts_promise_error_default_content_auth",ts_promise_error_default_content_reg:"ts_promise_error_default_content_reg",ts_promise_error_lock_title:"ts_promise_error_lock_title",ts_promise_error_lock_content:"ts_promise_error_lock_content",ts_promise_invalid_authenticator_title:"ts_promise_invalid_authenticator_title",ts_promise_invalid_authenticator_content:"ts_promise_invalid_authenticator_content",ts_promise_invalid_authenticator_cta:"ts_promise_invalid_authenticator_cta",ts_promise_rejection_policy_title:"ts_promise_rejection_policy_title",ts_promise_rejection_policy_content:"ts_promise_rejection_policy_content",ts_promise_rejection_policy_cta:"ts_promise_rejection_policy_cta",ts_promise_rejection_locked_user_title:"ts_promise_rejection_locked_user_title",ts_promise_rejection_locked_user_content:"ts_promise_rejection_locked_user_content",ts_promise_rejection_locked_user_cta:"ts_promise_rejection_locked_user_cta",ts_promise_rejection_locked_device_title:"ts_promise_rejection_locked_device_title",ts_promise_rejection_locked_device_content:"ts_promise_rejection_locked_device_content",ts_promise_rejection_locked_device_cta:"ts_promise_rejection_locked_device_cta",ts_promise_rejection_locked_application_title:"ts_promise_rejection_locked_application_title",ts_promise_rejection_locked_application_content:"ts_promise_rejection_locked_application_content",ts_promise_rejection_locked_application_cta:"ts_promise_rejection_locked_application_cta",ts_promise_rejection_approval_expired_title:"ts_promise_rejection_approval_expired_title",ts_promise_rejection_approval_expired_content:"ts_promise_rejection_approval_expired_content",ts_promise_rejection_approval_expired_cta:"ts_promise_rejection_approval_expired_cta",ts_session_authenticator_expired_title:"ts_session_authenticator_expired_title",ts_session_authenticator_expired_content:"ts_session_authenticator_expired_content",ts_promise_rejection_feature_not_supported_title:"ts_promise_rejection_feature_not_supported_title",ts_promise_rejection_feature_not_supported_content:"ts_promise_rejection_feature_not_supported_content",ts_promise_rejection_feature_not_supported_cta:"ts_promise_rejection_feature_not_supported_cta",ts_promise_rejection_cannot_consume_ticket_title:"ts_promise_rejection_cannot_consume_ticket_title",ts_promise_rejection_cannot_consume_ticket_content:"ts_promise_rejection_cannot_consume_ticket_content",ts_promise_rejection_cannot_consume_ticket_cta:"ts_promise_rejection_cannot_consume_ticket_cta",ts_promise_rejection_username_already_exists_title:"ts_promise_rejection_username_already_exists_title",ts_promise_rejection_username_already_exists_content:"ts_promise_rejection_username_already_exists_content",ts_promise_rejection_username_already_exists_cta:"ts_promise_rejection_username_already_exists_cta",ts_promise_rejection_authenticator_fatal_error_title:"ts_promise_rejection_authenticator_fatal_error_title",ts_promise_rejection_authenticator_fatal_error_content:"ts_promise_rejection_authenticator_fatal_error_content",ts_promise_rejection_authenticator_fatal_error_cta:"ts_promise_rejection_authenticator_fatal_error_cta",ts_accessibility_totp_reset:"ts_accessibility_totp_reset",ts_accessibility_totp_reader:"ts_accessibility_totp_reader",ts_accessibility_totp_no_ttl:"ts_accessibility_totp_no_ttl",ts_accessibility_configuration_cta_register:"ts_accessibility_configuration_cta_register",ts_accessibility_configuration_cta_unregister:"ts_accessibility_configuration_cta_unregister",ts_accessibility_configuration_cta_reregister:"ts_accessibility_configuration_cta_reregister",ts_accessibility_input_reader:"ts_accessibility_input_reader",ts_accessibility_input_pin_cell:"ts_accessibility_input_pin_cell",ts_accessibility_input_reset:"ts_accessibility_input_reset",ts_accessibility_authenticator_list_locked:"ts_accessibility_authenticator_list_locked",ts_accessibility_authenticator_list_disabled:"ts_accessibility_authenticator_list_disabled",ts_accessibility_authenticator_list_enabled:"ts_accessibility_authenticator_list_enabled",ts_accessibility_authenticator_list_default:"ts_accessibility_authenticator_list_default",ts_accessibility_hide_input_field:"ts_accessibility_hide_input_field",ts_accessibility_show_input_field:"ts_accessibility_show_input_field",ts_accessibility_back:"ts_accessibility_back",ts_accessibility_cancel:"ts_accessibility_cancel",ts_accessibility_password_enter_password:"ts_accessibility_password_enter_password",ts_accessibility_password_enter_password_again:"ts_accessibility_password_enter_password_again",ts_accessibility_password_error_reg_no_match:"ts_accessibility_password_error_reg_no_match",ts_plugin_dynamic_form_mandatory:"ts_plugin_dynamic_form_mandatory",ts_plugin_dynamic_form_error_mandatory:"ts_plugin_dynamic_form_error_mandatory",ts_plugin_dynamic_form_error_invalid:"ts_plugin_dynamic_form_error_invalid",ts_plugin_dynamic_form_error_too_long:"ts_plugin_dynamic_form_error_too_long",ts_plugin_dynamic_form_error_not_phone:"ts_plugin_dynamic_form_error_not_phone",ts_plugin_dynamic_form_error_not_email:"ts_plugin_dynamic_form_error_not_email",ts_plugin_dynamic_form_error_else:"ts_plugin_dynamic_form_error_else",ts_plugin_dynamic_form_table_title:"ts_plugin_dynamic_form_table_title",ts_plugin_dynamic_form_table_title_item:"ts_plugin_dynamic_form_table_title_item",ts_plugin_dynamic_form_error_general:"ts_plugin_dynamic_form_error_general",ts_plugin_dynamic_form_item_cta_positive:"ts_plugin_dynamic_form_item_cta_positive",ts_plugin_dynamic_form_item_cta_cancel:"ts_plugin_dynamic_form_item_cta_cancel",ts_plugin_dynamic_form_item_cta_select_all:"ts_plugin_dynamic_form_item_cta_select_all",ts_plugin_dynamic_form_item_cta_clear_all:"ts_plugin_dynamic_form_item_cta_clear_all",ts_plugin_dynamic_form_item_phone_prefix:"ts_plugin_dynamic_form_item_phone_prefix",ts_plugin_dynamic_form_item_phone_prefix_dialog_title:"ts_plugin_dynamic_form_item_phone_prefix_dialog_title",ts_session_scan_qr_title:"ts_session_scan_qr_title",ts_session_scan_qr_hint:"ts_session_scan_qr_hint",ts_gen_recovery:"ts_gen_recovery"},co=0,br={generate:function(){return"".concat("xmui-id-").concat((new Date).getTime().toString(),"-").concat(++co)}},yi="xmui-list-item",lo=function(n){function t(n,i){var f,h=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o;return r(this,t),(f=s(this,u(t).call(this))).key=n,f.id=br.generate(),f.className=yi,h&&f.addClass("".concat(yi,"--section-start")),o=new e,o.className="".concat(yi,"_hover-indicator"),f.contentContainer=new e,f.contentContainer.className="".concat(yi,"_content-container"),f.appendChildren(o,f.contentContainer),i&&f.addCheckbox(),f.role="option",f}return o(t,n),f(t,[{key:"setContent",value:function(n){this.contentContainer.setContent(n)}},{key:"addCheckbox",value:function(){var n=new e;n.className="".concat(yi,"_checkbox");this.appendChild(n)}}]),t}(e);!function(n){n[n.Backspace=8]="Backspace";n[n.Tab=9]="Tab";n[n.Enter=13]="Enter";n[n.Shift=16]="Shift";n[n.Ctrl=17]="Ctrl";n[n.Alt=18]="Alt";n[n.Escape=27]="Escape";n[n.Space=32]="Space";n[n.PageUp=33]="PageUp";n[n.PageDown=34]="PageDown";n[n.End=35]="End";n[n.Home=36]="Home";n[n.LeftArrow=37]="LeftArrow";n[n.UpArrow=38]="UpArrow";n[n.RightArrow=39]="RightArrow";n[n.DownArrow=40]="DownArrow";n[n.Zero=48]="Zero";n[n.One=49]="One";n[n.Two=50]="Two";n[n.Three=51]="Three";n[n.Four=52]="Four";n[n.Five=53]="Five";n[n.Six=54]="Six";n[n.Seven=55]="Seven";n[n.Eight=56]="Eight";n[n.Nine=57]="Nine"}(rt||(rt={}));cf=function(){function n(t){r(this,n);this.container=t;this.container.ariaActiveDescendant="";this.container.onKeydown(this.handleNavigation.bind(this))}return f(n,[{key:"onSelect",value:function(n){this.selectCB=n}},{key:"activateItem",value:function(n){n&&n!==this.activeItem&&(this.deactivateItem(),this.activeItem=n,n.active=!0,this.container.ariaActiveDescendant=n.id,this.scrollToItem(n))}},{key:"deactivateItem",value:function(n){var t=null==n||n===this.activeItem?this.activeItem:null;t&&(this.activeItem=null,t.active=!1,this.container.ariaActiveDescendant="")}},{key:"handleNavigation",value:function(n,t){switch(t.keyCode){case rt.DownArrow:this.handleDownArrow();t.preventDefault();t.stopPropagation();break;case rt.UpArrow:this.handleUpArrow();t.preventDefault();t.stopPropagation();break;case rt.Enter:case rt.Space:this.handleEnter();t.stopPropagation()}}},{key:"handleDownArrow",value:function(){var n=this.container.getNextChild(this.activeItem);this.activateItem(n)}},{key:"handleUpArrow",value:function(){var n=this.container.getPrevChild(this.activeItem);this.activateItem(n)}},{key:"handleEnter",value:function(){this.activeItem&&this.selectCB&&this.selectCB(this.activeItem)}},{key:"scrollToItem",value:function(n){var t=this.container.htmlElement,i=n.htmlElement,u,r;t.scrollHeight>t.clientHeight&&(u=t.clientHeight+t.scrollTop,r=i.offsetTop+i.offsetHeight,r>u?t.scrollTop=r-t.clientHeight:i.offsetTop<t.scrollTop&&(t.scrollTop=i.offsetTop))}}]),n}();!function(n){n[n.None=0]="None";n[n.Single=1]="Single";n[n.SingleMouseup=2]="SingleMouseup";n[n.Multiple=3]="Multiple"}(d||(d={}));var kr,dr,bt,si,lf=function(n){function t(){var n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.Single,f=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r(this,t),(n=s(this,u(t).call(this))).listSelectionMode=i,n.activateOnHover=f,n.selectionChangedCB=[],n.itemClickedCB=[],n.selectedItems=[],n.ariaMultiselectable=i===d.Multiple,n.handleItemClicked=n.handleItemClicked.bind(y(n)),n.handleMouseEvents=n.handleMouseEvents.bind(y(n)),n.handleItemMouseenter=n.handleItemMouseenter.bind(y(n)),n.handleItemMouseleave=n.handleItemMouseleave.bind(y(n)),n.keyboardNav=new cf(y(n)),n.keyboardNav.onSelect(function(t){t&&!t.disabled&&n.handleSelectionChanged(t)}),n.onMouseup(n.handleMouseEvents),n.onMousedown(n.handleMouseEvents),n.onClick(n.handleMouseEvents),n}return o(t,n),f(t,[{key:"onSelectionChanged",value:function(n){this.selectionChangedCB.push(n)}},{key:"onItemClicked",value:function(n){this.itemClickedCB.push(n)}},{key:"clearSelection",value:function(){this.selectedItems.forEach(function(n){n.selected=!1});this.selectedItems=[]}},{key:"clearActive",value:function(){this.deactivateItem()}},{key:"activateItem",value:function(n){this.keyboardNav.activateItem(n)}},{key:"deactivateItem",value:function(n){this.keyboardNav.deactivateItem(n)}},{key:"addItem",value:function(n){this.selectionMode===d.SingleMouseup?n.onMouseup(this.handleItemClicked):n.onClick(this.handleItemClicked);this.activateOnHover&&this.activateItemOnHover(n);this.appendChild(n)}},{key:"activateItemOnHover",value:function(n){n.onMouseenter(this.handleItemMouseenter);n.onMouseleave(this.handleItemMouseenter)}},{key:"handleItemMouseenter",value:function(n){this.activateItem(n)}},{key:"handleItemMouseleave",value:function(n){this.deactivateItem(n)}},{key:"addToSelection",value:function(n){n.selected=!0;-1===this.selectedItems.indexOf(n)&&(this.selectedItems.push(n),this.notifySelectionChanged())}},{key:"removeFromSelection",value:function(n){n.selected=!1;var t=this.selectedItems.indexOf(n);t>-1&&(this.selectedItems.splice(t,1),this.notifySelectionChanged())}},{key:"handleMouseEvents",value:function(){event.stopPropagation()}},{key:"handleItemClicked",value:function(n){n.disabled||this.handleSelectionChanged(n);this.activateItem(n)}},{key:"handleSelectionChanged",value:function(n){switch(this.listSelectionMode){case d.Multiple:this.handleMultipleSelectionChanged(n);break;case d.Single:case d.SingleMouseup:this.handleSingleSelectionChanged(n);break;case d.None:this.itemClickedCB.forEach(function(t){t(n.key)})}}},{key:"handleMultipleSelectionChanged",value:function(n){n.selected?this.removeFromSelection(n):this.addToSelection(n)}},{key:"handleSingleSelectionChanged",value:function(n){n.selected=!n.selected;this.clearSelection();this.addToSelection(n)}},{key:"notifySelectionChanged",value:function(){var n=this.selectedItems.map(function(n){return n.key});this.selectionChangedCB.forEach(function(t){t(n)})}},{key:"selectionMode",get:function(){return this.listSelectionMode}}]),t}(e),ao="xmui-list",ti=function(n){function t(){var n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.Single;return r(this,t),(n=s(this,u(t).call(this,i))).shouldStartSection=!1,n.className=ao,n.role="listbox",n.tabindex=0,n}return o(t,n),f(t,[{key:"addListItem",value:function(n,t,i){var r=new lo(n,this.selectionMode===d.Multiple,this.shouldStartSection);r.setContent(i);r.disabled=t;r.selected=!1;this.shouldStartSection=!1;this.addItem(r)}},{key:"startSection",value:function(){this.shouldStartSection=!0}}]),t}(lf),kt="xmui-list-item-content",ii=function(n){function t(n){var f,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,b=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,k=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a,h,c,o,l,y;return(r(this,t),(f=s(this,u(t).call(this))).className=kt,w)&&(a=new e,a.className="".concat(kt,"_icon ").concat(w),f.appendChild(a)),h=new e,(h.className="".concat(kt,"_text-container"),n)&&(c=new v,c.setText(n),c.className="".concat(kt,"_title"),o=new e,o.className="".concat(kt,"_title-container"),o.appendChild(c),d&&d.forEach(function(n){var t=new e;t.className="".concat(kt,"_icon-state ").concat(n);t.automationId=i.list_item_icon_state;o.appendChild(t)}),k&&k.forEach(function(n){o.appendChild(n)}),h.appendChild(o)),p&&(l=new v,l.setText(p),l.className="".concat(kt,"_info"),h.appendChild(l)),(f.appendChild(h),b)&&(y=new e,y.className="".concat(kt,"_space"),f.appendChild(y),f.appendChild(b)),f}return o(t,n),t}(e),pi=function(){function n(){r(this,n)}return f(n,null,[{key:"getAuthenticatorIcon",value:function(n){if(!kr){var t,i=com.ts.mobile.sdk.AuthenticatorType;c(t={},i.Password,l.PasswordAuth);c(t,i.Pincode,l.PincodeAuth);c(t,i.Pattern,l.PatternAuth);c(t,i.Otp,l.OtpAuth);c(t,i.Voice,l.VoiceAuth);c(t,i.Questions,l.QuestionsAuth);c(t,i.Totp,l.TotpAuth);c(t,i.MobileApprove,l.MobileApproveAuth);c(t,i.Generic,l.GenericAuth);kr=t}return kr[n]}},{key:"getChannelIcon",value:function(n){if(!dr){var t,i=com.ts.mobile.sdk.OtpChannel;c(t={},i.Sms,l.SmsChannel);c(t,i.Email,l.EmailChannel);c(t,i.PushNotification,l.PushChannel);c(t,i.VoiceCall,l.VoiceChannel);dr=t}return dr[n]}}]),n}();!function(n){n.Button="button";n.Submit="submit"}(bt||(bt={})),function(n){n.Normal="normal";n.Alert="alert";n.Recovery="recovery"}(si||(si={}));var af,vo="".concat("xmui-button","--"),a=function(n){function t(n){var i,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:si.Normal,e;return r(this,t),(i=s(this,u(t).call(this))).buttonMode=f,i.automationId=n,e=vo+f,i.addClass(e),i}return o(t,n),f(t,[{key:"buildElement",value:function(){return it('<button class="'.concat("xmui-button",'"><\/button>'))}},{key:"label",set:function(n){this.element.text(n)},get:function(){return this.htmlElement.innerText}},{key:"form",set:function(n){this.attr={form:n}}},{key:"type",set:function(n){this.attr={type:n}}},{key:"disabled",set:function(n){wt(u(t.prototype),"disabled",n,this,!0);this.htmlElement.disabled=n}}]),t}(ai),wi=function(n){function e(n,f,o){var h,c=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return r(this,e),(h=s(this,u(e).call(this,n,f))).actionContext=o,h.uiContext=o.getUiContext(),c&&(h._cancelButton=new a(i.button_cancel),h._cancelButton.label=h.uiContext.getString(t.ts_gen_cancel),h._cancelButton.onClick(function(){return h.handleCancelButtonClicked()}),h.addLeftButton(h.cancelButton)),h.addEscapeOptionButtons(o.getEscapeOptions()),h}return o(e,n),f(e,[{key:"addEscapeOptionButtons",value:function(n){var t=this;n.filter(function(n){return n.getPresentation()===com.ts.mobile.sdk.ActionEscapeOptionPresentation.Action}).forEach(function(n){var r=new a(i.button_escape);r.label=n.getDisplayName();r.onClick(function(){return t.handleEscapeButtonClicked(n)});t.addLeftButton(r)})}},{key:"handleEscapeButtonClicked",value:function(n){this.onEscapeCB&&this.onEscapeCB(n)}},{key:"onCancel",value:function(n){this.onCancelCB=n}},{key:"onEscape",value:function(n){this.onEscapeCB=n}},{key:"handleCancelButtonClicked",value:function(){var n=this.actionContext.getEscapeOptions().filter(function(n){return n.getPresentation()===com.ts.mobile.sdk.ActionEscapeOptionPresentation.Cancel});n.length?this.onEscapeCB&&this.onEscapeCB(n[0]):this.onCancelCB&&this.onCancelCB()}},{key:"cancelButton",get:function(){return this._cancelButton}}]),e}(oi),yo="xmui-select-authenticator",vf=function(n){function t(n){var f,e;return r(this,t),e=(f=s(this,u(t).call(this,i.page_select_authenticator,yo,n))).createContent(),f.setContent(e),f}return o(t,n),f(t,[{key:"createContent",value:function(){var n=this;return this.authList=new ti,this.authList.onSelectionChanged(function(t){t.length&&n.onSubmitCB&&n.onSubmitCB(t[0])}),this.authList.focus(),this.authList}},{key:"addAuthenticator",value:function(n,t,i,r){var u=pi.getAuthenticatorIcon(i)||pi.getAuthenticatorIcon(com.ts.mobile.sdk.AuthenticatorType.Generic),f=new ii(t,null,u,null,null,r?[l.LockedState]:null);this.authList.addListItem(n,r,f)}},{key:"onSubmit",value:function(n){this.onSubmitCB=n}}]),t}(wi);!function(n){n[n.Resume=-1]="Resume";n[n.Continue=0]="Continue";n[n.Cancel=1]="Cancel"}(af||(af={}));var gr,nu,tu,iu,g=function(){function n(){r(this,n)}return f(n,null,[{key:"createContinueConfirmationInput",value:function(){return com.ts.mobile.sdk.ConfirmationInput.create(0)}},{key:"createCancelConfirmationInput",value:function(){return com.ts.mobile.sdk.ConfirmationInput.create(1)}},{key:"createResumeConfirmationInput",value:function(){return com.ts.mobile.sdk.ConfirmationInput.create(-1)}},{key:"createCancelAuthenticatorRequest",value:function(){var n=com.ts.mobile.sdk.ControlRequest.create(com.ts.mobile.sdk.ControlRequestType.CancelAuthenticator);return com.ts.mobile.sdk.InputOrControlResponse.createControlResponse(n)}},{key:"isContinueConfirmationInput",value:function(n){return 0===n}},{key:"isResumeConfirmationInput",value:function(n){return-1===n}},{key:"createTargetsSelectionResponse",value:function(n){var t=com.ts.mobile.sdk.TargetBasedAuthenticatorInput.createTargetsSelectionRequest(n);return com.ts.mobile.sdk.InputOrControlResponse.createInputResponse(t)}},{key:"createAbortControlResponse",value:function(){var n=com.ts.mobile.sdk.ControlRequest.create(com.ts.mobile.sdk.ControlRequestType.AbortAuthentication);return com.ts.mobile.sdk.InputOrControlResponse.createControlResponse(n)}},{key:"getDeviceNameFromDeviceDetails",value:function(t){var i=t.getAlias();return n.getDeviceName(i,t)}},{key:"getLastAccessedFromDeviceDetails",value:function(n,i){var r=new Date(i.getLastAccessed()).toLocaleString();return n.formatString(t.ts_authenticator_mobile_approve_targets_recently_used,[r])}},{key:"getDeviceName",value:function(n,t){var i=t.getModel(),r=t.getOsType(),u=t.getOsVersion();return n||"".concat(i," ").concat(r," ").concat(u)}}]),n}(),po="xmui-information-dialog-page",wo=function(n){function f(n,e){var h,o;return r(this,f),(h=s(this,u(f).call(this,i.dialog_information,po))).automationId=i.dialog_information,o=new a(i.button_continue),o.label=e||n.getString(t.ts_authenticator_password_cta_positive),o.value=!0,h.addRightButton(o),o.focus(),h}return o(f,n),f}(er),et=function(){function n(){r(this,n)}return f(n,null,[{key:"getAuthenticatorNameKey",value:function(n){return"".concat("ts_authenticator_").concat(n)}},{key:"getAuthenticatorDescriptionKey",value:function(n){return"question"==n&&(n="questions"),"".concat("ts_authenticator_").concat(n,"_description")}}]),n}(),ot=new(function(){function n(){r(this,n);this._isLogEnabled=!0}return f(n,[{key:"init",value:function(){this.lastPage=null;this.isBusy=!1;this.isLogEnabled=!0}},{key:"lastPage",set:function(n){this._lastPage=n},get:function(){return this._lastPage}},{key:"isBusy",set:function(n){this._isBusy=n},get:function(){return this._isBusy}},{key:"isLogEnabled",set:function(n){this._isLogEnabled=n},get:function(){return this._isLogEnabled}}]),n}()),bo=function(n){function t(){var n,i;return r(this,t),(n=s(this,u(t).call(this))).className="xmui-busy-overlay",i=new e,i.className="xmui-busy-overlay_icon",n.appendChild(i),n}return o(t,n),t}(e),h=function(){function n(){r(this,n)}return f(n,null,[{key:"getContainer",value:function(n){var t,i;return n&&n.uiContainer&&(t=it(n.uiContainer)),null!=t&&0!==t.length||0===(t=it("#transmitContainer")).length&&(t=it('<div                                             id="transmitContainer"                                             style="position: relative; width: 100%; height: 100%">'),it(document.documentElement).append(t)),i=t.find("#xmui-main-container"),0===i.length&&(i=it('<div                                      id="xmui-main-container"                                      style="position:relative; width:100%; height:100%">'),t.content(i)),i}},{key:"clearContainer",value:function(t){ot.lastPage=null;n.getContainer(t).empty()}},{key:"getUsernameFromClientContext",value:function(n){return n&&n.username}},{key:"activityStarted",value:function(t){if(ot.lastPage)ot.lastPage.busy=!0;else{n.clearContainer(t);var i=n.getContainer(t);(new bo).appendInto(i)}}},{key:"activityEnded",value:function(t){ot.lastPage?ot.lastPage.busy=!1:n.clearContainer(t)}},{key:"setLogEnabled",value:function(n){ot.isLogEnabled=n}},{key:"log",value:function(n){ot.isLogEnabled&&console.log(n)}},{key:"renderPage",value:function(t,i){this.clearContainer(i);t.appendInto(n.getContainer(i));ot.lastPage=t}},{key:"presentUI",value:function(t,i){this.clearContainer(i);n.getContainer(i).append(t);ot.lastPage=null}},{key:"renderModal",value:function(t,i){t.appendInto(n.getContainer(i))}},{key:"getControlActionButtonsInfo",value:function(){var n;return gr||(c(n={},com.ts.mobile.sdk.ControlRequestType.ChangeMethod,{automationId:i.button_change_method,label:t.ts_promise_co_change,positionLeft:!1}),c(n,com.ts.mobile.sdk.ControlRequestType.AbortAuthentication,{automationId:i.button_abort,label:t.ts_promise_co_abort,positionLeft:!0,isDefault:!0}),c(n,com.ts.mobile.sdk.ControlRequestType.RetryAuthenticator,{automationId:i.button_retry,label:t.ts_promise_co_retry,positionLeft:!1}),c(n,com.ts.mobile.sdk.ControlRequestType.SelectMethod,{automationId:i.button_select_method,label:t.ts_promise_co_select,positionLeft:!1}),c(n,com.ts.mobile.sdk.ControlRequestType.CancelAuthenticator,{automationId:i.button_cancel,label:t.ts_gen_cancel,positionLeft:!1,isDefault:!0}),gr=n),gr}},{key:"getRecoveryActionButtonsInfo",value:function(){var n;return nu||(c(n={},com.ts.mobile.sdk.AuthenticationErrorRecovery.ChangeAuthenticator,{automationId:i.button_change_method,label:t.ts_promise_co_change,positionLeft:!1}),c(n,com.ts.mobile.sdk.AuthenticationErrorRecovery.Fail,{automationId:i.button_abort,label:t.ts_promise_co_abort,positionLeft:!0,isDefault:!0}),c(n,com.ts.mobile.sdk.AuthenticationErrorRecovery.RetryAuthenticator,{automationId:i.button_retry,label:t.ts_promise_co_retry,positionLeft:!1}),c(n,com.ts.mobile.sdk.AuthenticationErrorRecovery.SelectAuthenticator,{automationId:i.button_select_method,label:t.ts_promise_co_select,positionLeft:!1}),nu=n),nu}},{key:"getFallbackActionButtonsInfo",value:function(){var n;return tu||(c(n={},com.ts.mobile.sdk.AuthenticatorFallbackAction.Fallback,{automationId:i.button_change_method,label:t.ts_promise_co_change,positionLeft:!1}),c(n,com.ts.mobile.sdk.AuthenticatorFallbackAction.Cancel,{automationId:i.button_abort,label:t.ts_promise_co_abort,positionLeft:!0,isDefault:!0}),c(n,com.ts.mobile.sdk.AuthenticatorFallbackAction.Retry,{automationId:i.button_retry,label:t.ts_promise_co_retry,positionLeft:!1}),c(n,com.ts.mobile.sdk.AuthenticatorFallbackAction.AuthMenu,{automationId:i.button_select_method,label:t.ts_promise_co_select,positionLeft:!1}),tu=n),tu}},{key:"buildDialogButtons",value:function(n,t,i,r){i.forEach(function(i){var f=r[i],u;f&&(u=new a(f.automationId),u.value=i.toString(),u.label=t.getString(f.label),f.positionLeft?n.addLeftButton(u):n.addRightButton(u))})}},{key:"failureDataToPolicyRejectionDialogParams",value:function(n,i){var e,r=null,f=i.getUiContext(),u;if(n&&n.reason){u=n.reason;switch(u.type){case"policy":r={title:t.ts_promise_rejection_policy_title,text:t.ts_promise_rejection_policy_content,buttonText:t.ts_promise_rejection_policy_cta};break;case"approval_expired":r={title:t.ts_promise_rejection_approval_expired_title,text:t.ts_promise_rejection_approval_expired_content,buttonText:t.ts_promise_rejection_approval_expired_cta};break;case"feature_not_supported":r={title:t.ts_promise_rejection_feature_not_supported_title,text:t.ts_promise_rejection_feature_not_supported_content,buttonText:t.ts_promise_rejection_feature_not_supported_cta};break;case"cannot_consume_ticket":r={title:t.ts_promise_rejection_cannot_consume_ticket_title,text:t.ts_promise_rejection_cannot_consume_ticket_content,buttonText:t.ts_promise_rejection_cannot_consume_ticket_cta};break;case"username_already_exists":e=[u.data&&u.data.username];r={title:t.ts_promise_rejection_username_already_exists_title,text:t.ts_promise_rejection_username_already_exists_content,buttonText:t.ts_promise_rejection_username_already_exists_cta};break;case"locked":switch(u.data&&u.data.lock_type){case"user":r={title:t.ts_promise_rejection_locked_user_title,text:t.ts_promise_rejection_locked_user_content,buttonText:t.ts_promise_rejection_locked_user_cta};break;case"device":r={title:t.ts_promise_rejection_locked_device_title,text:t.ts_promise_rejection_locked_device_content,buttonText:t.ts_promise_rejection_locked_device_cta};break;case"application":r={title:t.ts_promise_rejection_locked_application_title,text:t.ts_promise_rejection_locked_application_content,buttonText:t.ts_promise_rejection_locked_application_cta}}}}return r&&(r.title=f.getString(r.title),r.text=e?f.formatString(r.text,e):f.getString(r.text),r.buttonText=f.getString(r.buttonText)),r}}]),n}(),yf=function(n){function t(n,i,f,e,o,h,c){var l;return r(this,t),(l=s(this,u(t).call(this,n,i,f,e))).dialogContent=new hf,l.dialogContent.setDialogTitle(o),l.dialogContent.setDialogMessage(h),l.dialogContent.setDialogIconClass(c),l.setContent(l.dialogContent),l}return o(t,n),t}(wi),ko="xmui-confirmation-action-dialog-page",go=function(n){function t(n,f,e,o,h,c){var l;return r(this,t),(l=s(this,u(t).call(this,i.dialog_confirm,ko,n,null!=c,f,e,o))).continueButton=new a(i.button_continue),l.continueButton.label=h,l.continueButton.onClick(function(){return l.onContinueCB&&l.onContinueCB()}),l.addRightButton(l.continueButton),c&&(l.cancelButton.label=c),l}return o(t,n),f(t,[{key:"onContinue",value:function(n){this.onContinueCB=n}}]),t}(yf),st=function(){function n(){r(this,n)}return f(n,null,[{key:"promiseCancelAction",value:function(n,t,i,r){var u,f=function(n){return n.indexOf(com.ts.mobile.sdk.ControlRequestType.SelectMethod)>-1?com.ts.mobile.sdk.ControlRequestType.SelectMethod:n.indexOf(com.ts.mobile.sdk.ControlRequestType.ChangeMethod)>-1?com.ts.mobile.sdk.ControlRequestType.ChangeMethod:com.ts.mobile.sdk.ControlRequestType.AbortAuthentication};return u=1==i.overrideAuthenticatorCancelBehavior?f(n):r==com.ts.mobile.sdk.AuthenticatorSessionMode.Authentication?f(n):com.ts.mobile.sdk.ControlRequestType.AbortAuthentication,new Promise(function(n){n(com.ts.mobile.sdk.ControlRequest.create(u))})}},{key:"promiseCancelActionForNonBaseAuthenticatorSession",value:function(){var n=com.ts.mobile.sdk.ControlRequestType.AbortAuthentication;return Promise.resolve(com.ts.mobile.sdk.ControlRequest.create(n))}},{key:"promiseRecoveryForError",value:function(n,i,r,u,f,e,o){var c=!1,a=n.getData(),s,h,v;return a&&a.additional_data&&a.additional_data.locked&&(c=!0),v=i,i.indexOf(com.ts.mobile.sdk.AuthenticationErrorRecovery.ChangeAuthenticator)>=0&&i.indexOf(com.ts.mobile.sdk.AuthenticationErrorRecovery.SelectAuthenticator)>=0&&(v=i.filter(function(n){return n!=com.ts.mobile.sdk.AuthenticationErrorRecovery.ChangeAuthenticator})),c?(s=t.ts_promise_error_lock_title,h=u.getString(t.ts_promise_error_lock_content)):e===com.ts.mobile.sdk.AuthenticatorSessionMode.Authentication?(s=t.ts_promise_error_default_title_auth,h=u.formatString(t.ts_promise_error_default_content_auth,[n.getMessage()])):(s=t.ts_promise_error_default_title_reg,h=u.formatString(t.ts_promise_error_default_content_reg,[n.getMessage()])),this.createRecoveryFromErrorDialog(o,u.getString(s),h,c?l.AuthLocked:l.Error,u,f,v)}},{key:"createRecoveryFromErrorDialog",value:function(n,r,u,f,e,o,s){return new Promise(function(u){var c=new er(i.dialog_recovery,"xmui-error-recovery-dialog-page"),l;c.setUserName(n);c.setDialogTitle(r);c.setDialogMessage(e.getString(t.ts_promise_co_content));c.setDialogIconClass(f);c.onSelect(function(n){c.blockInteraction();u(parseInt(n))});l=h.getRecoveryActionButtonsInfo();h.buildDialogButtons(c,e,s,l);h.renderPage(c,o)})}},{key:"promiseAuthenticator",value:function(n,i,r){var u=i.getUiContext();return new Promise(function(f){var o={},e=new vf(i),s=h.getUsernameFromClientContext(r);s&&e.setUserName(s);e.setTitle(u.getString(t.ts_promise_sa_title));e.setInstructions(u.getString(t.ts_promise_sa_content));n.forEach(function(n){var t=n.getAuthenticator(),i,r,f;t.getEnabled()&&!t.getLocked()&&t.getRegistered()&&(i=t.getAuthenticatorId(),r=t.getType(),o[i]=t,f=u.getString(et.getAuthenticatorNameKey(i)),e.addAuthenticator(i,f,r,!1))});e.onSubmit(function(n){e.blockInteraction();f(com.ts.mobile.sdk.AuthenticatorSelectionResult.createSelectionRequest(o[n]))});e.onCancel(function(){e.blockInteraction();f(com.ts.mobile.sdk.AuthenticatorSelectionResult.createAbortRequest())});e.onEscape(function(n){e.blockInteraction();f(com.ts.mobile.sdk.AuthenticatorSelectionResult.createEscapeRequest(n,{}))});h.renderPage(e,r)})}},{key:"promiseInformationInput",value:function(n,t,i,r,u,f,e){return new Promise(function(o){var s=new wo(f,u);n&&s.setUserName(n);s.setDialogTitle(i);s.setDialogMessage(r);s.setDialogIconClass(t);s.onSelect(function(){s.blockInteraction();o()});h.renderPage(s,e)})}},{key:"internalPromiseConfirmationOrInformationActionInput",value:function(n,t,i,r,u,f,e,o,s){return new Promise(function(c){var l=new go(o,i,r,t,u,e);n&&l.setUserName(n);l.onContinue(function(){c(com.ts.mobile.sdk.ConfirmationInput.create(f))});l.onCancel(function(){c(g.createCancelConfirmationInput())});l.onEscape(function(n){c(com.ts.mobile.sdk.ConfirmationInput.createEscapeRequest(n,{}))});h.renderPage(l,s)})}},{key:"promiseInformationActionInput",value:function(n,t,i,r,u,f,e){return this.internalPromiseConfirmationOrInformationActionInput(n,t,i,r,u,-1,null,f,e)}},{key:"promiseConfirmationActionInput",value:function(n,t,i,r,u,f,e,o){return this.internalPromiseConfirmationOrInformationActionInput(n,t,i,r,u,0,f,e,o)}},{key:"promiseAuthenticatorFallbackAction",value:function(n,r,u,f,e,o){return new Promise(function(u){var c=e.getUiContext(),v=f.description.getAuthenticatorId(),y=c.getString(et.getAuthenticatorNameKey(v)),s=new er(i.dialog_fallback,"xmui-auth-fallback-dialog-page"),a;n&&s.setUserName(n);s.setDialogTitle(c.formatString(t.ts_promise_fallback_title,[y]));s.setDialogMessage(c.getString(t.ts_promise_fallback_content));s.setDialogIconClass(l.Fallback);s.onSelect(function(n){s.blockInteraction();u(parseInt(n))});a=h.getFallbackActionButtonsInfo();h.buildDialogButtons(s,c,r,a);h.renderPage(s,o)})}},{key:"promisePolicyRejectionInput",value:function(t,i,r,u,f,e){var s={title:t,text:i,buttonText:r},o,c;return(t&&i&&r||(s=h.failureDataToPolicyRejectionDialogParams(u,f)))?(o=u,c=o&&o.reason&&o.reason.data&&o.reason.data.username||h.getUsernameFromClientContext(e),n.promiseInformationInput(c,l.Rejection,s.title,s.text,s.buttonText,f.getUiContext(),e).then(function(){return g.createResumeConfirmationInput()})):Promise.resolve(g.createResumeConfirmationInput())}}]),n}(),ns="xmui-confirmation-dialog-page",pf=function(n){function f(n,e,o){var l,v=arguments.length>3&&void 0!==arguments[3]&&arguments[3],h,c;return r(this,f),(l=s(this,u(f).call(this,i.dialog_confirm,ns))).automationId=i.dialog_confirm,h=new a(i.button_cancel),h.label=o||n.getString(t.ts_gen_cancel),h.value=!1,l.addLeftButton(h),c=new a(i.button_continue),c.label=e||n.getString(t.ts_authenticator_password_cta_positive),c.value=!0,l.addRightButton(c),v?c.focus():h.focus(),l}return o(f,n),f}(er),lt=function(){function n(t,i){r(this,n);this.showExpirationDialog=!1;this.supportsInlineError=!1;this.title=t;this.username=i;this.authId=t}return f(n,[{key:"startSession",value:function(n,t,i,r){this.description=n;this.mode=t;this.actionContext=i;this.clientContext=r;this.uiContext=i.getUiContext();this.username=h.getUsernameFromClientContext(r)||this.username;h.log("Starting session; session mode: [".concat(this.mode,"], authenticator: [").concat(this.title,"]"))}},{key:"changeSessionModeToRegistrationAfterExpiration",value:function(){h.log("Changing session mode to registration after expiration; authenticator: [".concat(this.title,"]"));this.mode=com.ts.mobile.sdk.AuthenticatorSessionMode.Registration;this.clearError();this.showExpirationDialog=!0}},{key:"promiseRecoveryForError",value:function(n,t,i){return h.log("Starting error recovery; session mode: [".concat(this.mode,"], authenticator: [").concat(this.title,"], error: [").concat(n,"]")),this.supportsInlineError&&i===com.ts.mobile.sdk.AuthenticationErrorRecovery.RetryAuthenticator?(this.setError(n),Promise.resolve(i)):i===com.ts.mobile.sdk.AuthenticationErrorRecovery.Fail?Promise.resolve(i):st.promiseRecoveryForError(n,t,i,this.uiContext,this.clientContext,this.mode,this.username)}},{key:"endSession",value:function(){h.log("Ending session; session mode: [".concat(this.mode,"], authenticator: [").concat(this.title,"]"))}},{key:"promiseInput",value:function(){var n=this;return new Promise(function(t){switch(n.setInputResolver(t),n.mode){case com.ts.mobile.sdk.AuthenticatorSessionMode.Authentication:h.log("Fetching authentication input; authenticator: [".concat(n.title,"]"));n.showAuthUi();break;case com.ts.mobile.sdk.AuthenticatorSessionMode.Registration:h.log("Fetching registration input; authenticator: [".concat(n.title,"]"));n.showExpirationDialog?(n.showExpirationDialog=!1,n.showRegUiAfterExpiration()):n.showRegUi()}}).then(function(t){return n.clearError(),t})}},{key:"promiseCancelAction",value:function(n){return st.promiseCancelAction(n,this.actionContext,this.clientContext,this.mode,this.username)}},{key:"showRegUiAfterExpiration",value:function(){var r=this,i=this.uiContext,u=i.getString(et.getAuthenticatorNameKey(this.title)),n=new pf(this.uiContext);n.setUserName(this.username);n.setDialogTitle(i.formatString(t.ts_session_authenticator_expired_title,[u]));n.setDialogIconClass(l.Expiration);n.setDialogMessage(i.getString(t.ts_session_authenticator_expired_content));n.onSelect(function(t){n.blockInteraction();t?r.showRegUi():r.onCancel()});h.renderPage(n,this.clientContext)}},{key:"setInputResolver",value:function(n){this.currentInputResolveFn=n}},{key:"onCancel",value:function(){this.resolveInputPromise(g.createCancelAuthenticatorRequest())}},{key:"onEscape",value:function(n){var t=com.ts.mobile.sdk.InputOrControlResponse.createEscapeResponse(n,{});this.resolveInputPromise(t)}},{key:"resolveInputPromise",value:function(n){if(this.currentInputResolveFn){var t=this.currentInputResolveFn;this.currentInputResolveFn=null;t(n)}}},{key:"showAuthenticatorPage",value:function(n){var t=this;n.setUserName(this.username);n.onCancel(function(){n.blockInteraction();t.onCancel()});n.onEscape(function(i){n.blockInteraction();t.onEscape(i)});h.renderPage(n,this.clientContext)}},{key:"setError",value:function(n){if(n){this.authError=n;var i=n.getMessage();this.authErrorMessage=this.mode===com.ts.mobile.sdk.AuthenticatorSessionMode.Authentication?this.uiContext.formatString(t.ts_promise_error_default_content_auth,[i]):this.uiContext.formatString(t.ts_promise_error_default_content_reg,[i])}else this.clearError()}},{key:"clearError",value:function(){this.authError=null;this.authErrorMessage=""}}]),n}(),ts=function(n){function t(n,i){var f;return r(this,t),(f=s(this,u(t).call(this))).stateOnIcon=n,f.stateOffIcon=i,f.isOn=!1,f.setIconsClass(),f.onClick(function(){f.isOn=!f.isOn;f.setIconsClass();f.onChangeCB&&f.onChangeCB(f.isOn)}),f}return o(t,n),f(t,[{key:"onChange",value:function(n){this.onChangeCB=n}},{key:"setIsOn",value:function(n){this.isOn=n;this.setIconsClass()}},{key:"setIconsClass",value:function(){var n="";n=this.isOn?this.stateOnIcon:this.stateOffIcon;this.element.setClass("".concat("xmui-toggle-icon"," ").concat(n))}}]),t}(e);!function(n){n.Numeric="numeric"}(iu||(iu={}));var w,or=function(n){function t(n){var i;return r(this,t),(i=s(this,u(t).call(this))).automationId=n,i.inputHtmlElement=i.htmlElement,i}return o(t,n),f(t,[{key:"buildElement",value:function(){return it("<input>")}},{key:"onChange",value:function(n){this.element.on("input",this.createCB(n))}},{key:"createCB",value:function(n){return bi(n,100,!1)}},{key:"name",set:function(n){this.inputHtmlElement.name=n},get:function(){return this.inputHtmlElement.name}},{key:"type",set:function(n){this.attr={type:n};this.inputHtmlElement.type}},{key:"inputmode",set:function(n){this.attr={inputmode:n,"x-inputmode":n}}},{key:"placeholder",set:function(n){this.inputHtmlElement.placeholder=n}},{key:"minlength",set:function(n){this.attr={minlength:n.toString()}}},{key:"maxlength",set:function(n){this.attr={maxlength:n.toString()}}},{key:"autocomplete",set:function(n){this.attr={autocomplete:n}}},{key:"autocorrect",set:function(n){this.attr={autocorrect:n?"on":"off"}}},{key:"autocapitalize",set:function(n){this.attr={autocapitalize:n?"on":"off"}}},{key:"value",set:function(n){this.inputHtmlElement.value=n},get:function(){return this.inputHtmlElement.value}},{key:"disabled",set:function(n){wt(u(t.prototype),"disabled",n,this,!0);this.inputHtmlElement.disabled=n}},{key:"required",set:function(n){this.inputHtmlElement.required=n},get:function(){return this.inputHtmlElement.required}}]),t}(ai),ru="xmui-form-field-message",is="".concat(ru,"--center"),rs="".concat(ru,"--error"),sr=function(n){function t(){var n,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],f=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r(this,t),(n=s(this,u(t).call(this))).id=br.generate(),n.className=ru,i&&n.addClass(rs),f&&n.addClass(is),n}return o(t,n),t}(v),us=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,hr=function(){function n(){r(this,n)}return f(n,null,[{key:"email",value:function(n){if(!us.test(n))return"Invalid Email"}},{key:"required",value:function(n){if(!n)return"Required"}},{key:"mobileNumber",value:function(n){var t=n.match(/^([0-9]{1,3})-([1-9][0-9]+)$/);return t?t[1].length+t[2].length>15?"Mobile Number exceeded 15 digits":void 0:"Invalid Mobile Number"}}]),n}(),fs=function(){function n(){r(this,n)}return f(n,null,[{key:"positiveInteger",value:function(n){var t=n.keyCode;(t!==rt.Enter&&t<rt.Zero||t>rt.Nine)&&n.preventDefault()}}]),n}(),uu=function(n){function t(){return r(this,t),s(this,u(t).apply(this,arguments))}return o(t,n),t}(e),ht="xmui-input-field",es=/^[0-9]+$/,wf="".concat(ht,"--has-value"),bf="".concat(ht,"--has-focus");!function(n){n[n.Password=0]="Password";n[n.Text=1]="Text";n[n.Email=2]="Email";n[n.PositiveInteger=3]="PositiveInteger"}(w||(w={}));var at,tt=function(n){function t(n,i){var f,o,h,l,c,a;r(this,t);(f=s(this,u(t).call(this))).inputType=n;f.hasValue=!1;f.validators=[];f.icons=new Map;f.className=ht;f.inputComponent=new or(i);f.inputComponent.value="";f.inputComponent.autocapitalize=!1;f.inputComponent.autocorrect=!1;f.inputComponent.spellcheck=!1;f.inputComponent.onPaste(f.handlePaste.bind(y(f)));f.inputComponent.onChange(f.handleChange.bind(y(f)));o=new e;o.className="".concat(ht,"_row");h=new e;h.className="".concat(ht,"_container");l=new e;l.className="".concat(ht,"_input-and-label");c=new e;c.className="".concat(ht,"_label-container");a=new v;switch(a.className="".concat(ht,"_label"),f.inputLabel=a,c.appendChild(f.inputLabel),l.appendChildren(f.inputComponent,c),h.appendChild(l),o.appendChildren(h),o.onFocusIn(function(){f.addClass(bf)}),o.onFocusOut(function(){f.removeClass(bf)}),n){case w.Password:f.setupPasswordInput(h);break;case w.Text:f.inputComponent.type="text";break;case w.Email:f.setupEmailInput();break;case w.PositiveInteger:f.setupPositiveIntegerInput()}return f.messageComp=new sr(!1),f.messageComp.show=!1,f.errorMessageComp=new sr(!0),f.appendChildren(o,f.messageComp,f.errorMessageComp),f.inputComponent.ariaDescribedBy=f.messageComp.id,f.labelContainer=c,f.container=h,f.inputRow=o,f}return o(t,n),f(t,[{key:"addRightButton",value:function(n,t){var i=new v;return i.className="".concat(ht,"_label_cta"),i.setText(n),i.onClick(t),this.container.appendChild(i),i}},{key:"addValidators",value:function(n){this.validators=this.validators.concat(n)}},{key:"addValidator",value:function(n){this.validators.push(n)}},{key:"focus",value:function(){this.inputComponent.focus()}},{key:"onBlur",value:function(n){this.inputComponent.onBlur(n)}},{key:"onFocus",value:function(n){this.inputComponent.onFocus(n)}},{key:"onChange",value:function(n){this.inputComponent.onChange(n)}},{key:"validateAndSetErrorMessage",value:function(){var t=this,n=!0,i=this.value.trim();return this.inputComponent.required?[this.getRequiredValidator()].concat(yr(this.validators)):this.validators,!this.inputComponent.required&&this.isEmpty||(n=!this.validators.some(function(n){var r=n(i);return r&&t.setError(r),!!r})),n&&this.clearError(),n}},{key:"setError",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.error=!0;this.errorMessage=n||"";t&&(this.value="")}},{key:"clearError",value:function(){this.error=!1;this.errorMessage=""}},{key:"getRequiredValidator",value:function(){return hr.required}},{key:"addIcon",value:function(n){var t=new e;t.className="".concat(ht,"_icon ").concat(n);this.container.appendChild(t);this.icons.set(n,t)}},{key:"removeIcon",value:function(n){var t=this.icons.get(n);t&&(this.container.removeChild(t),this.icons.delete(n))}},{key:"prependToInputRow",value:function(n){this.inputRow.prependChild(n)}},{key:"setupPasswordInput",value:function(n){var i=this,t;this.inputComponent.type="password";t=new ts(l.PasswordVisible,l.PasswordHidden);t.setIsOn(!1);t.onChange(function(n){i.inputComponent.type=n?"text":"password"});n.appendChild(t)}},{key:"setupPositiveIntegerInput",value:function(){this.inputComponent.type="text";this.inputComponent.onKeypress(function(n,t){return fs.positiveInteger(t)})}},{key:"setupEmailInput",value:function(){this.inputComponent.type="email";this.addValidator(hr.email)}},{key:"handlePaste",value:function(n){var t;this.inputType==w.PositiveInteger&&(t=n.clipboardData&&n.clipboardData.getData?n.clipboardData.getData("text/plain"):window.clipboardData.getData("Text"))&&!es.test(t)&&n.preventDefault()}},{key:"updateHasValue",value:function(n){n?this.addClass(wf):this.removeClass(wf);this.hasValue=n}},{key:"handleChange",value:function(){var n=this.checkHasValue();this.hasValue!==n&&this.updateHasValue(n)}},{key:"checkHasValue",value:function(){return!!this.value.length}},{key:"name",set:function(n){this.inputComponent.name=n},get:function(){return this.inputComponent.name}},{key:"disabled",set:function(n){this.inputComponent.disabled=n}},{key:"message",set:function(n){this.messageComp.setText(n);this.messageComp.show=!!n.length}},{key:"value",set:function(n){this.inputComponent.value=n;this.handleChange()},get:function(){return this.inputComponent.value}},{key:"type",get:function(){return this.inputType}},{key:"ariaRole",set:function(n){this.inputComponent.ariaRole=n}},{key:"ariaLabel",set:function(n){this.inputComponent.ariaLabel=n}},{key:"automationId",set:function(n){this.inputComponent.automationId=n}},{key:"autocomplete",set:function(n){this.inputComponent.autocomplete=n}},{key:"placeholder",set:function(n){this.placeholderText=n;this.inputLabel.setText(n)},get:function(){return this.placeholderText}},{key:"minlength",set:function(n){this.inputComponent.minlength=n}},{key:"maxlength",set:function(n){this.inputComponent.maxlength=n}},{key:"required",set:function(n){this.inputComponent.required=n},get:function(){return this.inputComponent.required}},{key:"isEmpty",get:function(){return!this.value.trim().length}},{key:"errorMessage",set:function(n){this.errorMessageComp.setText(n)}}]),t}(uu),kf="xmui-form",os="".concat(kf,"_hidden-submit-button"),ct=function(n){function t(n){var i,f;return(r(this,t),(i=s(this,u(t).call(this))).submitButton=n,i.externalValidations=function(){return!0},i.className=kf,i.submitButton)&&(f=new a(""),f.addClass(os),f.type=bt.Submit,f.disabled=!0,f.onClick(function(){return i.handleSubmit()}),i.appendChild(f),i.hiddenSubmitButton=f,i.submitButton&&i.submitButton.onClick(function(){return i.handleSubmit()})),i.element.on("submit",function(){return event.preventDefault()}),i.element.on("input",bi(i.handleInputEvent.bind(y(i)),100,!1)),i}return o(t,n),f(t,[{key:"buildElement",value:function(){return it("<form novalidate><\/form>")}},{key:"start",value:function(){this.updateSubmitButton()}},{key:"onSubmit",value:function(n){this.onSubmitCB=n}},{key:"onUserInput",value:function(n){this.onUserInputCB=n}},{key:"handleSubmit",value:function(){this.validate()&&this.onSubmitCB&&this.onSubmitCB(this.buildFormResult());this.updateSubmitButton()}},{key:"updateSubmitButton",value:function(){if(this.submitButton){var n=this.isMandatoryEmpty();this.submitButton.disabled=this.hiddenSubmitButton.disabled=n}}},{key:"isMandatoryEmpty",value:function(){return this.getFormFields(this).some(function(n){return n.required&&n.isEmpty})}},{key:"getFormFields",value:function(n){var i=this,t=[];return n.getChildren().forEach(function(n){n instanceof uu?t.push(n):n instanceof wr&&(t=t.concat(i.getFormFields(n)))}),t}},{key:"validate",value:function(){var n=this.getFormFields(this).reduce(function(n,t){return t.validateAndSetErrorMessage()&&n},!0),t=this.externalValidations();return n&&t}},{key:"buildFormResult",value:function(){return this.getFormFields(this).reduce(function(n,t){return n[t.name]="string"==typeof t.value?t.value.trim():t.value,n},{})}},{key:"handleInputEvent",value:function(){this.updateSubmitButton();this.onUserInputCB&&this.onUserInputCB()}},{key:"name",set:function(n){this.attr={name:n}}}]),t}(wr);!function(n){n.Off="off";n.Username="username";n.NewPassword="new-password";n.CurrentPassword="current-password"}(at||(at={}));var vt,ut=function(n){function e(n,t,i,f,o){var h;return r(this,e),(h=s(this,u(e).call(this,n,t,i))).recoveryAction=f,h.authenticatorId=o,h}return o(e,n),f(e,[{key:"addRecoveryButtonToForm",value:function(n){var u=this,r;this.recoveryAction&&this.authenticatorId&&(r=new a(i.button_recovery,si.Recovery),r.label=this.uiContext.formatString(t.ts_gen_recovery,[this.uiContext.getString(et.getAuthenticatorNameKey(this.authenticatorId))]),r.onClick(function(){return u.handleEscapeButtonClicked(u.recoveryAction)}),n.appendChild(r))}}]),e}(wi),ss="xmui-password-authentication",hs="xmui-password-registration",cs=function(n){function h(n,f,e,o){var c,y=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l,v;return r(this,h),(c=s(this,u(h).call(this,f?i.page_password_reg:i.page_password_auth,f?hs:ss,n,e,o))).isRegistrationMode=f,c.disableAutocomplete=y,c.passwordInputRegex=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{6,}$/,c.setTitle(c.getTitle()),c.setInstructions(c.getInstructions()),l=new a(i.button_continue),l.label=c.uiContext.getString(t.ts_authenticator_password_cta_positive),c.addRightButton(l),c.continueButton=l,v=c.createForm(),c.setContent(v),c}return o(h,n),f(h,[{key:"setError",value:function(n){this.error=!0;this.passwordInput.setError(n)}},{key:"clearError",value:function(){this.error=!1;this.passwordInput.clearError()}},{key:"reset",value:function(){this.unblockInteraction();this.passwordInput.value="";this.passwordInput.focus();this.repeatPasswordInput&&(this.repeatPasswordInput.value="")}},{key:"onSubmit",value:function(n){this.onSubmitCB=n}},{key:"getTitle",value:function(){var n=this.isRegistrationMode?t.ts_authenticator_password_title_reg:t.ts_authenticator_password_title_auth;return this.uiContext.getString(n)}},{key:"getInstructions",value:function(){var n;return n=this.isRegistrationMode?t.ts_authenticator_password_intro_reg:t.ts_authenticator_password_intro_auth,this.uiContext.getString(n)}},{key:"createForm",value:function(){var n=this,o=this.uiContext,u=new ct(this.continueButton),r,s,h,f;return u.addClass("xmui-password-page-form"),u.id="xmui-password-form",r=new tt(w.Password,i.input_password),s=this.getAutocompleteValue(),(r.name="password",r.placeholder=o.getString(t.ts_authenticator_password_field_hint),r.disabled=!1,r.value="",r.required=!0,r.autocomplete=s,r.ariaLabel=o.getString(t.ts_accessibility_password_enter_password),r.focus(),this.passwordInput=r,u.appendChild(r),this.isRegistrationMode)&&(h=new e,h.className="".concat("xmui-password-page-form","_spacer"),u.appendChild(h),f=new tt(w.Password,i.input_repeat_password),f.name="repeat-password",f.placeholder=o.getString(t.ts_authenticator_password_reg_field_hint),f.disabled=!1,f.value="",f.required=!0,r.autocomplete=s,f.ariaLabel=o.getString(t.ts_accessibility_password_enter_password_again),this.repeatPasswordInput=f,u.appendChild(f)),this.addRecoveryButtonToForm(u),u.externalValidations=function(){var i=!0;return n.isRegistrationMode&&(n.validatePasswordsMatch()||(n.repeatPasswordInput.setError(n.uiContext.getString(t.ts_authenticator_password_error_reg_no_match),!1),n.passwordInput.focus(),i=!1),n.isPasswordValid()||(n.passwordInput.setError(n.uiContext.getString(t.ts_authenticator_password_error_reg_strength_validation_failed),!1),n.repeatPasswordInput.setError(null,!0),n.passwordInput.focus(),i=!1),0==i&&(n.passwordInput.value="",n.repeatPasswordInput.value="")),i},u.onUserInput(this.handlePasswordChanged.bind(this)),u.onSubmit(function(t){n.blockInteraction();n.onSubmitCB&&n.onSubmitCB(t.password)}),u.start(),u}},{key:"validatePasswordsMatch",value:function(){return this.passwordInput.value===this.repeatPasswordInput.value}},{key:"isPasswordValid",value:function(){return this.passwordInputRegex.test(this.passwordInput.value)}},{key:"getAutocompleteValue",value:function(){return this.disableAutocomplete?at.Off:this.isRegistrationMode?at.NewPassword:at.CurrentPassword}},{key:"handlePasswordChanged",value:function(){this.passwordInput.error&&this.passwordInput.clearError();this.repeatPasswordInput&&this.repeatPasswordInput.error&&this.repeatPasswordInput.clearError()}}]),h}(ut),ls=function(n){function t(n,i){var f;return r(this,t),(f=s(this,u(t).call(this,n,i))).supportsInlineError=!0,f}return o(t,n),f(t,[{key:"showAuthUi",value:function(){this.showPasswordPage(!1)}},{key:"showRegUi",value:function(){this.showPasswordPage(!0)}},{key:"showPasswordPage",value:function(n){var r=this,i,t;this.authError&&this.passwordPage?(this.passwordPage.reset(),this.passwordPage.setError(this.authErrorMessage)):(i=!0===this.clientContext.disablePasswordAutocomplete,t=new cs(this.actionContext,n,this.description.getCredentialRecoveryEscapeOption(),this.description.getAuthenticatorId(),i),this.showAuthenticatorPage(t),this.passwordPage=t);this.passwordPage.onSubmit(function(n){var t=com.ts.mobile.sdk.PasswordInput.create(n);r.resolveInputPromise(com.ts.mobile.sdk.InputOrControlResponse.createInputResponse(t))})}}]),t}(lt),as="xmui-select-device-page",df=function(n){function e(n){var f,h,o,c;return r(this,e),(f=s(this,u(e).call(this,i.page_select_device,as,n))).selectedDevices=[],f.deviceKeys=[],h=new a(i.button_send_to_all),h.label=f.uiContext.getString(t.ts_authenticator_mobile_approve_send_to_all),h.onClick(function(){f.onSubmitCB&&f.onSubmitCB(f.deviceKeys)}),f.addRightButton(h),o=new a(i.button_continue),o.label=f.uiContext.getString(t.ts_authenticator_password_cta_positive),o.disabled=!0,o.onClick(function(){f.onSubmitCB&&f.onSubmitCB(f.selectedDevices)}),f.addRightButton(o),f.confirmButton=o,c=f.createContent(),f.setContent(c),f}return o(e,n),f(e,[{key:"createContent",value:function(){var n=this;return this.deviceList=new ti(d.Multiple),this.deviceList.onSelectionChanged(function(t){n.selectedDevices=t;n.confirmButton.disabled=0===t.length}),this.deviceList.focus(),this.deviceList}},{key:"addDevice",value:function(n,t,i,r){var u=new ii(t,i,l.Device);this.deviceList.addListItem(n,r,u);this.deviceKeys.push(n)}},{key:"onSubmit",value:function(n){this.onSubmitCB=n}}]),e}(ut),fu=function(n){function t(){return r(this,t),s(this,u(t).apply(this,arguments))}return o(t,n),f(t,[{key:"buildElement",value:function(){return it("<img><\/img>")}},{key:"src",set:function(n){this.attr={src:n}}}]),t}(ai),dt="xmui-mobile-approve-pending",vs=function(n){function t(n,f,e,o){var h,c;return r(this,t),c=(h=s(this,u(t).call(this,i.page_mobile_approve,dt,n))).createContent(f,e,o),h.setContent(c),wt(u(t.prototype),"busy",!0,y(h),!0),h}return o(t,n),f(t,[{key:"createContent",value:function(n,t,i){var r=new e;return r.className="".concat(dt,"_container"),r.appendChild(this.createSpacer()),null==t?this.createNoCodeContent(n,r):t===com.ts.mobile.sdk.OtpFormatType.Numeric?this.createNumericCodeContent(i,n,r):t===com.ts.mobile.sdk.OtpFormatType.QrCode&&this.createQRCodeContent(i,n,r),r}},{key:"createMessage",value:function(n){var t=new v;return t.setText(n),t.className="".concat(dt,"_message"),t}},{key:"createSpacer",value:function(){var n=new e;return n.className="".concat(dt,"_spacer"),n}},{key:"createNoCodeContent",value:function(n,t){var i=new e,r;i.className="".concat(dt,"_icon ").concat(l.MobileApproveWaiting);r=this.createMessage(n);t.appendChildren(i,this.createSpacer(),r,this.createSpacer())}},{key:"createNumericCodeContent",value:function(n,t,i){var u=this.createMessage(t),r=new v;return r.className="".concat(dt,"_numeric-code"),r.setText(n),i.appendChildren(u,this.createSpacer(),r,this.createSpacer()),i}},{key:"createQRCodeContent",value:function(n,t,i){var f=this.createMessage(t),u=new e,r;return u.className="".concat(dt,"_qr-code-container"),r=new fu,r.className="".concat(dt,"_qr-code"),r.src=n,u.appendChild(r),i.appendChildren(f,this.createSpacer(),u),i}},{key:"busy",set:function(){}}]),t}(ut);!function(n){n[n.TargetSelection=0]="TargetSelection";n[n.PollingRequested=1]="PollingRequested";n[n.PollingStarted=2]="PollingStarted"}(vt||(vt={}));var ri,ys=function(n){function i(n,t,f){var e;return r(this,i),(e=s(this,u(i).call(this,n,t))).state=vt.TargetSelection,e.pollingIntervalMillis=3e3,e.instructions=f,e}return o(i,n),f(i,[{key:"setPollingIntervalInMillis",value:function(n){this.pollingIntervalMillis=n}},{key:"setCreatedApprovalInfo",value:function(n,t){null!=n?(this.setupOtp(t),this.state=vt.PollingRequested):(this.setupOtp(null),this.state=vt.TargetSelection,clearTimeout(this.pollingTimer))}},{key:"setAvailableTargets",value:function(n){this.availableTargets=n}},{key:"endSession",value:function(){k(u(i.prototype),"endSession",this).call(this);clearTimeout(this.pollingTimer)}},{key:"promiseInput",value:function(){var n,t=this;switch(this.mode){case com.ts.mobile.sdk.AuthenticatorSessionMode.Authentication:switch(h.log("Fetching Mobile Approve authentication input;"),this.state){case vt.TargetSelection:n=this.promiseTargetSelectionInput();break;case vt.PollingRequested:this.state=vt.PollingStarted;this.showPendingUI();n=this.startPolling();break;case vt.PollingStarted:n=this.startPolling()}}return(n=n||Promise.reject("Illegal state")).then(function(n){return t.clearError(),n})}},{key:"promiseTargetSelectionInput",value:function(){var n=this;return new Promise(function(i){var r,u;n.setInputResolver(i);r=new df(n.actionContext);r.setTitle(n.uiContext.getString(t.ts_authenticator_mobile_approve));r.setInstructions(n.uiContext.getString(t.ts_authenticator_mobile_approve_targets_intro));u={};n.availableTargets.forEach(function(t){var i=t.getDeviceDetails(),f=i.getDeviceId(),e=g.getDeviceNameFromDeviceDetails(i),o=g.getLastAccessedFromDeviceDetails(n.uiContext,i);u[f]=t;r.addDevice(f,e,o,!1)});r.onSubmit(function(t){r.blockInteraction();var i=t.map(function(n){return u[n]}),f=g.createTargetsSelectionResponse(i);n.resolveInputPromise(f)});n.showAuthenticatorPage(r)})}},{key:"showPendingUI",value:function(){var n=new vs(this.actionContext,this.instructions,this.otpType,this.otpCode);n.setTitle(this.uiContext.getString(t.ts_authenticator_mobile_approve));this.showAuthenticatorPage(n)}},{key:"onCancel",value:function(){this.currentInputResolveFn?(clearTimeout(this.pollingTimer),k(u(i.prototype),"onCancel",this).call(this)):this.pendingRequest=g.createCancelAuthenticatorRequest()}},{key:"onEscape",value:function(n){clearTimeout(this.pollingTimer);k(u(i.prototype),"onEscape",this).call(this,n)}},{key:"setupOtp",value:function(n){if(n){var t=n.getFormat().getType();switch(this.otpType=t,t){case com.ts.mobile.sdk.OtpFormatType.Numeric:this.otpCode=n.getValue();break;case com.ts.mobile.sdk.OtpFormatType.QrCode:this.otpCode="data:image/jpeg;base64,"+n.getValue();break;default:throw h.log("Unsupported otp format"),new Error("Unsupported otp format");}}else this.otpType=null,this.otpCode=null}},{key:"startPolling",value:function(){var n=this;return new Promise(function(t){n.setInputResolver(t);n.pollingTimer=setTimeout(function(){if(n.pendingRequest)n.resolveInputPromise(n.pendingRequest),n.pendingRequest=null;else{var t=com.ts.mobile.sdk.MobileApproveInputRequestPolling.createRequestPollingInput(),i=com.ts.mobile.sdk.TargetBasedAuthenticatorInput.createAuthenticatorInput(t),r=com.ts.mobile.sdk.InputOrControlResponse.createInputResponse(i);n.resolveInputPromise(r)}},n.pollingIntervalMillis)})}},{key:"showAuthUi",value:function(){throw new Error("Method not implemented");}},{key:"showRegUi",value:function(){throw new Error("Method not implemented");}}]),i}(lt),hi="xmui-pin-code",gf=function(n){function t(n,i){var f,c,h,o;for(r(this,t),(f=s(this,u(t).call(this))).digits=[],f.className=hi,f.mainInput=new or(n),f.mainInput.className="".concat(hi,"_input"),c=new e,c.className="".concat(hi,"_container"),f.messageComp=new sr(!0,!0),f.changeHandler=f.changeHandler.bind(y(f)),h=0;h<i;h++)o=new or(n+"_digit_"+h),o.className="".concat(hi,"_digit"),o.type="text",o.maxlength=1,o.autocomplete=at.Off,o.inputmode=iu.Numeric,o.ariaLabel="pin code digit ".concat(h+1),o.onKeydown(f.keydownHandler),o.onFocus(f.focusHandler),o.onChange(f.changeHandler),0===h?(o.tabindex=0,o.ariaDescribedBy=f.messageComp.id):o.tabindex=-1,f.digits.push(o),c.appendChild(o);return f.appendChildren(f.mainInput,c,f.messageComp),f}return o(t,n),f(t,[{key:"focus",value:function(){var n=this.digits[0];n&&n.focus()}},{key:"onChange",value:function(n){this.changeCB=n}},{key:"setError",value:function(n){this.error=!0;this.errorMessage=n||""}},{key:"clearError",value:function(){this.error=!1;this.errorMessage=""}},{key:"keydownHandler",value:function(n,t){var i=t.target;"Backspace"===t.key&&0===i.selectionStart&&0===i.selectionEnd&&i.previousElementSibling instanceof HTMLInputElement&&i.previousElementSibling.className==="".concat(hi,"_digit")&&(i.previousElementSibling.value="",i.previousElementSibling.focus())}},{key:"focusHandler",value:function(n){var t=n.target;t.value.length&&(t.selectionStart=0,t.selectionEnd=t.value.length)}},{key:"changeHandler",value:function(n){var t=n.target,i,r;(t.value=t.value.replace(/[^\d]/g,""),1===t.value.length&&t.nextElementSibling instanceof HTMLInputElement&&t.nextElementSibling.className==="".concat(hi,"_digit"))&&(i=t.nextElementSibling,i.focus(),i.selectionStart=0,i.selectionEnd=1);r="";this.digits.forEach(function(n){r+=n.value});this.mainInput.value=r;this.changeCB&&this.changeCB()}},{key:"name",set:function(n){this.mainInput.name=n}},{key:"value",set:function(n){this.mainInput.value=n;this.digits.forEach(function(t,i){t.value=n[i]||""})},get:function(){return this.mainInput.value}},{key:"errorMessage",set:function(n){this.messageComp.setText(n)}}]),t}(e),ps="xmui-pin-code-authentication",ws="xmui-pin-code-registration";!function(n){n[n.Enter=0]="Enter";n[n.Repeat=1]="Repeat"}(ri||(ri={}));ne=function(n){function e(n,f,o,h,c){var l,p,v;return r(this,e),(l=s(this,u(e).call(this,o?i.page_pin_reg:i.page_pin_auth,o?ws:ps,n,h,c))).numDigits=f,l.isRegistrationMode=o,l.mode=ri.Enter,l.setTitle(l.getTitle()),l.setInstructions(l.getInstructions()),p=l.createForm(),(l.setContent(p),l.isRegistrationMode)&&(v=new a(i.button_reset),v.label=l.uiContext.getString(t.ts_gen_restart),v.disabled=!0,v.onClick(l.handleReset.bind(y(l))),l.resetButton=v,l.addRightButton(v)),l}return o(e,n),f(e,[{key:"onSubmit",value:function(n){this.onSubmitCB=n}},{key:"setError",value:function(n){this.error=!0;this.pinCode.setError(n)}},{key:"clearError",value:function(){this.pinCode.clearError();this.error=!1}},{key:"getTitle",value:function(){var n=this.isRegistrationMode?t.ts_authenticator_pin_title_reg:t.ts_authenticator_pin_title_auth;return this.uiContext.getString(n)}},{key:"getRegModeInstructions",value:function(){var n=this.mode===ri.Enter?t.ts_authenticator_pin_intro_reg:t.ts_authenticator_pin_intro_repeat;return this.uiContext.getString(n)}},{key:"getInstructions",value:function(){return this.isRegistrationMode?this.getRegModeInstructions():this.uiContext.getString(t.ts_authenticator_pin_intro_auth)}},{key:"handleReset",value:function(){this.mode=ri.Enter;this.pinCode.value="";this.pinCode.focus();this.enteredPinCode=null;this.resetButton.disabled=!0;this.setInstructions(this.getInstructions())}},{key:"handleNoMatch",value:function(){this.pinCode.value="";this.pinCode.setError(this.uiContext.getString(t.ts_authenticator_pin_error_reg_no_match));this.pinCode.focus()}},{key:"submitPinCode",value:function(n){this.onSubmitCB&&this.onSubmitCB(n)}},{key:"repeat",value:function(){this.mode=ri.Repeat;this.pinCode.value="";this.pinCode.focus();this.resetButton.disabled=!1;this.setInstructions(this.getInstructions())}},{key:"handleRegPinCodeChanged",value:function(n){this.mode===ri.Enter?(this.enteredPinCode=n,this.repeat()):this.enteredPinCode===n?this.submitPinCode(n):this.handleNoMatch()}},{key:"handlePinCodeChanged",value:function(){this.clearError();var n=this.pinCode.value;n.length===this.numDigits&&(this.isRegistrationMode?this.handleRegPinCodeChanged(n):this.submitPinCode(n))}},{key:"createForm",value:function(){var t=new ct,n;return t.addClass("xmui-pin-code-form"),n=new gf(i.input_pin_code,this.numDigits),n.name="pin-code",n.value="",n.onChange(this.handlePinCodeChanged.bind(this)),n.focus(),this.pinCode=n,t.appendChild(n),this.addRecoveryButtonToForm(t),t}}]),e}(ut);te=function(n){function t(n,i,f){var e;return r(this,t),(e=s(this,u(t).call(this,n,i))).supportsInlineError=!0,e.pinLength=f,e}return o(t,n),f(t,[{key:"showAuthUi",value:function(){this.showPinCodePage(!1)}},{key:"showRegUi",value:function(){this.showPinCodePage(!0)}},{key:"showPinCodePage",value:function(n){var i=this,t=new ne(this.actionContext,this.pinLength,n,this.description.getCredentialRecoveryEscapeOption(),this.description.getAuthenticatorId());this.authError&&t.setError(this.authErrorMessage);t.onSubmit(function(n){t.blockInteraction();var r=com.ts.mobile.sdk.PinInput.create(n);i.resolveInputPromise(com.ts.mobile.sdk.InputOrControlResponse.createInputResponse(r))});this.showAuthenticatorPage(t)}}]),t}(lt);var nt=new WeakMap,bs=function(){function n(){r(this,n);this.holder=null;this.option=null;this.mapperFunc=yt;this.holderLeft=0;this.holderTop=0;this.disabled=!1;this.patternAry=[];this.lastPosObj=[];this.rightPattern=null;this.onSuccess=yt;this.onError=yt;this.pattCircle=null;this.lineX1=0;this.lineY1=0;this.line=null;this.lastPosObj=null;this.dotYOffest=null}return f(n,[{key:"getElementsFromPoint",value:function(n,t){if(document.elementsFromPoint)return document.elementsFromPoint(n,t);for(var r=[],u=document.msElementsFromPoint(n,t),f=u.length,i=0;i<f;i++)r.push(u.item(i));return r}},{key:"getIdxFromPoint",value:function(n,t){var r,f,e,o,s=n-this.holderLeft,h=t-this.holderTop,u,i;return(this.getElementsFromPoint(n,t).some(function(n){return-1!=n.className.indexOf("patt-circ")&&(r=n.firstElementChild,!0)}),r)&&(u=this.option.matrix,i=parseInt(r.getAttribute("patt-dots-index")),o=i+1,f=i%u[1]+1,e=Math.floor(i/u[1])+1),{idx:o,i:f,j:e,x:s,y:h}}},{key:"markPoint",value:function(n,t){ui(n,"hovered");this.patternAry.push(t);this.lastElm=n}},{key:"addLine",value:function(n){var a=this.dotYOffest,v=this.pattCircle,y=this.patternAry,p=this.holderLeft,w=this.holderTop,e=this.holder,o=this.option.lineOnMove,i=v[n.idx-1].firstElementChild.getBoundingClientRect(),r=i.left+i.width/2-p,u=i.top+i.height/2-w,t,h,c,l,f;if(y.length>1){var s=ue(this.lineX1,r,this.lineY1,u),b=s.length,k=s.angle;ci(this.line,{width:"".concat(b,"px"),transform:"rotate(".concat(k,"deg)")});o||ci(this.line,{display:"block"})}null==a&&(t=document.createElement("div"),t.className="patt-lines",t.style.width="0px",t.style.visibility="hidden",t.style.position="absolute",t.style.top="0px",t.style.left="0px",e.appendChild(t),h=t.getBoundingClientRect(),this.dotYOffest=h.height/2,e.removeChild(t));f=(c='<div class="patt-lines" style="top:'.concat(u-this.dotYOffest,"px; left: ").concat(r,'px;"><\/div>'),(l=document.createElement("div")).innerHTML=c,l.children[0]);this.line=f;this.lineX1=r;this.lineY1=u;this.holder.appendChild(f);o||ci(this.line,{display:"none"})}},{key:"addDirectionClass",value:function(n){var u=this.lastElm,f=this.line,i=this.lastPosObj,t=[],r;(n.j-i.j>0?t.push("s"):n.j-i.j<0&&t.push("n"),n.i-i.i>0?t.push("e"):n.i-i.i<0&&t.push("w"),t=t.join("-"))&&(r="".concat(t," dir"),ui(u,r),ui(f,r))}}]),n}(),fe=function(){function n(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i,u,o,e,f;r(this,n);this._onStart=this._onStart.bind(this);this._onMove=this._onMove.bind(this);this._onEnd=this._onEnd.bind(this);this._renderCircle=this._renderCircle.bind(this);i=new bs;u=t;u&&0!==u.length&&(o={onDraw:yt,onStart:yt},e=s.matrix,e&&e[0]*e[1]>9&&(o.delimiter=","),i.option=function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),t=1;t<i;t++)r[t-1]=arguments[t];return r.forEach(function(t){Object.keys(t).forEach(function(i){n[i]=t[i]})}),n}({},n.defaults,o,s),i.circContainerWidth=100/i.option.matrix[1],i.circContainerHeight=100/i.option.matrix[0],f=i.option.mapper,i.mapperFunc="object"===vr(f)?function(n){return f[n]}:"function"==typeof f?f:yt,i.option.mapper=null,i.holder=u,nt.set(this,i),this._render(),ui(u,"patt-holder"),"static"===ci(u,"position")&&ci(u,{position:"relative"}),u.addEventListener("touchstart",this._onStart),u.addEventListener("mousedown",this._onStart))}return f(n,[{key:"getPattern",value:function(){var n=nt.get(this),t=n.patternAry,i=n.option;return(t||[]).join(i.delimiter)}},{key:"setPattern",value:function(n){var f=nt.get(this),t=f.option,o=t.matrix,i=t.margin,r=t.radius,h=t.enableSetPattern,c=t.delimiter,e,u;if(h)for(e="string"==typeof n?n.split(c):n,this.reset(),f.holderLeft=0,f.holderTop=0,u=0;u<e.length;u+=1){var s=e[u]-1,l=s%o[1]*(2*i+2*r)+2*i+r,a=Math.floor(s/o[1])*(2*i+2*r)+2*i+r;this._onMove.call(null,{clientX:l,clientY:a,preventDefault:yt},this)}}},{key:"enable",value:function(){nt.get(this).disabled=!1}},{key:"disable",value:function(){nt.get(this).disabled=!0}},{key:"reset",value:function(){var n=nt.get(this);ie(n.pattCircle).forEach(function(n){return ki(n,"hovered dir s n w e s-w s-e n-w n-e")});re(n.holder.querySelectorAll(".patt-lines"));n.patternAry=[];n.lastPosObj=null;ki(n.holder,"patt-error")}},{key:"setError",value:function(){ui(nt.get(this).holder,"patt-error")}},{key:"clearError",value:function(){ki(nt.get(this).holder,"patt-error")}},{key:"checkForPattern",value:function(n,t,i){var r=nt.get(this);r.rightPattern=n;r.onSuccess=t||yt;r.onError=i||yt}},{key:"_onStart",value:function(n){var t=nt.get(this),r=t.holder,u=t.option,i;(n.preventDefault(),t.disabled)||(t.option.patternVisible||ui(t.holder,"patt-hidden"),this.moveEvent="touchstart"===n.type?"touchmove":"mousemove",this.endEvent="touchstart"===n.type?"touchend":"mouseup",r.addEventListener(this.moveEvent,this._onMove),document.addEventListener(this.endEvent,this._onEnd),i=t.holder.getBoundingClientRect(),t.holderTop=i.top,t.holderLeft=i.left,this.reset(),u.onStart())}},{key:"_onMove",value:function(n){var w,v,c;n.preventDefault();var t=nt.get(this),l=t.option,e=t.patternAry,b=n.clientX||n.touches[0].clientX,k=n.clientY||n.touches[0].clientY,y=t.pattCircle,i=t.getIdxFromPoint(b,k),o=i.idx,a=t.mapperFunc(o)||o;if(e.length>0){var p=ue(t.lineX1,i.x,t.lineY1,i.y),d=p.length,g=p.angle;ci(t.line,{width:"".concat(d+2,"px"),transform:"rotate(".concat(g,"deg)")})}if(o&&(l.allowRepeat&&e[e.length-1]!==a||-1===e.indexOf(a))){if(w=y[o-1],t.lastPosObj)for(var h=t.lastPosObj,tt=i.i-h.i>0?1:-1,it=i.j-h.j>0?1:-1,r=h.i,u=h.j,s=Math.abs(i.i-r),f=Math.abs(i.j-u);0===s&&f>1||0===f&&s>1||f===s&&f>1;)r=s?r+tt:r,u=f?u+it:u,s=Math.abs(i.i-r),f=Math.abs(i.j-u),v=(u-1)*l.matrix[1]+r,c=t.mapperFunc(v)||v,(l.allowRepeat||-1===e.indexOf(c))&&(t.addDirectionClass({i:r,j:u}),t.markPoint(y[c-1],c),t.addLine({idx:o,i:r,j:u}));t.lastPosObj&&t.addDirectionClass(i);t.markPoint(w,a);t.addLine(i);t.lastPosObj=i}}},{key:"_onEnd",value:function(n){n.preventDefault();var t=nt.get(this),r=t.option,i=t.patternAry.join(r.delimiter);t.holder.removeEventListener(this.moveEvent,this._onMove);document.removeEventListener(this.endEvent,this._onEnd);ki(t.holder,"patt-hidden");i&&(re(t.line),r.onDraw(i),t.rightPattern&&(i===t.rightPattern?t.onSuccess():(t.onError(),this.error())))}},{key:"_renderCircle",value:function(n,t){var i=nt.get(this),u=i.circContainerHeight,r=i.circContainerWidth;return'<div class="patt-circ-container" style="width: '.concat(r,"%; height: ").concat(u,"%; flex-basis: ").concat(r,'%;">\n                <div class="patt-circ">\n                  <div patt-dots-index=').concat(t,' class="patt-dots"><\/div>\n                <\/div>\n            <\/div>')}},{key:"_render",value:function(){var n=nt.get(this),t=n.option,r=n.holder,i=t.matrix,u=(t.margin,t.radius,'<div class="patt-wrap">\n                    '.concat(function(n,t){for(var r=new Array(n),i=0;i<n;i++)r[i]=t;return r}(i[0]*i[1]).map(this._renderCircle).join(""),"\n                  <\/div>"));r.innerHTML=u;n.pattCircle=n.holder.querySelectorAll(".patt-circ")}},{key:"option",value:function(n,t){var i=nt.get(this).option;return void 0===t?i[n]:(i[n]=t,"margin"!==n&&"matrix"!==n&&"radius"!==n||this._render(),this)}}]),n}();fe.defaults={matrix:[3,3],margin:20,radius:25,patternVisible:!0,lineOnMove:!0,delimiter:"",enableSetPattern:!1,allowRepeat:!0};var fi,eu="xmui-pattern-lock",ks="".concat(eu,"_pattern"),ds=function(n){function t(n,i,f){var o,h;return r(this,t),(o=s(this,u(t).call(this))).className=eu,o.tabindex=0,o.mainInput=new or(n),o.mainInput.className="".concat(eu,"_input"),o.appendChild(o.mainInput),o.handleSelectedPattern=o.handleSelectedPattern.bind(y(o)),o.handlePatternStarted=o.handlePatternStarted.bind(y(o)),h=new e,h.className=ks,o.patternLockExt=new fe(h.htmlElement,{matrix:[f,i],onDraw:o.handleSelectedPattern,onStart:o.handlePatternStarted}),o.messageComp=new sr(!0,!0),o.ariaDescribedBy=o.messageComp.id,o.appendChildren(h,o.messageComp),o}return o(t,n),f(t,[{key:"setError",value:function(n){this.error=!0;this.errorMessage=n||"";this.patternLockExt.setError()}},{key:"clearError",value:function(){this.error=!1;this.errorMessage="";this.patternLockExt.clearError()}},{key:"reset",value:function(){this.patternLockExt.reset()}},{key:"onChange",value:function(n){this.changeCB=n}},{key:"onStart",value:function(n){this.startCB=n}},{key:"handleSelectedPattern",value:function(n){this.mainInput.value=n;this.changeCB&&this.changeCB()}},{key:"handlePatternStarted",value:function(){this.startCB&&this.startCB()}},{key:"name",set:function(n){this.mainInput.name=n}},{key:"value",set:function(){},get:function(){return this.mainInput.value}},{key:"errorMessage",set:function(n){this.messageComp.setText(n)}}]),t}(e),gs="xmui-pattern-authentication",nh="xmui-pattern-registration";!function(n){n[n.Enter=0]="Enter";n[n.Repeat=1]="Repeat"}(fi||(fi={}));var pt,th=function(n){function e(n,f,o,h,c,l){var v,w,p;return r(this,e),(v=s(this,u(e).call(this,h?i.page_pattern_reg:i.page_pattern_auth,h?nh:gs,n,c,l))).isRegistrationMode=h,v.mode=fi.Enter,v._minPoints=4,v.setTitle(v.getTitle()),v.setInstructions(v.getInstructions()),w=v.createForm(f,o),(v.setContent(w),v.isRegistrationMode)&&(p=new a(i.button_reset),p.label=v.uiContext.getString(t.ts_authenticator_pattern_cta_reset),p.disabled=!0,p.onClick(v.handleReset.bind(y(v))),v.resetButton=p,v.addRightButton(p)),v}return o(e,n),f(e,[{key:"onSubmit",value:function(n){this.onSubmitCB=n}},{key:"setError",value:function(n){this.error=!0;this.patternLock.setError(n)}},{key:"clearError",value:function(){this.error=!1;this.patternLock.clearError()}},{key:"handleReset",value:function(){this.mode=fi.Enter;this.patternLock.reset();this.enteredPattern=null;this.resetButton.disabled=!0;this.setInstructions(this.getInstructions());this.clearError()}},{key:"getTitle",value:function(){var n=this.isRegistrationMode?t.ts_authenticator_pattern_title_reg:t.ts_authenticator_pattern_title_auth;return this.uiContext.getString(n)}},{key:"getRegModeInstructions",value:function(){var n=this.mode===fi.Enter?t.ts_authenticator_pattern_intro_reg:t.ts_authenticator_pattern_intro_repeat;return this.uiContext.getString(n)}},{key:"getInstructions",value:function(){return this.isRegistrationMode?this.getRegModeInstructions():this.uiContext.getString(t.ts_authenticator_pattern_intro_auth)}},{key:"handleNoMatch",value:function(){this.patternLock.setError(this.uiContext.getString(t.ts_authenticator_pattern_mismatch))}},{key:"submitPattern",value:function(n){this.onSubmitCB&&this.onSubmitCB(n)}},{key:"repeat",value:function(){this.patternLock.reset();this.mode=fi.Repeat;this.resetButton.disabled=!1;this.setInstructions(this.getInstructions())}},{key:"validateLength",value:function(n){return JSON.parse("["+n+"]").length>=this._minPoints}},{key:"handleRegPatternChangedEnterMode",value:function(n){this.validateLength(n)?(this.enteredPattern=n,this.repeat()):this.notifyShortPattern()}},{key:"notifyShortPattern",value:function(){this.patternLock.setError(this.uiContext.getString(t.ts_authenticator_pattern_error_min_points))}},{key:"handleRegPattrenChanged",value:function(n){this.mode===fi.Enter?this.handleRegPatternChangedEnterMode(n):this.enteredPattern===n?this.submitPattern(n):this.handleNoMatch()}},{key:"handlePattrenChanged",value:function(){var n=this.patternLock.value;this.isRegistrationMode?this.handleRegPattrenChanged(n):this.submitPattern(n)}},{key:"handlePatternStarted",value:function(){this.clearError()}},{key:"createForm",value:function(n,t){var u=new ct,r;return u.addClass("xmui-pattern-form"),r=new ds(i.input_pattern_lock,n,t),r.name="pattern",r.onChange(this.handlePattrenChanged.bind(this)),r.onStart(this.handlePatternStarted.bind(this)),r.focus(),this.patternLock=r,u.appendChild(r),this.addRecoveryButtonToForm(u),u}},{key:"minPoints",set:function(n){n>2&&(this._minPoints=n)}}]),e}(ut),ih=function(n){function t(n,i,f,e){var o;return r(this,t),(o=s(this,u(t).call(this,n,i))).gridWidth=f,o.gridHeight=e,o.supportsInlineError=!0,o}return o(t,n),f(t,[{key:"showAuthUi",value:function(){this.showPatternPage(!1)}},{key:"showRegUi",value:function(){this.showPatternPage(!0)}},{key:"showPatternPage",value:function(n){var i=this,t=new th(this.actionContext,this.gridWidth,this.gridHeight,n,this.description.getCredentialRecoveryEscapeOption(),this.description.getAuthenticatorId());this.authError&&t.setError(this.authErrorMessage);t.onSubmit(function(n){t.blockInteraction();var r=com.ts.mobile.sdk.PatternInput.create(i.createPatternInputString(n));i.resolveInputPromise(com.ts.mobile.sdk.InputOrControlResponse.createInputResponse(r))});this.showAuthenticatorPage(t)}},{key:"pointsIndexToCoorinate",value:function(n){var t=this;return n.map(function(n){return{y:Math.floor((n-1)/t.gridWidth),x:(n-1)%t.gridWidth}})}},{key:"createPatternInputString",value:function(n){var t=JSON.parse("[".concat(n,"]"));return this.pointsIndexToCoorinate(t).map(function(n){return"r:".concat(n.y,",c:").concat(n.x)}).join("")}}]),t}(lt),ee="xmui-tabs",rh=function(n){function t(){var n;return r(this,t),(n=s(this,u(t).call(this))).tabs=new Map,n.className=ee,n}return o(t,n),f(t,[{key:"addTab",value:function(n,t){var r=this,i=new e;i.className="".concat(ee,"_tab");i.appendChild(t);this.tabs.set(n,i);this.appendChild(i);i.onClick(function(){i!==r.selectedTab&&(r.selectTab(i),r.selectionChangedCB&&r.selectionChangedCB(n))})}},{key:"selectTabByKey",value:function(n){var t=this.tabs.get(n);this.selectTab(t)}},{key:"onSelectionChanged",value:function(n){this.selectionChangedCB=n}},{key:"selectTab",value:function(n){n&&(this.unselectCurrentTab(),n.selected=!0,this.selectedTab=n)}},{key:"unselectCurrentTab",value:function(){this.selectedTab&&(this.selectedTab.selected=!1,this.selectedTab=null)}}]),t}(e),oe="xmui-tabbed-panels",uh=function(n){function t(){var n;return r(this,t),(n=s(this,u(t).call(this))).keyToPanel=new Map,n.curKey=0,n.className=oe,n.tabs=new rh,n.tabs.onSelectionChanged(n.selectPanel.bind(y(n))),n.container=new e,n.container.className="".concat(oe,"_container"),n.appendChildren(n.tabs,n.container),n}return o(t,n),f(t,[{key:"addPanel",value:function(n,t){var i=this.generateKey();this.tabs.addTab(i,n);t.show=!1;this.container.appendChild(t);this.keyToPanel.set(i,t);1===this.keyToPanel.size&&(this.tabs.selectTabByKey(i),this.selectPanel(i))}},{key:"generateKey",value:function(){return(++this.curKey).toString()}},{key:"selectPanel",value:function(n){var t=this.keyToPanel.get(n);t!==this.selectedPanel&&(t.show=!0,this.selectedPanel&&(this.selectedPanel.show=!1),this.selectedPanel=t)}}]),t}(e),ou="xmui-tab-content",fh="".concat(ou,"_title"),se="".concat(ou,"_icon"),eh=function(n){function t(){var n;return r(this,t),(n=s(this,u(t).call(this))).className=ou,n.iconComp=new e,n.iconComp.className=se,n.titleComp=new v,n.titleComp.className=fh,n.appendChildren(n.iconComp,n.titleComp),n}return o(t,n),f(t,[{key:"title",set:function(n){this.titleComp.setText(n)}},{key:"icon",set:function(n){this.iconComp.className="".concat(se," ").concat(n)}}]),t}(e),oh="xmui-select-channel-page",sh=function(n){function e(n){var o,f,h;return r(this,e),(f=s(this,u(e).call(this,i.page_otp_select_channel,oh,n))).typeToList=new Map,f.channelTypeToLocalizationKey=(c(o={},com.ts.mobile.sdk.OtpChannel.Sms,t.ts_authenticator_otp_sms_title),c(o,com.ts.mobile.sdk.OtpChannel.Email,t.ts_authenticator_otp_email_title),c(o,com.ts.mobile.sdk.OtpChannel.PushNotification,t.ts_authenticator_otp_push_title),c(o,com.ts.mobile.sdk.OtpChannel.VoiceCall,t.ts_authenticator_otp_voice_title),o),h=f.createContent(),f.setContent(h),f.handleSelectionChanged=f.handleSelectionChanged.bind(y(f)),f}return o(e,n),f(e,[{key:"createContent",value:function(){return this.tabbedPanels=new uh,this.tabbedPanels}},{key:"addChannelTarget",value:function(n){var t=this.typeToList.get(n.channel)||this.createTabbedList(n),i=new ii(n.targetName,n.targetInfo);t.addListItem(n.targetId,!1,i)}},{key:"onSubmit",value:function(n){this.onSubmitCB=n}},{key:"handleSelectionChanged",value:function(n){this.onSubmitCB&&this.onSubmitCB(n[0])}},{key:"createList",value:function(n){var t=new ti;return this.typeToList.set(n,t),t.onSelectionChanged(this.handleSelectionChanged),t}},{key:"createTabbedList",value:function(n){var t=new eh,r=this.channelTypeToLocalizationKey[n.channel]||"UNKNOWN",i;return t.title=this.uiContext.getString(r),t.icon=pi.getChannelIcon(n.channel),i=this.createList(n.channel),this.tabbedPanels.addPanel(t,i),i}}]),e}(ut),su="xmui-message-with-action",hh=function(n){function t(){var n;return r(this,t),(n=s(this,u(t).call(this))).className=su,n.message=new v,n.message.className="".concat(su,"_message"),n.action=new v,n.action.className="".concat(su,"_action"),n.appendChildren(n.message,n.action),n}return o(t,n),f(t,[{key:"setMessage",value:function(n){this.message.setText(n)}},{key:"setAction",value:function(n,t){this.action.setText(n);this.onClick(t)}}]),t}(e),hu="xmui-otp-page",ch="".concat(hu,"_content"),lh="".concat(hu,"_message-container"),ah=7,vh=function(n){function h(n,f,e){var o,l,c;return r(this,h),(o=s(this,u(h).call(this,i.page_otp_auth,hu,n))).numDigits=f,o.useBackButton=e,o.useNormalInput=o.numDigits>ah,o.setTitle(o.uiContext.getString(t.ts_authenticator_otp_title_auth)),l=o.createContent(),(o.setContent(l),e&&(o.cancelButton.automationId=i.button_back,o.cancelButton.label=o.uiContext.getString(t.ts_gen_back)),o.useNormalInput)&&(c=new a(i.button_continue),c.label=o.uiContext.getString(t.ts_gen_continue),c.disabled=!0,c.onClick(function(){o.submitOtpCode(o.otpCodeComp.value)}),o.continueButton=c,o.addRightButton(c)),o}return o(h,n),f(h,[{key:"handleCancelButtonClicked",value:function(){this.useBackButton?this.onBackCB&&this.onBackCB():k(u(h.prototype),"handleCancelButtonClicked",this).call(this)}},{key:"onBack",value:function(n){this.onBackCB=n}},{key:"onSubmit",value:function(n){this.onSubmitCB=n}},{key:"onResend",value:function(n){this.onResendCB=n}},{key:"setError",value:function(n){this.error=!0;this.otpCodeComp.setError(n)}},{key:"clearError",value:function(){this.otpCodeComp.clearError();this.error=!1}},{key:"submitOtpCode",value:function(n){this.onSubmitCB&&this.onSubmitCB(n)}},{key:"handleOtpCodeChanged",value:function(){this.clearError();var n=this.otpCodeComp.value;this.useNormalInput?this.continueButton.disabled=null==n||0===n.length:null!=n&&n.length===this.numDigits&&this.submitOtpCode(n)}},{key:"createForm",value:function(){var n=new ct;return this.useNormalInput?(this.otpCodeComp=new tt(w.PositiveInteger,i.input_otp_code),this.otpCodeComp.autocomplete=at.Off):this.otpCodeComp=new gf(i.input_otp_code,this.numDigits),this.otpCodeComp.name="otp-code",this.otpCodeComp.value="",this.otpCodeComp.focus(),this.otpCodeComp.onChange(this.handleOtpCodeChanged.bind(this)),n.appendChild(this.otpCodeComp),n}},{key:"createContent",value:function(){var u=this,r=new e,f,n,i;return r.className=ch,f=this.createForm(),n=new e,n.className=lh,i=new hh,i.setMessage(this.uiContext.getString(t.ts_authenticator_otp_resend_message)),i.setAction(this.uiContext.getString(t.ts_authenticator_otp_resend),function(){u.onResendCB&&u.onResendCB()}),n.appendChild(i),r.appendChildren(f,n),r}}]),h}(ut);!function(n){n[n.TargetSelection=0]="TargetSelection";n[n.Input=1]="Input"}(pt||(pt={}));var di,gi,b,yh=function(n){function i(n,f,e,o){var l,h;return r(this,i),(h=s(this,u(i).call(this,n,f))).autoExecedTarget=o,h.supportsInlineError=!0,h.channelTypeToInstruction=(c(l={},com.ts.mobile.sdk.OtpChannel.Sms,t.ts_authenticator_otp_sms_sent),c(l,com.ts.mobile.sdk.OtpChannel.Email,t.ts_authenticator_otp_email_sent),c(l,com.ts.mobile.sdk.OtpChannel.PushNotification,t.ts_authenticator_otp_push_sent),c(l,com.ts.mobile.sdk.OtpChannel.VoiceCall,t.ts_authenticator_otp_voice_sent),c(l,com.ts.mobile.sdk.OtpChannel.Unknown,t.ts_authenticator_otp_external_numeric_sent),l),h.possibleTargets=e,h.state=o?pt.Input:pt.TargetSelection,h.target=o,h}return o(i,n),f(i,[{key:"setAvailableTargets",value:function(n){this.possibleTargets=n}},{key:"setGeneratedOtp",value:function(n,t){t?(this.state=pt.Input,n instanceof com.ts.mobile.sdk.OtpFormatNumericImpl?(this.codeLength=n.getOtpLength(),this.isSupportedFormat=!0):this.isSupportedFormat=!1):this.state=pt.TargetSelection;this.target=t}},{key:"showOtpInput",value:function(){var i=this,n=new vh(this.actionContext,this.codeLength,this.possibleTargets.length>1);n.setTitle(this.uiContext.getString(t.ts_authenticator_otp_title_auth));n.setInstructions(this.uiContext.getString(this.channelTypeToInstruction[this.target.getChannel()]));this.authError&&n.setError(this.authErrorMessage);n.onSubmit(function(t){i.clearError();n.blockInteraction();var r=com.ts.mobile.sdk.OtpInputOtpSubmission.createOtpSubmission(t),u=com.ts.mobile.sdk.TargetBasedAuthenticatorInput.createAuthenticatorInput(r);i.resolveInputPromise(com.ts.mobile.sdk.InputOrControlResponse.createInputResponse(u))});n.onBack(function(){i.clearError();n.blockInteraction();i.state=pt.TargetSelection;i.showAuthUi()});n.onResend(function(){i.clearError();n.blockInteraction();var t=com.ts.mobile.sdk.OtpInputRequestResend.createOtpResendRequest(),r=com.ts.mobile.sdk.TargetBasedAuthenticatorInput.createAuthenticatorInput(t);i.resolveInputPromise(com.ts.mobile.sdk.InputOrControlResponse.createInputResponse(r))});this.showAuthenticatorPage(n)}},{key:"showTargetSelectionInput",value:function(){var i=this,u=0,r={},n=new sh(this.actionContext);n.error=!!this.authError;n.setTitle(this.uiContext.getString(t.ts_authenticator_otp_title_auth));n.setInstructions(this.getTargetSelectionInstruction());n.onSubmit(function(t){i.clearError();n.blockInteraction();var u=com.ts.mobile.sdk.TargetBasedAuthenticatorInput.createTargetSelectionRequest(r[t]);i.resolveInputPromise(com.ts.mobile.sdk.InputOrControlResponse.createInputResponse(u))});this.possibleTargets.forEach(function(t){var f=t.getDeviceDetails(),e=(++u).toString();r[e]=t;n.addChannelTarget({channel:t.getChannel(),targetId:e,targetName:f?g.getDeviceNameFromDeviceDetails(f):t.getDescription(),targetInfo:f?g.getLastAccessedFromDeviceDetails(i.uiContext,f):null})});this.showAuthenticatorPage(n)}},{key:"onCancel",value:function(){this.clearError();k(u(i.prototype),"onCancel",this).call(this)}},{key:"showAuthUi",value:function(){switch(this.state){case pt.TargetSelection:this.showTargetSelectionInput();break;case pt.Input:this.isSupportedFormat?this.showOtpInput():Promise.reject("Unsupported Otp code format")}}},{key:"showRegUi",value:function(){throw new Error("Otp registration unsupported");}},{key:"getTargetSelectionInstruction",value:function(){var n;return n=this.authError&&this.authError.getErrorCode()===com.ts.mobile.sdk.AuthenticationErrorCode.InvalidInput?t.ts_authenticator_otp_error_code_expired:t.ts_authenticator_otp_targets_intro,this.uiContext.getString(n)}}]),i}(lt),ph="xmui-totp-page",he="xmui-totp-form",wh=function(n){function h(n,f,e){var v,o,p,l;return r(this,h),(o=s(this,u(h).call(this,i.page_totp_auth,ph,n))).challengeType=f,o.challenge=e,o.channelTypeLocalizationKeys=(c(v={},com.ts.mobile.sdk.TotpChallengeFormatType.Numeric,t.ts_authenticator_totp_input_with_challenge_intro),c(v,com.ts.mobile.sdk.TotpChallengeFormatType.AlphaNumeric,t.ts_authenticator_totp_input_with_challenge_intro),c(v,com.ts.mobile.sdk.TotpChallengeFormatType.QrCode,t.ts_authenticator_totp_input_with_qr_challenge_intro),v),o.setTitle(o.uiContext.getString(t.ts_authenticator_totp_title)),o.setInstructions(o.uiContext.getString(o.channelTypeLocalizationKeys[o.challengeType]||t.ts_authenticator_totp_input_intro)),p=o.createForm(),o.setContent(p),l=new a(i.button_continue),l.label=o.uiContext.getString(t.ts_authenticator_password_cta_positive),l.disabled=!0,l.type=bt.Submit,l.form=he,l.onClick(o.handleSend.bind(y(o))),o.sendButton=l,o.addRightButton(l),o}return o(h,n),f(h,[{key:"onSubmit",value:function(n){this.onSubmitCB=n}},{key:"setError",value:function(n){this.error=!0;this.totpCodeInput.setError(n)}},{key:"clearError",value:function(){this.error=!1;this.totpCodeInput.clearError()}},{key:"handleSend",value:function(){this.onSubmitCB&&this.onSubmitCB(this.totpCodeInput.value)}},{key:"handleTotpCodeChanged",value:function(){var n=this.totpCodeInput.value;this.sendButton.disabled=null==n||0===n.length}},{key:"createSpacer",value:function(){var n=new e;return n.className="".concat("xmui-totp-form","_spacer"),n}},{key:"createChallenge",value:function(){var r,n,t,i;switch(this.challengeType){case com.ts.mobile.sdk.TotpChallengeFormatType.QrCode:n=new e;n.className="".concat("xmui-totp-form","_qr-code-container");t=new fu;t.className="".concat("xmui-totp-form","_qr-code");t.src=this.challenge;n.appendChild(t);r=n;break;case com.ts.mobile.sdk.TotpChallengeFormatType.Numeric:case com.ts.mobile.sdk.TotpChallengeFormatType.AlphaNumeric:i=new v;i.className="".concat("xmui-totp-form","_alphanumeric-code");i.setText(this.challenge);r=i}return r}},{key:"createStep1Title",value:function(){var n=new v,i;return n.className="".concat("xmui-totp-form","_step"),i=this.challengeType===com.ts.mobile.sdk.TotpChallengeFormatType.QrCode?t.ts_authenticator_totp_qrcode_challenge_step1_message:t.ts_authenticator_totp_code_challenge_step1_message,n.setText(this.uiContext.getString(i)),n}},{key:"createStep2Title",value:function(){var n=new v,i;return n.className="".concat("xmui-totp-form","_step"),i=this.challengeType===com.ts.mobile.sdk.TotpChallengeFormatType.QrCode?t.ts_authenticator_totp_qrcode_challenge_step2_message:t.ts_authenticator_totp_code_challenge_step2_message,n.setText(this.uiContext.getString(i)),n}},{key:"createForm",value:function(){var r=new ct,u,n;if(r.addClass("xmui-totp-form"),r.id=he,r.appendChild(this.createSpacer()),null!=this.challengeType){var f=this.createStep1Title(),o=this.createChallenge(),s=this.createStep2Title();r.appendChildren(f,this.createSpacer(),o,this.createSpacer(),s,this.createSpacer())}return u=new e,u.className="".concat("xmui-totp-form","_input"),n=new tt(w.Text,i.input_totp_code),n.name="totp-code",n.value="",n.placeholder=this.uiContext.getString(t.ts_authenticator_totp_input_hint),n.onChange(this.handleTotpCodeChanged.bind(this)),n.focus(),u.appendChild(n),this.totpCodeInput=n,r.appendChild(u),r.appendChild(this.createSpacer()),r}}]),h}(ut),bh=function(n){function i(n,t){return r(this,i),s(this,u(i).call(this,n,t))}return o(i,n),f(i,[{key:"setAvailableTargets",value:function(n){this.availableTargets=n}},{key:"setTargetDevices",value:function(n){this.targetDevices=n}},{key:"setChallenge",value:function(n){this.challenge=this.getChallenge(n)}},{key:"showAuthUi",value:function(){this.availableTargets&&!this.targetDevices?this.showTargetSelectionUi():this.showCodeInputUi()}},{key:"promiseRecoveryForError",value:function(n,t,r){return n.getErrorCode()==com.ts.mobile.sdk.AuthenticationErrorCode.InvalidInput&&t.indexOf(com.ts.mobile.sdk.AuthenticationErrorRecovery.RetryAuthenticator)>-1&&n.getPublicSymbolicProperty(com.ts.mobile.sdk.AuthenticationErrorProperty.AuthenticatorInvalidInputErrorDescription)==com.ts.mobile.sdk.AuthenticationErrorPropertySymbol.AuthenticatorInvalidInputErrorDescriptionTotpIncorrectCheckDigit?(h.log("Totp authentication failed due to invalid check-digit, starting recovery"),this.inputError="Typing error detected - retype code",Promise.resolve(com.ts.mobile.sdk.AuthenticationErrorRecovery.RetryAuthenticator)):k(u(i.prototype),"promiseRecoveryForError",this).call(this,n,t,r)}},{key:"showTargetSelectionUi",value:function(){var r=this,u=this.uiContext,n=new df(this.actionContext),i;n.setTitle(u.getString(t.ts_authenticator_totp_title));n.setInstructions(u.getString(t.ts_authenticator_totp_targets_intro));i={};this.availableTargets.forEach(function(t){var u=t.getDeviceDetails(),f=u.getDeviceId(),e=g.getDeviceNameFromDeviceDetails(u),o=g.getLastAccessedFromDeviceDetails(r.uiContext,u);i[f]=t;n.addDevice(f,e,o,!1)});n.onSubmit(function(t){n.blockInteraction();var u=t.map(function(n){return i[n]}),f=g.createTargetsSelectionResponse(u);r.resolveInputPromise(f)});this.showAuthenticatorPage(n)}},{key:"showCodeInputUi",value:function(){var t=this,n=new wh(this.actionContext,this.challenge.type,this.challenge.value);this.inputError&&n.setError(this.inputError);n.onSubmit(function(i){n.blockInteraction();var r=com.ts.mobile.sdk.impl.TotpInputCodeSubmissionImpl.createTotpCodeSubmission(i),u=com.ts.mobile.sdk.TargetBasedAuthenticatorInput.createAuthenticatorInput(r);t.resolveInputPromise(com.ts.mobile.sdk.InputOrControlResponse.createInputResponse(u))});this.showAuthenticatorPage(n)}},{key:"showRegUi",value:function(){throw new Error("Method not implemented.");}},{key:"getChallenge",value:function(n){var t={type:null,value:null};if(n)switch(t.type=n.getFormat().getType(),t.type){case com.ts.mobile.sdk.TotpChallengeFormatType.AlphaNumeric:case com.ts.mobile.sdk.TotpChallengeFormatType.Numeric:t.value=n.getValue();break;case com.ts.mobile.sdk.TotpChallengeFormatType.QrCode:t.value="data:image/jpeg;base64,"+n.getValue()}return t}}]),i}(lt),kh="xmui-fido2-authentication",dh="xmui-fido2-registration",gh=function(n){function h(n,f,e,o){var c,y=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l,v;return r(this,h),(c=s(this,u(h).call(this,f?i.page_fido2_reg:i.page_fido2_auth,f?dh:kh,n,e,o))).isRegistrationMode=f,c.disableAutocomplete=y,c.displayNameInputRegex=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{6,}$/,c.setTitle(c.getTitle()),c.setInstructions(c.getInstructions()),l=new a(i.button_continue),l.label=c.uiContext.getString(t.ts_authenticator_password_cta_positive),c.addRightButton(l),c.continueButton=l,v=c.createForm(),c.setContent(v),c}return o(h,n),f(h,[{key:"setError",value:function(n){this.error=!0;this.displayNameInput.setError(n)}},{key:"clearError",value:function(){this.error=!1;this.displayNameInput.clearError()}},{key:"reset",value:function(){this.unblockInteraction();this.displayNameInput.value="";this.displayNameInput.focus();this.repeatDisplayNameInput&&(this.repeatDisplayNameInput.value="")}},{key:"onSubmit",value:function(n){this.onSubmitCB=n}},{key:"getTitle",value:function(){var n=this.isRegistrationMode?"ts_authenticator_fido2_title_reg":"ts_authenticator_fido2_title_auth";return this.uiContext.getString(n)}},{key:"getInstructions",value:function(){var n;return n=this.isRegistrationMode?"ts_authenticator_fido2_intro_reg":"ts_authenticator_fido2_intro_auth",this.uiContext.getString(n)}},{key:"createForm",value:function(){var n=this,f=this.uiContext,r=new ct(this.continueButton),t,o,s,u;return r.addClass("xmui-fido2-page-form"),r.id="xmui-fido2-form",t=new tt(w.Text,i.input_text),o=this.getAutocompleteValue(),(t.name="displayName",t.placeholder=f.getString("ts_authenticator_fido2_field_hint"),t.disabled=!1,t.value="",t.required=!0,t.autocomplete=o,t.ariaLabel=f.getString("ts_accessibility_fido2_enter_name"),t.focus(),this.displayNameInput=t,r.appendChild(t),this.isRegistrationMode)&&(s=new e,s.className="".concat("xmui-fido2-page-form","_spacer"),r.appendChild(s),u=new tt(w.Text,i.input_repeat_fido2),u.name="repeat-displayName",u.placeholder=f.getString("ts_authenticator_fido2_reg_field_hint"),u.disabled=!1,u.value="",u.required=!0,t.autocomplete=o,u.ariaLabel=f.getString("ts_accessibility_fido2_enter_name_again"),this.repeatDisplayNameInput=u,r.appendChild(u)),this.addRecoveryButtonToForm(r),r.externalValidations=function(){var t=!0;return n.isRegistrationMode&&(n.validateDisplayNameMatch()||(n.repeatDisplayNameInput.setError(n.uiContext.getString("ts_authenticator_fido2_error_reg_no_match"),!1),n.displayNameInput.focus(),t=!1),n.isDisplayNameValid()||(n.displayNameInput.setError(n.uiContext.getString("ts_authenticator_fido2_error_reg_strength_validation_failed"),!1),n.repeatDisplayNameInput.setError(null,!0),n.displayNameInput.focus(),t=!1),0==t&&(n.displayNameInput.value="",n.repeatDisplayNameInput.value="")),t},r.onUserInput(this.handleDisplayNameChanged.bind(this)),r.onSubmit(function(t){n.blockInteraction();n.onSubmitCB&&n.onSubmitCB(t.displayName)}),r.start(),r}},{key:"validateDisplayNameMatch",value:function(){return this.displayNameInput.value===this.repeatDisplayNameInput.value}},{key:"isDisplayNameValid",value:function(){return!0}},{key:"getAutocompleteValue",value:function(){return this.disableAutocomplete?at.Off:(this.isRegistrationMode,at.Username)}},{key:"handleDisplayNameChanged",value:function(){this.displayNameInput.error&&this.displayNameInput.clearError();this.repeatDisplayNameInput&&this.repeatDisplayNameInput.error&&this.repeatDisplayNameInput.clearError()}}]),h}(ut),nc=function(n){function t(n,i){var f;return r(this,t),(f=s(this,u(t).call(this,n,i))).supportsInlineError=!0,f}return o(t,n),f(t,[{key:"showAuthUi",value:function(){this.showFido2Page(!1)}},{key:"showRegUi",value:function(){this.showFido2Page(!0)}},{key:"showFido2Page",value:function(n){var r=this,i,t;this.authError&&this.fido2Page?(this.fido2Page.reset(),this.fido2Page.setError(this.authErrorMessage)):(i=!0===this.clientContext.disableFido2Autocomplete,t=new gh(this.actionContext,n,this.description.getCredentialRecoveryEscapeOption(),this.description.getAuthenticatorId(),i),this.showAuthenticatorPage(t),this.fido2Page=t);this.fido2Page.onSubmit(function(n){var t=com.ts.mobile.sdk.Fido2InputResponse.create(n);r.resolveInputPromise(com.ts.mobile.sdk.InputOrControlResponse.createInputResponse(t))})}}]),t}(lt),tc="xmui-ticket-wait-page",ic=function(n){function t(n,f,e,o){var h,c;return r(this,t),h=s(this,u(t).call(this,i.page_ticket_wait,tc,n)),wt(u(t.prototype),"busy",!0,y(h),!0),c=h.createContent(f,e,o),h.setContent(c),h}return o(t,n),f(t,[{key:"createSpacer",value:function(){var n=new e;return n.className="".concat("xmui-ticket-wait","_spacer"),n}},{key:"createMessage",value:function(n){var t=new v;return t.setText(n),t.className="".concat("xmui-ticket-wait","_message"),t}},{key:"createContent",value:function(n,t,i){var r=new e,s,u,f,o,h;switch(r.className="xmui-ticket-wait",r.appendChild(this.createSpacer()),t){case com.ts.mobile.sdk.TicketIdFormat.Qr:s=this.createMessage(n);u=new e;u.className="".concat("xmui-ticket-wait","_qr-code-container");f=new fu;f.src=i;f.className="".concat("xmui-ticket-wait","_qr-code");u.appendChild(f);r.appendChildren(s,this.createSpacer(),u);break;default:o=new e;o.className="".concat("xmui-ticket-wait","_icon ").concat(l.WaitForTicket);h=this.createMessage(n);r.appendChildren(o,this.createSpacer(),h,this.createSpacer())}return r}},{key:"busy",set:function(){}}]),t}(wi),rc=function n(){r(this,n)},uc=function(){function n(){r(this,n);this.pollingIntervalMillis=3e3}return f(n,[{key:"setWaitingTicket",value:function(n){this.ticket=this.getTicket(n)}},{key:"startSession",value:function(n,t){this.username=h.getUsernameFromClientContext(t);this.clientContext=t;this.actionContext=n}},{key:"endSession",value:function(){this.abortPolling()}},{key:"promiseInput",value:function(){var n=this;return this.ticket?new Promise(function(t){n.currentPromiseResolve=t;n.ticketWaitPage||n.createTicketWaitPage();n.startPolling()}):Promise.reject("TicketWaitSession: Failed build ticket info")}},{key:"createTicketWaitPage",value:function(){var t=this,n=new ic(this.actionContext,this.ticket.instructions,this.ticket.format,this.ticket.value);this.username&&n.setUserName(this.username);n.setTitle(this.ticket.title);n.onCancel(function(){t.resolve(g.createCancelAuthenticatorRequest());t.abortPolling()});n.onEscape(function(n){t.resolve(com.ts.mobile.sdk.InputOrControlResponse.createEscapeResponse(n,{}));t.abortPolling()});h.renderPage(n,this.clientContext);this.ticketWaitPage=n}},{key:"startPolling",value:function(){var n=this;this.pollingTimer=setTimeout(function(){n.resolve(com.ts.mobile.sdk.InputOrControlResponse.createInputResponse(com.ts.mobile.sdk.TicketWaitInput.createPollRequest()));n.pollingTimer=null},this.pollingIntervalMillis)}},{key:"abortPolling",value:function(){this.pollingTimer&&(clearTimeout(this.pollingTimer),this.pollingTimer=null)}},{key:"resolve",value:function(n){this.currentPromiseResolve&&this.currentPromiseResolve(n);this.currentPromiseResolve=null}},{key:"getTicket",value:function(n){var t=new rc,i;if(n&&(t.title=n.getTitle(),t.instructions=n.getText(),i=n.getTicketId(),i))switch(t.format=i.getFormat(),t.format){case com.ts.mobile.sdk.TicketIdFormat.Qr:t.value="data:image/jpeg;base64,"+i.getValue();break;default:throw t=null,h.log("Unsupported ticket ID format"),new Error("Unsupported ticket ID format");}return t}}]),n}(),cr="xmui-actions-menu-button",fc="".concat(cr,"_menu-container"),ec=function(n){function t(n){var f;return r(this,t),(f=s(this,u(t).call(this))).actionsMenu=n,f.isOpen=!1,f.className="".concat(cr," ").concat(l.More),f.automationId=i.button_actions_list,f.menuContainer=new e,f.menuContainer.className=fc,f.menuContainer.appendChild(n),f.appendChild(f.menuContainer),f.onMousedown(function(){f.openMenu()}),f.handleMousedownEvent=f.handleMousedownEvent.bind(y(f)),f.handleWheelEvent=f.handleWheelEvent.bind(y(f)),f.handleActionSelection=f.handleActionSelection.bind(y(f)),f.handleResize=bi(f.handleResize.bind(y(f)),10,!1),n.onSelectionChanged(f.handleActionSelection),f.actionsMenu.onFocus(f.handleFocusEvent.bind(y(f))),f.actionsMenu.onBlur(f.handleBlurEvent.bind(y(f))),f.actionsMenu.onKeydown(f.handleKeydownEvent.bind(y(f))),f}return o(t,n),f(t,[{key:"openMenu",value:function(){this.isOpen||(this.previousFocusedElement=document.activeElement,this.addClass("".concat(cr,"--open")),this.actionsMenu.clearSelection(),this.actionsMenu.clearActive(),this.actionsMenu.focus(),this.updateMenuPosition(),this.isOpen=!0)}},{key:"updateMenuPosition",value:function(){var n=this.htmlElement.getBoundingClientRect(),f=n.left+n.width/2,i=n.top+n.height/2,t=this.menuContainer.htmlElement,r=window.getComputedStyle(t),e=parseInt(r.width),o=parseInt(r.height),u=window.innerHeight-i-o,s=u<0?u:0;t.style.left=f-e+"px";t.style.top=i+s+"px"}},{key:"closeMenu",value:function(){this.isOpen&&(this.previousFocusedElement&&this.previousFocusedElement.focus&&this.previousFocusedElement.focus(),this.removeClass("".concat(cr,"--open")),window.removeEventListener("resize",this.handleResize),document.removeEventListener("mousedown",this.handleMousedownEvent),document.removeEventListener("wheel",this.handleWheelEvent),this.isOpen=!1)}},{key:"handleFocusEvent",value:function(){window.addEventListener("resize",this.handleResize);document.addEventListener("mousedown",this.handleMousedownEvent);document.addEventListener("wheel",this.handleWheelEvent)}},{key:"handleBlurEvent",value:function(){this.actionsMenu.htmlElement.contains(document.activeElement)||(this.previousFocusedElement=null,this.closeMenu())}},{key:"handleKeydownEvent",value:function(n,t){t.keyCode===rt.Escape&&this.closeMenu()}},{key:"handleMousedownEvent",value:function(){this.closeMenu()}},{key:"handleResize",value:function(){this.closeMenu()}},{key:"handleWheelEvent",value:function(){this.closeMenu()}},{key:"handleActionSelection",value:function(){this.closeMenu()}}]),t}(e),oc="xmui-text-state",cu=function(n){function t(){var n;return r(this,t),(n=s(this,u(t).call(this))).className=oc,n}return o(t,n),t}(v),sc="xmui-authenticator-configuration-page",hc=function(n){function e(n){var f,o,h;return r(this,e),(f=s(this,u(e).call(this,i.page_configure_authenticators,sc))).uiContext=n,f.keyToActionMenuButton={},f.setTitle(n.getString(t.ts_session_config_title)),o=new a(i.button_cancel),o.label=n.getString(t.ts_gen_cancel),o.onClick(function(){f.onCancelCB&&f.onCancelCB()}),f.addLeftButton(o),h=f.createContent(),f.setContent(h),f}return o(e,n),f(e,[{key:"createContent",value:function(){var n=this;return this.authList=new ti(d.None),this.authList.onItemClicked(function(t){var i=n.keyToActionMenuButton[t];i&&i.openMenu()}),this.authList.focus(),this.authList}},{key:"getDefaultState",value:function(){var n=new cu;return n.setText(this.uiContext.getString(t.ts_gen_default)),n}},{key:"addAuthenticator",value:function(n,t,i,r,u,f,e){var h=pi.getAuthenticatorIcon(r)||pi.getAuthenticatorIcon(com.ts.mobile.sdk.AuthenticatorType.Generic),c=f?[this.getDefaultState()]:null,a=e?[l.Registered]:null,o=new ec(u),s;this.keyToActionMenuButton[n]=o;s=new ii(t,i,h,o,c,a);this.authList.addListItem(n,!1,s)}},{key:"onCancel",value:function(n){this.onCancelCB=n}}]),e}(oi),ce="xmui-actions-menu",cc=function(n){function t(){var n;return r(this,t),(n=s(this,u(t).call(this,d.SingleMouseup,!0))).className=ce,n.automationId=i.list_actions,n.tabindex=-1,n.role="menu",n}return o(t,n),f(t,[{key:"addAction",value:function(n){var t=new v;t.id=br.generate();t.className="".concat(ce,"_action");t.key=n.key;t.setText(n.label);this.addItem(t);this.role="menuitem";this.selected=!1;this.disabled=!1}}]),t}(lf);!function(n){n[n.Register=0]="Register";n[n.Unregister=1]="Unregister";n[n.Reregister=2]="Reregister";n[n.SetDefault=3]="SetDefault"}(b||(b={}));var le=(c(di={},b.Register,t.ts_session_config_item_action_register),c(di,b.Unregister,t.ts_session_config_item_action_unregister),c(di,b.Reregister,t.ts_session_config_item_action_reregister),c(di,b.SetDefault,t.ts_session_config_item_action_set_as_default),di),lc=(c(gi={},b.Register,t.ts_session_config_item_register_failed),c(gi,b.Unregister,t.ts_session_config_item_unregister_failed),c(gi,b.Reregister,t.ts_session_config_item_reregister_failed),c(gi,b.SetDefault,t.ts_session_config_item_default_failed),gi),ac=function(){function n(t){var i;r(this,n);this.username=t;this.actionTypeToEMenuAction=(c(i={},com.ts.mobile.sdk.AuthenticatorConfigurationAction.Register,b.Register),c(i,com.ts.mobile.sdk.AuthenticatorConfigurationAction.Unregister,b.Unregister),c(i,com.ts.mobile.sdk.AuthenticatorConfigurationAction.Reregister,b.Reregister),i)}return f(n,[{key:"setAuthenticatorsList",value:function(n){var r=this,u=this.uiContext,i=new hc(u);i.setInstructions(this.instructions||u.getString(t.ts_session_config_intro));i.setUserName(this.username);n.forEach(function(n){var t=n.getDescription(),f=t.getAuthenticatorId(),s=u.getString(et.getAuthenticatorNameKey(f)),h=u.getString(et.getAuthenticatorDescriptionKey(f)),c=t.getType(),l=n.getAvailableActions(),e=t.getDefaultAuthenticator(),a=t.getRegistered(),o=r.buildActionsMenu(l,e);o.onSelectionChanged(r.handleAction.bind(r,n));i.addAuthenticator(f,s,h,c,o,e,a)});i.onCancel(function(){r.configServices.finishSession()});h.renderPage(i,this.clientContext)}},{key:"startSession",value:function(n,t,i){this.username=h.getUsernameFromClientContext(i)||this.username;this.configServices=n;this.actionContext=t;this.clientContext=i;this.uiContext=n.getUiContext();this.instructions=null;h.log("Starting configuration session")}},{key:"endSession",value:function(){h.log("Ending configuration session")}},{key:"buildActionsMenu",value:function(n,t){var i=this,r=new cc;return n.forEach(function(n){r.addAction({key:i.actionTypeToEMenuAction[n].toString(),label:i.uiContext.getString(le[i.actionTypeToEMenuAction[n]])})}),t||r.addAction({key:b.SetDefault.toString(),label:this.uiContext.getString(le[b.SetDefault])}),r}},{key:"handleAction",value:function(n,t){var i,r=this,u=parseInt(t);switch(u){case b.SetDefault:i=this.handleSetDefault(n);break;case b.Register:i=this.handleRegister(n);break;case b.Reregister:i=this.handleReregister(n);break;case b.Unregister:i=this.handleUnregister(n)}i.then(function(){return r.configServices.requestRefreshAuthenticators()}).catch(function(t){if(t&&t.getErrorCode&&t.getErrorCode()===com.ts.mobile.sdk.AuthenticationErrorCode.UserCanceled)r.configServices.requestRefreshAuthenticators();else{var i=n.getDescription().getAuthenticatorId(),f=r.uiContext.getString(et.getAuthenticatorNameKey(i)),e="fido2"!==i&&t.getMessage?t.getMessage():"",o=r.uiContext.formatString(lc[u],[f,e]);r.presentError(t,o)}})}},{key:"setSuccessMessage",value:function(n,t){var i=this.uiContext,r=n.getDescription().getAuthenticatorId(),u=i.getString(et.getAuthenticatorNameKey(r));this.instructions=i.formatString(t,[u])}},{key:"handleSetDefault",value:function(n){var i=this;return this.configServices.setDefaultAuthenticator(n).then(function(r){return i.setSuccessMessage(n,i.uiContext.getString(t.ts_session_config_item_default_result)),r})}},{key:"handleReregister",value:function(n){var i=this;return this.configServices.reregisterAuthenticator(n,this.clientContext).then(function(){return i.configServices.setDefaultAuthenticator(n).then(function(r){return i.setSuccessMessage(n,i.uiContext.getString(t.ts_session_config_item_reregister_result)),r})})}},{key:"handleRegister",value:function(n){var i=this;return this.configServices.registerAuthenticator(n,this.clientContext).then(function(){return i.configServices.setDefaultAuthenticator(n).then(function(r){return i.setSuccessMessage(n,i.uiContext.getString(t.ts_session_config_item_register_result)),r})})}},{key:"handleUnregister",value:function(n){var i=this;return new Promise(function(r,u){var f=i.uiContext;i.setSuccessMessage(n,f.getString(t.ts_session_config_item_unregister_result));var o=n.getDescription().getAuthenticatorId(),s=f.getString(et.getAuthenticatorNameKey(o)),c=f.getString(t.ts_session_config_item_unregister_dialog_cta),a=f.getString(t.ts_gen_cancel),e=new pf(f,c,a);i.username&&e.setUserName(i.username);e.setDialogTitle(f.getString(t.ts_session_config_item_unregister_dialog_title));e.setDialogMessage(f.formatString(t.ts_session_config_item_unregister_dialog_message,[s]));e.setDialogIconClass(l.Unregister);e.onSelect(function(t){e.blockInteraction();t?i.configServices.unregisterAuthenticator(n,i.clientContext).then(r,u):r(!0)});h.renderPage(e,i.clientContext)})}},{key:"presentError",value:function(n,i){var r=this;this.instructions=null;st.promiseInformationInput(this.username,l.Information,this.uiContext.getString(t.ts_session_config_error_dialog_title),i,this.uiContext.getString(t.ts_gen_continue),this.uiContext,this.clientContext).then(function(){n.getErrorCode()==com.ts.mobile.sdk.AuthenticationErrorCode.PolicyRejection?r.configServices.finishSession():r.configServices.requestRefreshAuthenticators()})}}]),n}(),vc="xmui-registration-promotion-introduction-page",yc=function(n){function e(n,f,o,h,c){var v,y,p;return r(this,e),(v=s(this,u(e).call(this,i.dialog_registration_promotion_intro,vc,n,!0,f,o,l.Promotion))).cancelButton.label=c,v.cancelButton.automationId=i.button_abort,y=new a(i.button_skip),y.label=n.getUiContext().getString(t.ts_session_promotion_skip),y.onClick(function(){return v.onSkipCB&&v.onSkipCB()}),v.addRightButton(y),p=new a(i.button_continue),p.label=h,p.onClick(function(){return v.onContinueCB&&v.onContinueCB()}),v.addRightButton(p),v}return o(e,n),f(e,[{key:"onContinue",value:function(n){this.onContinueCB=n}},{key:"onSkip",value:function(n){this.onSkipCB=n}}]),e}(yf),pc=function(){function n(t,i){r(this,n);this.username=t;this.actionContext=i}return f(n,[{key:"startSession",value:function(n,t){this.username=h.getUsernameFromClientContext(n)||this.username;this.clientContext=n;this.uiContext=t.getUiContext();h.log("Starting registration promotion action session")}},{key:"endSession",value:function(){this.clientContext.overrideAuthenticatorCancelBehavior=!1;h.log("Ending registration promotion action session")}},{key:"promptIntroduction",value:function(n,t,i,r){var u=this;return new Promise(function(f){var e=new yc(u.actionContext,n,t,i,r),o;e.setUserName(u.username);o=com.ts.mobile.sdk.PromotionControlRequest;e.onContinue(function(){f(com.ts.mobile.sdk.PromotionInput.createControlResponse(o.Continue))});e.onSkip(function(){f(com.ts.mobile.sdk.PromotionInput.createControlResponse(o.Skip))});e.onCancel(function(){f(com.ts.mobile.sdk.PromotionInput.createControlResponse(o.Abort))});e.onEscape(function(n){f(com.ts.mobile.sdk.PromotionInput.createEscapeRequest(n,{}))});h.renderPage(e,u.clientContext)})}},{key:"setPromotedAuthenticators",value:function(n){var u=this,r=this.uiContext,f=com.ts.mobile.sdk.PromotionControlRequest;return new Promise(function(e){var c={},o=new vf(u.actionContext),s;o.setUserName(u.username);o.setTitle(r.getString(t.ts_session_promotion_title));o.setInstructions(r.getString(t.ts_session_promotion_intro));n.forEach(function(n){var t=n.getAuthenticatorId(),u=n.getType(),i;c[t]=n;i=r.getString(et.getAuthenticatorNameKey(t));o.addAuthenticator(t,i,u,!1)});o.onSubmit(function(n){o.blockInteraction();u.clientContext.overrideAuthenticatorCancelBehavior=!0;e(com.ts.mobile.sdk.PromotionInput.createAuthenticatorDescription(c[n]))});o.onEscape(function(n){o.blockInteraction();e(com.ts.mobile.sdk.PromotionInput.createEscapeRequest(n,{}))});o.cancelButton.label=r.getString(t.ts_session_promotion_abort);o.automationId=i.button_abort;o.onCancel(function(){o.blockInteraction();e(com.ts.mobile.sdk.PromotionInput.createControlResponse(f.Abort))});s=new a(i.button_skip);s.label=r.getString(t.ts_session_promotion_skip);s.onClick(function(){o.blockInteraction();e(com.ts.mobile.sdk.PromotionInput.createControlResponse(f.Skip))});o.addRightButton(s);h.renderPage(o,u.clientContext)})}}]),n}(),ae="xmui-select-device-to-manage",wc=function(n){function h(n){var f,e,o;return r(this,h),(f=s(this,u(h).call(this,i.page_select_device_to_manage,ae))).uiContext=n,f.setTitle(n.getString(t.ts_session_dm_title)),f.setInstructions(n.getString(t.ts_session_dm_details_subtitle)),e=new a(i.button_back),e.label=n.getString(t.ts_gen_close),e.onClick(function(){f.onBackCB&&f.onBackCB()}),f.addLeftButton(e),o=f.createContent(),f.setContent(o),f}return o(h,n),f(h,[{key:"createContent",value:function(){var n=this;return this.deviceList=new ti(d.Single),this.deviceList.onSelectionChanged(function(t){t.length&&n.onSelectCB&&n.onSelectCB(t[0])}),this.deviceList.focus(),this.deviceList}},{key:"getCurrentDeviceState",value:function(){var n=new cu;return n.setText(this.uiContext.getString(t.ts_session_dm_details_current_device)),n}},{key:"addDevice",value:function(n,t,i,r,u){var f=new e,o,s;f.className="".concat(ae,"_expand-icon ").concat(l.Expand);o=r?[this.getCurrentDeviceState()]:null;s=new ii(t,i,u,f,o);this.deviceList.addListItem(n,!1,s)}},{key:"onSelect",value:function(n){this.onSelectCB=n}},{key:"onBack",value:function(n){this.onBackCB=n}}]),h}(oi),lu="".concat("xmui-manage-device","_row"),ve="".concat("xmui-manage-device","_info"),ye="".concat("xmui-manage-device","_separator"),bc="".concat("xmui-manage-device","_name"),kc="".concat("xmui-manage-device","_spacer"),dc="xmui-device-management-page",gc=function(n){function h(n){var f,e;return r(this,h),(f=s(this,u(h).call(this,i.page_manage_devices,dc))).uiContext=n,f.setTitle(n.getString(t.ts_session_dm_details_title)),f.setInstructions(n.getString(t.ts_session_dm_details_subtitle)),e=new a(i.button_cancel),e.label=n.getString(t.ts_gen_back),e.onClick(function(){f.onCancelCB&&f.onCancelCB()}),e.focus(),f.addLeftButton(e),f.handleAction=f.handleAction.bind(y(f)),f}return o(h,n),f(h,[{key:"setDevice",value:function(n,r,u,f,o){var d=this.uiContext,h=new e,s,y,g,nt,c,p,w,tt,b,k,l;h.className="xmui-manage-device";s=new e;s.className=lu;y=new v;(y.setText(n),y.className=bc,s.appendChild(y),f)&&(g=new cu,g.setText(this.uiContext.getString(t.ts_session_dm_section_current)),s.appendChild(g));o.indexOf(com.ts.mobile.sdk.DeviceManagementAction.Rename)>-1&&(nt=new e,nt.className=kc,c=new a(i.button_rename),c.label=d.getString(t.ts_session_dm_details_rename_action),c.value=com.ts.mobile.sdk.DeviceManagementAction.Rename,c.onClick(this.handleAction),s.appendChildren(nt,c));p=new v;p.setText(r+"\n"+u);p.className=ve;w=new e;(w.className=lu,w.appendChildren(p),h.appendChildren(s,w),(new e).className=ye,f||o.indexOf(com.ts.mobile.sdk.DeviceManagementAction.Remove)>-1)&&(tt=new e,tt.className=ye,h.appendChild(tt),b=new e,b.className=lu,k=new v,k.setText(d.getString(t.ts_session_dm_details_remove_subtitle)),k.className=ve,l=new a(i.button_remove,si.Alert),l.label=d.getString(t.ts_session_dm_details_remove_action),l.value=com.ts.mobile.sdk.DeviceManagementAction.Remove,l.onClick(this.handleAction),b.appendChildren(k,l),h.appendChild(b));this.setContent(h)}},{key:"onAction",value:function(n){this.onActionCB=n}},{key:"onCancel",value:function(n){this.onCancelCB=n}},{key:"handleAction",value:function(n){this.onActionCB&&this.onActionCB(n.value)}}]),h}(oi),nl=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'];var nr,au="xmui-popup-dialog",we=function(n){function t(){var n,i;return r(this,t),(n=s(this,u(t).call(this))).className=au,i=new e,i.className="".concat(au,"_overlay"),n.panel=new e,n.panel.className="".concat(au,"_panel"),n.appendChildren(i,n.panel),n.handleKeydownEvent=n.handleKeydownEvent.bind(y(n)),n}return o(t,n),f(t,[{key:"overlayAddClassName",value:function(n){this.panel.addClass(n)}},{key:"addToPanel",value:function(n){this.panel.appendChild(n)}},{key:"appendInto",value:function(n){k(u(t.prototype),"appendInto",this).call(this,n);document.addEventListener("keydown",this.handleKeydownEvent)}},{key:"close",value:function(){document.removeEventListener("keydown",this.handleKeydownEvent);this.remove()}},{key:"handleKeydownEvent",value:function(n){!function(n,t){var i,r=(i=pe(t))[0],u=i[i.length-1];"Tab"===n.key?t.contains(n.target)?n.shiftKey&&n.target===r?(u.focus(),n.preventDefault()):n.shiftKey||n.target!==u||(r.focus(),n.preventDefault()):((r=(i=pe(t))[0]).focus(),n.preventDefault()):t.contains(n.target)||n.preventDefault()}(n,this.panel.htmlElement)}}]),t}(e),rl="xmui-action-popup-dialog",vu=function(n){function t(){var n;return r(this,t),(n=s(this,u(t).call(this))).headerPanel=new ff(!0),n.headerPanel.show=!1,n.addToPanel(n.headerPanel),n.contentContainer=new e,n.contentContainer.className="".concat(rl,"_content"),n.actionPanel=new ef(!0),n.addToPanel(n.contentContainer),n.addToPanel(n.actionPanel),n}return o(t,n),f(t,[{key:"setTitle",value:function(n){this.headerPanel.show=!0;this.headerPanel.setText(n)}},{key:"setIcon",value:function(n){this.headerPanel.show=!0;this.headerPanel.setIcon(n)}},{key:"setContent",value:function(n){this.contentContainer.appendChild(n)}},{key:"addLeftButton",value:function(n){this.actionPanel.addLeftButton(n)}},{key:"addRightButton",value:function(n){this.actionPanel.addRightButton(n)}}]),t}(we),be="xmui-confirm-popup-dialog",ul=function(n){function h(n,f,o){var c,b=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l,p,w;return r(this,h),(c=s(this,u(h).call(this))).automationId=i.popup_dialog_confirm,c.handleClick=c.handleClick.bind(y(c)),l=new a(i.button_cancel),l.label=o||n.getString(t.ts_gen_cancel),l.value=!1,l.onClick(c.handleClick),c.addLeftButton(l),p=new a(i.button_continue),p.label=f||n.getString(t.ts_authenticator_password_cta_positive),p.value=!0,p.onClick(c.handleClick),c.addRightButton(p),w=new e,w.className="".concat(be,"_container"),c.messageComp=new v,c.messageComp.className="".concat(be,"_message"),w.appendChild(c.messageComp),c.setContent(w),b?p.focus():l.focus(),c}return o(h,n),f(h,[{key:"setMessage",value:function(n){this.messageComp.setText(n)}},{key:"onSelect",value:function(n){this.onSelectCB=n}},{key:"handleClick",value:function(n){this.onSelectCB(n.value)}}]),h}(vu),fl="xmui-input-popup-dialog",ke="xmui-text-input-form",el=function(n){function e(n,f,o){var h,l,c,v;return r(this,e),(h=s(this,u(e).call(this))).addClass(fl),h.automationId=i.popup_dialog_confirm,l=new a(i.button_cancel),l.label=o||n.getString(t.ts_gen_cancel),l.value=!1,l.onClick(function(){h.onCancelCB&&h.onCancelCB()}),h.addLeftButton(l),c=new a(i.button_continue),c.label=f||n.getString(t.ts_authenticator_password_cta_positive),c.value=!0,c.type=bt.Submit,c.disabled=!0,c.onClick(function(){h.onSubmitCB&&h.onSubmitCB(h.inputField.value)}),c.form=ke,h.addRightButton(c),h.confirmButton=c,v=h.buildContent(),h.setContent(v),h}return o(e,n),f(e,[{key:"setPlacehoder",value:function(n){this.inputField.placeholder=n}},{key:"onSubmit",value:function(n){this.onSubmitCB=n}},{key:"onCancel",value:function(n){this.onCancelCB=n}},{key:"buildContent",value:function(){var t=this,r=new ct,n;return r.id=ke,n=new tt(w.Text,i.input_text),n.disabled=!1,n.value="",n.onChange(function(){t.confirmButton.disabled=null==t.inputField.value||0===t.inputField.value.length}),n.focus(),this.inputField=n,r.appendChild(n),r}}]),e}(vu),ol=function(){function n(i){var u;r(this,n);this.username=i;this.actionToError=(c(u={},com.ts.mobile.sdk.DeviceManagementAction.Remove,t.ts_session_dm_item_action_remove_result_negative),c(u,com.ts.mobile.sdk.DeviceManagementAction.Rename,t.ts_session_dm_item_action_rename_result_negative),u)}return f(n,[{key:"setSessionDevicesList",value:function(n){var t=this;this.devices=n;this.deviceManagementSessionService&&(this.currentSelectedDevice=this.currentSelectedDevice?this.devices.find(function(n){return n.getInfo().getDeviceHwId()===t.currentSelectedDevice.getInfo().getDeviceHwId()}):null,this.currentSelectedDevice?this.openManageDevice(this.currentSelectedDevice):this.devices&&this.openSelectDeviceToManage())}},{key:"startSession",value:function(n,t,i){this.username=h.getUsernameFromClientContext(i)||this.username;this.deviceManagementSessionService=n;this.actionContext=t;this.clientContext=i;this.uiContext=n.getUiContext();this.instructions=null;h.log("Starting device management session");this.openSelectDeviceToManage()}},{key:"endSession",value:function(){h.log("Ending device management session")}},{key:"handleRemove",value:function(n){var i=this,r=this.uiContext;return new Promise(function(u){var e=i.getDeviceName(n),f=new ul(r,r.getString(t.ts_session_dm_item_action_dialog_remove_cta));f.setTitle(r.formatString(t.ts_session_dm_item_action_dialog_remove_title,[e]));f.setIcon(l.Remove);f.setMessage(r.getString(t.ts_session_dm_item_action_dialog_remove_message));f.onSelect(function(r){if(f.close(),r)if(n.getInfo().getIsCurrent()){var o=i.deviceManagementSessionService.removeCurrentDeviceAndFinishSession(i.clientContext).then(function(n){return n&&i.setSuccessMessage(t.ts_session_dm_item_action_remove_result_positive,e),n});u(o)}else u(i.deviceManagementSessionService.removeDevice(n,i.clientContext));else u(!1)});h.renderModal(f,i.clientContext)})}},{key:"handleRename",value:function(n){var i=this,r=this.uiContext;return new Promise(function(u){var e=i.getDeviceName(n),f=new el(r,r.getString(t.ts_session_dm_item_action_dialog_rename_cta));f.setTitle(r.formatString(t.ts_session_dm_item_action_dialog_rename_title,[e]));f.setIcon(l.Rename);f.setPlacehoder(r.getString(t.ts_session_dm_details_rename_input_hint));f.onCancel(function(){f.close();u(!1)});f.onSubmit(function(r){f.close();var o=i.deviceManagementSessionService.renameDevice(n,r,i.clientContext).then(function(n){return n&&i.setSuccessMessage(t.ts_session_dm_item_action_rename_result_positive,e,r),n});u(o)});h.renderModal(f,i.clientContext)})}},{key:"handleAction",value:function(n,t){var i,r=this;switch(t){case com.ts.mobile.sdk.DeviceManagementAction.Remove:i=this.handleRemove(n);break;case com.ts.mobile.sdk.DeviceManagementAction.Rename:i=this.handleRename(n)}i&&i.then(function(){}).catch(function(i){var u=r.getDeviceName(n),f=r.uiContext.formatString(r.actionToError[t],[u,i.getMessage()]);r.handleError(i,f)})}},{key:"setSuccessMessage",value:function(n,t,i){this.instructions=this.uiContext.formatString(n,[t,i])}},{key:"handleError",value:function(n,i){var r=this;this.instructions=null;st.promiseInformationInput(this.username,l.Information,this.uiContext.getString(t.ts_session_dm_error_dialog_title),i,this.uiContext.getString(t.ts_gen_continue),this.uiContext,this.clientContext).then(function(){r.openManageDevice(r.currentSelectedDevice)})}},{key:"handleCancel",value:function(){this.openSelectDeviceToManage()}},{key:"openManageDevice",value:function(n){var i=n.getInfo(),r=n.getAvailableActions(),u=this.getDeviceName(n),f=this.getDeviceOS(n),e=this.getLastAccessed(n),o=i.getIsCurrent(),t=new gc(this.uiContext);t.setUserName(this.username);t.setDevice(u,f,e,o,r);t.onAction(this.handleAction.bind(this,n));t.onCancel(this.handleCancel.bind(this));h.renderPage(t,this.clientContext)}},{key:"openSelectDeviceToManage",value:function(){var n=this,i,t;this.currentSelectedDevice=null;i={};t=new wc(this.uiContext);t.setUserName(this.username);this.instructions&&t.setInstructions(this.instructions);this.devices.forEach(function(r){var u=r.getInfo(),f=u.getDeviceHwId(),e=n.getDeviceName(r),o=n.getLastAccessed(r),s=u.getIsCurrent();i[f]=r;t.addDevice(f,e,o,s,l.WebBrowser)});t.onSelect(function(t){n.instructions=null;n.currentSelectedDevice=i[t];n.openManageDevice(i[t])});t.onBack(function(){n.instructions=null;n.deviceManagementSessionService.finishSession()});h.renderPage(t,this.clientContext)}},{key:"getDeviceName",value:function(n){var t=n.getInfo(),i=t.getName();return g.getDeviceName(i,t)}},{key:"getDeviceOS",value:function(n){var t=n.getInfo();return"".concat(t.getOsType(),"  ").concat(t.getOsVersion())}},{key:"getLastAccessed",value:function(n){var i=new Date(n.getInfo().getLastAccess()).toLocaleString();return this.uiContext.formatString(t.ts_session_dm_last_used_date,[i])}}]),n}();!function(n){n.Text="text";n.Email="email";n.MobileNumber="phone"}(nr||(nr={}));var tr,sl=/^[a-z]{2}$/i,hl=function(){function n(){r(this,n)}return f(n,null,[{key:"getFlagEmoji",value:function(t){return t.name_code?n.countryCodeEmoji(t.name_code):null}},{key:"countryCodeEmoji",value:function(n){if(!sl.test(n)){var t=vr(n);throw new TypeError("cc argument must be an ISO 3166-1 alpha-2 string, but got '".concat("string"===t?n:t,"' instead."));}return String.fromCodePoint(n.codePointAt(0)+127365)+String.fromCodePoint(n.codePointAt(1)+127365)}}]),n}(),li="xmui-country-item-content",cl=function(n){function t(n){var i,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1],f,o,h,c;return r(this,t),(i=s(this,u(t).call(this))).className=li,f=new v,f.className="".concat(li,"_flag"),o=new v,o.className="".concat(li,"_title"),h=new v,h.className="".concat(li,"_phone_code"),null!=n&&(f.setText(hl.countryCodeEmoji(n.name_code.toLowerCase())),o.setText(n.name),h.setText("+".concat(n.phone_code))),c=new e,c.className="".concat(li,"_space"),l&&i.addClass("".concat(li,"--selected")),i.appendChildren(f,o,c,h),i}return o(t,n),t}(e),de="xmui-countries-popup-dialog",ll=function(n){function t(){var n;return r(this,t),(n=s(this,u(t).call(this))).search="",n.className=de,n.container=new e,n.container.addClass("".concat(de,"_container")),n.addToPanel(n.container),n.onClick(n.onDismiss.bind(y(n))),n.onKeypress(bi(n.onKeyPressEvent.bind(y(n)),100,!1)),n.onKeydown(bi(n.onKeyDownEvent.bind(y(n)),100,!1)),n}return o(t,n),f(t,[{key:"onKeyDownEvent",value:function(n,t){t.keyCode===rt.Backspace&&(this.search=this.search.slice(0,-1),this.filter())}},{key:"onKeyPressEvent",value:function(n,t){this.search=this.search+t.key;this.filter()}},{key:"filter",value:function(){this.countries&&(this.search&&this.search.length>0?this.createList(this.filteredCountries(this.search)):this.createList(this.countries))}},{key:"filteredCountries",value:function(){var n=this,t=this.countries.filter(function(t){return t.name.toLowerCase().startsWith(n.search.toLowerCase())||t.phone_code===n.search.toLowerCase()||t.name_code===n.search.toLowerCase()});if(t&&t.length>0)return t;this.createList(this.countries)}},{key:"setCountries",value:function(n,t){this.countries=n;this.selectedCountryCode=t;this.createList(n);this.selectedCountryItem&&this.selectedCountryItem.scrollIntoView()}},{key:"createList",value:function(n){var t=this;null!=n&&(this.countriesList=new ti(d.None),this.countriesList.focus(),this.container.setContent(this.countriesList),n.forEach(function(n){var i=new cl(n,n.name_code===t.selectedCountryCode);n.name_code===t.selectedCountryCode&&(t.selectedCountryItem=i);t.countriesList.addListItem(n.name_code,!1,i)}),this.countriesList.onItemClicked(function(n){t.onSelectCB&&(t.onSelectCB(n),t.close())}))}},{key:"onSelect",value:function(n){this.onSelectCB=n}},{key:"onDismiss",value:function(){this.close()}}]),t}(we),al=[{name_code:"ad",name:"Andorra",phone_code:"376"},{name_code:"ae",name:"United Arab Emirates (UAE)",phone_code:"971"},{name_code:"af",name:"Afghanistan",phone_code:"93"},{name_code:"ag",name:"Antigua and Barbuda",phone_code:"1"},{name_code:"ai",name:"Anguilla",phone_code:"1"},{name_code:"al",name:"Albania",phone_code:"355"},{name_code:"am",name:"Armenia",phone_code:"374"},{name_code:"ao",name:"Angola",phone_code:"244"},{name_code:"aq",name:"Antarctica",phone_code:"672"},{name_code:"ar",name:"Argentina",phone_code:"54"},{name_code:"as",name:"American Samoa",phone_code:"1"},{name_code:"at",name:"Austria",phone_code:"43"},{name_code:"au",name:"Australia",phone_code:"61"},{name_code:"aw",name:"Aruba",phone_code:"297"},{name_code:"ax",name:"Åland Islands",phone_code:"358"},{name_code:"az",name:"Azerbaijan",phone_code:"994"},{name_code:"ba",name:"Bosnia And Herzegovina",phone_code:"387"},{name_code:"bb",name:"Barbados",phone_code:"1"},{name_code:"bd",name:"Bangladesh",phone_code:"880"},{name_code:"be",name:"Belgium",phone_code:"32"},{name_code:"bf",name:"Burkina Faso",phone_code:"226"},{name_code:"bg",name:"Bulgaria",phone_code:"359"},{name_code:"bh",name:"Bahrain",phone_code:"973"},{name_code:"bi",name:"Burundi",phone_code:"257"},{name_code:"bj",name:"Benin",phone_code:"229"},{name_code:"bl",name:"Saint Barthélemy",phone_code:"590"},{name_code:"bm",name:"Bermuda",phone_code:"1"},{name_code:"bn",name:"Brunei Darussalam",phone_code:"673"},{name_code:"bo",name:"Bolivia, Plurinational State Of",phone_code:"591"},{name_code:"br",name:"Brazil",phone_code:"55"},{name_code:"bs",name:"Bahamas",phone_code:"1"},{name_code:"bt",name:"Bhutan",phone_code:"975"},{name_code:"bw",name:"Botswana",phone_code:"267"},{name_code:"by",name:"Belarus",phone_code:"375"},{name_code:"bz",name:"Belize",phone_code:"501"},{name_code:"ca",name:"Canada",phone_code:"1"},{name_code:"cc",name:"Cocos (keeling) Islands",phone_code:"61"},{name_code:"cd",name:"Congo, The Democratic Republic Of The",phone_code:"243"},{name_code:"cf",name:"Central African Republic",phone_code:"236"},{name_code:"cg",name:"Congo",phone_code:"242"},{name_code:"ch",name:"Switzerland",phone_code:"41"},{name_code:"ci",name:"Côte D'ivoire",phone_code:"225"},{name_code:"ck",name:"Cook Islands",phone_code:"682"},{name_code:"cl",name:"Chile",phone_code:"56"},{name_code:"cm",name:"Cameroon",phone_code:"237"},{name_code:"cn",name:"China",phone_code:"86"},{name_code:"co",name:"Colombia",phone_code:"57"},{name_code:"cr",name:"Costa Rica",phone_code:"506"},{name_code:"cu",name:"Cuba",phone_code:"53"},{name_code:"cv",name:"Cape Verde",phone_code:"238"},{name_code:"cw",name:"Curaçao",phone_code:"599"},{name_code:"cx",name:"Christmas Island",phone_code:"61"},{name_code:"cy",name:"Cyprus",phone_code:"357"},{name_code:"cz",name:"Czech Republic",phone_code:"420"},{name_code:"de",name:"Germany",phone_code:"49"},{name_code:"dj",name:"Djibouti",phone_code:"253"},{name_code:"dk",name:"Denmark",phone_code:"45"},{name_code:"dm",name:"Dominica",phone_code:"1"},{name_code:"do",name:"Dominican Republic",phone_code:"1"},{name_code:"dz",name:"Algeria",phone_code:"213"},{name_code:"ec",name:"Ecuador",phone_code:"593"},{name_code:"ee",name:"Estonia",phone_code:"372"},{name_code:"eg",name:"Egypt",phone_code:"20"},{name_code:"er",name:"Eritrea",phone_code:"291"},{name_code:"es",name:"Spain",phone_code:"34"},{name_code:"et",name:"Ethiopia",phone_code:"251"},{name_code:"fi",name:"Finland",phone_code:"358"},{name_code:"fj",name:"Fiji",phone_code:"679"},{name_code:"fk",name:"Falkland Islands (malvinas)",phone_code:"500"},{name_code:"fm",name:"Micronesia, Federated States Of",phone_code:"691"},{name_code:"fo",name:"Faroe Islands",phone_code:"298"},{name_code:"fr",name:"France",phone_code:"33"},{name_code:"ga",name:"Gabon",phone_code:"241"},{name_code:"gb",name:"United Kingdom",phone_code:"44"},{name_code:"gd",name:"Grenada",phone_code:"1"},{name_code:"ge",name:"Georgia",phone_code:"995"},{name_code:"gf",name:"French Guyana",phone_code:"594"},{name_code:"gg",name:"Guernsey",phone_code:"44"},{name_code:"gh",name:"Ghana",phone_code:"233"},{name_code:"gi",name:"Gibraltar",phone_code:"350"},{name_code:"gl",name:"Greenland",phone_code:"299"},{name_code:"gm",name:"Gambia",phone_code:"220"},{name_code:"gn",name:"Guinea",phone_code:"224"},{name_code:"gp",name:"Guadeloupe",phone_code:"590"},{name_code:"gq",name:"Equatorial Guinea",phone_code:"240"},{name_code:"gr",name:"Greece",phone_code:"30"},{name_code:"gt",name:"Guatemala",phone_code:"502"},{name_code:"gu",name:"Guam",phone_code:"1"},{name_code:"gw",name:"Guinea-bissau",phone_code:"245"},{name_code:"gy",name:"Guyana",phone_code:"592"},{name_code:"hk",name:"Hong Kong",phone_code:"852"},{name_code:"hn",name:"Honduras",phone_code:"504"},{name_code:"hr",name:"Croatia",phone_code:"385"},{name_code:"ht",name:"Haiti",phone_code:"509"},{name_code:"hu",name:"Hungary",phone_code:"36"},{name_code:"id",name:"Indonesia",phone_code:"62"},{name_code:"ie",name:"Ireland",phone_code:"353"},{name_code:"il",name:"Israel",phone_code:"972"},{name_code:"im",name:"Isle Of Man",phone_code:"44"},{name_code:"is",name:"Iceland",phone_code:"354"},{name_code:"in",name:"India",phone_code:"91"},{name_code:"io",name:"British Indian Ocean Territory",phone_code:"246"},{name_code:"iq",name:"Iraq",phone_code:"964"},{name_code:"ir",name:"Iran, Islamic Republic Of",phone_code:"98"},{name_code:"it",name:"Italy",phone_code:"39"},{name_code:"je",name:"Jersey",phone_code:"44"},{name_code:"jm",name:"Jamaica",phone_code:"1"},{name_code:"jo",name:"Jordan",phone_code:"962"},{name_code:"jp",name:"Japan",phone_code:"81"},{name_code:"ke",name:"Kenya",phone_code:"254"},{name_code:"kg",name:"Kyrgyzstan",phone_code:"996"},{name_code:"kh",name:"Cambodia",phone_code:"855"},{name_code:"ki",name:"Kiribati",phone_code:"686"},{name_code:"km",name:"Comoros",phone_code:"269"},{name_code:"kn",name:"Saint Kitts and Nevis",phone_code:"1"},{name_code:"kp",name:"North Korea",phone_code:"850"},{name_code:"kr",name:"South Korea",phone_code:"82"},{name_code:"kw",name:"Kuwait",phone_code:"965"},{name_code:"ky",name:"Cayman Islands",phone_code:"1"},{name_code:"kz",name:"Kazakhstan",phone_code:"7"},{name_code:"la",name:"Lao People's Democratic Republic",phone_code:"856"},{name_code:"lb",name:"Lebanon",phone_code:"961"},{name_code:"lc",name:"Saint Lucia",phone_code:"1"},{name_code:"li",name:"Liechtenstein",phone_code:"423"},{name_code:"lk",name:"Sri Lanka",phone_code:"94"},{name_code:"lr",name:"Liberia",phone_code:"231"},{name_code:"ls",name:"Lesotho",phone_code:"266"},{name_code:"lt",name:"Lithuania",phone_code:"370"},{name_code:"lu",name:"Luxembourg",phone_code:"352"},{name_code:"lv",name:"Latvia",phone_code:"371"},{name_code:"ly",name:"Libya",phone_code:"218"},{name_code:"ma",name:"Morocco",phone_code:"212"},{name_code:"mc",name:"Monaco",phone_code:"377"},{name_code:"md",name:"Moldova, Republic Of",phone_code:"373"},{name_code:"me",name:"Montenegro",phone_code:"382"},{name_code:"mf",name:"Saint Martin",phone_code:"590"},{name_code:"mg",name:"Madagascar",phone_code:"261"},{name_code:"mh",name:"Marshall Islands",phone_code:"692"},{name_code:"mk",name:"Macedonia (FYROM)",phone_code:"389"},{name_code:"ml",name:"Mali",phone_code:"223"},{name_code:"mm",name:"Myanmar",phone_code:"95"},{name_code:"mn",name:"Mongolia",phone_code:"976"},{name_code:"mo",name:"Macau",phone_code:"853"},{name_code:"mp",name:"Northern Mariana Islands",phone_code:"1"},{name_code:"mq",name:"Martinique",phone_code:"596"},{name_code:"mr",name:"Mauritania",phone_code:"222"},{name_code:"ms",name:"Montserrat",phone_code:"1"},{name_code:"mt",name:"Malta",phone_code:"356"},{name_code:"mu",name:"Mauritius",phone_code:"230"},{name_code:"mv",name:"Maldives",phone_code:"960"},{name_code:"mw",name:"Malawi",phone_code:"265"},{name_code:"mx",name:"Mexico",phone_code:"52"},{name_code:"my",name:"Malaysia",phone_code:"60"},{name_code:"mz",name:"Mozambique",phone_code:"258"},{name_code:"na",name:"Namibia",phone_code:"264"},{name_code:"nc",name:"New Caledonia",phone_code:"687"},{name_code:"ne",name:"Niger",phone_code:"227"},{name_code:"nf",name:"Norfolk Islands",phone_code:"672"},{name_code:"ng",name:"Nigeria",phone_code:"234"},{name_code:"ni",name:"Nicaragua",phone_code:"505"},{name_code:"nl",name:"Netherlands",phone_code:"31"},{name_code:"no",name:"Norway",phone_code:"47"},{name_code:"np",name:"Nepal",phone_code:"977"},{name_code:"nr",name:"Nauru",phone_code:"674"},{name_code:"nu",name:"Niue",phone_code:"683"},{name_code:"nz",name:"New Zealand",phone_code:"64"},{name_code:"om",name:"Oman",phone_code:"968"},{name_code:"pa",name:"Panama",phone_code:"507"},{name_code:"pe",name:"Peru",phone_code:"51"},{name_code:"pf",name:"French Polynesia",phone_code:"689"},{name_code:"pg",name:"Papua New Guinea",phone_code:"675"},{name_code:"ph",name:"Philippines",phone_code:"63"},{name_code:"pk",name:"Pakistan",phone_code:"92"},{name_code:"pl",name:"Poland",phone_code:"48"},{name_code:"pm",name:"Saint Pierre And Miquelon",phone_code:"508"},{name_code:"pn",name:"Pitcairn Islands",phone_code:"870"},{name_code:"pr",name:"Puerto Rico",phone_code:"1"},{name_code:"ps",name:"Palestine",phone_code:"970"},{name_code:"pt",name:"Portugal",phone_code:"351"},{name_code:"pw",name:"Palau",phone_code:"680"},{name_code:"py",name:"Paraguay",phone_code:"595"},{name_code:"qa",name:"Qatar",phone_code:"974"},{name_code:"re",name:"Réunion",phone_code:"262"},{name_code:"ro",name:"Romania",phone_code:"40"},{name_code:"rs",name:"Serbia",phone_code:"381"},{name_code:"ru",name:"Russian Federation",phone_code:"7"},{name_code:"rw",name:"Rwanda",phone_code:"250"},{name_code:"sa",name:"Saudi Arabia",phone_code:"966"},{name_code:"sb",name:"Solomon Islands",phone_code:"677"},{name_code:"sc",name:"Seychelles",phone_code:"248"},{name_code:"sd",name:"Sudan",phone_code:"249"},{name_code:"se",name:"Sweden",phone_code:"46"},{name_code:"sg",name:"Singapore",phone_code:"65"},{name_code:"sh",name:"Saint Helena, Ascension And Tristan Da Cunha",phone_code:"290"},{name_code:"si",name:"Slovenia",phone_code:"386"},{name_code:"sk",name:"Slovakia",phone_code:"421"},{name_code:"sl",name:"Sierra Leone",phone_code:"232"},{name_code:"sm",name:"San Marino",phone_code:"378"},{name_code:"sn",name:"Senegal",phone_code:"221"},{name_code:"so",name:"Somalia",phone_code:"252"},{name_code:"sr",name:"Suriname",phone_code:"597"},{name_code:"ss",name:"South Sudan",phone_code:"211"},{name_code:"st",name:"Sao Tome And Principe",phone_code:"239"},{name_code:"sv",name:"El Salvador",phone_code:"503"},{name_code:"sx",name:"Sint Maarten",phone_code:"1"},{name_code:"sy",name:"Syrian Arab Republic",phone_code:"963"},{name_code:"sz",name:"Swaziland",phone_code:"268"},{name_code:"tc",name:"Turks and Caicos Islands",phone_code:"1"},{name_code:"td",name:"Chad",phone_code:"235"},{name_code:"tg",name:"Togo",phone_code:"228"},{name_code:"th",name:"Thailand",phone_code:"66"},{name_code:"tj",name:"Tajikistan",phone_code:"992"},{name_code:"tk",name:"Tokelau",phone_code:"690"},{name_code:"tl",name:"Timor-leste",phone_code:"670"},{name_code:"tm",name:"Turkmenistan",phone_code:"993"},{name_code:"tn",name:"Tunisia",phone_code:"216"},{name_code:"to",name:"Tonga",phone_code:"676"},{name_code:"tr",name:"Turkey",phone_code:"90"},{name_code:"tt",name:"Trinidad & Tobago",phone_code:"1"},{name_code:"tv",name:"Tuvalu",phone_code:"688"},{name_code:"tw",name:"Taiwan",phone_code:"886"},{name_code:"tz",name:"Tanzania, United Republic Of",phone_code:"255"},{name_code:"ua",name:"Ukraine",phone_code:"380"},{name_code:"ug",name:"Uganda",phone_code:"256"},{name_code:"us",name:"United States",phone_code:"1"},{name_code:"uy",name:"Uruguay",phone_code:"598"},{name_code:"uz",name:"Uzbekistan",phone_code:"998"},{name_code:"va",name:"Holy See (vatican City State)",phone_code:"379"},{name_code:"vc",name:"Saint Vincent & The Grenadines",phone_code:"1"},{name_code:"ve",name:"Venezuela, Bolivarian Republic Of",phone_code:"58"},{name_code:"vg",name:"British Virgin Islands",phone_code:"1"},{name_code:"vi",name:"US Virgin Islands",phone_code:"1"},{name_code:"vn",name:"Vietnam",phone_code:"84"},{name_code:"vu",name:"Vanuatu",phone_code:"678"},{name_code:"wf",name:"Wallis And Futuna",phone_code:"681"},{name_code:"ws",name:"Samoa",phone_code:"685"},{name_code:"xk",name:"Kosovo",phone_code:"383"},{name_code:"ye",name:"Yemen",phone_code:"967"},{name_code:"yt",name:"Mayotte",phone_code:"262"},{name_code:"za",name:"South Africa",phone_code:"27"},{name_code:"zm",name:"Zambia",phone_code:"260"},{name_code:"zw",name:"Zimbabwe",phone_code:"263"}],lr="xmui-mobile-phone-input",vl="".concat(lr,"_separator"),yl="".concat(lr,"_plus"),pl="".concat(lr,"_country-code-container"),ei="-",wl="+",bl=function(n){function t(){var n,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",h,o,f,c;return r(this,t),(n=s(this,u(t).call(this,w.PositiveInteger,i.input_mobile_phone_number))).addClass(lr),n.countries=al,h=new v(ei),h.className=vl,n.prependToInputRow(h),o=new e,o.className=pl,f=new a(i.input_mobile_phone_coutry_code),f.onClick(function(){var t,i;if(n.onCountriesCB){if(t=n.countries,!t)return;i=new ll;i.setCountries(t,n.currentSelectedCountryCode);i.onSelect(function(i){var r=t.find(function(n){return n.name_code===i});r&&(n.currentSelectedCountryCode=r.name_code,f.label=r.phone_code)});n.onCountriesCB(i)}}),o.appendChild(f),n.prependToInputRow(o),c=new v(wl),c.className=yl,n.prependToInputRow(c),n.countryCodeButton=f,n.addValidator(hr.mobileNumber),n.value="".concat(l).concat(ei).concat(y),n}return o(t,n),f(t,[{key:"getRequiredValidator",value:function(){return function(n){var t=n.replace(ei,"");return hr.required(t)}}},{key:"checkHasValue",value:function(){return!!this.value.replace(ei,"").length}},{key:"onCountries",value:function(n){this.onCountriesCB=n}},{key:"isEmpty",get:function(){return!this.value.trim().replace(ei,"").length}},{key:"value",set:function(n){var i=n.length&&n.split(ei);i&&2===i.length&&(this.countryCodeButton.label=i[0],wt(u(t.prototype),"value",i[1],this,!0))},get:function(){return"".concat(this.countryCodeButton.label).concat(ei).concat(k(u(t.prototype),"value",this))}},{key:"countryCode",get:function(){return this.countryCodeButton.label}},{key:"number",get:function(){return k(u(t.prototype),"value",this)}}]),t}(tt),kl="xmui-dynamic-mobile-phone-input",dl=function(n){function t(n){var f;r(this,t);(f=s(this,u(t).call(this))).addClass(kl);var e=n.value&&n.value.country_code||"",o=n.value&&n.value.number||"",i=new bl(e,o);return i.name=n.id,i.message=n.hint?n.hint:"",i.required=!0===n.mandatory,i.placeholder=i.required?n.name.trim()+" *":n.name,f.appendChild(i),f.mobilePhoneInput=i,f}return o(t,n),f(t,[{key:"validateAndSetErrorMessage",value:function(){return this.mobilePhoneInput.validateAndSetErrorMessage()}},{key:"onCountriesCB",value:function(n){this.mobilePhoneInput.onCountries(n)}},{key:"name",get:function(){return this.mobilePhoneInput.name}},{key:"value",get:function(){return{country_code:this.mobilePhoneInput.countryCode,number:this.mobilePhoneInput.number}}},{key:"required",get:function(){return this.mobilePhoneInput.required}},{key:"isEmpty",get:function(){return this.mobilePhoneInput.isEmpty}}]),t}(uu),gl=function(n){function t(n,i,f,e,o){var h;return r(this,t),(h=s(this,u(t).call(this,n))).actions=o,h.id=i,h.name=f,h.clientContext=e,h.buildActions(o),h}return o(t,n),f(t,[{key:"buildActions",value:function(n){var t=this;n.forEach(function(n){var i=t.createInputField(n);t.appendChild(i)})}},{key:"createInputField",value:function(n){var r,u,t,f;switch(n.type){case nr.Text:r=w.Text;t=new tt(r,i.input_text);break;case nr.Email:r=w.Email;t=new tt(r,i.input_email);u=254;break;case nr.MobileNumber:return f=new dl(n),f.onCountriesCB(this.onCountriesCB.bind(this)),f;default:throw new Error("Unsupported form field type");}return t.name=n.id,t.message=n.hint?n.hint:"",t.required=!0===n.mandatory,t.placeholder=t.required?n.name.trim()+" *":n.name,n.value&&(t.value=n.value),null!=u&&(t.maxlength=u),t}},{key:"onCountriesCB",value:function(n){h.renderModal(n,this.clientContext)}}]),t}(ct),na="xmui-dynamic-form-page",ta=function(n){function e(n,t,f,o){var h,c;return r(this,e),(h=s(this,u(e).call(this,i.page_dynamic_form,na,n))).clientContext=t,h.formId=f,h.payload=o,h.setTitle(h.payload.title||h.formId),h.payload.subtitle&&h.setInstructions(h.payload.subtitle),c=h.createForm(),h.setContent(c),h}return o(e,n),f(e,[{key:"onSubmit",value:function(n){this.onSubmitCB=n}},{key:"createForm",value:function(){var r=this,u=new a(i.button_continue),n;return u.label=this.uiContext.getString(t.ts_authenticator_password_cta_positive),this.addRightButton(u),n=new gl(u,"xmui-dynamic-form","xmui-dynamic-form",this.clientContext,this.payload.actions),n.onSubmit(function(n){r.onSubmitCB&&r.onSubmitCB({type:r.payload.type,actions:n})}),n.start(),n}}]),e}(wi);!function(n){n[n.Init=0]="Init";n[n.Continue=1]="Continue";n[n.Error=2]="Error"}(tr||(tr={}));ge=function(){function n(t,i){r(this,n);this.formId=t;this.payload=i;this.state=tr.Init}return f(n,[{key:"startSession",value:function(n,t){this.clientContext=n;this.actionContext=t}},{key:"endSession",value:function(){}},{key:"onContinue",value:function(n){this.payload=n;this.state=tr.Continue}},{key:"onError",value:function(n){this.payload=n;this.state=tr.Error}},{key:"promiseFormInput",value:function(){var n=this;return new Promise(function(t){var i=new ta(n.actionContext,n.clientContext,n.formId,n.payload),r=h.getUsernameFromClientContext(n.clientContext);r&&i.setUserName(r);i.onSubmit(function(n){t(com.ts.mobile.sdk.FormInput.createFormInputSubmissionRequest(n))});i.onCancel(function(){t(com.ts.mobile.sdk.FormInput.createFormCancellationRequest())});i.onEscape(function(n){t(com.ts.mobile.sdk.FormInput.createEscapeRequest(n,{}))});h.renderPage(i,n.clientContext)})}}]),n}();!function(n){n.Button="button";n.Toggle="toggle";n.Separator="separator"}(ir||(ir={}));var p,no="xmui-button-user-detail",ia=function(n){function t(n){var f,i;return r(this,t),i=new e,i.className="".concat(no,"_more ").concat(l.CircledMore),(f=s(this,u(t).call(this,n.title,n.value,null,i))).addClass(no),f}return o(t,n),t}(ii),ar="xmui-switch",to="".concat(ar,"--on"),ra="".concat(ar,"_bar"),ua="".concat(ar,"_knob"),fa=function(n){function t(){var n,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i,f;return r(this,t),(n=s(this,u(t).call(this))).className=ar,n.value=o,i=new e,i.className=ra,f=new e,f.className=ua,n.appendChildren(i,f),n}return o(t,n),f(t,[{key:"updateState",value:function(){this.value?this.addClass(to):this.removeClass(to)}},{key:"value",set:function(n){wt(u(t.prototype),"value",n,this,!0);this.updateState()},get:function(){return k(u(t.prototype),"value",this)}}]),t}(e),ea="xmui-toggle-user-detail",oa=function(n){function t(n){var i,f;return r(this,t),f=new fa(n.value),(i=s(this,u(t).call(this,n.title,null,null,f))).switchComp=f,i.addClass(ea),i}return o(t,n),f(t,[{key:"switchState",value:function(){this.switchComp.value=!this.switchComp.value}}]),t}(ii),sa="xmui-manage-user-details-page",ha=function(n){function t(n,f){var e,o;return r(this,t),(e=s(this,u(t).call(this,i.page_manage_user_details,sa,!1))).actionContext=n,e.payload=f,e.uiContext=e.actionContext.getUiContext(),e.setTitle(f.title),o=e.createContent(),e.setContent(o),f.footer_buttons.forEach(function(n){var t=new a(i.button_dynamic);t.label=n.title;t.onClick(function(){return e.onSubmitCB&&e.onSubmitCB({selected_option:n.id})});e.addRightButton(t)}),e}return o(t,n),f(t,[{key:"createContent",value:function(){var t=this,n=new ti;return this.payload.menu.items.forEach(function(t){var r,i;switch(t.type){case ir.Button:r=new ia(t);n.addListItem(t.id,!1,r);break;case ir.Toggle:i=new oa(t);n.addListItem(t.id,!1,i);n.onSelectionChanged(function(n){n[0]===t.id&&i.switchState()});break;case ir.Separator:n.startSection()}}),n.onSelectionChanged(function(n){t.onSubmitCB&&t.onSubmitCB({selected_option:n[0]})}),n.focus(),n}},{key:"onSubmit",value:function(n){this.onSubmitCB=n}}]),t}(oi),ca=function(){function n(t,i){r(this,n);this.formId=t;this.payload=i}return f(n,[{key:"startSession",value:function(n,t){this.clientContext=n;this.actionContext=t}},{key:"endSession",value:function(){}},{key:"onContinue",value:function(n){this.payload=n}},{key:"onError",value:function(n){this.payload=n}},{key:"promiseFormInput",value:function(){var n=this;return new Promise(function(t){var i=new ha(n.actionContext,n.payload);i.onSubmit(function(n){t(com.ts.mobile.sdk.FormInput.createFormInputSubmissionRequest(n))});h.renderPage(i,n.clientContext)})}}]),n}(),yu="xmui-select-question-dialog",la="".concat(yu,"_container"),aa="".concat(yu,"_message"),va=function(n){function f(n,o,h){var c,l,y;return r(this,f),(c=s(this,u(f).call(this))).addClass(yu),l=new a(i.button_cancel),l.label=n.getString(t.ts_gen_cancel),l.value=!1,l.onClick(function(){c.close()}),c.addLeftButton(l),c.setTitle(n.getString("ts_authenticator_questions_reg_select_question")),y=new e,y.className=la,o.forEach(function(n){var t=new v;t.className=aa;t.setText(n.getSecurityQuestionText());t.onClick(function(){h(n);c.close()});y.appendChild(t)}),c.setContent(y),c}return o(f,n),f}(vu),ya=function(n){function t(){var n;return r(this,t),(n=s(this,u(t).call(this,w.Text,i.input_security_question))).answered=!1,n.onChange(function(){n.updateState(n.value)}),n}return o(t,n),f(t,[{key:"checkHasValue",value:function(){return!0}},{key:"updateState",value:function(n){this.answered!==!!n&&(n&&n.length>this.minlength-1?this.addIcon(l.Checkmark):this.removeIcon(l.Checkmark),this.answered=!!n)}},{key:"maxlength",set:function(n){wt(u(t.prototype),"maxlength",n,this,!0)}},{key:"value",set:function(n){wt(u(t.prototype),"value",n,this,!0);this.updateState(n)},get:function(){return k(u(t.prototype),"value",this)}}]),t}(tt),io=function(){function n(t,i,u,f){r(this,n);this.input=t;this.container=i;this.parent=u;this.removeButton=f}return f(n,null,[{key:"createByState",value:function(r,u,f,o,s){var l=new e,y,c,v,w,b;l.className=da;y=r.getString("ts_authenticator_questions_reg_select_question");c=new ya;c.ariaLabel=y;c.maxlength=o.getMaxAnswerLength();c.minlength=o.getMinAnswerLength();v=new a(i.button_remove,si.Normal);v.addClass(ka);v.label=r.getString("ts_authenticator_questions_remove_this_question_cta");l.appendChild(c);l.appendChild(v);f.appendChild(l);w=new n(c,l,f,v);switch(u.state){case p.PROVIDED_REMOVED:case p.NEW_REMOVED:throw new Error("can't start with remove");case p.PROVIDED_ANSWERED:c.placeholder=u.question.getSecurityQuestionText();b=r.getString("ts_authenticator_questions_reg_default_answer_placeholder");c.value=b;v.onClick(function(){u.state=p.PROVIDED_REMOVED;f.removeChild(l);h.log("removed called for answered question ".concat(u.question.getSecurityQuestionText()));s(!0)});break;default:c.placeholder=y;c.disabled=!0;v.onClick(function(){u.state=p.NEW_REMOVED;h.log("remove called for new question");f.removeChild(l);s(!0)})}return c.onFocusIn(function(){h.log("focus on "+c.placeholder);u.state==p.PROVIDED_ANSWERED&&(c.value="")}),c.onChange(function(){var n=c.value.length;c.clearError();n>o.getMinAnswerLength()-1&&(u.state=u.state==p.PROVIDED_ANSWERED?p.PROVIDED_MODIFIED:p.NEW_ANSWERED,u.answer=c.value,s(!0))}),c.onFocusOut(function(){var n=c.value.length,i,f,e;0==n?u.state==p.PROVIDED_ANSWERED?(i=r.getString("ts_authenticator_questions_reg_default_answer_placeholder"),c.value=i):(f=r.getString(t.ts_authenticator_questions_error_answer_empty),c.setError(f,!1)):n<o.getMinAnswerLength()&&(e=r.formatString(t.ts_authenticator_questions_error_answer_range,[o.getMinAnswerLength().toString(),o.getMaxAnswerLength().toString()]),c.setError(e,!1),s(!1))}),w}}]),n}(),pa="xmui-security-questions-reg-page",wa="".concat("xmui-security-questions-reg-form","_progress-indication"),ba="".concat("xmui-security-questions-reg-form","_form-container"),ka="".concat("xmui-security-questions-reg-form","_button-remove"),da="".concat("xmui-security-questions-reg-form","_question-container"),pu="xmui-security-questions-reg-form";!function(n){n[n.PROVIDED_ANSWERED=0]="PROVIDED_ANSWERED";n[n.PROVIDED_REMOVED=1]="PROVIDED_REMOVED";n[n.PROVIDED_MODIFIED=2]="PROVIDED_MODIFIED";n[n.NEW_ANSWERED=3]="NEW_ANSWERED";n[n.NEW=4]="NEW";n[n.NEW_REMOVED=5]="NEW_REMOVED"}(p||(p={}));var ro=function n(t,i,u){r(this,n);this.state=t;this.question=i;this.answer=u},ga=function(n){function c(n,f,e){var o,y,p,l,v;return r(this,c),(o=s(this,u(c).call(this,i.input_security_question,pa,n))).questionsMap=new Map,o.cells=[],o.displayModal=e,y=Array(),p=Array(),f.getSecurityQuestions().sort,f.getSecurityQuestions().forEach(function(n){n.getAnswered()?y.push(n):p.push(n)}),o.selectableQuestions=p,o.answeredQuestions=y,o.currentStep=f,o.setTitle(o.getTitle()),o.setInstructions(o.getInstructions()),o.setContent(o.createForm()),l=new a(i.button_add_question),l.label=o.uiContext.getString(t.ts_authenticator_questions_add_question_cta),l.type=bt.Button,l.form=pu,l.onClick(function(){o.addQuestion();o.updateFormState()}),o.addRightButton(l),o.addQuestionButton=l,v=new a(i.button_continue),v.label=o.uiContext.getString(t.ts_authenticator_password_cta_positive),v.type=bt.Submit,v.form=pu,v.onClick(function(){var n=!1;o.cells.forEach(function(i){if(i.input.error)return h.log("Stopped continue click due to having a cell with an error"),void(n=!0);if(i.input.isEmpty){var r=o.uiContext.getString(t.ts_authenticator_questions_error_answer_empty);return i.input.setError(r,!1),void(n=!0)}});n||o.onSubmitCB(o.collectUserAnswers())}),o.addRightButton(v),o.continueButton=v,o.updateFormState(),o}return o(c,n),f(c,[{key:"setError",value:function(n){this.error=!0;n&&this.setInstructions(n)}},{key:"onSubmit",value:function(n){this.onSubmitCB=n}},{key:"collectUserAnswers",value:function(){var n=Array();return this.questionsMap.forEach(function(t){switch(t.state){case p.PROVIDED_REMOVED:n.push(com.ts.mobile.sdk.SecurityQuestionAndAnswer.createAnswerRemovalRequest(t.question));break;case p.NEW_ANSWERED:case p.PROVIDED_MODIFIED:n.push(com.ts.mobile.sdk.SecurityQuestionAndAnswer.createAnswerToQuestion(t.question,com.ts.mobile.sdk.SecurityQuestionAnswer.createWithText(t.answer)));break;default:h.log("question not used: "+t)}}),n}},{key:"updateFormState",value:function(){var n=this.countAnsweredQuestions();this.updateUserProgress(n);this.continueButton.disabled=!this.canSendForm(n);this.addQuestionButton.disabled=this.cells.length+1>this.selectableQuestions.length+this.answeredQuestions.length}},{key:"canSendForm",value:function(n){return!(n<this.currentStep.getMinAnswersNeeded())&&(this.cells.forEach(function(n){if(n.input.error)return h.log("Stopped continue click due to having a cell with an error"),!1}),!0)}},{key:"countAnsweredQuestions",value:function(){var n=this.answeredQuestions.length;return this.questionsMap.forEach(function(t){switch(t.state){case p.NEW_ANSWERED:n++;break;case p.PROVIDED_REMOVED:n--}}),n}},{key:"updateUserProgress",value:function(n){var i=this.uiContext.formatString(t.ts_authenticator_questions_left,[n.toString(),(this.selectableQuestions.length+this.answeredQuestions.length).toString()]);this.progressIndication.setText(i)}},{key:"getTitle",value:function(){var n=t.ts_authenticator_questions_title_reg;return this.uiContext.getString(n)}},{key:"getInstructions",value:function(){var n=t.ts_authenticator_questions_intro_reg;return this.uiContext.formatString(n,[this.currentStep.getMinAnswersNeeded().toString(),(this.selectableQuestions.length+this.answeredQuestions.length).toString()])}},{key:"createForm",value:function(){var n=this,t=new ct,i,u,r;for(t.addClass("xmui-security-questions-reg-form"),t.id=pu,i=new e,i.className=ba,this.questionsInputContainer=i,this.answeredQuestions.forEach(function(t){var r=p.PROVIDED_ANSWERED,i=new ro(r,t),u=io.createByState(n.uiContext,i,n.questionsInputContainer,n.currentStep,function(t){n.onCellUpdated(i,t)});n.cells.push(u);n.questionsMap.set(t.getSecurityQuestionId(),i)}),u=this.currentStep.getMinAnswersNeeded()-this.answeredQuestions.length,r=0;r<u;r++)this.addQuestion();return this.progressIndication=new v,this.progressIndication.className=wa,t.appendChildren(i,this.progressIndication),t}},{key:"addQuestion",value:function(){var n=this,r=p.NEW,i=new ro(r,null),t=io.createByState(this.uiContext,i,this.questionsInputContainer,this.currentStep,function(t){n.onCellUpdated(i,t)});t.input.addRightButton(this.uiContext.getString("ts_authenticator_questions_reg_select_question_cta"),function(){var r=[],u;n.selectableQuestions.forEach(function(t){var i=n.questionsMap.get(t.getSecurityQuestionId());(!i||i.state&&i.state!=p.NEW_ANSWERED)&&r.push(t)});u=new va(n.uiContext,r,function(r){var u=n.selectableQuestions.indexOf(r);n.selectableQuestions.splice(u,1);i.question=r;t.input.disabled=!1;t.input.focus();t.input.placeholder=r.getSecurityQuestionText();t.input.value=null});n.displayModal(u)});t.removeButton.onClick(this.updateFormState.bind(this));this.cells.push(t)}},{key:"onCellUpdated",value:function(n,t){if(h.log("new state ('".concat(n.state,"') with answer: ").concat(n.answer)),!t&&n.question&&n.question.getSecurityQuestionId())this.questionsMap.delete(n.question.getSecurityQuestionId()),this.updateFormState();else{switch(n.state){case p.PROVIDED_REMOVED:n.question&&n.question.getSecurityQuestionId()&&this.questionsMap.set(n.question.getSecurityQuestionId(),n);this.selectableQuestions.push(n.question);break;case p.NEW_REMOVED:n.question&&n.question.getSecurityQuestionId()&&(this.questionsMap.delete(n.question.getSecurityQuestionId()),this.selectableQuestions.push(n.question));break;default:this.questionsMap.set(n.question.getSecurityQuestionId(),n)}this.updateFormState()}}}]),c}(ut),wu="xmui-answered-security-question",nv=function(n){function t(n,i){var o,f,e;return r(this,t),(o=s(this,u(t).call(this))).className=wu,f=new v,e=new v,f.className="".concat(wu,"_question"),e.className="".concat(wu,"_answer"),f.setText(n),e.setText(i),o.appendChildren(f,e),o}return o(t,n),t}(e),tv="xmui-security-questions-auth-page",uo="xmui-security-questions-auth-form",iv=function(n){function e(n,f,o){var h,c;return r(this,e),(h=s(this,u(e).call(this,i.page_security_questions_auth,tv,n))).nextQuestion=f,h.prevAnsweredQuestions=o,h.setTitle(h.getTitle()),h.setInstructions(h.getInstructions()),h.content=h.createForm(),h.setContent(h.content),c=new a(i.button_continue),c.label=h.uiContext.getString(t.ts_authenticator_password_cta_positive),c.type=bt.Submit,c.form=uo,c.onClick(function(){return h.onSubmitCB(h.collectUserAnswer())}),h.addRightButton(c),h.continueButton=c,h.updateFormState(),h}return o(e,n),f(e,[{key:"setError",value:function(n){this.error=!0;n&&this.setInstructions(n)}},{key:"onSubmit",value:function(n){this.onSubmitCB=n}},{key:"updateFormState",value:function(){this.updateSubmitButton()}},{key:"updateSubmitButton",value:function(){this.continueButton.disabled=!this.nextQuestionInput.value.trim()}},{key:"collectUserAnswer",value:function(){var n=this.nextQuestionInput.value;return com.ts.mobile.sdk.SecurityQuestionAndAnswer.createAnswerToQuestion(this.nextQuestion,com.ts.mobile.sdk.SecurityQuestionAnswer.createWithText(n))}},{key:"getTitle",value:function(){var n=t.ts_authenticator_questions_title_auth;return this.uiContext.getString(n)}},{key:"getInstructions",value:function(){var n=t.ts_authenticator_questions_intro_auth;return this.uiContext.getString(n)}},{key:"createForm",value:function(){var t=new ct,n,r;return t.addClass("xmui-security-questions-auth-form"),t.id=uo,this.prevAnsweredQuestions.forEach(function(n){var i=n.getQuestion().getSecurityQuestionText(),r=n.getAnswer().getAnswerText(),u=new nv(i,r);t.appendChild(u)}),n=new tt(w.Text,i.input_security_question),r=this.nextQuestion.getSecurityQuestionText(),n.placeholder=r,n.ariaLabel=r,n.focus(),n.scrollIntoView(),this.nextQuestionInput=n,t.appendChild(n),t.onUserInput(this.updateFormState.bind(this)),t}}]),e}(ut),rv=function(n){function t(n,i){var f;return r(this,t),(f=s(this,u(t).call(this,n,i))).prevAnsweredQuestions=[],f.supportsInlineError=!0,f}return o(t,n),f(t,[{key:"showAuthUi",value:function(){this.showSecurityQuestionsAuthPage()}},{key:"showRegUi",value:function(){this.showSecurityQuestionsRegPage()}},{key:"setInputStep",value:function(n,t,i){this.currentStep=i}},{key:"showSecurityQuestionsRegPage",value:function(){var t=this,n=new ga(this.actionContext,this.currentStep,function(n){h.renderModal(n,t.clientContext)});this.authError&&n.setError(this.authErrorMessage);n.onSubmit(function(i){n.blockInteraction();var r=com.ts.mobile.sdk.SecurityQuestionInputResponse.createSecurityQuestionAnswersInputResponse(i);t.resolveInputPromise(com.ts.mobile.sdk.InputOrControlResponse.createInputResponse(r))});this.showAuthenticatorPage(n)}},{key:"promiseCancelAction",value:function(n){return this.prevAnsweredQuestions=[],k(u(t.prototype),"promiseCancelAction",this).call(this,n)}},{key:"promiseRecoveryForError",value:function(n,i,r){return k(u(t.prototype),"promiseRecoveryForError",this).call(this,n,i,r)}},{key:"showSecurityQuestionsAuthPage",value:function(){var t=this,n;this.authError&&(this.prevAnsweredQuestions=[]);n=new iv(this.actionContext,this.currentStep.getSecurityQuestions()[0],this.prevAnsweredQuestions);this.authError&&n.setError(this.authErrorMessage);n.onSubmit(function(i){n.blockInteraction();var r=com.ts.mobile.sdk.SecurityQuestionInputResponse.createSecurityQuestionAnswersInputResponse([i]);t.resolveInputPromise(com.ts.mobile.sdk.InputOrControlResponse.createInputResponse(r));t.prevAnsweredQuestions.push(i)});this.showAuthenticatorPage(n)}}]),t}(lt),uv=function(){function n(){r(this,n);ot.init()}return f(n,[{key:"startActivityIndicator",value:function(n,t){h.activityStarted(t)}},{key:"endActivityIndicator",value:function(n,t){h.activityEnded(t)}},{key:"controlFlowCancelled",value:function(n){h.log("Control flow cancelled");h.clearContainer(n)}},{key:"controlFlowStarting",value:function(){h.log("Control flow started")}},{key:"controlFlowEnded",value:function(n){var t=n?" with error: ".concat(n):"";h.log("Control flow ended"+t)}},{key:"controlFlowActionStarting",value:function(){h.log("Control flow action starting")}},{key:"controlFlowActionEnded",value:function(){h.log("Control flow action starting")}},{key:"handleAuthenticatorUnregistration",value:function(){return Promise.resolve(com.ts.mobile.sdk.UnregistrationInput.create(0))}},{key:"selectAuthenticator",value:function(n,t,i){return st.promiseAuthenticator(n,t,i)}},{key:"selectAuthenticatorFallbackAction",value:function(n,t,i,r,u){var f=h.getUsernameFromClientContext(u);return st.promiseAuthenticatorFallbackAction(f,n,t,i,r,u)}},{key:"controlOptionForCancellationRequestInSession",value:function(n,t){return t instanceof lt?t.promiseCancelAction(n):st.promiseCancelActionForNonBaseAuthenticatorSession(n)}},{key:"createPasswordAuthSession",value:function(n,t){return new ls(n,t)}},{key:"createPinAuthSession",value:function(n,t,i){return new te(n,t,i)}},{key:"createPatternAuthSession",value:function(n,t,i,r){return new ih(n,t,i,r)}},{key:"createOtpAuthSession",value:function(n,t,i,r){return new yh(n,t,i,r)}},{key:"createVoiceAuthSession",value:function(){throw new Error("Method not implemented.");}},{key:"createSecurityQuestionAuthSession",value:function(n,t){return new rv(n,t)}},{key:"createPlaceholderAuthSession",value:function(){throw new Error("Method not implemented by demo application.");}},{key:"createFido2AuthSession",value:function(n,t){return new nc(n,t)}},{key:"getConfirmationInput",value:function(n,t,i,r,u,f){var e=h.getUsernameFromClientContext(f);return st.promiseConfirmationActionInput(e,l.Confirmation,n,t,i,r,u,f)}},{key:"getInformationResponse",value:function(n,t,i,r,u){var f=h.getUsernameFromClientContext(u);return st.promiseInformationActionInput(f,l.Information,n,t,i,r,u)}},{key:"createMobileApproveAuthSession",value:function(n,t,i){return new ys(n,t,i)}},{key:"createTicketWaitSession",value:function(){return new uc}},{key:"createTotpAuthSession",value:function(n,t){return new bh(n,t)}},{key:"createFormSession",value:function(n,t){if(t&&"dynamic_form"===t.type)return new ge(n,t);if(t&&"xm.qs.MenuList"===t.type)return new ca(n,t);throw new Error("Method not implemented by demo application.");}},{key:"createAuthenticationConfigurationSession",value:function(n){return new ac(n)}},{key:"createRegistrationPromotionSession",value:function(n,t){return new pc(n,t)}},{key:"processJsonData",value:function(){throw new Error("Method not implemented by demo application.");}},{key:"handlePolicyRejection",value:function(n,t,i,r,u,f){return st.promisePolicyRejectionInput(n,t,i,r,u,f)}},{key:"handlePolicyRedirect",value:function(n,t,i,r){return h.log("Policy redirection requested. redirecting to policy: [".concat(t,"] with additionalParameters: [").concat(r,"]")),Promise.resolve(com.ts.mobile.sdk.RedirectInput.create(com.ts.mobile.sdk.RedirectResponseType.RedirectToPolicy))}},{key:"shouldIncludeDisabledAuthenticatorsInMenu",value:function(){return!1}},{key:"createScanQrSession",value:function(){throw new Error("Method not implemented.");}},{key:"createFingerprintAuthSession",value:function(){throw new Error("Method not implemented.");}},{key:"createApprovalsSession",value:function(){throw new Error("Method not implemented.");}},{key:"createTotpGenerationSession",value:function(){throw new Error("Method not implemented.");}},{key:"createDeviceManagementSession",value:function(n){return h.log("Starting device management session"),new ol(n)}},{key:"createNativeFaceAuthSession",value:function(){throw new Error("Method not implemented.");}},{key:"createFaceAuthSession",value:function(){throw new Error("Method not implemented.");}},{key:"createDeviceBiometricsAuthSession",value:function(){throw new Error("Method not implemented.");}},{key:"localAuthenticatorInvalidated",value:function(){throw new Error("Method not implemented.");}},{key:"setLogEnabled",value:function(n){h.setLogEnabled(n)}}],[{key:"presentUI",value:function(n,t){h.presentUI(n,t)}}]),n}();n.XmUIHandler=uv;Object.defineProperty(n,"__esModule",{value:!0})});demoOptionTagList='<option value="iA">Demo question A?<\/option>  <option value="iB">Demo question B?<\/option> <option value="iC">Demo question C?<\/option>';var authFailed="authentication resulted in failure",invalidPassword="Oops! Either the Online ID or Password you entered is invalid. Please try again.",invalidCurrentPassword="password you entered is incorrect",passwordPattern=/^(?=[A-Za-z0-9-.`,#@:?!()$/']+$)(?=.*\d)(?=.*\W+)(?=.*[a-z])(?=.*[A-Z]).{8,32}$/,errorBlockCNP="'Confirmation password' is not in correct format.",errorBlockNP="'New password' is not in correct format.",emptyErrorBlockCNP="Oops! You must confirm your New password to continue.",emptyErrorBlockNP="Oops! You must enter a New password to continue.",emptyErrorBlockCUP="Oops! You must enter a password to continue.",errorBlockConfirmPassword="Oops! The password you've entered does not match. Please try again.",errorSameNewPassword="Oops! Your New password cannot be the same as your Current password.",maxCharacterPassword="Oops! Please enter a password containing between 8-32 characters.",answerPattern=/^[a-zA-Z0-9]{1}[a-zA-Z0-9 ]*[a-zA-Z0-9]{1}$/,notSelectedQuestionErrMSG="Please select a question.",duplicateQuestionSelectedErrMSG="A question can only be selected once. <br/> Please select another question from the list to answer.",errorBlockDDL="Online ID cannot be used as an answer.",errorEmptySecurityAnswer="Please provide an answer to the security question you have selected.",errorA1Unique="Your answer to the first question must not be the same as an answer provided in another security question.",errorA2Unique="Your answer to the second question must not be the same as an answer provided in another security question.",errorA3Unique="Your answer to the third question must not be the same as an answer provided in another security question.",errorBlock="The Answer and Verify Answer must match.",errorEmptyVerifyAnswer="Please repeat the answer to the security question you have selected.",pageLevelError="Oops! Please correct the highlighted field(s) below.",patternError="Answers can only contain letters, numbers, or spaces, but may not begin or end with a space. Answers must be a minimum of two characters.",errorEmptyChallengeAnswer="Please provide your answer to continue.",tryAgain="try again",notSelected="0",pageLevelMessageDisplayed=!1,RegUIHandler=function(n){function t(){_classCallCheck(this,t);return i.call(this)}_inherits(t,n);var i=_createSuper(t);return _createClass(t,[{key:"createPasswordAuthSession",value:function(n,t){return new PasswordAuthenticatorSession(n,t)}},{key:"controlOptionForCancellationRequestInSession",value:function(){return new Promise(function(n){var t=window.com.ts.mobile.sdk.ControlRequest.create(window.com.ts.mobile.sdk.ControlRequestType.AbortAuthentication);n(t)})}}]),_createClass(t,[{key:"createFormSession",value:function(n,t){return new FormSession(n,t)}}]),_createClass(t,[{key:"startActivityIndicator",value:function(){this.uiContainer=document.getElementById("transmitContainer");this.uiContainer.innerHTML=progressBarForm();document.querySelector(".xmui-busy-overlay").focus()}}]),_createClass(t,[{key:"endActivityIndicator",value:function(){}}]),t}(window.xmui.XmUIHandler),PasswordAuthenticatorSession=function(){function n(t,i){_classCallCheck(this,n);this.title=t;this.username=i;this.uiContainer=document.getElementById("transmitContainer")}return _createClass(n,[{key:"startSession",value:function(n,t,i,r){this.clientContext=r;this.description=n;sessionMonitor({sessionLifetime:parseInt(document.querySelector(".modal").getAttribute("data-sessionTimeout"))*1e3,timeBeforeWarning:parseInt(document.querySelector(".modal").getAttribute("data-sessionWarningTimeout"))*1e3})}},{key:"endSession",value:function(){}},{key:"promiseInput",value:function(){var n="Please enter your password for "+this.username+" to login.";$(this.uiContainer).html(passwordAuthenticator());document.getElementById("online-id").innerText=n;document.getElementById("input_password").focus();handlePasswordKeyEvents();pageLevelMessageDisplayed?document.getElementById("input_password").setAttribute("aria-labelledby","page-level-message online-id"):AdobeAnalytics("REGIONS.tracking.olb","olb","signin","olb|signin|password");let t=document.getElementById("submit-password-button"),i=document.getElementById("cancel-password-button");return new Promise(function(n){t.addEventListener("click",function(t){t.preventDefault();clearPagelevelError();let i=document.getElementById("input_password"),r=i.value;const u=window.com.ts.mobile.sdk.PasswordInput.create(r);if(r==="")return i.focus(),addCustomValidationError(document.getElementById("divPassword"),document.getElementById("input_password-error"),document.getElementById("error-custom-block"),"Password is required to log in."),i.setAttribute("aria-invalid","true"),i.setAttribute("aria-describedby","input_password-error"),!1;i.setAttribute("aria-invalid","false");i.removeAttribute("aria-describedby");clearUIContainer();n(window.com.ts.mobile.sdk.InputOrControlResponse.createInputResponse(u))});i.addEventListener("click",function(){let t=window.com.ts.mobile.sdk.ControlRequest.create(window.com.ts.mobile.sdk.ControlRequestType.CancelAuthenticator);clearPagelevelError();clearUIContainer();n(window.com.ts.mobile.sdk.InputOrControlResponse.createControlResponse(t))});document.getElementById("input_password").addEventListener("blur",function(){document.getElementById("input_password-error").classList.contains("hidden")?(document.getElementById("input_password").setAttribute("aria-invalid","false"),document.getElementById("input_password").removeAttribute("aria-describedby")):(document.getElementById("divPassword").classList.add("error"),document.getElementById("input_password").setAttribute("aria-invalid","true"),document.getElementById("input_password").setAttribute("aria-describedby","input_password-error"))});ShowHideFieldContent("input_password","showHidePasswordBtn","Password")})}},{key:"promiseRecoveryForError",value:function(n,t,i){return n!=null&&n!=undefined&&n._errorCode!=null&&n._errorCode==0?(i=window.com.ts.mobile.sdk.AuthenticationErrorRecovery.Fail,new Promise(function(n){n(i)})):(i=window.com.ts.mobile.sdk.AuthenticationErrorRecovery.RetryAuthenticator,new Promise(function(t){let r=document.getElementById("input_password");r!=null&&(r.value="",r.focus(),r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby","input_password-error"));n!=null&&n!=undefined&&n._message!=null&&n._message!=undefined&&n._message!=""&&n._message.toLowerCase().indexOf(authFailed)>=0&&displayPagelevelError(invalidPassword);t(i)}))}},{key:"promiseCancelAction",value:function(){const n=window.com.ts.mobile.sdk.ControlRequest.create(window.com.ts.mobile.sdk.ControlRequestType.CancelAuthenticator),t=window.com.ts.mobile.sdk.InputOrControlResponse.createControlResponse(n);return Promise.resolve(t)}}]),n}(),FormSession=function(){function n(t,i){_classCallCheck(this,n);this.formId=t;this.payload=i}return _createClass(n,[{key:"startSession",value:function(n,t){this.actionContext=t;this.clientContext=n;$("#password-header").hide();$("#password-forgot-url-link").hide()}},{key:"promiseFormInput",value:function(){return this.renderForm()}},{key:"renderForm",value:function(){var n=this;return(document.querySelector("#xmui-main-container")!=null&&(document.querySelector("#xmui-main-container").style.display="none"),this.formId=="pwdChange")?new Promise(function(t){AlignCenter();$("#transmitContainer").html(pwdChange());var i=!1;n.payload!=null&&n.payload!=undefined&&n.payload.message!=null&&n.payload.message!=undefined&&n.payload.message!=""?n.payload.message.toLowerCase().indexOf(invalidCurrentPassword>0)?(addCustomValidationError(document.getElementById("divCurrentPassword"),document.getElementById("current-password-error"),document.getElementById("error-currentPassword"),n.payload.message),document.getElementById("currentPassword").setAttribute("aria-invalid","true"),document.getElementById("currentPassword").setAttribute("aria-describedby","current-password-error"),document.getElementById("currentPassword").focus(),i=!0):displayPagelevelError(n.payload.message):(clearPagelevelError(),document.getElementById("currentPassword").setAttribute("aria-invalid","false"),document.getElementById("currentPassword").removeAttribute("aria-describedby"),AdobeAnalytics("REGIONS.tracking.olb","olb","signin","olb|signin|change password"));i||setTimeout(function(){document.querySelector(".page-heading").focus()},500);handleChangePasswordKeyEvents();document.getElementById("currentPassword").addEventListener("blur",function(){document.getElementById("current-password-error").classList.contains("hidden")?(document.getElementById("currentPassword").setAttribute("aria-invalid","false"),document.getElementById("currentPassword").removeAttribute("aria-describedby")):(document.getElementById("divCurrentPassword").classList.add("error"),document.getElementById("currentPassword").setAttribute("aria-invalid","true"),document.getElementById("currentPassword").setAttribute("aria-describedby","current-password-error"))});document.getElementById("newPassword").addEventListener("blur",function(){document.getElementById("new-password-error").classList.contains("hidden")?(document.getElementById("newPassword").setAttribute("aria-invalid","false"),document.getElementById("newPassword").removeAttribute("aria-describedby")):(document.getElementById("divNewPassword").classList.add("error"),document.getElementById("newPassword").setAttribute("aria-invalid","true"),document.getElementById("newPassword").setAttribute("aria-describedby","new-password-error"))});document.getElementById("confirmPassword").addEventListener("blur",function(){document.getElementById("confirm-password-error").classList.contains("hidden")?(document.getElementById("confirmPassword").setAttribute("aria-invalid","false"),document.getElementById("confirmPassword").removeAttribute("aria-describedby")):(document.getElementById("divConfirmPassword").classList.add("error"),document.getElementById("confirmPassword").setAttribute("aria-invalid","true"),document.getElementById("confirmPassword").setAttribute("aria-describedby","confirm-password-error"))});document.getElementById("submit-change-password-button").addEventListener("click",function(n){var i;n.preventDefault();var r=validateCurrentPassword(),u=validateNewPassword(),f=validateConfirmPassword();if(!r||!u||!f)return document.querySelectorAll("[aria-invalid=true]")[0].focus(),!1;i=window.com.ts.mobile.sdk.FormInput.createFormInputSubmissionRequest({oldPassword:document.getElementById("currentPassword").value,password:document.getElementById("newPassword").value,confirmpassword:document.getElementById("confirmPassword").value});clearUIContainer();t(i)});document.getElementById("cancel-change-password-button").addEventListener("click",function(){var n=window.com.ts.mobile.sdk.FormInput.createFormInputSubmissionRequest({cancelled:!0});clearUIContainer();t(n)})}):this.formId=="getQuestions"?new Promise(function(t){AlignCenter();var i='<option value = "0">Please select a question<\/option>';n.payload.questions.map(function(n){i=i.concat("<option value = '",n.Id,"'>",n.Text,"<\/option>")});$("#transmitContainer").html(getQuestions({selectOptions:i}));n.payload!=null&&n.payload!=undefined&&n.payload.message!=null&&n.payload.message!=undefined&&n.payload.message!=""?displayPagelevelError(n.payload.message):(clearPagelevelError(),AdobeAnalytics("REGIONS.tracking.olb","olb","signin","olb|signin|setup security questions"));setTimeout(function(){document.querySelector(".page-heading").focus()},500);handleGetQuestionKeyEvents();document.getElementById("i1").addEventListener("change",function(){onSecurityQuestionChange("1")});document.getElementById("i2").addEventListener("change",function(){onSecurityQuestionChange("2")});document.getElementById("i3").addEventListener("change",function(){onSecurityQuestionChange("3")});document.getElementById("i1").addEventListener("blur",function(){document.getElementById("q1-error").classList.contains("hidden")?(document.getElementById("i1").setAttribute("aria-invalid","false"),document.getElementById("i1").removeAttribute("aria-describedby")):(document.getElementById("ques1").classList.add("error"),document.getElementById("i1").setAttribute("aria-invalid","true"),document.getElementById("i1").setAttribute("aria-describedby","q1-error"))});document.getElementById("i2").addEventListener("blur",function(){document.getElementById("q2-error").classList.contains("hidden")?(document.getElementById("i2").setAttribute("aria-invalid","false"),document.getElementById("i2").removeAttribute("aria-describedby")):(document.getElementById("ques2").classList.add("error"),document.getElementById("i2").setAttribute("aria-invalid","true"),document.getElementById("i2").setAttribute("aria-describedby","q2-error"))});document.getElementById("i3").addEventListener("blur",function(){document.getElementById("q3-error").classList.contains("hidden")?(document.getElementById("i3").setAttribute("aria-invalid","false"),document.getElementById("i3").removeAttribute("aria-describedby")):(document.getElementById("ques3").classList.add("error"),document.getElementById("i3").setAttribute("aria-invalid","true"),document.getElementById("i3").setAttribute("aria-describedby","q3-error"))});document.getElementById("a1").addEventListener("blur",function(){document.getElementById("a1-error").classList.contains("hidden")?(document.getElementById("a1").setAttribute("aria-invalid","false"),document.getElementById("a1").removeAttribute("aria-describedby")):(document.getElementById("q-ans1").classList.add("error"),document.getElementById("a1").setAttribute("aria-invalid","true"),document.getElementById("a1").setAttribute("aria-describedby","a1-error"))});document.getElementById("a2").addEventListener("blur",function(){document.getElementById("a2-error").classList.contains("hidden")?(document.getElementById("a2").setAttribute("aria-invalid","false"),document.getElementById("a2").removeAttribute("aria-describedby")):(document.getElementById("q-ans2").classList.add("error"),document.getElementById("a2").setAttribute("aria-invalid","true"),document.getElementById("a2").setAttribute("aria-describedby","a2-error"))});document.getElementById("a3").addEventListener("blur",function(){document.getElementById("a3-error").classList.contains("hidden")?(document.getElementById("a3").setAttribute("aria-invalid","false"),document.getElementById("a3").removeAttribute("aria-describedby")):(document.getElementById("q-ans3").classList.add("error"),document.getElementById("a3").setAttribute("aria-invalid","true"),document.getElementById("a3").setAttribute("aria-describedby","a3-error"))});document.getElementById("va1").addEventListener("blur",function(){document.getElementById("va1-error").classList.contains("hidden")?(document.getElementById("va1").setAttribute("aria-invalid","false"),document.getElementById("va1").removeAttribute("aria-describedby")):(document.getElementById("q-v-ans1").classList.add("error"),document.getElementById("va1").setAttribute("aria-invalid","true"),document.getElementById("va1").setAttribute("aria-describedby","va1-error"))});document.getElementById("va2").addEventListener("blur",function(){document.getElementById("va2-error").classList.contains("hidden")?(document.getElementById("va2").setAttribute("aria-invalid","false"),document.getElementById("va2").removeAttribute("aria-describedby")):(document.getElementById("q-v-ans2").classList.add("error"),document.getElementById("va2").setAttribute("aria-invalid","true"),document.getElementById("va2").setAttribute("aria-describedby","va2-error"))});document.getElementById("va3").addEventListener("blur",function(){document.getElementById("va3-error").classList.contains("hidden")?(document.getElementById("va3").setAttribute("aria-invalid","false"),document.getElementById("va3").removeAttribute("aria-describedby")):(document.getElementById("q-v-ans3").classList.add("error"),document.getElementById("va3").setAttribute("aria-invalid","true"),document.getElementById("va3").setAttribute("aria-describedby","va3-error"))});document.getElementById("submit-setup-question-button").addEventListener("click",function(n){var r;n.preventDefault();clearPagelevelError();var u=validateQuestion1(),f=validateQuestion2(),e=validateQuestion3(),o=validateAnswer1(),s=validateAnswer2(),h=validateAnswer3(),c=validateVerifyAnswer1(),l=validateVerifyAnswer2(),a=validateVerifyAnswer3();if(!u||!f||!e||!o||!s||!h||!c||!l||!a)return displayPagelevelError(pageLevelError),document.getElementById("page-level-error-box")!=null&&document.getElementById("page-level-error-box"),document.querySelectorAll("[aria-invalid=true]")[0].focus(),!1;let i={};i.i1=document.querySelector("#i1").value;i.q1=document.querySelector("#i1").options[document.querySelector("#i1").selectedIndex].text;i.a1=document.querySelector("#a1").value;i.i2=document.querySelector("#i2").value;i.q2=document.querySelector("#i2").options[document.querySelector("#i2").selectedIndex].text;i.a2=document.querySelector("#a2").value;i.i3=document.querySelector("#i3").value;i.q3=document.querySelector("#i3").options[document.querySelector("#i3").selectedIndex].text;i.a3=document.querySelector("#a3").value;r=window.com.ts.mobile.sdk.FormInput.createFormInputSubmissionRequest(i);debugOut("Form Input: "+JSON.stringify(r));clearUIContainer();t(r)});document.getElementById("cancel-setup-questions-button").addEventListener("click",function(){var n=window.com.ts.mobile.sdk.FormInput.createFormInputSubmissionRequest({cancelled:!0});clearUIContainer();t(n)})}):this.formId=="challengeQuestionAuth"?new Promise(function(t){AlignCenter();$("#transmitContainer").html(challengeQuestionAuth());n.payload!=null&&n.payload!=undefined&&n.payload.message!=null&&n.payload.message!=undefined&&n.payload.message!=""?n.payload.message.toLowerCase().indexOf(tryAgain)>0?(addCustomValidationError(document.getElementById("divChallenge"),document.getElementById("challenge-error"),document.getElementById("error-answer"),n.payload.message),document.getElementById("answer").setAttribute("aria-invalid","true"),document.getElementById("answer").setAttribute("aria-describedby","challenge-error")):displayPagelevelError(n.payload.message):(document.getElementById("answer").setAttribute("aria-invalid","false"),document.getElementById("answer").removeAttribute("aria-describedby"),clearCustomValidationError(document.getElementById("divChallenge"),document.getElementById("challenge-error")),clearPagelevelError(),AdobeAnalytics("REGIONS.tracking.olb","olb","signin","olb|signin|challenge question"));document.getElementById("answer").focus();document.getElementById("answer").addEventListener("blur",function(){document.getElementById("challenge-error").classList.contains("hidden")?(document.getElementById("answer").setAttribute("aria-invalid","false"),document.getElementById("answer").removeAttribute("aria-describedby")):(document.getElementById("divChallenge").classList.add("error"),document.getElementById("answer").setAttribute("aria-invalid","true"),document.getElementById("answer").setAttribute("aria-describedby","challenge-error"))});document.querySelector("#spQuestion").innerHTML=n.payload.question;document.querySelector("#answer").focus();n.payload.question.indexOf("passcode")>0&&document.getElementById("answer").setAttribute("maxlength","9");handleChallengeQuestionKeyEvents();ShowHideFieldContent("answer","showHideAnswerBtn","Answer");document.getElementById("challengeQuestionContinueBtn").addEventListener("click",function(n){var i,r;if(n.preventDefault(),i=document.getElementById("answer").value,!validateChallengeAnswer())return document.getElementById("answer").focus(),!1;r=window.com.ts.mobile.sdk.FormInput.createFormInputSubmissionRequest({response:i});clearUIContainer();t(r)});document.getElementById("challengeQuestionCancelBtn").addEventListener("click",function(){var n=window.com.ts.mobile.sdk.FormInput.createFormInputSubmissionRequest({cancelled:!0});clearUIContainer();t(n)})}):this.formId=="lockedOptions"?new Promise(function(t){AlignCenter();$("#transmitContainer").html(lockedOptions());n.payload!=null&&n.payload!=undefined&&n.payload.message!=null&&n.payload.message!=undefined&&n.payload.message!=""?displayPagelevelError(n.payload.message):(clearPagelevelError(),AdobeAnalytics("REGIONS.tracking.olb","olb","signin","olb|signin|locked out"));setTimeout(function(){document.querySelector(".page-heading").focus()},500);document.getElementById("submit-reset-button").addEventListener("click",function(){var n=window.com.ts.mobile.sdk.FormInput.createFormInputSubmissionRequest({response:"Continue"});clearUIContainer();t(n)});document.getElementById("cancel-ia-lockout-button").addEventListener("click",function(){var n=window.com.ts.mobile.sdk.FormInput.createFormInputSubmissionRequest({response:"Cancel"});clearUIContainer();t(n)});document.getElementById("cancel-ia-lockout-button").addEventListener("keydown",function(){event.keyCode==13&&document.getElementById("cancel-ia-lockout-button").click()})}):this.formId=="secQuestionOptions"?new Promise(function(t){AlignCenter();$("#transmitContainer").html(secQuestionOptions());n.payload!=null&&n.payload!=undefined&&n.payload.message!=null&&n.payload.message!=undefined&&n.payload.message!=""?displayPagelevelError(n.payload.message):(clearPagelevelError(),AdobeAnalytics("REGIONS.tracking.olb","olb","signin","olb|signin|setup security questions success"));setTimeout(function(){document.querySelector(".page-heading").focus()},500);document.getElementById("go-to-account-button").addEventListener("click",function(){var n=window.com.ts.mobile.sdk.FormInput.createFormInputSubmissionRequest({response:"Continue"});clearUIContainer();t(n)});document.getElementById("cancel-go-to-account-button").addEventListener("click",function(){var n=window.com.ts.mobile.sdk.FormInput.createFormInputSubmissionRequest({response:"Cancel"});clearUIContainer();t(n)});document.getElementById("cancel-go-to-account-button").addEventListener("keydown",function(){event.keyCode==13&&document.getElementById("cancel-go-to-account-button").click()})}):void 0}},{key:"onContinue",value:function(){}},{key:"onError",value:function(n){alert(JSON.stringify(n))}},{key:"endSession",value:function(){document.querySelector("#transmitContainer").style.display="initial"}}]),n}();var tsConfigSetting={},accountOverViewURL="",tsLevel,verifyIdentityURL="",systemUnavailableURL="/Error/SystemUnavailable",genericErrorURL="Error/GenericError";$(document).ready(function(){var n,t,i;window.sessionStorage.clear();n=$("#UserName").val();t=$("#hdnIsPostRedirection").val().toLowerCase();t!="true"&&$("#enroll-section,#username-section").show();n!=null&&n!=undefined&&n!=""&&t=="true"&&InitiateLoginJourney(n);$("#UserName").focus();i=$(".online-session").val();i.toLowerCase()=="true"&&PageLevelInfo("Oops! Your session has expired. Please log in again.");$("#next-btn").on("click",function(){event.preventDefault();var n=$("#UserName").val().trim();ValidateOnlineID(n)&&($("#page-level-error-box").hide(),$("#page-level-message").html(""),RememberMe(),InitiateLoginJourney(n))});$("#UserName").keyup(function(n){var t=$("#UserName").val();n.keyCode==13?(n.preventDefault(),$("#page-level-error-box").hide(),ValidateOnlineID(t)&&(RememberMe(),InitiateLoginJourney(t))):document.getElementById("UserName-error").classList.contains("hidden")||ValidateOnlineID(t)});$(document).ajaxError(function(n,t,i,r){t.status!=200&&(ErrorLogger(r),window.location.href="/Error/GenericError")})});$("#alert-close").click(function(){$("#page-level-error-box").hide();$("#UserName").attr("aria-labelledby","username-label");$("#input_password").attr("aria-labelledby","online-id")});$("form").keydown(function(n){if(n.keyCode==13)return n.preventDefault(),!1});document.getElementById("login-form").onkeypress=function(n){var t=n.charCode||n.keyCode||0;t==13&&n.preventDefault()};document.getElementById("next-btn").addEventListener("keyup",function(n){n.keyCode==13&&document.getElementById("next-btn").click()});$("#UserName").on("blur",function(){document.getElementById("UserName-error").classList.contains("hidden")||($("#divUserName").addClass("error"),document.getElementById("UserName").setAttribute("aria-invalid","true"))});